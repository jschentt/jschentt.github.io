<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="It&#39;s better to burn out than to fade away.">
<meta property="og:type" content="website">
<meta property="og:title" content="Bruce Chen&#39;s Blog">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="Bruce Chen&#39;s Blog">
<meta property="og:description" content="It&#39;s better to burn out than to fade away.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Bruce Chen">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Bruce Chen's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband">
    <a target="_blank" rel="noopener" href="https://github.com/jschentt" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    </div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Bruce Chen's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">quick notes</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">7</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">83</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/react-native%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/react-native%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">react-nativeå¼€å‘æ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:44:45 / ä¿®æ”¹æ—¶é—´ï¼š14:51:20" itemprop="dateCreated datePublished" datetime="2022-12-16T14:44:45+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AFUI%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯UIæ¡†æ¶</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><ul>
<li><a target="_blank" rel="noopener" href="https://gitee.com/liu12fei08fei/rn_test">é¡¹ç›®æ€»ç»“ä»£ç åœ°å€</a></li>
<li>è®°å½•å¼€å‘ react-native ä¸­å„ç§æœ‰æ„æ€çš„äº‹æƒ…</li>
<li>æœ€æ–°æ¢ç´¢ï¼Œç”¨æ¥è¿›è¡Œå„ç§å°è¯•çš„ç©ºé—´</li>
<li>å®Œæˆçš„æ¢ç´¢ï¼Œè®°å½•æ‰€æœ‰å·²ç»å®Œæˆçš„æ¨¡å—ã€åŠŸèƒ½å’Œæ•ˆæœ</li>
<li>ä¸­è½¬ç«™ï¼Œæš‚æ—¶æ— ç”¨</li>
</ul>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="å…¨å±€è„šæ‰‹æ¶"><a href="#å…¨å±€è„šæ‰‹æ¶" class="headerlink" title="å…¨å±€è„šæ‰‹æ¶"></a>å…¨å±€è„šæ‰‹æ¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g react-native-cli</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…åŸºç¡€é¡¹ç›®"><a href="#å®‰è£…åŸºç¡€é¡¹ç›®" class="headerlink" title="å®‰è£…åŸºç¡€é¡¹ç›®"></a>å®‰è£…åŸºç¡€é¡¹ç›®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">react-native init &lt;é¡¹ç›®åç§°&gt;</span><br></pre></td></tr></table></figure>

<h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><h3 id="ä¼˜åŒ–åçš„è¿è¡Œ"><a href="#ä¼˜åŒ–åçš„è¿è¡Œ" class="headerlink" title="ä¼˜åŒ–åçš„è¿è¡Œ"></a>ä¼˜åŒ–åçš„è¿è¡Œ</h3><ul>
<li>iosï¼šnpm run ios</li>
<li>androidï¼šnpm run android</li>
<li>ios and androidï¼šnpm run s</li>
</ul>
<h3 id="åŸå§‹å¯åŠ¨"><a href="#åŸå§‹å¯åŠ¨" class="headerlink" title="åŸå§‹å¯åŠ¨"></a>åŸå§‹å¯åŠ¨</h3><ul>
<li>iosï¼šreact-native run-ios</li>
<li>androidï¼šreact-native run-android</li>
</ul>
<h2 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/react-navigation/react-navigation">navigation é›†æˆ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/oblador/react-native-vector-icons">é›†æˆ icons</a> -<a target="_blank" rel="noopener" href="https://github.com/crazycodeboy/react-native-easy-toast"> react-native-easy-toast</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/jondot/awesome-react-native">rn èµ„æºåˆ—è¡¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dancormier/react-native-swipeout">æ¨ªå‘æ»‘åŠ¨å±•ç¤ºæŒ‰é’®æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/valerybugakov/react-native-custom-actionsheet">è‡ªå®šä¹‰è¡ŒåŠ¨åˆ—è¡¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/danchokobo/react-native-code-verification">å¯†ç è¾“å…¥æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/skv-headless/react-native-scrollable-tab-view">é€‰é¡¹å¡å¯¼èˆªä¹‹é—´æ»‘åŠ¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cssivision/react-native-qrcode">äºŒç»´ç ç”Ÿæˆ</a></li>
</ul>
<h2 id="æœªæ¢ç´¢çš„èµ„æº"><a href="#æœªæ¢ç´¢çš„èµ„æº" class="headerlink" title="æœªæ¢ç´¢çš„èµ„æº"></a>æœªæ¢ç´¢çš„èµ„æº</h2><blockquote>
<p>365 ä¸ªåº“ä¸­å¯»æ‰¾ 77 ä¸ª</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/beefe/react-native-picker">select é€‰æ‹©æ§ä»¶</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/App2Sales/react-native-switch-selector">å¼€å…³å¼é€‰æ‹©åˆ—è¡¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/yonahforst/react-native-emoji-picker">è¡¨æƒ…é€‰æ‹©å™¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Tinysymphony/react-native-drawer-menu">å·¦å³æ»‘åŠ¨å±‚</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Spikef/react-native-phone-picker">æ‰‹æœºå·é€‰æ‹©æ§ä»¶</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/zecaptus/react-native-md-motion-buttons">ç™»å½•åŠ¨ç”»</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/merryjs/photo-viewer">å›¾ç‰‡æŸ¥çœ‹å™¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/SoftZen/react-native-bouncy-drawer">èœå•æ“ä½œåŠ¨ç”»</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/charlot567/react-native-comparison-slider">æ»‘åŠ¨æ“ä½œå›¾ç‰‡å±•ç¤ºæ ·å¼</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/moschan/react-native-newsticker">æ“ä½œæ‰“å­—æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/prscX/react-native-siri-wave-view">å£°éŸ³å¯è§†åŒ–</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/mfrachet/rn-placeholder">å ä½ç¬¦</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/oblador/react-native-lightbox">å›¾ç‰‡æŸ¥çœ‹å™¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/react-native-community/react-native-blur">æ¨¡ç³ŠèƒŒæ™¯æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ivpusic/react-native-image-crop-picker">æœ¬åœ°å›¾ç‰‡è¶…çº§æ“ä½œ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/meteor-factory/react-native-tinder-swipe-cards">å››é¢å…«æ–¹æ‹–åŠ¨æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/sbycrosz/react-native-credit-card-input">ä¿¡ç”¨å¡è¾“å…¥æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/jmurzy/react-native-foldview">å±•å¼€åŠ¨ç”»æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/tomauty/react-native-chart">chart</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/crazycodeboy/react-native-splash-screen">åˆå§‹åŒ–å¯åŠ¨é¡µ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/wix/react-native-calendars">æ—¥æœŸ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/archriss/react-native-snap-carousel">å·¦å³æ»‘åŠ¨æ“ä½œå¡ç‰‡æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/gitim/react-native-sortable-list">åˆ—è¡¨æ‹–æ‹½</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/JesperLekland/react-native-svg-charts">chart</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/spikef/react-native-gesture-password">å¯†ç é”æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/djchie/react-native-star-rating">æ˜Ÿçº§è¯„ä»·</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/jgrancher/react-native-sketch">æ‰‹åŠ¨ç­¾å­—</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/24ark/react-native-step-indicator">æ»‘åŠ¨æ—¶é—´è½´æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/xcarpentier/react-native-country-picker-modal">å›½å®¶ 26 å­—æ¯é€‰æ‹©</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cnjon/react-native-pdf-view">PDF æŸ¥çœ‹</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/i6mi6/react-native-alphabetlistview">26 å­—æ¯é€‰æ‹©</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/naoufal/react-native-activity-view">åˆ†äº«</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/jeanregisser/react-native-popover">å¯¹è¯æ¡†</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/taskrabbit/react-native-parsed-text">ç”µè¯ã€åœ°å€ç­‰æ“ä½œ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kayla-tech/react-native-privacy-snapshot">åå°ä¿¡æ¯ä¿æŠ¤</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/anvilabs/react-native-image-carousel">å›¾ç‰‡æŸ¥çœ‹å™¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chitezh/react-native-swiper-animated">å·¦å³æ»‘åŠ¨åŠ¨ç”»</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/rauchy/react-native-offline-mode">æ— ç½‘ç»œæ“ä½œ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/instea/react-native-color-picker">é¢œè‰²é€‰æ‹©å™¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/wix/react-native-custom-segmented-control">å·¦å³æ»‘åŠ¨ tab åŠ¨æ•ˆ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/mastermoo/react-native-pulse-loader">åŠ è½½ä¸­æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/machadogj/react-native-carousel-control">å·¦å³æ»‘åŠ¨æ•ˆæœï¼Œç±»ä¼¼é…·åˆ’é”å±</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/awesomejerry/react-native-qrcode-svg">äºŒç»´ç ç”Ÿæˆå™¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/zachgibson/react-native-parallax-swiper">å›¾ç‰‡æŸ¥çœ‹å™¨</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bamlab/react-native-image-header-scroll-view">è§†å·®æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Tinysymphony/react-native-calendar-select">æ—¥æœŸ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/prscX/react-native-shine-button">ç‚¹å‡»æ•ˆæœ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/geremih/react-native-circular-action-menu">æ‰‡å½¢èœå•</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/johanneslumpe/react-native-gesture-recognizers/">æ‰‹åŠ¿è¯†åˆ«</a></li>
</ul>
<h2 id="æ–°å¢é¡µé¢éœ€è¦åœ¨ä¸‰ä¸ªåœ°æ–¹è¿›è¡Œæ“ä½œ"><a href="#æ–°å¢é¡µé¢éœ€è¦åœ¨ä¸‰ä¸ªåœ°æ–¹è¿›è¡Œæ“ä½œ" class="headerlink" title="æ–°å¢é¡µé¢éœ€è¦åœ¨ä¸‰ä¸ªåœ°æ–¹è¿›è¡Œæ“ä½œ"></a>æ–°å¢é¡µé¢éœ€è¦åœ¨ä¸‰ä¸ªåœ°æ–¹è¿›è¡Œæ“ä½œ</h2><ol>
<li>data é‡Œé¢çš„ complete.js ä¸­æ·»åŠ æ•°æ®ï¼Œæ–¹ä¾¿åœ¨å®Œæˆçš„æ¢ç´¢ä¸­å‡ºç°</li>
<li>navigators ä¸­çš„ AppStackNavigators.js é‡Œé¢è¿›è¡Œå¼•å…¥&#x3D;&gt;æ³¨å†Œï¼Œä½¿å¾—è·¯ç”±æ­£å¸¸</li>
<li>pages é‡Œé¢æ·»åŠ é¡µé¢</li>
</ol>
<h2 id="ä¼˜åŒ–-package-json-ä½¿å¼€å‘æ›´åŠ æ–¹ä¾¿"><a href="#ä¼˜åŒ–-package-json-ä½¿å¼€å‘æ›´åŠ æ–¹ä¾¿" class="headerlink" title="ä¼˜åŒ– package.json ä½¿å¼€å‘æ›´åŠ æ–¹ä¾¿"></a>ä¼˜åŒ– package.json ä½¿å¼€å‘æ›´åŠ æ–¹ä¾¿</h2><ul>
<li>åœ¨ scripts ä¸­æ·»åŠ ï¼Œå¦‚ä¸‹å†…å®¹ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;ios&quot;:&quot;react-native run-ios&quot;,</span><br><span class="line">&quot;android&quot;:&quot;react-native run-android&quot;,</span><br><span class="line">&quot;s&quot;:&quot;npm run ios &amp;&amp; npm run android&quot;,</span><br></pre></td></tr></table></figure>

<h2 id="flex-å¸ƒå±€å¸¸ç”¨å±æ€§"><a href="#flex-å¸ƒå±€å¸¸ç”¨å±æ€§" class="headerlink" title="flex å¸ƒå±€å¸¸ç”¨å±æ€§"></a>flex å¸ƒå±€å¸¸ç”¨å±æ€§</h2><ul>
<li>é˜²æ­¢åœ¨ flex ä¸­å‡ºç°ï¼Œå›ºå®šå…ƒç´ è¢«æŒ¤å‹çš„é—®é¢˜ï¼Œä½¿ç”¨ flex:1 è¿›è¡Œä¼˜åŒ–</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">display: &#x27;flex&#x27;;</span><br><span class="line">flexDirection: row | row-reverse | column | column-reverse;</span><br><span class="line">flexWrap: nowrap | wrap | wrap-reverse;</span><br><span class="line">flexFlow: &lt;flex-direction&gt; | &lt;flex-wrap&gt;;</span><br><span class="line">justifyContent: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">alignItems: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">alignContent: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line"></span><br><span class="line">order: &lt;integer&gt;;</span><br><span class="line">flexGrow: &lt;number&gt;; /* default 0 */</span><br><span class="line">flexShrink: &lt;number&gt;; /* default 1 */</span><br><span class="line">flexBasis: &lt;length&gt; | auto; /* default auto */</span><br><span class="line">flex: none | [ &lt;&#x27;flex-grow&#x27;&gt; &lt;&#x27;flex-shrink&#x27;&gt;? || &lt;&#x27;flex-basis&#x27;&gt; ]</span><br><span class="line">alignSelf: auto | flex-start | flex-end | center | baseline | stretch;</span><br></pre></td></tr></table></figure>

<h2 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h2><h3 id="å›¾ç‰‡ä½¿ç”¨"><a href="#å›¾ç‰‡ä½¿ç”¨" class="headerlink" title="å›¾ç‰‡ä½¿ç”¨"></a>å›¾ç‰‡ä½¿ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Image source=&#123;require(&#x27;./my-icon.png&#x27;)&#125; /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="å‘½åè§„åˆ™"><a href="#å‘½åè§„åˆ™" class="headerlink" title="å‘½åè§„åˆ™"></a>å‘½åè§„åˆ™</h3><ul>
<li>icon_test.png</li>
<li><a href="mailto:&#x69;&#99;&#111;&#110;&#95;&#x74;&#x65;&#115;&#x74;&#64;&#x32;&#x78;&#x2e;&#x70;&#x6e;&#x67;">&#x69;&#99;&#111;&#110;&#95;&#x74;&#x65;&#115;&#x74;&#64;&#x32;&#x78;&#x2e;&#x70;&#x6e;&#x67;</a></li>
<li><a href="mailto:&#x69;&#99;&#x6f;&#110;&#95;&#116;&#101;&#115;&#x74;&#x40;&#51;&#x78;&#46;&#112;&#x6e;&#103;">&#x69;&#99;&#x6f;&#110;&#95;&#116;&#101;&#115;&#x74;&#x40;&#51;&#x78;&#46;&#112;&#x6e;&#103;</a></li>
</ul>
<h2 id="é“¾æ¥åŸç”Ÿåº“"><a href="#é“¾æ¥åŸç”Ÿåº“" class="headerlink" title="é“¾æ¥åŸç”Ÿåº“"></a>é“¾æ¥åŸç”Ÿåº“</h2><p><strong>ç¬¬ä¸€æ­¥</strong></p>
<blockquote>
<p>å®‰è£…å¸¦åŸç”Ÿä¾èµ–çš„åº“</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install &lt;æŸä¸ªå¸¦æœ‰åŸç”Ÿä¾èµ–çš„åº“&gt; --save</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬äºŒæ­¥</strong></p>
<blockquote>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®ƒä¼šæ ¹æ® package.json æ–‡ä»¶ä¸­çš„ dependencies å’Œ devDependencies è®°å½•æ¥é“¾æ¥æ‰€æœ‰éœ€è¦é“¾æ¥çš„åº“</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">react-native link</span><br></pre></td></tr></table></figure>

<h2 id="å¼€å‘æŠ€å·§"><a href="#å¼€å‘æŠ€å·§" class="headerlink" title="å¼€å‘æŠ€å·§"></a>å¼€å‘æŠ€å·§</h2><ul>
<li>å¯åŠ¨ hot æˆ–è€… debug çš„æ—¶å€™ï¼Œåˆ‡è®°ä¸è¦åŒæ—¶å¯åŠ¨ ios and androidï¼Œä¸¤è€…ä¼šå‘ç”Ÿå†²çªï¼Œå¯¼è‡´å‡ºç°ç¨‹åºå´©æºƒï¼Œä»è€Œå½±å“å¼€å‘</li>
<li>æœ€å¥½çš„æ–¹å¼æ˜¯ï¼Œå¯åŠ¨ä¸€ä¸ª hot æˆ– debugï¼Œè¿™æ ·å¯ä»¥è‰¯å¥½çš„è¿›è¡Œå¼€å‘ï¼›å¦ä¸€ä¸ªæ‰‹åŠ¨è¶³å¤Ÿäº†</li>
</ul>
<h2 id="å¤„ç†è§¦æ‘¸äº‹ä»¶"><a href="#å¤„ç†è§¦æ‘¸äº‹ä»¶" class="headerlink" title="å¤„ç†è§¦æ‘¸äº‹ä»¶"></a>å¤„ç†è§¦æ‘¸äº‹ä»¶</h2><blockquote>
<p>ä½¿ç”¨â€Touchableâ€å¼€å¤´çš„ä¸€ç³»åˆ—ç»„ä»¶<br>é€šè¿‡ onPress å±æ€§æ¥å—ä¸€ä¸ªç‚¹å‡»äº‹ä»¶çš„å¤„ç†å‡½æ•°</p>
</blockquote>
<ul>
<li>ä¸¤ç§æ–¹å¼ç»‘å®šäº‹ä»¶ï¼Œå¹¶å¤„ç†ç‚¹å‡»èŒƒå›´</li>
<li>æ¨èç¬¬äºŒç§ï¼Œæ–¹ä¾¿ä¼ é€’æ•°æ®</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">_onPressButton=((item)=&gt;&#123;</span><br><span class="line">  alert(1)</span><br><span class="line">  console.log(item);</span><br><span class="line">&#125;)</span><br><span class="line">render() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;View&gt;</span><br><span class="line">      &lt;TouchableHighlight onPress=&#123;this._onPressButton&#125;&gt;</span><br><span class="line">        &lt;View style=&#123;[S.btn,&#123;backgroundColor:`$&#123;this.state.bg&#125;`&#125;]&#125;&gt;</span><br><span class="line">          &lt;Text style=&#123;S.btnText&#125;&gt;&#123;this.state.bg&#125;&lt;/Text&gt;</span><br><span class="line">        &lt;/View&gt;</span><br><span class="line">      &lt;/TouchableHighlight&gt;</span><br><span class="line">      &lt;TouchableHighlight onPress=&#123;()=&gt;&#123;</span><br><span class="line">        this._onPressButton(this.state.bg)</span><br><span class="line">      &#125;&#125;&gt;</span><br><span class="line">        &lt;View style=&#123;[S.btn,&#123;backgroundColor:`$&#123;this.state.bg&#125;`&#125;]&#125;&gt;</span><br><span class="line">          &lt;Text style=&#123;S.btnText&#125;&gt;&#123;this.state.bg&#125;&lt;/Text&gt;</span><br><span class="line">        &lt;/View&gt;</span><br><span class="line">      &lt;/TouchableHighlight&gt;</span><br><span class="line">    &lt;/View&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è§£å†³ç‰ˆæœ¬å†²çªé—®é¢˜"><a href="#è§£å†³ç‰ˆæœ¬å†²çªé—®é¢˜" class="headerlink" title="è§£å†³ç‰ˆæœ¬å†²çªé—®é¢˜"></a>è§£å†³ç‰ˆæœ¬å†²çªé—®é¢˜</h2><p><strong>js ç‰ˆæœ¬å’Œ rn ç‰ˆæœ¬å‡ºç°å†²çª</strong></p>
<ul>
<li>Watchman æ˜¯ç”± Facebook æä¾›çš„ç›‘è§†æ–‡ä»¶ç³»ç»Ÿå˜æ›´çš„å·¥å…·ã€‚å®‰è£…æ­¤å·¥å…·å¯ä»¥æé«˜å¼€å‘æ—¶çš„æ€§èƒ½ï¼ˆpackager å¯ä»¥å¿«é€Ÿæ•æ‰æ–‡ä»¶çš„å˜åŒ–ä»è€Œå®ç°å®æ—¶åˆ·æ–°ï¼‰ã€‚</li>
<li>æ¸…é™¤ Watchmanï¼šwatchman watch-del-all</li>
<li>æ¸…é™¤ rn ç¼“å­˜ï¼šreact-native start â€“reset-cache</li>
</ul>
<h2 id="è§£å†³è·¯ç”±å¤±æ•ˆé—®é¢˜"><a href="#è§£å†³è·¯ç”±å¤±æ•ˆé—®é¢˜" class="headerlink" title="è§£å†³è·¯ç”±å¤±æ•ˆé—®é¢˜"></a>è§£å†³è·¯ç”±å¤±æ•ˆé—®é¢˜</h2><ul>
<li><p>createTabNavigator è¦åœ¨ createStackNavigator é‡Œé¢è¿›è¡Œæ³¨å†Œï¼Œæ‰èƒ½å¤Ÿä½¿ç”¨ createStackNavigator å…·æœ‰çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ˜¯æˆ‘ç¬¬äºŒæ¬¡é…ç½®çš„æ—¶å€™æ‰è¿›çš„ä¸€ä¸ªå‘<br><strong>this.props.navigation å±æ€§è¯¦ç»†è¯´æ˜</strong></p>
</li>
<li><p>åœ¨ createTabNavigator é‡Œé¢æ²¡æœ‰ pushã€replace ç­‰æ–¹æ³•</p>
</li>
<li><p>åœ¨ createStackNavigator ä¸­å­˜åœ¨ pushã€replace ç­‰æ–¹æ³•</p>
</li>
</ul>
<h2 id="AsyncStorage-ä¿å­˜æŠ¥é”™"><a href="#AsyncStorage-ä¿å­˜æŠ¥é”™" class="headerlink" title="AsyncStorage ä¿å­˜æŠ¥é”™"></a>AsyncStorage ä¿å­˜æŠ¥é”™</h2><blockquote>
<p>JSON value â€˜<null>â€˜ of type NSNull</p>
</blockquote>
<ul>
<li>å½“ä¿å­˜å€¼ä¸º undefined çš„æ—¶å€™ï¼ŒæŠ¥é”™</li>
<li>é˜²æ­¢è¿™ç§é—®é¢˜å‘ç”Ÿæœ€å¥½åœ¨ this.state ä¸­ä¿å­˜åˆå§‹å€¼ä¸ºç©ºï¼Œå¿…è¦æ—¶å¯ä»¥æé†’ç”¨æˆ·</li>
</ul>
<h2 id="react-native-æ”¯æŒçš„-style-props"><a href="#react-native-æ”¯æŒçš„-style-props" class="headerlink" title="react-native æ”¯æŒçš„ style props"></a>react-native æ”¯æŒçš„ style props</h2><ul>
<li>æŸ¥çœ‹æœ€æ–°ç‰ˆå±æ€§æ”¯æŒæƒ…å†µï¼Œæœ€ç®€å•çš„ç›´æ¥åœ¨é¡µé¢ä½¿ç”¨é”™è¯¯çš„å±æ€§ï¼Œç„¶åæŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ ğŸ˜‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">Valid style props: [</span><br><span class="line">  &quot;alignContent&quot;,</span><br><span class="line">  &quot;alignItems&quot;,</span><br><span class="line">  &quot;alignSelf&quot;,</span><br><span class="line">  &quot;aspectRatio&quot;,</span><br><span class="line">  &quot;backfaceVisibility&quot;,</span><br><span class="line">  &quot;backgroundColor&quot;,</span><br><span class="line">  &quot;borderBottomColor&quot;,</span><br><span class="line">  &quot;borderBottomEndRadius&quot;,</span><br><span class="line">  &quot;borderBottomLeftRadius&quot;,</span><br><span class="line">  &quot;borderBottomRightRadius&quot;,</span><br><span class="line">  &quot;borderBottomStartRadius&quot;,</span><br><span class="line">  &quot;borderBottomWidth&quot;,</span><br><span class="line">  &quot;borderColor&quot;,</span><br><span class="line">  &quot;borderEndColor&quot;,</span><br><span class="line">  &quot;borderEndWidth&quot;,</span><br><span class="line">  &quot;borderLeftColor&quot;,</span><br><span class="line">  &quot;borderLeftWidth&quot;,</span><br><span class="line">  &quot;borderRadius&quot;,</span><br><span class="line">  &quot;borderRightColor&quot;,</span><br><span class="line">  &quot;borderRightWidth&quot;,</span><br><span class="line">  &quot;borderStartColor&quot;,</span><br><span class="line">  &quot;borderStartWidth&quot;,</span><br><span class="line">  &quot;borderStyle&quot;,</span><br><span class="line">  &quot;borderTopColor&quot;,</span><br><span class="line">  &quot;borderTopEndRadius&quot;,</span><br><span class="line">  &quot;borderTopLeftRadius&quot;,</span><br><span class="line">  &quot;borderTopRightRadius&quot;,</span><br><span class="line">  &quot;borderTopStartRadius&quot;,</span><br><span class="line">  &quot;borderTopWidth&quot;,</span><br><span class="line">  &quot;borderWidth&quot;,</span><br><span class="line">  &quot;bottom&quot;,</span><br><span class="line">  &quot;color&quot;,</span><br><span class="line">  &quot;decomposedMatrix&quot;,</span><br><span class="line">  &quot;direction&quot;,</span><br><span class="line">  &quot;display&quot;,</span><br><span class="line">  &quot;elevation&quot;,</span><br><span class="line">  &quot;end&quot;,</span><br><span class="line">  &quot;flex&quot;,</span><br><span class="line">  &quot;flexBasis&quot;,</span><br><span class="line">  &quot;flexDirection&quot;,</span><br><span class="line">  &quot;flexGrow&quot;,</span><br><span class="line">  &quot;flexShrink&quot;,</span><br><span class="line">  &quot;flexWrap&quot;,</span><br><span class="line">  &quot;fontFamily&quot;,</span><br><span class="line">  &quot;fontSize&quot;,</span><br><span class="line">  &quot;fontStyle&quot;,</span><br><span class="line">  &quot;fontVariant&quot;,</span><br><span class="line">  &quot;fontWeight&quot;,</span><br><span class="line">  &quot;height&quot;,</span><br><span class="line">  &quot;includeFontPadding&quot;,</span><br><span class="line">  &quot;justifyContent&quot;,</span><br><span class="line">  &quot;left&quot;,</span><br><span class="line">  &quot;letterSpacing&quot;,</span><br><span class="line">  &quot;lineHeight&quot;,</span><br><span class="line">  &quot;margin&quot;,</span><br><span class="line">  &quot;marginBottom&quot;,</span><br><span class="line">  &quot;marginEnd&quot;,</span><br><span class="line">  &quot;marginHorizontal&quot;,</span><br><span class="line">  &quot;marginLeft&quot;,</span><br><span class="line">  &quot;marginRight&quot;,</span><br><span class="line">  &quot;marginStart&quot;,</span><br><span class="line">  &quot;marginTop&quot;,</span><br><span class="line">  &quot;marginVertical&quot;,</span><br><span class="line">  &quot;maxHeight&quot;,</span><br><span class="line">  &quot;maxWidth&quot;,</span><br><span class="line">  &quot;minHeight&quot;,</span><br><span class="line">  &quot;minWidth&quot;,</span><br><span class="line">  &quot;opacity&quot;,</span><br><span class="line">  &quot;overflow&quot;,</span><br><span class="line">  &quot;overlayColor&quot;,</span><br><span class="line">  &quot;padding&quot;,</span><br><span class="line">  &quot;paddingBottom&quot;,</span><br><span class="line">  &quot;paddingEnd&quot;,</span><br><span class="line">  &quot;paddingHorizontal&quot;,</span><br><span class="line">  &quot;paddingLeft&quot;,</span><br><span class="line">  &quot;paddingRight&quot;,</span><br><span class="line">  &quot;paddingStart&quot;,</span><br><span class="line">  &quot;paddingTop&quot;,</span><br><span class="line">  &quot;paddingVertical&quot;,</span><br><span class="line">  &quot;position&quot;,</span><br><span class="line">  &quot;resizeMode&quot;,</span><br><span class="line">  &quot;right&quot;,</span><br><span class="line">  &quot;rotation&quot;,</span><br><span class="line">  &quot;scaleX&quot;,</span><br><span class="line">  &quot;scaleY&quot;,</span><br><span class="line">  &quot;shadowColor&quot;,</span><br><span class="line">  &quot;shadowOffset&quot;,</span><br><span class="line">  &quot;shadowOpacity&quot;,</span><br><span class="line">  &quot;shadowRadius&quot;,</span><br><span class="line">  &quot;start&quot;,</span><br><span class="line">  &quot;textAlign&quot;,</span><br><span class="line">  &quot;textAlignVertical&quot;,</span><br><span class="line">  &quot;textDecorationColor&quot;,</span><br><span class="line">  &quot;textDecorationLine&quot;,</span><br><span class="line">  &quot;textDecorationStyle&quot;,</span><br><span class="line">  &quot;textShadowColor&quot;,</span><br><span class="line">  &quot;textShadowOffset&quot;,</span><br><span class="line">  &quot;textShadowRadius&quot;,</span><br><span class="line">  &quot;textTransform&quot;,</span><br><span class="line">  &quot;tintColor&quot;,</span><br><span class="line">  &quot;top&quot;,</span><br><span class="line">  &quot;transform&quot;,</span><br><span class="line">  &quot;transformMatrix&quot;,</span><br><span class="line">  &quot;translateX&quot;,</span><br><span class="line">  &quot;translateY&quot;,</span><br><span class="line">  &quot;width&quot;,</span><br><span class="line">  &quot;writingDirection&quot;,</span><br><span class="line">  &quot;zIndex&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="StatusBar-è§£å†³-android-çŠ¶æ€æ é—®é¢˜"><a href="#StatusBar-è§£å†³-android-çŠ¶æ€æ é—®é¢˜" class="headerlink" title="StatusBar è§£å†³ android çŠ¶æ€æ é—®é¢˜"></a>StatusBar è§£å†³ android çŠ¶æ€æ é—®é¢˜</h2><p>è®¾ç½® StatusBar</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;StatusBar</span><br><span class="line">     backgroundColor=&quot;transparent&quot;</span><br><span class="line">     translucent</span><br><span class="line">   /&gt;</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®é¡¶éƒ¨æ¨¡å—çš„æ ·å¼</p>
<ul>
<li>æ³¨ï¼špadding å€¼éœ€è¦+é«˜åº¦å€¼&#x3D;&gt;height æœ€ç»ˆå€¼</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">height: 50,</span><br><span class="line">paddingTop: 10,</span><br></pre></td></tr></table></figure>

<h2 id="Platform-åŒºåˆ†-ios-and-android-å¹³å°"><a href="#Platform-åŒºåˆ†-ios-and-android-å¹³å°" class="headerlink" title="Platform åŒºåˆ† ios and android å¹³å°"></a>Platform åŒºåˆ† ios and android å¹³å°</h2><blockquote>
<p>ä¸‰ç§æ–¹æ³•å®ç°è·¨å¹³å°ï¼š</p>
</blockquote>
<ol>
<li>Platform.OS</li>
<li>ä½¿ç”¨ Platform çš„ select æ–¹æ³•</li>
<li>ä½¿ç”¨ä¸èƒ½ç»„ä»¶åï¼šios ä½¿ç”¨ header.ios.jsï¼›android ä½¿ç”¨ header.android.js</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const instructions = Platform.select(&#123;</span><br><span class="line">  ios: &#x27;ios&#x27;,</span><br><span class="line">  android: &#x27;android&#x27;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="è¯·æ±‚-fetch-å°è£…"><a href="#è¯·æ±‚-fetch-å°è£…" class="headerlink" title="è¯·æ±‚ fetch å°è£…"></a>è¯·æ±‚ fetch å°è£…</h2><ul>
<li>HttpUtils.js<br><strong>å¼•å…¥</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import HttpUtils from &#x27;../../HttpUtils&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨</strong></p>
<ul>
<li>åœ¨å…¨å±€ global.data.domain ä¿å­˜è¯·æ±‚åŸŸå</li>
<li>è¯·æ±‚éœ€è¦ header ä¼ é€’ token çš„ä½¿ç”¨,global.data.token</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HttpUtils.post(`$&#123;apiConfig&#125;`, &#123;</span><br><span class="line">    platform: &#x27;ios&#x27;</span><br><span class="line">&#125;,global.data.token)</span><br><span class="line">.then(rtn =&gt; &#123;</span><br><span class="line">    global.data.config = rtn;</span><br><span class="line">    // console.log(`é…ç½®=&gt;( $&#123;JSON.stringify(rtn)&#125; )`);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(err =&gt; &#123;</span><br><span class="line">    console.log(&#x27;error&#x27;, err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="è¯·æ±‚ç¯å¢ƒ-è¯·æ±‚åœ°å€å®šä¹‰"><a href="#è¯·æ±‚ç¯å¢ƒ-è¯·æ±‚åœ°å€å®šä¹‰" class="headerlink" title="è¯·æ±‚ç¯å¢ƒ+è¯·æ±‚åœ°å€å®šä¹‰"></a>è¯·æ±‚ç¯å¢ƒ+è¯·æ±‚åœ°å€å®šä¹‰</h2><h3 id="è¯·æ±‚ç¯å¢ƒ"><a href="#è¯·æ±‚ç¯å¢ƒ" class="headerlink" title="è¯·æ±‚ç¯å¢ƒ"></a>è¯·æ±‚ç¯å¢ƒ</h3><ul>
<li>åœ¨ addr.js ä¸­ env å˜é‡å®šä¹‰</li>
</ul>
<h3 id="è¯·æ±‚åœ°å€"><a href="#è¯·æ±‚åœ°å€" class="headerlink" title="è¯·æ±‚åœ°å€"></a>è¯·æ±‚åœ°å€</h3><ul>
<li>åœ¨ addr.js ä¸­ addrList ç»Ÿä¸€ç®¡ç†æ‰€æœ‰è¯·æ±‚åœ°å€</li>
</ul>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import addrList from &#x27;../../addr&#x27;;</span><br><span class="line">const &#123;apiConfig&#125;=addrList;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>react-native-scrollable-tab-view</p>
</blockquote>
<ul>
<li>è§£å†³é€—å·å½±å“çš„æŠ¥é”™é—®é¢˜ï¼šåœ¨è·¯å¾„~&#x2F;node_modules&#x2F;react-native-scrollable-tab-viewSceneComponent.js ä¸‹åˆ é™¤å³å¯</li>
</ul>
<h2 id="react-native-åˆå§‹åŒ–æŠ¥é”™ï¼Œå¯¼è‡´æ— æ³•åˆå§‹åŒ–"><a href="#react-native-åˆå§‹åŒ–æŠ¥é”™ï¼Œå¯¼è‡´æ— æ³•åˆå§‹åŒ–" class="headerlink" title="react-native åˆå§‹åŒ–æŠ¥é”™ï¼Œå¯¼è‡´æ— æ³•åˆå§‹åŒ–"></a>react-native åˆå§‹åŒ–æŠ¥é”™ï¼Œå¯¼è‡´æ— æ³•åˆå§‹åŒ–</h2><ul>
<li>é‡æ–°è®¾ç½®ä¸€ä¸‹åœ°å€</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line">npm config set disturl https://npm.taobao.org/dist</span><br></pre></td></tr></table></figure>

<h2 id="åŠ¨æ€åˆ‡æ¢çŠ¶æ€"><a href="#åŠ¨æ€åˆ‡æ¢çŠ¶æ€" class="headerlink" title="åŠ¨æ€åˆ‡æ¢çŠ¶æ€"></a>åŠ¨æ€åˆ‡æ¢çŠ¶æ€</h2><ul>
<li>é‡‡ç”¨å¯¹è±¡çš„å½¢å¼æ¥æ“ä½œï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨ state é‡Œé¢çš„å‚æ•°ï¼Œæ¥åŠ¨æ€åˆ‡æ¢</li>
<li>è§£å†³äº†ç›´æ¥åº”ç”¨çš„æŠ¥é”™é—®é¢˜ï¼Œä»¥åé‡åˆ°åŒæ ·çš„é—®é¢˜è¦åŠæ—¶æƒ³åˆ°å¯¹è±¡æ–¹å¼</li>
</ul>
<h2 id="å£°æ˜å‘¨æœŸ-åˆå§‹æ¸²æŸ“-and-æ£€æµ‹-goBack"><a href="#å£°æ˜å‘¨æœŸ-åˆå§‹æ¸²æŸ“-and-æ£€æµ‹-goBack" class="headerlink" title="å£°æ˜å‘¨æœŸ-åˆå§‹æ¸²æŸ“ and æ£€æµ‹ goBack()"></a>å£°æ˜å‘¨æœŸ-åˆå§‹æ¸²æŸ“ and æ£€æµ‹ goBack()</h2><ul>
<li>ä¸ºäº†ä¿è¯é¡µé¢çš„æ•°æ®å®æ—¶æ€§ï¼Œæœ€å¥½åœ¨åˆå§‹çš„æ—¶å€™è¿›è¡Œè¯·æ±‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount()&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ£€æµ‹-goBack"><a href="#æ£€æµ‹-goBack" class="headerlink" title="æ£€æµ‹ goBack()"></a>æ£€æµ‹ goBack()</h3><blockquote>
<p>éœ€è¦é‡æ–°åŠ è½½ app</p>
</blockquote>
<p><strong>ç¬¬ä¸€æ­¥</strong></p>
<ul>
<li>åœ¨åˆ é™¤ç»„ä»¶çš„æ—¶å€™ï¼Œå®šä¹‰ goBack äº‹ä»¶</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">componentWillUnmount()&#123;</span><br><span class="line">  DeviceEventEmitter.emit(&#x27;goBack&#x27;, &#x27;goBackåˆ·æ–°è¿”å›é¡µé¢æ•°æ®&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬äºŒæ­¥</strong></p>
<ul>
<li>åœ¨åˆå§‹æ¸²æŸ“ä¸­ç›‘å¬ï¼ŒgoBack è‡ªå®šä¹‰äº‹ä»¶</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount()&#123;</span><br><span class="line">  // æ¥æ”¶</span><br><span class="line">  this.deEmitter = DeviceEventEmitter.addListener(&#x27;goBack&#x27;, (a) =&gt; &#123;</span><br><span class="line">    this.loadData();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®‰å“æ‰“åŒ…"><a href="#å®‰å“æ‰“åŒ…" class="headerlink" title="å®‰å“æ‰“åŒ…"></a>å®‰å“æ‰“åŒ…</h2><h3 id="ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆ-Android-ç­¾åè¯ä¹¦"><a href="#ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆ-Android-ç­¾åè¯ä¹¦" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆ Android ç­¾åè¯ä¹¦"></a>ç¬¬ä¸€æ­¥ï¼š<a target="_blank" rel="noopener" href="https://developer.android.com/studio/publish/app-signing">ç”Ÿæˆ Android ç­¾åè¯ä¹¦</a></h3><h3 id="ç¬¬äºŒæ­¥ï¼šè®¾ç½®-gradle-å˜é‡"><a href="#ç¬¬äºŒæ­¥ï¼šè®¾ç½®-gradle-å˜é‡" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šè®¾ç½® gradle å˜é‡"></a>ç¬¬äºŒæ­¥ï¼šè®¾ç½® gradle å˜é‡</h3><ul>
<li>å°†ä½ çš„ç­¾åè¯ä¹¦ copy åˆ° android&#x2F;app ç›®å½•ä¸‹</li>
<li>ç¼–è¾‘<code>~/.gradle/gradle.properties</code>æˆ–<code>../android/gradle.properties</code>(ä¸€ä¸ªæ˜¯å…¨å±€ gradle.propertiesï¼Œä¸€ä¸ªæ˜¯é¡¹ç›®ä¸­çš„ gradle.propertiesï¼Œå¤§å®¶å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹) ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MYAPP_RELEASE_STORE_FILE=ch09-keystore.jks</span><br><span class="line">MYAPP_RELEASE_KEY_ALIAS=ch09-keystore</span><br><span class="line">MYAPP_RELEASE_STORE_PASSWORD=123456</span><br><span class="line">MYAPP_RELEASE_KEY_PASSWORD=123456</span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬ä¸‰æ­¥ï¼šåœ¨-gradle-é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç­¾åé…ç½®"><a href="#ç¬¬ä¸‰æ­¥ï¼šåœ¨-gradle-é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç­¾åé…ç½®" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåœ¨ gradle é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç­¾åé…ç½®"></a>ç¬¬ä¸‰æ­¥ï¼šåœ¨ gradle é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç­¾åé…ç½®</h3><ul>
<li>ç¼–è¾‘<code>android/app/build.gradle</code>æ–‡ä»¶æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    defaultConfig &#123; ... &#125;</span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            storeFile file(MYAPP_RELEASE_STORE_FILE)</span><br><span class="line">            storePassword MYAPP_RELEASE_STORE_PASSWORD</span><br><span class="line">            keyAlias MYAPP_RELEASE_KEY_ALIAS</span><br><span class="line">            keyPassword MYAPP_RELEASE_KEY_PASSWORD</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            ...</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬å››æ­¥ï¼šç­¾åæ‰“åŒ…-APK"><a href="#ç¬¬å››æ­¥ï¼šç­¾åæ‰“åŒ…-APK" class="headerlink" title="ç¬¬å››æ­¥ï¼šç­¾åæ‰“åŒ… APK"></a>ç¬¬å››æ­¥ï¼šç­¾åæ‰“åŒ… APK</h3><ul>
<li>terminal è¿›å…¥é¡¹ç›®ä¸‹çš„ android ç›®å½•ï¼Œè¿è¡Œå¦‚ä¸‹ä»£ç ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew assembleRelease</span><br></pre></td></tr></table></figure>

<ul>
<li>ç­¾åæ‰“åŒ…æˆåŠŸåä½ ä¼šåœ¨ android&#x2F;app&#x2F;build&#x2F;outputs&#x2F;apk&#x2F;ç›®å½•ä¸‹çœ‹åˆ°ç­¾åæˆåŠŸåçš„ app-release.apk æ–‡ä»¶ã€‚</li>
<li>æç¤ºï¼šå¦‚æœä½ éœ€è¦å¯¹ apk è¿›è¡Œæ··æ·†æ‰“åŒ… ç¼–è¾‘ android&#x2F;app&#x2F;build.gradleï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Run Proguard to shrink the Java bytecode in release builds.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">def enableProguardInReleaseBuilds = true</span><br></pre></td></tr></table></figure>

<h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">fetch(apiLogin, &#123;</span><br><span class="line">    method: &#x27;POST&#x27;,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      &#x27;Accept&#x27;: &#x27;application/json&#x27;,//é€šè¿‡å¤´æŒ‡å®šï¼Œè·å–çš„æ•°æ®ç±»å‹æ˜¯JSON</span><br><span class="line">      &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,</span><br><span class="line">      &#x27;Authorization&#x27;:global.data.token,</span><br><span class="line">    &#125;,</span><br><span class="line">    body: JSON.stringify(&#123;</span><br><span class="line">      // è¯·æ±‚å‚æ•°</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(result =&gt; &#123;</span><br><span class="line">    const &#123;status,statusText&#125; = result;</span><br><span class="line">    if(status&gt;=200 &amp;&amp; status&lt;300 || status==304)&#123;</span><br><span class="line">      // æˆåŠŸ</span><br><span class="line">      const promise = result.json()</span><br><span class="line">      promise.then(rtn=&gt;&#123;</span><br><span class="line">        // æˆåŠŸ</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;else if(status==403)&#123;</span><br><span class="line">      // è·³è½¬ç™»å½•</span><br><span class="line">      this.props.navigation.replace(&#x27;login&#x27;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      // æé†’ statusText</span><br><span class="line">      this.refs.toast.show(statusText);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(error =&gt; &#123;</span><br><span class="line">    if(Object.prototype.toString.call(error) === &#x27;[object Object]&#x27;)&#123;</span><br><span class="line">        this.refs.toast.show(JSON.stringify(error))</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        this.refs.toast.show(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="app-çš„-logo-and-name"><a href="#app-çš„-logo-and-name" class="headerlink" title="app çš„ logo and name"></a>app çš„ logo and name</h2><h3 id="android"><a href="#android" class="headerlink" title="android"></a>android</h3><p><strong>LOGO</strong></p>
<ul>
<li>å°† logo åˆ†åˆ«æ”¾åˆ° android&#x2F;app&#x2F;src&#x2F;main&#x2F;res ä¸‹çš„å››ä¸ªæ–‡ä»¶å¤¹ä¸­,å‘½åä¸º ic_launcher.png</li>
<li>æ²¡æœ‰å¯¹åº”ä¸Šçš„æ–‡ä»¶å¤¹æ”¾ä¸€å¼ <code>1024*1024</code>æˆ–è€…<code>512*512</code>çš„å³å¯</li>
</ul>
<p><strong>app åç§°</strong></p>
<ul>
<li>åœ¨<code>android/app/src/main/res/values/strings.xml</code>ä¸­æ›´æ”¹</li>
</ul>
<h3 id="IOS"><a href="#IOS" class="headerlink" title="IOS"></a>IOS</h3><p><strong>LOGO</strong></p>
<ul>
<li>xcode&gt; æ ¹ç›®å½• &gt;Images.xcassets å°†ç”Ÿæˆçš„å›¾æ ‡æ‹–å…¥å¯¹åº”çš„ä½ç½®</li>
</ul>
<p><strong>app åç§°</strong></p>
<ul>
<li>xcode&gt; æ ¹ç›®å½• &gt;Info.plist ä¸­ä¿®æ”¹ Bundlename å’Œ General&gt; Display Name</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/webpack%E7%94%A8%E6%B3%95%E5%B0%8F%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/webpack%E7%94%A8%E6%B3%95%E5%B0%8F%E7%BB%93/" class="post-title-link" itemprop="url">webpackç”¨æ³•å°ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:18:29 / ä¿®æ”¹æ—¶é—´ï¼š14:25:06" itemprop="dateCreated datePublished" datetime="2022-12-16T14:18:29+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯æ¡†æ¶æ€»ç»“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1ã€webpack-æ˜¯ä»€ä¹ˆ"><a href="#1ã€webpack-æ˜¯ä»€ä¹ˆ" class="headerlink" title="1ã€webpack æ˜¯ä»€ä¹ˆ"></a>1ã€webpack æ˜¯ä»€ä¹ˆ</h2><p>æ ¹æ®æ–‡æ¡£çš„å®šä¹‰ï¼šæœ¬è´¨ä¸Šï¼Œwebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚</p>
<h2 id="2ã€webpack-å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ"><a href="#2ã€webpack-å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="2ã€webpack å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ"></a>2ã€webpack å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ</h2><ul>
<li>å…¥å£(entry) å…¥å£ï¼Œwebpack æ‰§è¡Œæ„å»ºçš„ç¬¬ä¸€æ­¥å°†ä» Entry å¼€å§‹ï¼Œå¯æŠ½è±¡æˆè¾“å…¥</li>
<li>è¾“å‡º(output) è¾“å‡ºç»“æœï¼Œåœ¨ Webpack ç»è¿‡ä¸€ç³»åˆ—å¤„ç†å¹¶å¾—å‡ºæœ€ç»ˆæƒ³è¦çš„ä»£ç åè¾“å‡ºç»“æœ</li>
<li>åŠ è½½å™¨(loader) æ¨¡å—è½¬æ¢å™¨ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹ã€‚</li>
<li>æ’ä»¶(plugins) æ‰©å±•æ’ä»¶ï¼Œåœ¨ Webpack æ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºä¼šå¹¿æ’­å‡ºå¯¹åº”çš„äº‹ä»¶ï¼Œæ’ä»¶å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶çš„å‘ç”Ÿï¼Œåœ¨ç‰¹å®šæ—¶æœºåšå¯¹åº”çš„äº‹æƒ…ã€‚</li>
</ul>
<h3 id="2-1entry"><a href="#2-1entry" class="headerlink" title="2.1entry"></a>2.1entry</h3><ul>
<li>å®šä¹‰çš„ä¸‰ç§æ–¹æ³•</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€ç§ç”¨æ³•</span><br><span class="line">    module.exports = &#123;</span><br><span class="line">        entry:&#x27;index.js&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">ç¬¬äºŒç§ç”¨æ³•</span><br><span class="line">    module.exports = &#123;</span><br><span class="line">        entry:[&#x27;index.js&#x27;,&#x27;b.js&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line">ç¬¬ä¸‰ç§ç”¨æ³•</span><br><span class="line">    module.exports = &#123;</span><br><span class="line">        entry:&#123;</span><br><span class="line">          index:&#x27;index.js&#x27;,</span><br><span class="line">          b:&#x27;b.js&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ¨èä½¿ç”¨ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹æ³•ï¼Œæ–¹ä¾¿åˆ†æ¸…å„ä¸ªå…¥å£çš„å®šä¹‰</p>
<h3 id="2-2output"><a href="#2-2output" class="headerlink" title="2.2output"></a>2.2output</h3><ul>
<li>æ‰“åŒ…æˆçš„æ–‡ä»¶</li>
<li>ä¸€ä¸ªæˆ–å¤šä¸ª</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry:&#123;</span><br><span class="line"> index:&#x27;index.js&#x27;,</span><br><span class="line"> b:&#x27;b.js&#x27;</span><br><span class="line"> &#125;,</span><br><span class="line"> output:&#123;</span><br><span class="line">     path:path.resolve(__dirname,&#x27;dist&#x27;),</span><br><span class="line">     filename:&#x27;[name].min.[hash:5].js&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ</p>
<ul>
<li>output ä¸­çš„ name å’Œ entry ä¸­çš„ key ç›¸å¯¹åº”</li>
<li>output çš„ filename å¯ä»¥æŒ‡å®š hashã€‚æœ‰ä¸¤ä¸ªå€¼å¯ä»¥é€‰æ‹©ï¼š<ul>
<li>[hash]ï¼šhash å€¼æ˜¯ç‰¹å®šäºæ•´ä¸ªæ„å»ºè¿‡ç¨‹çš„ã€‚</li>
<li>[chunkhash]ï¼šhash å€¼æ˜¯ç‰¹å®šäºæ¯ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹çš„ã€‚<br>æˆ‘ä»¬ç†æƒ³çš„ç¼“å­˜è®¾è®¡æ˜¯ï¼Œåœ¨ä¸€æ¬¡ç‰ˆæœ¬æ›´æ–°(é‡æ–°æ„å»º)åï¼Œåªæœ‰å½“ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ç¡®å®å‘ç”Ÿäº†å˜åŒ–ï¼Œå®ƒæ‰éœ€è¦è¢«é‡æ–°ä¸‹è½½ï¼Œå¦åˆ™åº”ä½¿ç”¨ç¼“å­˜ã€‚<br>å› æ­¤ï¼Œä»¥ä¸Šä¸¤ä¸ªå€¼ä¸­æ›´æ¨èçš„æ˜¯[chunkhash]ã€‚ä½ ä¹Ÿå¯ä»¥é˜…è¯»è¿™ç¯‡å®˜æ–¹çš„ç¼“å­˜æŒ‡å—äº†è§£æ›´å¤šç»†èŠ‚ã€‚</li>
</ul>
</li>
</ul>
<h3 id="2-3loader"><a href="#2-3loader" class="headerlink" title="2.3loader"></a>2.3loader</h3><ul>
<li>ä½œç”¨ï¼š é€šè¿‡ä½¿ç”¨ä¸åŒçš„ Loaderï¼ŒWebpack å¯ä»¥è¦æŠŠä¸åŒçš„æ–‡ä»¶éƒ½è½¬æˆ JS æ–‡ä»¶,æ¯”å¦‚ CSSã€ES6&#x2F;7ã€JSX ç­‰</li>
<li>å‚æ•°<ul>
<li>testï¼šåŒ¹é…å¤„ç†æ–‡ä»¶çš„æ‰©å±•åçš„æ­£åˆ™è¡¨è¾¾å¼</li>
<li>useï¼šloader åç§°ï¼Œå°±æ˜¯ä½ è¦ä½¿ç”¨æ¨¡å—çš„åç§°</li>
<li>include&#x2F;exclude:æ‰‹åŠ¨æŒ‡å®šå¿…é¡»å¤„ç†çš„æ–‡ä»¶å¤¹æˆ–å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶å¤¹</li>
<li>queryï¼šä¸º loaders æä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹<br>ä¸‹é¢ä»¥ css-loader ä¸ºä¾‹</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    module: &#123;</span><br><span class="line">+        rules:[</span><br><span class="line">+            &#123;</span><br><span class="line">+                test:/\.css$/,</span><br><span class="line">+                use:[&#x27;style-loader&#x27;,&#x27;css-loader&#x27;],</span><br><span class="line">+                include:path.join(__dirname,&#x27;./src&#x27;),</span><br><span class="line">+                exclude:/node_modules/</span><br><span class="line">+            &#125;</span><br><span class="line">+        ]</span><br><span class="line">   &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>å¸¸ç”¨çš„ loader<ul>
<li>ç¼–è¯‘ç›¸å…³ babel-loader ts-loader</li>
<li>æ ·å¼ç›¸å…³ style-loader css-loader less-loader postcss-loader</li>
<li>æ–‡ä»¶ç›¸å…³ file-loader url-loader</li>
</ul>
</li>
</ul>
<h3 id="2-4plugins"><a href="#2-4plugins" class="headerlink" title="2.4plugins"></a>2.4plugins</h3><ul>
<li>å‚ä¸æ‰“åŒ…çš„æ•´ä¸ªè¿‡ç¨‹</li>
<li>æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©</li>
<li>é…ç½®ç¼–è¯‘æ—¶çš„å˜é‡</li>
<li>ç”¨æ³•(ä»¥å‹ç¼© js æ’ä»¶ä¸ºä¾‹)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        new UglifyjsWebpackPlugin()</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¸¸ç”¨çš„ plugin<ul>
<li>ä¼˜åŒ–ç›¸å…³<ul>
<li>CommonsChunkPlugin</li>
<li>UglifyjsWebpackPlugin</li>
</ul>
</li>
<li>åŠŸèƒ½ç›¸å…³<ul>
<li>ExtractTextWebpackPlugin</li>
<li>HtmlWebpackPlugin</li>
<li>HotModuleReplacementPlugin</li>
<li>CopyWebpackPlugin</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3ã€webpack-çš„å¸¸ç”¨é…ç½®"><a href="#3ã€webpack-çš„å¸¸ç”¨é…ç½®" class="headerlink" title="3ã€webpack çš„å¸¸ç”¨é…ç½®"></a>3ã€webpack çš„å¸¸ç”¨é…ç½®</h2><h3 id="3-1-é…ç½®å¼€å‘æœåŠ¡å™¨"><a href="#3-1-é…ç½®å¼€å‘æœåŠ¡å™¨" class="headerlink" title="3.1 é…ç½®å¼€å‘æœåŠ¡å™¨"></a>3.1 é…ç½®å¼€å‘æœåŠ¡å™¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+ devServer:&#123;</span><br><span class="line">+        contentBase:path.resolve(__dirname,&#x27;dist&#x27;),</span><br><span class="line">+        host:&#x27;localhost&#x27;,</span><br><span class="line">+        compress:true,</span><br><span class="line">+        port:8080</span><br><span class="line">+ &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>contentBase é…ç½®å¼€å‘æœåŠ¡è¿è¡Œæ—¶çš„æ–‡ä»¶æ ¹ç›®å½•</li>
<li>hostï¼šå¼€å‘æœåŠ¡å™¨ç›‘å¬çš„ä¸»æœºåœ°å€</li>
<li>compress å¼€å‘æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨ gzip ç­‰å‹ç¼©</li>
<li>portï¼šå¼€å‘æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£</li>
</ul>
<h3 id="3-2-è‡ªåŠ¨äº§å‡º-html"><a href="#3-2-è‡ªåŠ¨äº§å‡º-html" class="headerlink" title="3.2 è‡ªåŠ¨äº§å‡º html"></a>3.2 è‡ªåŠ¨äº§å‡º html</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i html-webpack-plugin -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   plugins: [</span><br><span class="line">+        new HtmlWebpackPlugin(&#123;</span><br><span class="line">+       minify: &#123;</span><br><span class="line">+            removeAttributeQuotes:true</span><br><span class="line">+        &#125;,</span><br><span class="line">+        hash: true,</span><br><span class="line">+        template: &#x27;./src/index.html&#x27;,</span><br><span class="line">+        filename:&#x27;index.html&#x27;</span><br><span class="line">    &#125;)]</span><br></pre></td></tr></table></figure>

<ul>
<li>minify æ˜¯å¯¹ html æ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼ŒremoveAttrubuteQuotes æ˜¯å»æ‰å±æ€§çš„åŒå¼•å·</li>
<li>hash å¼•å…¥äº§å‡ºèµ„æºçš„æ—¶å€™åŠ ä¸Šå“ˆå¸Œé¿å…ç¼“å­˜</li>
<li>template æ¨¡ç‰ˆè·¯å¾„</li>
</ul>
<h3 id="3-3-åˆ†ç¦»-css"><a href="#3-3-åˆ†ç¦»-css" class="headerlink" title="3.3 åˆ†ç¦» css"></a>3.3 åˆ†ç¦» css</h3><p>å› ä¸º CSS çš„ä¸‹è½½å’Œ JS å¯ä»¥å¹¶è¡Œï¼Œå½“ä¸€ä¸ª html æ–‡ä»¶å¾ˆå¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ css å•ç‹¬æå–å‡ºæ¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev extract-text-webpack-plugin</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   module: &#123;</span><br><span class="line">+        rules:[</span><br><span class="line">+            &#123;</span><br><span class="line">+               test:/\.css$/,</span><br><span class="line">+                use: ExtractTextWebpackPlugin.extract(&#123;</span><br><span class="line">+                    use:&#x27;css-loader&#x27;</span><br><span class="line">+                &#125;),</span><br><span class="line">                include:path.join(__dirname,&#x27;./src&#x27;),</span><br><span class="line">                exclude:/node_modules/</span><br><span class="line">+            &#125;</span><br><span class="line">+        ]</span><br><span class="line">    &#125;,</span><br><span class="line">     plugins: [</span><br><span class="line">+        new ExtractTextWebpackPlugin(&#x27;css/index.css&#x27;)]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-4-ç¼–è¯‘-less-å’Œ-sass"><a href="#3-4-ç¼–è¯‘-less-å’Œ-sass" class="headerlink" title="3.4 ç¼–è¯‘ less å’Œ sass"></a>3.4 ç¼–è¯‘ less å’Œ sass</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i less less-loader -D</span><br><span class="line">npm i node-saas sass-loader -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const cssExtract=new ExtractTextWebpackPlugin(&#x27;css.css&#x27;);</span><br><span class="line">const lessExtract=new ExtractTextWebpackPlugin(&#x27;less.css&#x27;);</span><br><span class="line">const sassExtract=new ExtractTextWebpackPlugin(&#x27;sass.css&#x27;);</span><br><span class="line"></span><br><span class="line"> &#123;</span><br><span class="line">                test:/\.less$/,</span><br><span class="line">                use: lessExtract.extract(&#123;</span><br><span class="line">                    use:[&#x27;css-loader&#x27;,&#x27;less-loader&#x27;]</span><br><span class="line">                &#125;),</span><br><span class="line">                include:path.join(__dirname,&#x27;./src&#x27;),</span><br><span class="line">                exclude:/node_modules/</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test:/\.scss$/,</span><br><span class="line">                use: sassExtract.extract(&#123;</span><br><span class="line">                    use:[&#x27;css-loader&#x27;,&#x27;sass-loader&#x27;]</span><br><span class="line">                &#125;),</span><br><span class="line">                include:path.join(__dirname,&#x27;./src&#x27;),</span><br><span class="line">                exclude:/node_modules/</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="3-5-å¤„ç†-CSS3-å±æ€§å‰ç¼€"><a href="#3-5-å¤„ç†-CSS3-å±æ€§å‰ç¼€" class="headerlink" title="3.5 å¤„ç† CSS3 å±æ€§å‰ç¼€"></a>3.5 å¤„ç† CSS3 å±æ€§å‰ç¼€</h3><p>ä¸ºäº†æµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¿…é¡»åŠ å…¥-webkit,-ms,-o,-moz è¿™äº›å‰ç¼€</p>
<ul>
<li>Trident å†…æ ¸ï¼šä¸»è¦ä»£è¡¨ä¸º IE æµè§ˆå™¨, å‰ç¼€ä¸º-ms</li>
<li>Gecko å†…æ ¸ï¼šä¸»è¦ä»£è¡¨ä¸º Firefox, å‰ç¼€ä¸º-moz</li>
<li>Presto å†…æ ¸ï¼šä¸»è¦ä»£è¡¨ä¸º Opera, å‰ç¼€ä¸º-o</li>
<li>Webkit å†…æ ¸ï¼šäº§è¦ä»£è¡¨ä¸º Chrome å’Œ Safari, å‰ç¼€ä¸º-webkit</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i postcss-loader autoprefixer -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">module.exports=&#123;</span><br><span class="line">    plugins:[require(&#x27;autoprefixer&#x27;)]</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">                test:/\.css$/,</span><br><span class="line">                use: cssExtract.extract(&#123;</span><br><span class="line">+                   use:[&#x27;css-loader&#x27;,&#x27;postcss-loader&#x27;]</span><br><span class="line">                &#125;),</span><br><span class="line">                include:path.join(__dirname,&#x27;./src&#x27;),</span><br><span class="line">                exclude:/node_modules/</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/postcss/postcss-loader">postcss-loader</a>å…¶å®ƒç”¨æ³•å¯ä»¥å‚è€ƒæ–‡æ¡£</p>
<h3 id="3-6-è½¬ä¹‰-ES6-x2F-ES7"><a href="#3-6-è½¬ä¹‰-ES6-x2F-ES7" class="headerlink" title="3.6 è½¬ä¹‰ ES6&#x2F;ES7"></a>3.6 è½¬ä¹‰ ES6&#x2F;ES7</h3><p>Babel å…¶å®æ˜¯ä¸€ä¸ªç¼–è¯‘ JavaScript çš„å¹³å°,å¯ä»¥æŠŠ ES6&#x2F;ES7,React çš„ JSX è½¬ä¹‰ä¸º ES5</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-core babel-loader babel-preset-env babel-preset-stage-0 babel-preset-react -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:/\.jsx?$/,</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: &#x27;babel-loader&#x27;,</span><br><span class="line">        options: &#123;</span><br><span class="line">            presets: [&quot;env&quot;,&quot;stage-0&quot;,&quot;react&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    include:path.join(__dirname,&#x27;./src&#x27;),</span><br><span class="line">    exclude:/node_modules/</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="3-7-è°ƒè¯•æ‰“åŒ…åçš„ä»£ç "><a href="#3-7-è°ƒè¯•æ‰“åŒ…åçš„ä»£ç " class="headerlink" title="3.7 è°ƒè¯•æ‰“åŒ…åçš„ä»£ç "></a>3.7 è°ƒè¯•æ‰“åŒ…åçš„ä»£ç </h3><p>webapck é€šè¿‡é…ç½®å¯ä»¥è‡ªåŠ¨ç»™æˆ‘ä»¬ sourcemaps æ–‡ä»¶ï¼Œmap æ–‡ä»¶æ˜¯ä¸€ç§å¯¹åº”ç¼–è¯‘æ–‡ä»¶å’Œæºæ–‡ä»¶çš„æ–¹æ³•</p>
<ul>
<li>source-map æŠŠæ˜ å°„æ–‡ä»¶ç”Ÿæˆåˆ°å•ç‹¬çš„æ–‡ä»¶ï¼Œæœ€å®Œæ•´æœ€æ…¢</li>
<li>cheap-module-source-map åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­äº§ç”Ÿä¸€ä¸ªä¸å¸¦åˆ—æ˜ å°„çš„ Map</li>
<li>eval-source-map ä½¿ç”¨ eval æ‰“åŒ…æºæ–‡ä»¶æ¨¡å—,åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ç”Ÿæˆå®Œæ•´ sourcemap</li>
<li>cheap-module-eval-source-map sourcemap å’Œæ‰“åŒ…åçš„ JS åŒè¡Œæ˜¾ç¤ºï¼Œæ²¡æœ‰æ˜ å°„åˆ—</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    devtool:&#x27;eval-source-map&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-8watch"><a href="#3-8watch" class="headerlink" title="3.8watch"></a>3.8watch</h3><p>å½“ä»£ç å‘ç”Ÿä¿®æ”¹åå¯ä»¥è‡ªåŠ¨é‡æ–°ç¼–è¯‘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">new webpack.BannerPlugin(&#x27;&#x27;),</span><br><span class="line"></span><br><span class="line">watch: true,</span><br><span class="line">watchOptions: &#123;</span><br><span class="line">    ignored: /node_modules/, //å¿½ç•¥ä¸ç”¨ç›‘å¬å˜æ›´çš„ç›®å½•</span><br><span class="line">    aggregateTimeout: 500, //é˜²æ­¢é‡å¤ä¿å­˜é¢‘ç¹é‡æ–°ç¼–è¯‘,500æ¯«ç§’å†…é‡å¤ä¿å­˜ä¸æ‰“åŒ…</span><br><span class="line">    poll:1000 //æ¯ç§’è¯¢é—®çš„æ–‡ä»¶å˜æ›´çš„æ¬¡æ•°</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="3-9-æ‹·è´é™æ€æ–‡ä»¶"><a href="#3-9-æ‹·è´é™æ€æ–‡ä»¶" class="headerlink" title="3.9 æ‹·è´é™æ€æ–‡ä»¶"></a>3.9 æ‹·è´é™æ€æ–‡ä»¶</h3><p>æœ‰æ—¶é¡¹ç›®ä¸­æ²¡æœ‰å¼•ç”¨çš„æ–‡ä»¶ä¹Ÿéœ€è¦æ‰“åŒ…åˆ°ç›®æ ‡ç›®å½•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i copy-webpack-plugin -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">new CopyWebpackPlugin([&#123;</span><br><span class="line">    from: path.join(__dirname,&#x27;public&#x27;),//é™æ€èµ„æºç›®å½•æºåœ°å€</span><br><span class="line">    to:&#x27;./public&#x27; //ç›®æ ‡åœ°å€ï¼Œç›¸å¯¹äºoutputçš„pathç›®å½•</span><br><span class="line">&#125;]),</span><br></pre></td></tr></table></figure>

<h3 id="3-10-æ‰“åŒ…å…ˆæ¸…ç©º"><a href="#3-10-æ‰“åŒ…å…ˆæ¸…ç©º" class="headerlink" title="3.10 æ‰“åŒ…å…ˆæ¸…ç©º"></a>3.10 æ‰“åŒ…å…ˆæ¸…ç©º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i  clean-webpack-plugin -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new cleanWebpackPlugin(path.join(__dirname,&#x27;dist&#x27;))</span><br></pre></td></tr></table></figure>

<h3 id="3-11-å‹ç¼©-js-x2F-css"><a href="#3-11-å‹ç¼©-js-x2F-css" class="headerlink" title="3.11 å‹ç¼© js &#x2F;css"></a>3.11 å‹ç¼© js &#x2F;css</h3><ul>
<li><p>å‹ç¼© JS å¯ä»¥è®©è¾“å‡ºçš„ JS æ–‡ä»¶ä½“ç§¯æ›´å°ã€åŠ è½½æ›´å¿«ã€æµé‡æ›´çœï¼Œè¿˜æœ‰æ··æ·†ä»£ç çš„åŠ å¯†åŠŸèƒ½<br><code>npm i uglifyjs-webpack-plugin -D</code><br><code>plugins: [ new UglifyjsWebpackPlugin()]</code></p>
</li>
<li><p>webpack å¯ä»¥æ¶ˆé™¤æœªä½¿ç”¨çš„ CSSï¼Œæ¯”å¦‚ bootstrap ä¸­é‚£äº›æœªä½¿ç”¨çš„æ ·å¼</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i -D purifycss-webpack purify-css</span><br><span class="line">npm i bootstrap -S</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:/\.css$/,</span><br><span class="line">    use: cssExtract.extract(&#123;</span><br><span class="line">        use: [&#123;</span><br><span class="line">             loader: &#x27;css-loader&#x27;,</span><br><span class="line">             options:&#123;minimize:true&#125;</span><br><span class="line">        &#125;,&#x27;postcss-loader&#x27;]</span><br><span class="line">    &#125;),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+ new PurifyCSSPlugin(&#123;</span><br><span class="line">+             //purifycssæ ¹æ®è¿™ä¸ªè·¯å¾„é…ç½®éå†ä½ çš„HTMLæ–‡ä»¶ï¼ŒæŸ¥æ‰¾ä½ ä½¿ç”¨çš„CSS</span><br><span class="line">+            paths:glob.sync(path.join(__dirname,&#x27;src/*.html&#x27;))</span><br><span class="line">+ &#125;),</span><br></pre></td></tr></table></figure>

<h2 id="4ã€æ€»ç»“"><a href="#4ã€æ€»ç»“" class="headerlink" title="4ã€æ€»ç»“"></a>4ã€æ€»ç»“</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»¥ä¸Šæ˜¯webpackæ ¸å¿ƒæ¦‚å¿µæ€»ç»“ï¼Œå¯¹æ¦‚å¿µçš„ç†è§£ï¼Œæœ‰åŠ©äºæ€»ä½“äº†è§£ä¸‹webpackä¸åŒçš„ä½œç”¨ï¼Œé‡åˆ°ç›¸å…³é—®é¢˜ï¼Œæ‰¾å¯¹åº”çš„æ¨¡å—ã€‚</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/NodeJs%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/NodeJs%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/" class="post-title-link" itemprop="url">NodeJsåŸºç¡€çŸ¥è¯†ç‚¹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:18:15 / ä¿®æ”¹æ—¶é—´ï¼š14:20:49" itemprop="dateCreated datePublished" datetime="2022-12-16T14:18:15+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯æ¡†æ¶æ€»ç»“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-nodejs-çš„ç‰¹ç‚¹"><a href="#1-nodejs-çš„ç‰¹ç‚¹" class="headerlink" title="1.nodejs çš„ç‰¹ç‚¹"></a>1.nodejs çš„ç‰¹ç‚¹</h2><h3 id="1-å•çº¿ç¨‹"><a href="#1-å•çº¿ç¨‹" class="headerlink" title="1)å•çº¿ç¨‹"></a>1)å•çº¿ç¨‹</h3><p>åœ¨ Javaã€PHP ç­‰æœåŠ¡å™¨è¯­è¨€ä¸­ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œè€Œæ¯ä¸ªçº¿ç¨‹éœ€è¦æ¶ˆè€—å¤§çº¦ 2MB çš„å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ª 8GB çš„å†…å­˜å¯ä»¥æ»¡è¶³ 4000 äºº</p>
<p>çš„è®¿é—®è¿æ¥ï¼Œè¿™æ ·å°±å¢åŠ äº†æœåŠ¡å™¨çš„ç¡¬ä»¶æˆæœ¬ã€‚Nodejs ä¸éœ€è¦ä¸ºæ¯ä¸ªç”¨æˆ·çš„è¿æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œè€Œä»…ä»…ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ª 8GB çš„å†…å­˜å¯ä»¥æ»¡è¶³<br>40000 äººçš„è¿æ¥ã€‚</p>
<ul>
<li>å¥½å¤„ï¼šæ“ä½œç³»ç»Ÿä¸ä¼šå†æœ‰åˆ›å»ºçº¿ç¨‹ã€é”€æ¯çº¿ç¨‹çš„å¼€é”€ã€‚</li>
<li>åå¤„ï¼šå¦‚æœä¸€ä¸ªç”¨æˆ·å¯¼è‡´äº†çº¿ç¨‹çš„å¥”æºƒï¼Œé‚£ä¹ˆæ•´ä¸ªæœåŠ¡å°±å¥”æºƒäº†ã€‚</li>
</ul>
<h3 id="2-éé˜»å¡-I-x2F-O"><a href="#2-éé˜»å¡-I-x2F-O" class="headerlink" title="2)éé˜»å¡ I&#x2F;O"></a>2)éé˜»å¡ I&#x2F;O</h3><p>ç”±äº Nodejs é‡‡ç”¨äº†éé˜»å¡ I&#x2F;O æœºåˆ¶ï¼Œå› æ­¤åœ¨æ‰§è¡Œè®¿é—®æ•°æ®åº“çš„ä»£ç åï¼Œç«‹å³è½¬è€Œæ‰§è¡Œå…¶åçš„ä»£ç ï¼ŒæŠŠæ•°æ®åº“è¿”å›ç»“æœçš„ä»£ç å¤„ç†æ”¾åœ¨äº†å›è°ƒå‡½æ•°ä¸­ï¼Œä»è€Œæé«˜äº†<br>ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<p>å½“æŸä¸ª I&#x2F;O æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå°†ä»¥äº‹ä»¶çš„å½¢å¼é€šçŸ¥æ‰§è¡Œ I&#x2F;O çš„çº¿ç¨‹ï¼Œçº¿ç¨‹æ‰§è¡Œè¿™ä¸ªäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œä¸ºäº†å¤„ç†è¿™ä¸ªå¼‚æ­¥ I&#x2F;Oï¼Œçº¿ç¨‹å¿…é¡»æœ‰äº‹ä»¶å¾ªç¯ï¼Œä¸æ–­çš„æ£€æŸ¥æœ‰æ²¡æœ‰æœªå¤„ç†çš„äº‹ä»¶ï¼Œä¾æ¬¡äºˆä»¥å¤„ç†ã€‚</p>
<h3 id="3-äº‹ä»¶é©±åŠ¨"><a href="#3-äº‹ä»¶é©±åŠ¨" class="headerlink" title="3)äº‹ä»¶é©±åŠ¨"></a>3)äº‹ä»¶é©±åŠ¨</h3><p>åœ¨ nodejs ä¸­ï¼Œå®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿æ¥ï¼Œæ•°æ®æäº¤ç­‰è¡Œä¸ºï¼Œä¼šè§¦å‘ç›¸åº”çš„äº‹ä»¶ã€‚åœ¨ nodejs ä¸­ï¼Œåœ¨ä¸€ä¸ªæ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œä¸€ä¸ªäº‹ä»¶å›è°ƒå‡½æ•°<br>çš„ä¸­é€”ï¼Œå¯ä»¥è½¬è€Œå¤„ç†å…¶ä»–äº‹ä»¶ï¼Œç„¶åè¿”å›ç»§ç»­æ‰§è¡ŒåŸäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œè¿™ç§å¤„ç†æœºåˆ¶ï¼Œç§°ä¸ºâ€˜äº‹ä»¶ç¯â€™æœºåˆ¶ã€‚</p>
<h2 id="2-nodejs-é€‚åˆå¼€å‘ä»€ä¹ˆæ ·çš„ä¸šåŠ¡ï¼Ÿ"><a href="#2-nodejs-é€‚åˆå¼€å‘ä»€ä¹ˆæ ·çš„ä¸šåŠ¡ï¼Ÿ" class="headerlink" title="2.nodejs é€‚åˆå¼€å‘ä»€ä¹ˆæ ·çš„ä¸šåŠ¡ï¼Ÿ"></a>2.nodejs é€‚åˆå¼€å‘ä»€ä¹ˆæ ·çš„ä¸šåŠ¡ï¼Ÿ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å½“åº”ç”¨ç¨‹åºéœ€è¦å¤„ç†å¤§é‡å¹¶å‘çš„I/Oï¼Œè€Œåœ¨å‘å®¢æˆ·ç«¯å“åº”ä¹‹å‰ï¼Œåº”ç”¨ç¨‹åºå†…éƒ¨ä¸éœ€è¦è¿›è¡Œéå¸¸å¤æ‚å¤„ç†çš„æ—¶å€™ï¼Œnodejséå¸¸åˆé€‚ã€‚nodejsä¹Ÿéå¸¸é€‚åˆä¸websocket</span><br><span class="line">é…åˆï¼Œå¼€å‘é•¿è¿æ¥çš„å®æ—¶äº¤äº’åº”ç”¨ç¨‹åºã€‚</span><br><span class="line">æ€»ä¹‹ï¼Œnodejsæ“…é•¿ä»»åŠ¡çš„è°ƒåº¦ï¼Œå–„äºI/Oï¼Œä¸å–„äºè®¡ç®—ã€‚</span><br><span class="line">æ¯”å¦‚ï¼š1)ç”¨æˆ·è¡¨å•æ”¶é›†  2)è€ƒè¯•ç³»ç»Ÿ 3)èŠå¤©å®¤ 4)å›¾æ–‡ç›´æ’­ 5)æä¾›JSONçš„api</span><br></pre></td></tr></table></figure>

<h2 id="3-ç¬¬ä¸€ä¸ªç®€å•çš„-node-ç¨‹åº"><a href="#3-ç¬¬ä¸€ä¸ªç®€å•çš„-node-ç¨‹åº" class="headerlink" title="3.ç¬¬ä¸€ä¸ªç®€å•çš„ node ç¨‹åº"></a>3.ç¬¬ä¸€ä¸ªç®€å•çš„ node ç¨‹åº</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let http = require(&#x27;http&#x27;);</span><br><span class="line">// åˆ›å»ºæœåŠ¡å™¨ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¡¨ç¤ºå¦‚æœæœ‰è¯·æ±‚è¿›æ¥è¦åšä»€ä¹ˆ</span><br><span class="line"> let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">     // è®¾ç½®httpå¤´éƒ¨ï¼ŒçŠ¶æ€ç æ˜¯200ï¼Œæ–‡ä»¶ç±»å‹æ˜¯htmlï¼Œå­—ç¬¦é›†æ˜¯utf8</span><br><span class="line">     res.writeHead(200,&#123;&quot;Content-type&quot;:&quot;text/html;charset=UTF-8&quot;&#125;);</span><br><span class="line">     res.end(&#x27;è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªNodeé¡µé¢&#x27;);</span><br><span class="line"> &#125;)</span><br><span class="line"></span><br><span class="line"> // è¿è¡ŒæœåŠ¡å™¨</span><br><span class="line"> server.listen(3000,&#x27;192.168.124.15&#x27;)</span><br></pre></td></tr></table></figure>

<p><strong>é—®ï¼šå¦‚ä½•å°† html é¡µé¢å±•ç¤ºåˆ°æµè§ˆå™¨ä¸­å‘¢</strong>ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">åˆ©ç”¨å¼•å…¥fsæ¨¡å—</span><br><span class="line">let http = require(&#x27;http&#x27;);</span><br><span class="line">let fs = require(&#x27;fs&#x27;);</span><br><span class="line">let path = require(&#x27;path&#x27;);</span><br><span class="line">let PULIC_PATH = path.resolve(__dirname,&#x27;01_helloWorld.html&#x27;);</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºæœåŠ¡å™¨ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¡¨ç¤ºå¦‚æœæœ‰è¯·æ±‚è¿›æ¥è¦åšä»€ä¹ˆ</span><br><span class="line">let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">    fs.readFile(PULIC_PATH,(err,data)=&gt;&#123;</span><br><span class="line">        console.log(&#x27;data&#x27;,data,err);</span><br><span class="line">        // è®¾ç½®httpå¤´éƒ¨ï¼ŒçŠ¶æ€ç æ˜¯200ï¼Œæ–‡ä»¶ç±»å‹æ˜¯htmlï¼Œå­—ç¬¦é›†æ˜¯utf8</span><br><span class="line">        res.writeHead(200,&#123;&quot;Content-type&quot;:&quot;text/html;charset=UTF-8&quot;&#125;);</span><br><span class="line">        res.end(data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// è¿è¡ŒæœåŠ¡å™¨</span><br><span class="line">server.listen(3000,&#x27;192.168.1.9&#x27;)</span><br></pre></td></tr></table></figure>

<p><strong>é—®ï¼šå¦‚ä½•æ ¹æ®ä¸åŒçš„è·¯ç”±å±•ç¤ºä¸åŒçš„é¡µé¢ï¼Ÿ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">let http = require(&#x27;http&#x27;);</span><br><span class="line">let fs = require(&#x27;fs&#x27;);</span><br><span class="line">let PUBILC_PATH = require(&#x27;path&#x27;);</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºæœåŠ¡å™¨ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¡¨ç¤ºå¦‚æœæœ‰è¯·æ±‚è¿›æ¥è¦åšä»€ä¹ˆ</span><br><span class="line">let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">    if (req.url == &#x27;/sqaure&#x27;) &#123;</span><br><span class="line">        let path = PUBILC_PATH.resolve(__dirname,&#x27;01_helloWorld.html&#x27;);</span><br><span class="line">        fs.readFile(path,(err,data)=&gt;&#123;</span><br><span class="line">            console.log(&#x27;data&#x27;,data,err);</span><br><span class="line">            // è®¾ç½®httpå¤´éƒ¨ï¼ŒçŠ¶æ€ç æ˜¯200ï¼Œæ–‡ä»¶ç±»å‹æ˜¯htmlï¼Œå­—ç¬¦é›†æ˜¯utf8</span><br><span class="line">            res.writeHead(200,&#123;&quot;Content-type&quot;:&quot;text/html;charset=UTF-8&quot;&#125;);</span><br><span class="line">            res.end(data);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else if (req.url == &#x27;/circle&#x27;) &#123;</span><br><span class="line">        let path = PUBILC_PATH.resolve(__dirname,&#x27;01_helloWorld_circle.html&#x27;);</span><br><span class="line">        fs.readFile(path,(err,data)=&gt;&#123;</span><br><span class="line">            console.log(&#x27;data&#x27;,data,err);</span><br><span class="line">            // è®¾ç½®httpå¤´éƒ¨ï¼ŒçŠ¶æ€ç æ˜¯200ï¼Œæ–‡ä»¶ç±»å‹æ˜¯htmlï¼Œå­—ç¬¦é›†æ˜¯utf8</span><br><span class="line">            res.writeHead(200,&#123;&quot;Content-type&quot;:&quot;text/html;charset=UTF-8&quot;&#125;);</span><br><span class="line">            res.end(data);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        res.writeHead(404,&#123;&quot;Content-type&quot;:&quot;text/html;charset=UTF-8&quot;&#125;);</span><br><span class="line">        res.end(&#x27;æ²¡æœ‰è¿™ä¸ªé¡µé¢å“¦&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// è¿è¡ŒæœåŠ¡å™¨</span><br><span class="line">server.listen(3000,&#x27;192.168.1.9&#x27;)</span><br><span class="line"></span><br><span class="line">è¯´æ˜ï¼šåœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://192.168.1.9:3000/circleå³å¯</span><br></pre></td></tr></table></figure>

<h2 id="4-http-æ¨¡å—ä¸-url-æ¨¡å—"><a href="#4-http-æ¨¡å—ä¸-url-æ¨¡å—" class="headerlink" title="4.http æ¨¡å—ä¸ url æ¨¡å—"></a>4.http æ¨¡å—ä¸ url æ¨¡å—</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">å®ä¾‹ï¼š</span><br><span class="line">    let http = require(&#x27;http&#x27;);</span><br><span class="line">    let url = require(&#x27;url&#x27;);</span><br><span class="line"></span><br><span class="line">    let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">        let path = url.parse(req.url);</span><br><span class="line">        /*</span><br><span class="line">            Url &#123;</span><br><span class="line">                protocol: null,</span><br><span class="line">                slashes: null,</span><br><span class="line">                auth: null,</span><br><span class="line">                host: null,</span><br><span class="line">                port: null,</span><br><span class="line">                hostname: null,</span><br><span class="line">                hash: null,</span><br><span class="line">                search: &#x27;?name=wq&amp;age=20&#x27;,</span><br><span class="line">                query: &#x27;name=wq&amp;age=20&#x27;,</span><br><span class="line">                pathname: &#x27;/user&#x27;,</span><br><span class="line">                path: &#x27;/user?name=wq&amp;age=20&#x27;,</span><br><span class="line">                href: &#x27;/user?name=wq&amp;age=20&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        */</span><br><span class="line">        console.log(&#x27;æœåŠ¡å™¨æ¥æ”¶åˆ°äº†è¯·æ±‚1ï¼š&#x27;,path);</span><br><span class="line"></span><br><span class="line">        // å°†ç¬¬äºŒä¸ªå‚æ•°è®¾ä¸ºtrueï¼Œå°±æŠŠqueryå‚æ•°å˜ä¸ºObject</span><br><span class="line">        let path2 = url.parse(req.url,true);</span><br><span class="line">        /*</span><br><span class="line">            Url &#123;</span><br><span class="line">                protocol: null,</span><br><span class="line">                slashes: null,</span><br><span class="line">                auth: null,</span><br><span class="line">                host: null,</span><br><span class="line">                port: null,</span><br><span class="line">                hostname: null,</span><br><span class="line">                hash: null,</span><br><span class="line">                search: &#x27;?name=wq&amp;age=20&#x27;,</span><br><span class="line">                query: [Object: null prototype] &#123; name: &#x27;wq&#x27;, age: &#x27;20&#x27; &#125;,</span><br><span class="line">                pathname: &#x27;/user&#x27;,</span><br><span class="line">                path: &#x27;/user?name=wq&amp;age=20&#x27;,</span><br><span class="line">                href: &#x27;/user?name=wq&amp;age=20&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        */</span><br><span class="line">        console.log(&#x27;æœåŠ¡å™¨æ¥æ”¶åˆ°äº†è¯·æ±‚2ï¼š&#x27;,path2);</span><br><span class="line"></span><br><span class="line">        // è®¾ç½®ä¸€ä¸ªç›¸åº”å¤´</span><br><span class="line">        res.writeHead(200,&#123;&quot;Content-Type&quot;:&quot;text/html;charset=UTF-8&quot;&#125;);</span><br><span class="line">        // æ¯ä¸ªè¯·æ±‚éƒ½åº”è¯¥åŠ ä¸Š.end()æ–¹æ³•ï¼Œä¸ç„¶ï¼Œæµè§ˆå™¨è¯·æ±‚ä¼šä¸€ç›´è½¬èŠèŠ±ç­‰å¾…åç«¯ç»“æŸ</span><br><span class="line">        res.end(&#x27;&lt;h1&gt;å“åº”å¤´&lt;/h1&gt;&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    server.listen(3000,&#x27;192.168.1.9&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>å®æ“ï¼šåšä¸€ä¸ªç®€å•çš„è¡¨å•æäº¤</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;http://192.168.1.9:3000&quot; method=&quot;GET&quot;&gt;</span><br><span class="line">       &lt;input name=&#x27;name&#x27; /&gt;</span><br><span class="line">       &lt;input name=&#x27;age&#x27; /&gt;</span><br><span class="line">       &lt;input name=&#x27;sex&#x27; /&gt;</span><br><span class="line">       &lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">   &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">   let http = require(&#x27;http&#x27;);</span><br><span class="line">   let url = require(&#x27;url&#x27;);</span><br><span class="line">   let queryString = require(&#x27;querystring&#x27;);</span><br><span class="line"></span><br><span class="line">   let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">       let queryObj = url.parse(req.url,true).query;</span><br><span class="line">       // querystringçš„ä½œç”¨ä¸ä¸Šå¥ä½œç”¨ä¸€æ ·</span><br><span class="line">       let queryObj2 = queryString.parse(req.url.split(&#x27;?&#x27;)[1]);</span><br><span class="line">       console.log(&#x27;å‚æ•°&#x27;,queryObj,queryObj2);</span><br><span class="line"></span><br><span class="line">       res.end(&#x27;æœåŠ¡å™¨æ”¶åˆ°äº†å‚æ•°&#x27;);</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line">   server.listen(3000,&#x27;192.168.1.9&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="5-fs-æ¨¡å—"><a href="#5-fs-æ¨¡å—" class="headerlink" title="5.fs æ¨¡å—"></a>5.fs æ¨¡å—</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">let http = require(&#x27;http&#x27;);</span><br><span class="line">let fs = require(&#x27;fs&#x27;);</span><br><span class="line"></span><br><span class="line">let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line"></span><br><span class="line">    let userID = parseInt(Math.random()*89999)+10000;</span><br><span class="line">    console.log(userID+&#x27;è¿›å…¥è¿æ¥...&#x27;)</span><br><span class="line"></span><br><span class="line">    res.writeHead(200, &#123;&#x27;Content-Type&#x27;: &#x27;text/html;charset=utf-8&#x27;,&#x27;Access-Control-Allow-Origin&#x27;:&#x27;*&#x27;&#125;);</span><br><span class="line"></span><br><span class="line">    // è¯»å–æ–‡ä»¶</span><br><span class="line">    fs.readFile(&#x27;../ç¬”è®°.txt&#x27;,(error,data)=&gt;&#123;</span><br><span class="line">        console.log(error,data);</span><br><span class="line">        if (error) &#123;</span><br><span class="line">            throw error;</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(userID+&#x27;è¯»å–å®Œæ¯•...&#x27;)</span><br><span class="line">        res.end();</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    // åˆ›å»ºæ–‡ä»¶å¤¹</span><br><span class="line">    fs.mkdir(`./image/$&#123;userID&#125;`);</span><br><span class="line"></span><br><span class="line">    // è¯»å–æ–‡ä»¶çŠ¶æ€</span><br><span class="line">    fs.stat(&#x27;../ç¬”è®°.txt&#x27;,(error,stats)=&gt;&#123;</span><br><span class="line">        /*</span><br><span class="line">            Stats &#123;</span><br><span class="line">                dev: 580307240,</span><br><span class="line">                mode: 33206,</span><br><span class="line">                nlink: 1,</span><br><span class="line">                uid: 0,</span><br><span class="line">                gid: 0,</span><br><span class="line">                rdev: 0,</span><br><span class="line">                blksize: 4096,</span><br><span class="line">                ino: 10696049115206348,</span><br><span class="line">                size: 7275,   // æ–‡ä»¶çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰</span><br><span class="line">                blocks: 16,</span><br><span class="line">                atimeMs: 1579832397095.3948, // è¡¨æ˜ä¸Šæ¬¡è®¿é—®æ­¤æ–‡ä»¶çš„æ—¶é—´æˆ³</span><br><span class="line">                mtimeMs: 1579872595571.8716, // è¡¨æ˜ä¸Šæ¬¡ä¿®æ”¹æ­¤æ–‡ä»¶çš„æ—¶é—´æˆ³</span><br><span class="line">                ctimeMs: 1579872595571.8716,  // è¡¨æ˜ä¸Šæ¬¡æ›´æ”¹æ–‡ä»¶çŠ¶æ€çš„æ—¶é—´æˆ³</span><br><span class="line">                birthtimeMs: 1579832397095.3948, // è¡¨æ˜æ­¤æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´çš„æ—¶é—´æˆ³</span><br><span class="line">                atime: 2020-01-24T02:19:57.095Z,</span><br><span class="line">                mtime: 2020-01-24T13:29:55.572Z,</span><br><span class="line">                ctime: 2020-01-24T13:29:55.572Z,</span><br><span class="line">                birthtime: 2020-01-24T02:19:57.095Z</span><br><span class="line">            &#125;</span><br><span class="line">        */</span><br><span class="line">        console.log(&#x27;è¯»å–æ–‡ä»¶çŠ¶æ€&#x27;,stats);</span><br><span class="line">        console.log(&#x27;æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ï¼š&#x27;,stats.isDirectory());</span><br><span class="line">        console.log(&#x27;æ˜¯å¦æ˜¯æ–‡ä»¶ï¼š&#x27;,stats.isFile());</span><br><span class="line">        res.end();</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    // å­˜å‚¨æ‰€æœ‰æ–‡ä»¶å¤¹å</span><br><span class="line">    let dictionary = [];</span><br><span class="line">    // æŸ¥çœ‹æ–‡ä»¶å¤¹ä¸­æœ‰å¤šå°‘æ–‡ä»¶</span><br><span class="line">    fs.readdir(&#x27;../node&#x27;,(error,files)=&gt;&#123;</span><br><span class="line">        // ä»¥æ•°ç»„çš„å½¢å¼è¾“å‡ºnodeæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰çš„æ–‡ä»¶å</span><br><span class="line">        /*</span><br><span class="line">            [</span><br><span class="line">                &#x27;01_helloWorld.html&#x27;,</span><br><span class="line">                &#x27;01_helloWorld.js&#x27;,</span><br><span class="line">                &#x27;01_helloWorld_circle.html&#x27;,</span><br><span class="line">                &#x27;02_helloWorld.js&#x27;,</span><br><span class="line">                &#x27;02_è¡¨å•æäº¤.html&#x27;,</span><br><span class="line">                &#x27;03_router.js&#x27;,</span><br><span class="line">                &#x27;04_EventLoop.js&#x27;</span><br><span class="line">            ]</span><br><span class="line">        */</span><br><span class="line">        console.log(&#x27;nodeæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶åï¼š&#x27;,files);</span><br><span class="line">        files.map(item =&gt; &#123;</span><br><span class="line">            fs.stat(`./$&#123;item&#125;`,(error,stats)=&gt;&#123;</span><br><span class="line">                if (stats.isDirectory()) &#123;</span><br><span class="line">                    dictionary.push(item);</span><br><span class="line">                &#125;</span><br><span class="line">                console.log(&#x27;æ–‡ä»¶å¤¹ï¼š&#x27;+dictionary);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        res.end();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(3000,&#x27;192.168.1.9&#x27;);</span><br><span class="line"></span><br><span class="line">// å®ä¾‹ï¼šè·å–æŸä¸ªæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰æ–‡ä»¶(å¤¹)çš„åå­—</span><br><span class="line">let http = require(&#x27;http&#x27;);</span><br><span class="line"></span><br><span class="line">let fs = require(&#x27;fs&#x27;);</span><br><span class="line"></span><br><span class="line">let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">    fs.readdir(&#x27;../node&#x27;,(error,files)=&gt;&#123;</span><br><span class="line">        // å­˜æ”¾æ–‡ä»¶å¤¹çš„æ•°ç»„</span><br><span class="line">        let dictionary = [];</span><br><span class="line">        (function iterator(i)&#123;</span><br><span class="line">            if (i == files.length) &#123;</span><br><span class="line">                res.end(&#x27;è·å–ç›®å½•ç»“æŸ...&#x27;);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            fs.stat(`../node/$&#123;files[i]&#125;`,(err,stats)=&gt;&#123;</span><br><span class="line">                if (stats.isDirectory()) &#123;</span><br><span class="line">                    dictionary.push(files[i]);</span><br><span class="line">                    console.log(&#x27;dictionary&#x27;,dictionary)</span><br><span class="line">                &#125;</span><br><span class="line">                iterator(i+1);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)(0)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(3000,&#x27;192.168.1.9&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="6-åˆ¶ä½œä¸€ä¸ªé™æ€èµ„æºæ–‡ä»¶ç®¡ç†"><a href="#6-åˆ¶ä½œä¸€ä¸ªé™æ€èµ„æºæ–‡ä»¶ç®¡ç†" class="headerlink" title="6.åˆ¶ä½œä¸€ä¸ªé™æ€èµ„æºæ–‡ä»¶ç®¡ç†"></a>6.åˆ¶ä½œä¸€ä¸ªé™æ€èµ„æºæ–‡ä»¶ç®¡ç†</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">// æ„æ€æ˜¯ï¼šæ–°å»ºä¸€ä¸ªstaticæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹æœ‰1.htmlæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡http://192.168.1.9:3000/1.htmlå»è®¿é—®</span><br><span class="line">let http = require(&#x27;http&#x27;);</span><br><span class="line">let url = require(&#x27;url&#x27;);</span><br><span class="line">let fs = require(&#x27;fs&#x27;);</span><br><span class="line">let path = require(&#x27;path&#x27;);</span><br><span class="line"></span><br><span class="line">let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">    // è·å–è·¯å¾„</span><br><span class="line">    let pathName = url.parse(req.url).pathname;</span><br><span class="line">    if (pathName == &#x27;/&#x27;) &#123;</span><br><span class="line">        pathName = &#x27;index.html&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">    // è·å–æ–‡ä»¶æ‹“å±•å</span><br><span class="line">    let extname = path.extname(pathName);</span><br><span class="line">    console.log(&#x27;è·å–æ–‡ä»¶æ‹“å±•å&#x27;,extname);</span><br><span class="line"></span><br><span class="line">    // è·å–æ–‡ä»¶</span><br><span class="line">    fs.readFile(&#x27;./static/&#x27;+pathName,(error,data)=&gt;&#123;</span><br><span class="line">        if (error) &#123;</span><br><span class="line">            fs.readFile(&#x27;./static/404.html&#x27;,(err,errData)=&gt;&#123;</span><br><span class="line">                console.log(&#x27;errrr&#x27;,err,errData)</span><br><span class="line">                res.writeHead(404,&#123;&#x27;Content-Type&#x27;:&#x27;text/html;charset=UTF8&#x27;&#125;);</span><br><span class="line">                res.end(errData);</span><br><span class="line">            &#125;)</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        res.writeHead(200,&#123;&quot;Content-Type&quot;:getMIME(extname)&#125;)</span><br><span class="line">        res.end(data);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(3000,&#x27;192.168.1.9&#x27;);</span><br><span class="line"></span><br><span class="line">function getMIME(extname)&#123;</span><br><span class="line">    switch(extname)&#123;</span><br><span class="line">        case &quot;.html&quot;:</span><br><span class="line">            return &quot;text/html&quot;;</span><br><span class="line">            break;</span><br><span class="line">        case &quot;.jpg&quot;:</span><br><span class="line">            return &quot;image/jpg&quot;;</span><br><span class="line">            break;</span><br><span class="line">        case &quot;.css&quot;:</span><br><span class="line">            return &quot;text/css&quot;;</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-æ–‡ä»¶å¤¹æ¨¡å—å’Œ-package-æ–‡ä»¶"><a href="#7-æ–‡ä»¶å¤¹æ¨¡å—å’Œ-package-æ–‡ä»¶" class="headerlink" title="7.æ–‡ä»¶å¤¹æ¨¡å—å’Œ package æ–‡ä»¶"></a>7.æ–‡ä»¶å¤¹æ¨¡å—å’Œ package æ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">1)åœ¨jsæ–‡ä»¶ä¸­å¼•ç”¨ï¼Œå¦‚æœä¸å†™./ ï¼Œ ä¼šé»˜è®¤æŸ¥æ‰¾node_modulesæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">test.jsæ–‡ä»¶</span><br><span class="line">let foo = require(&#x27;foo.js&#x27;);</span><br><span class="line">console.log(foo);</span><br><span class="line"></span><br><span class="line">node_modulesæ–‡ä»¶å¤¹ä¸‹foo.jsæ–‡ä»¶</span><br><span class="line">let a = 200;</span><br><span class="line">exports.b = b;</span><br><span class="line"></span><br><span class="line">2)åœ¨jsæ–‡ä»¶ä¸­ï¼Œå¦‚æœå¼•ç”¨ä¸åŠ æ‰©å±•åï¼Œé»˜è®¤å¼•ç”¨æ–‡ä»¶å¤¹ä¸‹index.jsæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">test.jsæ–‡ä»¶</span><br><span class="line">let a = &#x27;bar&#x27;;</span><br><span class="line">exports.a = a;</span><br><span class="line"></span><br><span class="line">node_modulesæ–‡ä»¶å¤¹ä¸‹baræ–‡ä»¶å¤¹ä¸‹çš„index.jsæ–‡ä»¶</span><br><span class="line">let a = &#x27;bar&#x27;;</span><br><span class="line">exports.a = a;</span><br><span class="line"></span><br><span class="line">é—®ï¼šå¦‚æœä¿®æ”¹baræ–‡ä»¶å¤¹ä¸‹index.jsæ–‡ä»¶å¤¹åä¸ºapp.jsï¼Œå¦‚ä½•ä¿®æ”¹æ‰èƒ½æ­£å¸¸å¼•ç”¨ï¼Ÿ</span><br><span class="line">åœ¨baræ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶package.json,</span><br><span class="line">package.jsonæ–‡ä»¶</span><br><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;app&quot;,</span><br><span class="line">    &quot;version&quot;: &quot;0.0.1&quot;,</span><br><span class="line">    &quot;main&quot;: &quot;app.js&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">3)package.jsonç®¡ç†ä¾èµ–</span><br><span class="line">åœ¨æ ¹æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œå‘½ä»¤npm initï¼Œä¼šç”Ÿæˆpackage.jsonæ–‡ä»¶</span><br><span class="line">package.jsonä¸­ï¼š</span><br><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;moment&quot;: &quot;^2.24.0&quot;   // ^åœ¨è°å‰é¢å°±è¡¨ç¤ºè°ä¸å˜ï¼Œåœ¨è¿™é‡Œå°±è¡¨ç¤º2çš„å¤§ç‰ˆæœ¬ä¿æŒä¸å˜</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">4)è·¯å¾„æ³¨æ„é—®é¢˜</span><br><span class="line">å‰æï¼šåŒçº§ç›®å½•ä¸‹æœ‰a.jsæ–‡ä»¶å’Œtextæ–‡ä»¶å¤¹ï¼Œtextæ–‡ä»¶å¤¹ä¸‹æœ‰b.jså’Œc.js</span><br><span class="line">å¼•ç”¨ï¼š</span><br><span class="line">    1.aå¼•ç”¨b</span><br><span class="line">        let b = require(&#x27;./text/b.js);</span><br><span class="line">    2.bå¼•ç”¨c</span><br><span class="line">        let c = require(&#x27;./c.js);</span><br><span class="line">æ³¨æ„ï¼šå¼•ç”¨éƒ½æ˜¯ä»å½“å‰æ–‡ä»¶å¯»æ‰¾å…¶ä»–æ–‡ä»¶</span><br><span class="line">é—®ï¼šå¦‚æœb.jsä¸­éœ€è¦å¼•å…¥åƒfsç­‰ç¬¬ä¸‰æ–¹æ¨¡å—è¯»å–æ–‡ä»¶æ—¶ï¼Œå¦‚ä½•å¼•ç”¨ï¼Ÿ</span><br><span class="line">    ä½¿ç”¨ç»å¯¹è·¯å¾„__dirnameï¼š</span><br><span class="line">    fs.readFile(__dirname+&#x27;/1.txt&#x27;,()=&gt;&#123;&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="8-POST-è¯·æ±‚"><a href="#8-POST-è¯·æ±‚" class="headerlink" title="8.POST è¯·æ±‚"></a>8.POST è¯·æ±‚</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&lt;input id=&#x27;name&#x27; /&gt;</span><br><span class="line">&lt;input id=&#x27;age&#x27; /&gt;</span><br><span class="line">&lt;input id=&#x27;submit&#x27; type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    document.getElementById(&#x27;submit&#x27;).onclick=()=&gt;&#123;</span><br><span class="line">        let name = document.getElementById(&#x27;name&#x27;).value;</span><br><span class="line">        let age = document.getElementById(&#x27;age&#x27;).value;</span><br><span class="line"></span><br><span class="line">        let xhr = new XMLHttpRequest();</span><br><span class="line">        xhr.open(&#x27;POST&#x27;,&#x27;http://192.168.1.9:3000&#x27;);</span><br><span class="line">        xhr.addEventListener(&#x27;load&#x27;,function()&#123;</span><br><span class="line">            console.log(this.response);</span><br><span class="line">        &#125;)</span><br><span class="line">        let obj = &#123;</span><br><span class="line">            name,</span><br><span class="line">            age</span><br><span class="line">        &#125;;</span><br><span class="line">        xhr.send(JSON.stringify(obj));</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let http = require(&#x27;http&#x27;);</span><br><span class="line">let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">    if (req.method == &quot;POST&quot;) &#123;</span><br><span class="line">        let allData = &#x27;&#x27;;</span><br><span class="line">        req.on(&#x27;data&#x27;,(chunk)=&gt;&#123;</span><br><span class="line">            allData += chunk;</span><br><span class="line">        &#125;)</span><br><span class="line">        req.on(&#x27;end&#x27;,()=&gt;&#123;</span><br><span class="line">            res.writeHead(200,&#123;&#x27;Content-Type&#x27;:&#x27;text/html&#x27;,&#x27;Access-Control-Allow-Origin&#x27;:&#x27;*&#x27;&#125;);</span><br><span class="line">            res.end(allData);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(3000,&#x27;192.168.1.9&#x27;);</span><br><span class="line"></span><br><span class="line">ä¾‹ï¼šå®ç°ä¸Šä¼ å›¾ç‰‡</span><br><span class="line">å‰æï¼šnpm install formidable</span><br><span class="line"></span><br><span class="line">&lt;form action=&quot;http://192.168.1.9:3000&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; name=&#x27;descript&#x27; /&gt;</span><br><span class="line">    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">let http = require(&#x27;http&#x27;);</span><br><span class="line">let formidable = require(&#x27;formidable&#x27;);</span><br><span class="line">let fs = require(&#x27;fs&#x27;);</span><br><span class="line">let path = require(&#x27;path&#x27;);</span><br><span class="line">let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">    if (req.method == &quot;POST&quot;) &#123;</span><br><span class="line">        let form = new formidable.IncomingForm();</span><br><span class="line">        // è®¾ç½®æ–‡ä»¶ä¸Šä¼ å­˜å‚¨åœ°å€</span><br><span class="line">        form.uploadDir = &#x27;./upLoads&#x27;;</span><br><span class="line">        // æ‰€æœ‰çš„æ–‡æœ¬åŸŸã€å•é€‰æ¡†ç­‰éƒ½å­˜æ”¾åœ¨fieldsä¸­ï¼›æ‰€æœ‰çš„æ–‡ä»¶åŸŸéƒ½å­˜æ”¾åœ¨filesä¸­</span><br><span class="line">        form.parse(req,(err,fields,files)=&gt;&#123;</span><br><span class="line">            // ä¿®æ”¹æ–‡ä»¶å</span><br><span class="line">            let oldPath = __dirname + &quot;/&quot; + files.file.path;</span><br><span class="line">            let newPath = __dirname + &quot;/upLoads&quot; + &quot;/&quot; + fields.descript + path.extname(files.file.name);</span><br><span class="line">            console.log(&#x27;ä¿®æ”¹æ–‡ä»¶å&#x27;,oldPath,newPath);</span><br><span class="line">            fs.rename(oldPath,newPath,(error)=&gt;&#123;</span><br><span class="line">                if (error) &#123;</span><br><span class="line">                    throw Error(&#x27;æ”¹åå¤±è´¥ï¼&#x27;);</span><br><span class="line">                &#125;</span><br><span class="line">                res.writeHead(200,&#123;&quot;Content-Type&quot;:&quot;text/plain;charset=utf-8&quot;&#125;);</span><br><span class="line">                res.end(&#x27;ä¸Šä¼ æˆåŠŸ&#x27;);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(3000,&#x27;192.168.1.9&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="9-æ¨¡æ¿å¼•æ“"><a href="#9-æ¨¡æ¿å¼•æ“" class="headerlink" title="9.æ¨¡æ¿å¼•æ“"></a>9.æ¨¡æ¿å¼•æ“</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">1)ejsæ¨¡æ¿å¼•æ“:æ˜¯ä¸€ç§åç«¯æ¨¡æ¿å¼•æ“</span><br><span class="line"></span><br><span class="line">let ejs = require(&#x27;ejs&#x27;);</span><br><span class="line"></span><br><span class="line">let str = &#x27;ä»Šå¤©ä¹°äº†&lt;%= a %&gt;s&#x27;;</span><br><span class="line">let data = &#123;</span><br><span class="line">    a:6,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let html = ejs.render(str,data)</span><br><span class="line">console.log(html);  // ä»Šå¤©ä¹°äº†6s</span><br><span class="line"></span><br><span class="line">é—®ï¼šå¦‚ä½•è¯»å–ejsé¡µé¢ï¼Ÿ</span><br><span class="line"></span><br><span class="line">index.ejs</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;ä»Šå¤©ä¹°äº†&lt;%= a %&gt;s&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">let ejs = require(&#x27;ejs&#x27;);</span><br><span class="line">let fs = require(&#x27;fs&#x27;);</span><br><span class="line">let http = require(&#x27;http&#x27;);</span><br><span class="line"></span><br><span class="line">let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">    fs.readFile(&quot;./views/ejs01.ejs&quot;,(err,data)=&gt;&#123;</span><br><span class="line">        let template = data.toString();</span><br><span class="line">        let obj = &#123; a: 6&#125;;</span><br><span class="line"></span><br><span class="line">        let html = ejs.render(template,obj);</span><br><span class="line"></span><br><span class="line">        res.writeHead(200,&#123;&#x27;Content-Type&#x27;:&#x27;text/html;charset=utf-8&#x27;,&#x27;Access-Control-Allow-Origin&#x27;:&#x27;*&#x27;&#125;);</span><br><span class="line">        res.end(html);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(8000,&#x27;127.0.0.1&#x27;);</span><br><span class="line"></span><br><span class="line">2)Jadeæ¨¡æ¿å¼•æ“ï¼šä¹Ÿæ˜¯ä¸€ç§åç«¯æ¨¡æ¿å¼•æ“ï¼Œçœç•¥äº†htmlæ ‡ç­¾</span><br></pre></td></tr></table></figure>

<h2 id="10-Express-æ¡†æ¶"><a href="#10-Express-æ¡†æ¶" class="headerlink" title="10.Express æ¡†æ¶"></a>10.Express æ¡†æ¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">Expressæ˜¯åç«¯Nodeçš„æ¡†æ¶ã€‚</span><br><span class="line">å‰æï¼šnpm install express</span><br><span class="line">1)åˆè¯†Express</span><br><span class="line">let express = require(&#x27;express&#x27;);</span><br><span class="line"></span><br><span class="line">let app = express();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// expressè·¯ç”±èƒ½åŠ›</span><br><span class="line">app.get(&quot;/index&quot;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&#x27;é¦–é¡µ&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.get(&quot;/my&quot;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&#x27;æˆ‘çš„&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.get(/\/student\/([\d]&#123;5&#125;)/,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&quot;å­¦ç”Ÿä¿¡æ¯ï¼Œå­¦å·ï¼š&quot;+req.params[0]);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.get(&quot;/teacher/:teacherID&quot;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&quot;è€å¸ˆä¿¡æ¯ï¼Œå·¥å·ï¼š&quot;+req.params.teacherID);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// expresså¼•ç”¨é™æ€æ–‡ä»¶èƒ½åŠ›(å³ä»¥å‰æ”¾å…¥Apacheä¸­çš„åŒ…)</span><br><span class="line">app.use(express.static(&#x27;./static&#x27;));</span><br><span class="line"></span><br><span class="line">// expresså¼•ç”¨æ¨¡æ¿å¼•æ“èƒ½åŠ›</span><br><span class="line">app.set(&#x27;view engine&#x27;,&#x27;ejs&#x27;);</span><br><span class="line">app.get(&#x27;/view&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    res.render(&#x27;ejs01&#x27;,&#123;</span><br><span class="line">        a: 11,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(3000);</span><br><span class="line"></span><br><span class="line">2)å¦‚æœæƒ³è¦å¤„ç†ä»»ä½•ç±»å‹çš„è¯·æ±‚(get,post)å°±ä½¿ç”¨app.all</span><br><span class="line">app.all(&quot;/&quot;,(req,res)=&gt;&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">3)Restfulè·¯ç”±è®¾è®¡ï¼šç®€å•æ¥è¯´ï¼Œå°±æ˜¯åŒä¸€ä¸ªè·¯ç”±è·¯å¾„ï¼Œæ ¹æ®ä¸åŒçš„è¯·æ±‚ç±»å‹ï¼Œå±•ç°å‡ºä¸åŒçš„åŠŸèƒ½</span><br><span class="line"></span><br><span class="line">4)ä¸­é—´ä»¶</span><br><span class="line">å¦‚æœGETã€POSTè¯·æ±‚çš„å›è°ƒå‡½æ•°ä¸­ï¼Œæ²¡æœ‰nextå‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šåŒ¹é…ç¬¬ä¸€ä¸ªè·¯ç”±ï¼Œä¸ä¼šç»§ç»­å¾€ä¸‹åŒ¹é…ï¼›å¦‚æœæƒ³è¦ç»§ç»­å¾€ä¸‹åŒ¹é…ï¼Œå°±éœ€è¦next()</span><br><span class="line"></span><br><span class="line">let express = require(&#x27;express&#x27;);</span><br><span class="line"></span><br><span class="line">let app = express();</span><br><span class="line"></span><br><span class="line">app.get(&#x27;/&#x27;,(req,res,next)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;1&#x27;);</span><br><span class="line">    next();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.get(&#x27;/&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;2&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(3000);</span><br><span class="line"></span><br><span class="line">1)app.use()æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œè¿™ä¸get/postä¸åŒçš„æ˜¯ï¼Œapp.use()çš„ç½‘å€ä¸æ˜¯ç²¾ç¡®åŒ¹é…çš„ï¼Œæ˜¯å¯ä»¥æ‰©å±•çš„</span><br><span class="line">let express = require(&#x27;express&#x27;);</span><br><span class="line"></span><br><span class="line">let app = express();</span><br><span class="line"></span><br><span class="line">app.use(&quot;/admin&quot;,(req,res)=&gt;&#123;</span><br><span class="line">    // å½“ç”¨æˆ·è¾“å…¥ http://127.0.0.1:3000/admin/userinfo/001</span><br><span class="line">    console.log(req.originalUrl);  // ç”¨æˆ·è¾“å…¥è®¿é—®çš„ç½‘å€  /admin/userinfo/001</span><br><span class="line">    console.log(req.baseUrl);      // useä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°   /admin</span><br><span class="line">    console.log(req.path);         // ç”¨æˆ·ç½‘å€å‡å»useä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°  /userinfo/001</span><br><span class="line">    res.end();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(3000);</span><br><span class="line"></span><br><span class="line">2)å½“app.useä¸å†™è·¯å¾„æ—¶ï¼Œå®é™…ä¸Šæ˜¯ç›¸å½“äº&quot;/&quot;ï¼Œä»£è¡¨æ‰€æœ‰ç½‘å€</span><br><span class="line">app.use((req,res,next)=&gt;&#123;</span><br><span class="line">    next();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">3)é™æ€æœåŠ¡</span><br><span class="line">let express = require(&#x27;express&#x27;);</span><br><span class="line"></span><br><span class="line">let app = express();</span><br><span class="line"></span><br><span class="line">// å½“ç”¨æˆ·è®¿é—®http://127.0.0.1:3000/static/å³å¯è®¿é—®staticæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶</span><br><span class="line">app.use(&#x27;/static&#x27;,express.static(&#x27;./static&#x27;));</span><br><span class="line"></span><br><span class="line">// useå‡½æ•°ä¼šè‡ªåŠ¨è¯†åˆ«errè¿™ä¸ªå‚æ•°ï¼Œå¦‚æœæœ‰å°±èƒ½è‡ªåŠ¨æ•è·</span><br><span class="line">app.use((req, res)=&gt;&#123;</span><br><span class="line">    res.send(&#x27;ä¸å­˜åœ¨è¿™ä¸ªé¡µé¢ï¼&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(3000);</span><br><span class="line"></span><br><span class="line">4)render()å’Œsend()</span><br><span class="line">â‘ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¸²æŸ“å†…å®¹ç”¨res.render()ï¼Œå°†ä¼šæ ¹æ®viewsä¸­çš„æ¨¡æ¿æ–‡ä»¶è¿›è¡Œæ¸²æŸ“ã€‚å¦‚æœæ¸²æŸ“ä¸æƒ³ä½¿ç”¨viewsæ–‡ä»¶å¤¹ï¼Œå¯ä»¥ï¼š</span><br><span class="line">    app.set(&#x27;views&#x27;,__dirname+&#x27;/Views2&#x27;);</span><br><span class="line">â‘¡å¦‚æœæƒ³å†™ä¸€ä¸ªå¿«é€Ÿæµ‹è¯•é¡µï¼Œå½“ç„¶å¯æ˜¯ä½¿ç”¨res.render()ã€‚è¿™ä¸ªå‡½æ•°å°†æ ¹æ®å†…å®¹ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬è®¾ç½®äº†Content-Typeå¤´éƒ¨å’Œ200çŠ¶æ€ç </span><br><span class="line">â‘¢å¦‚æœæƒ³è¦ä½¿ç”¨ä¸åŒçš„çŠ¶æ€ç ï¼Œå¯ä»¥ï¼š</span><br><span class="line">    res.status(400).render(&#x27;we connot find it&#x27;)</span><br><span class="line">â‘£å¦‚æœæƒ³è¦è®¾ç½®ä¸åŒçš„Content-Typeï¼Œå¯ä»¥ï¼š</span><br><span class="line">    res.set(&#x27;Content-Type&#x27;,&#x27;text-html&#x27;);</span><br><span class="line"></span><br><span class="line">5)expressçš„GETå’ŒPOSTè¯·æ±‚</span><br><span class="line">â‘ GETè¯·æ±‚</span><br><span class="line">let express = require(&#x27;express&#x27;);</span><br><span class="line"></span><br><span class="line">let app = express();</span><br><span class="line"></span><br><span class="line">app.get(&#x27;/&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    // è·å–å‚æ•°</span><br><span class="line">    // å½“è®¿é—®http://127.0.0.1:3000/?name=wq&amp;id=1270837469</span><br><span class="line">    console.log(req.query); // &#123; name: &#x27;wq&#x27;, id: &#x27;1270837469&#x27; &#125;</span><br><span class="line">    res.send();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(3000);</span><br><span class="line">â‘¡POSTè¯·æ±‚</span><br><span class="line"></span><br><span class="line">å‰æï¼šnpm install body-parser</span><br><span class="line">let bodyParser = require(&#x27;body-parser&#x27;);</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;extended:false&#125;));</span><br><span class="line">app.post(&#x27;/&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(JSON.stringify(req.body));</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="11-NoSQL"><a href="#11-NoSQL" class="headerlink" title="11.NoSQL"></a>11.NoSQL</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">å®šä¹‰ï¼šéç»“æ„æ€§æ•°æ®åº“ï¼Œæ²¡æœ‰è¡Œå’Œåˆ—çš„æ¦‚å¿µï¼Œç”¨JSONæ¥å­˜å‚¨æ•°æ®ï¼Œä»£æ›¿äº†è€ç‰Œæ•°æ®åº“è¡¨å’Œè¡Œçš„æ¦‚å¿µï¼Œåˆ†åˆ«ä½¿ç”¨é›†åˆå’Œæ–‡æ¡£ã€‚</span><br><span class="line"></span><br><span class="line">mongodbçš„ä¸€äº›å‘½ä»¤ï¼š</span><br><span class="line">    mongoï¼šä½¿ç”¨æ•°æ®åº“</span><br><span class="line">    mongodï¼šå¼€æœº</span><br><span class="line">    mongoimportï¼šå¯¼å…¥æ•°æ®</span><br><span class="line"></span><br><span class="line">å¯åŠ¨mongodbï¼š</span><br><span class="line">    æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æˆ‘çš„ç›®å½•æ˜¯ï¼šF:\mongo</span><br><span class="line">    æ‰“å¼€cmdï¼Œæ‰§è¡Œ mongod --dbpath F:\mongo</span><br><span class="line">    æ–°æ‰“å¼€ä¸€ä¸ªcmdï¼Œæ‰§è¡Œ mongo</span><br><span class="line"></span><br><span class="line">mongodbå‘½ä»¤ï¼š</span><br><span class="line">    show dbsï¼šå±•ç¤ºå½“å‰æ‰€æœ‰æ•°æ®åº“</span><br><span class="line">    use æ•°æ®åº“åï¼šä½¿ç”¨æŒ‡å®šæ•°æ®åº“ï¼›æˆ–è€…æ–°å»ºæ•°æ®åº“</span><br><span class="line">    dbï¼šæŸ¥çœ‹å½“å‰æ‰€åœ¨æ•°æ®åº“</span><br><span class="line">    æ’å…¥æ•°æ®ï¼š</span><br><span class="line">        db.æ•°æ®åº“å.insert(&#123;&quot;name&quot;:&quot;wq&quot;&#125;)</span><br><span class="line">    æŸ¥çœ‹å½“å‰æ•°æ®åº“é›†åˆï¼š</span><br><span class="line">        show collections</span><br><span class="line">    æŸ¥çœ‹å½“å‰é›†åˆä¸­çš„æ–‡æ¡£ï¼š</span><br><span class="line">        db.æ•°æ®åº“å.find()</span><br><span class="line">    æŸ¥è¯¢nameå­—æ®µä¸º&#x27;wq&#x27;çš„æ–‡æ¡£ï¼š</span><br><span class="line">        db.æ•°æ®åº“å.find(&#123;&quot;name&quot;:&quot;wq&quot;&#125;)</span><br><span class="line">    åˆ é™¤æ•°æ®åº“ï¼š(å½“å‰æ‰€åœ¨çš„æ•°æ®åº“)</span><br><span class="line">        db.dropDatabase()</span><br><span class="line">    å¯¼å…¥æ•°æ®åº“ï¼š</span><br><span class="line">        mongoimport --db æ•°æ®åº“å --collection é›†åˆå --drop --file æ–‡ä»¶è·¯å¾„</span><br><span class="line">            æ³¨æ„ï¼š --drop ä»£è¡¨åˆ é™¤ä¹‹å‰é›†åˆä¸­å­˜åœ¨çš„æ•°æ®</span><br><span class="line">æŸ¥è¯¢ï¼š</span><br><span class="line">    æ•°æ®ç»“æ„ï¼š</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;:&quot;wq&quot;,</span><br><span class="line">            &quot;age&quot;:23,</span><br><span class="line">            &quot;hobby&quot;:[&quot;sleep&quot;,&quot;eat&quot;],</span><br><span class="line">            &quot;score&quot;:&#123;</span><br><span class="line">                &quot;yuwen&quot;:89,</span><br><span class="line">                &quot;shuxue&quot;:100</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;points&quot;: [</span><br><span class="line">                &#123; &quot;points&quot;: 78, &quot;bonus&quot;: 8 &#125;,</span><br><span class="line">                &#123; &quot;points&quot;: 57, &quot;bonus&quot;: 7 &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">1)æŸ¥è¯¢æ•°å­¦æˆç»©ä¸º100çš„å­¦ç”Ÿ</span><br><span class="line">     db.student.find(&#123;&quot;score.shuxue&quot;:100&#125;)</span><br><span class="line">2)æŸ¥è¯¢å¹´é¾„ä¸º23å¹¶ä¸”æ•°å­¦æˆç»©ä¸º100çš„å­¦ç”Ÿ</span><br><span class="line">     db.student.find(&#123;&quot;score.shuxue&quot;:100,&quot;age&quot;:23&#125;)</span><br><span class="line">3)æŸ¥è¯¢è¯­æ–‡æˆç»©å¤§äº70åˆ†çš„å­¦ç”Ÿ($gt)</span><br><span class="line">    db.student.find(&#123;&quot;score.yuwen&quot;:&#123;$gt:70&#125;&#125;)</span><br><span class="line">4)æŸ¥è¯¢è¯­æ–‡æˆç»©å°äº70åˆ†çš„å­¦ç”Ÿ($lt)</span><br><span class="line">    db.student.find(&#123;&quot;score.yuwen&quot;:&#123;$lt:70&#125;&#125;)</span><br><span class="line">4)æŸ¥è¯¢è¯­æ–‡æˆç»©å°äº70æˆ–è€…å¹´é¾„å°äº20å²çš„å­¦ç”Ÿ</span><br><span class="line">    db.student.find(&#123;$or:[&#123;&quot;score.yuwen&quot;:&#123;$lt:70&#125;&#125;,&#123;&quot;age&quot;:&#123;$lt:20&#125;&#125;]&#125;)</span><br><span class="line">5)æŸ¥è¯¢å¹´é¾„å¤§äº15å²çš„å­¦ç”Ÿå¹¶ä¸”æŒ‰ç…§è¯­æ–‡æˆç»©å‡åºæ’åˆ—(1ä»£è¡¨å‡åºï¼Œ-1ä»£è¡¨é™åº)ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ™å…ˆæŒ‰å‰è€…æ’åºï¼ŒåæŒ‰åè€…æ’åº</span><br><span class="line">    db.student.find(&#123;&quot;age&quot;:&#123;$gt:15&#125;&#125;).sort(&#123;&quot;age&quot;:1&#125;)</span><br><span class="line">6)æŸ¥è¯¢çˆ±å¥½ä¸ºç¡è§‰çš„å­¦ç”Ÿ</span><br><span class="line">    db.student.find(&#123;&quot;hobby&quot;:&quot;sleep&quot;&#125;)</span><br><span class="line">7)æŸ¥è¯¢ç¬¬äºŒä¸ªçˆ±å¥½ä¸ºeatçš„å­¦ç”Ÿ</span><br><span class="line">    db.student.find(&#123;&quot;hobby.1&quot;:&quot;eat&quot;&#125;)</span><br><span class="line">8)æŸ¥è¯¢bonuså¤§äº7çš„å­¦ç”Ÿ</span><br><span class="line">    db.student.find(&#123;&quot;points&quot;:&#123;$elemMatch:&#123;&quot;bonus&quot;:&#123;$gt:7&#125;&#125;&#125;&#125;)</span><br><span class="line">9)æŸ¥è¯¢hobbyä¸ºeatå’Œsleepçš„å­¦ç”Ÿ</span><br><span class="line">    db.student.find(&#123;&quot;hobby&quot;:&#123;$all:[&quot;eat&quot;,&quot;sleep&quot;]&#125;&#125;)</span><br><span class="line">10)æŸ¥è¯¢çˆ±å¥½ä¸º2ä¸ªçš„å­¦ç”Ÿ</span><br><span class="line">    db.student.find(&#123;&quot;hobby&quot;:&#123;$size:2&#125;&#125;)</span><br><span class="line"></span><br><span class="line">åˆ é™¤</span><br><span class="line">    1)åˆ é™¤é›†åˆ</span><br><span class="line">        db.é›†åˆå.drop()</span><br><span class="line">    2)åˆ é™¤é›†åˆä¸­åå­—ä¸ºwqçš„å­¦ç”Ÿ</span><br><span class="line">        db.student.remove(&#123;&quot;name&quot;:&quot;wq&quot;&#125;)</span><br><span class="line">        æ³¨æ„ï¼šåªåˆ é™¤ä¸€ä¸ªæ·»åŠ &#123;justOne:true&#125;</span><br><span class="line">            db.student.remove(&#123;&quot;name&quot;:&quot;wq&quot;&#125;,&#123;justOne:true&#125;)</span><br><span class="line">ä¿®æ”¹</span><br><span class="line">    1)ä¿®æ”¹åå­—ä¸ºwq2çš„å­¦ç”Ÿå¹´é¾„ä¸º21</span><br><span class="line">        db.student.update(&#123;&quot;name&quot;:&quot;wq2&quot;&#125;,&#123;$set:&#123;&quot;age&quot;:21&#125;&#125;)</span><br><span class="line">    2)ä¿®æ”¹åå­—æ»¡è¶³wq\d&#123;1,&#125;æ‰€æœ‰å­¦ç”Ÿçš„å¹´é¾„ä¸º33</span><br><span class="line">        db.student.updateMany(&#123;&quot;name&quot;:/wq\d&#123;1,&#125;/&#125;,&#123;$set:&#123;&quot;age&quot;:33&#125;&#125;)</span><br><span class="line">    3)å®Œå…¨æ›¿æ¢åå­—ä¸ºwq2</span><br><span class="line">        db.student.update(&#123;&quot;name&quot;:&quot;wq2&quot;&#125;,&#123;&quot;name&quot;:&quot;wq2&quot;,&quot;age&quot;:1&#125;)</span><br><span class="line">    4)æ·»åŠ points</span><br><span class="line">        db.students.update(&#123;&quot;name&quot;:&quot;wq&quot;&#125;,&#123;$addToSet:&#123;&quot;points&quot;:&#123; &quot;points&quot;: 58, &quot;bonus&quot;: 7 &#125;&#125;&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="12-Nodejs-è¿æ¥-Mongodb-æ•°æ®åº“"><a href="#12-Nodejs-è¿æ¥-Mongodb-æ•°æ®åº“" class="headerlink" title="12.Nodejs è¿æ¥ Mongodb æ•°æ®åº“"></a>12.Nodejs è¿æ¥ Mongodb æ•°æ®åº“</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">let express = require(&#x27;express&#x27;);</span><br><span class="line"></span><br><span class="line">let app = express();</span><br><span class="line"></span><br><span class="line">let MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line"></span><br><span class="line">app.get(&#x27;/&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    // itcaseä»£è¡¨æ•°æ®åº“</span><br><span class="line">    let url = &quot;mongodb://127.0.0.1:27017/itcase&quot;;</span><br><span class="line">    MongoClient.connect(url,(err,client)=&gt;&#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            console.log(&#x27;æ•°æ®åº“è¿æ¥å¤±è´¥ï¼&#x27;)</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(&#x27;æ•°æ®åº“è¿æ¥æˆåŠŸï¼&#x27;)</span><br><span class="line">        let db = client.db(&quot;itcase&quot;);</span><br><span class="line">        db.collection(&#x27;student&#x27;).insertOne(&#123;</span><br><span class="line">            &quot;name&quot;:&quot;wcc&quot;,</span><br><span class="line">            &quot;age&quot;:30</span><br><span class="line">        &#125;,(error,result)=&gt;&#123;</span><br><span class="line">            if (error) &#123;</span><br><span class="line">                console.log(&#x27;æ•°æ®æ’å…¥å¤±è´¥ï¼&#x27;)</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            console.log(&#x27;result&#x27;,result);</span><br><span class="line">            res.send();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure>

<h2 id="13-nodejs-æ“ä½œ-mongodb-å¢åˆ æ”¹æŸ¥"><a href="#13-nodejs-æ“ä½œ-mongodb-å¢åˆ æ”¹æŸ¥" class="headerlink" title="13.nodejs æ“ä½œ mongodb(å¢åˆ æ”¹æŸ¥)"></a>13.nodejs æ“ä½œ mongodb(å¢åˆ æ”¹æŸ¥)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">let MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line"></span><br><span class="line">// è¿æ¥æ•°æ®åº“</span><br><span class="line">function connectMongodb(dbName,callback)&#123;</span><br><span class="line">    let url = `mongodb://127.0.0.1:27017/$&#123;dbName&#125;`;</span><br><span class="line">    MongoClient.connect(url,callback)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ’å…¥æ•°æ®</span><br><span class="line">exports.insertOne = (dbName,collectionName,data,callback) =&gt; &#123;</span><br><span class="line">    connectMongodb(dbName,(err,client)=&gt;&#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            console.log(&#x27;æ•°æ®åº“è¿æ¥å¤±è´¥ï¼&#x27;)</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        let db = client.db(dbName);</span><br><span class="line">        db.collection(collectionName).insertOne(data,callback);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŸ¥è¯¢æ•°æ®</span><br><span class="line">exports.find = (dbName,collectionName,condition,pageSize,pageNo,callback) =&gt;&#123;</span><br><span class="line">    connectMongodb(dbName,(err,client)=&gt;&#123;</span><br><span class="line">        let db = client.db(dbName);</span><br><span class="line">        let cursor = db.collection(collectionName).find(condition).limit(pageSize).skip((pageNo-1)*pageSize);</span><br><span class="line">        let result = [];</span><br><span class="line">        cursor.each((error,doc)=&gt;&#123;</span><br><span class="line">            if (doc!=null) &#123;</span><br><span class="line">                result.push(doc);</span><br><span class="line">            &#125;else &#123;</span><br><span class="line">                callback(null,result);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åˆ é™¤æ•°æ®</span><br><span class="line">exports.delete = (dbName,collectionName,condition,callback)=&gt;&#123;</span><br><span class="line">    connectMongodb(dbName,(err,client)=&gt;&#123;</span><br><span class="line">        let db = client.db(dbName);</span><br><span class="line">        db.collection(collectionName).deleteMany(condition,(error,result)=&gt;&#123;</span><br><span class="line">            if(error)&#123;</span><br><span class="line">                callback(&#x27;åˆ é™¤å¤±è´¥ï¼&#x27;,null);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            callback(null,result);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä¿®æ”¹æ•°æ®</span><br><span class="line">exports.update = (dbName,collectionName,searchCondition,updateData,callback)=&gt;&#123;</span><br><span class="line">    connectMongodb(dbName,(err,client)=&gt;&#123;</span><br><span class="line">        let db = client.db(dbName);</span><br><span class="line">        db.collection(collectionName).updateOne(searchCondition,&#123;$set:updateData&#125;,(error,result)=&gt;&#123;</span><br><span class="line">            if(error)&#123;</span><br><span class="line">                callback(&#x27;ä¿®æ”¹å¤±è´¥ï¼&#x27;,null);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            callback(null,result);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-Cookie-å’Œ-Session"><a href="#13-Cookie-å’Œ-Session" class="headerlink" title="13.Cookie å’Œ Session"></a>13.Cookie å’Œ Session</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Cookie:</span><br><span class="line">    1)Httpæ˜¯æ— çŠ¶æ€åè®®ï¼Œç®€å•çš„è¯´ï¼Œå½“ä½ æµè§ˆä¸€ä¸ªé¡µé¢ï¼Œç„¶åè½¬åˆ°åŒä¸€ä¸ªç½‘ç«™çš„å¦ä¸€ä¸ªé¡µé¢ï¼ŒæœåŠ¡å™¨æ— æ³•è®¤è¯†åˆ°è¿™æ˜¯åŒä¸€ä¸ªæµè§ˆå™¨åœ¨è®¿é—®åŒä¸€ä¸ªç½‘ç«™ã€‚æ¯ä¸€æ¬¡è®¿é—®éƒ½æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚</span><br><span class="line">    2)Cookieæ˜¯ä¸€ä¸ªç®€å•åˆ°çˆ†çš„æƒ³æ³•ï¼šå½“è®¿é—®ä¸€ä¸ªé¡µé¢çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨åœ¨ä¸‹è¡ŒHttpæŠ¥æ–‡ä¸­ï¼Œå‘½ä»¤æµè§ˆå™¨å­˜å‚¨ä¸€ä¸ªå­—ç¬¦ä¸²ï¼›å½“æµè§ˆå™¨å†æ¬¡è®¿é—®åŒä¸€ä¸ªåŸŸçš„æ—¶å€™ï¼Œå°†æŠŠè¿™ä¸ªå­—ç¬¦ä¸²æºå¸¦åˆ°</span><br><span class="line">      ä¸Šè¡ŒHttpè¯·æ±‚ä¸­ã€‚</span><br><span class="line">    ç‰¹ç‚¹ï¼š</span><br><span class="line">        1)Cookieä¸åŠ å¯†ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±çœ‹åˆ°</span><br><span class="line">        2)ç”¨æˆ·å¯ä»¥åˆ é™¤Cookieæˆ–è€…ç¦ç”¨å®ƒ</span><br><span class="line">        3)Cookieå¯ä»¥è¢«ç¯¡æ”¹</span><br><span class="line">        4)Cookieå¯ä»¥ç”¨äºæ”»å‡»</span><br><span class="line">        5)Cookieçš„å­˜å‚¨é‡å°</span><br><span class="line"></span><br><span class="line">nodeä¸­çš„Cookie:</span><br><span class="line">    å‰æï¼šnpm install cookie-parser</span><br><span class="line">    ä¾‹å­ï¼š</span><br><span class="line">        let express = require(&#x27;express&#x27;);</span><br><span class="line">        let cookieParser = require(&#x27;cookie-parser&#x27;);</span><br><span class="line">        let app = express();</span><br><span class="line">        app.use(cookieParser());</span><br><span class="line"></span><br><span class="line">        app.get(&#x27;/&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">            console.log(&#x27;è¯·æ±‚Cookie&#x27;,req.cookies)</span><br><span class="line">            // maxAgeï¼šCookieçš„æœ‰æ•ˆæœŸ</span><br><span class="line">            res.cookie(&#x27;name&#x27;,&#x27;wq&#x27;,&#123;maxAge:24*60*60*1000&#125;);</span><br><span class="line">            res.send();</span><br><span class="line">        &#125;)</span><br><span class="line">        app.listen(3000);</span><br><span class="line"></span><br><span class="line">Sessionï¼š</span><br><span class="line">    Sessionä¸æ˜¯ä¸€å¼€å§‹å°±æœ‰çš„æŠ€æœ¯ï¼Œè€Œæ˜¯ä¾èµ–Cookieã€‚å½“æµè§ˆå™¨ç¦ç”¨cookieæˆ–è€…ç”¨æˆ·æ¸…é™¤cookieçš„æ—¶å€™ç™»å½•æ•ˆæœå°±æ¶ˆå¤±äº†ã€‚</span><br><span class="line">    Sessionä¸‹å‘çš„ä¹±ç æ˜¯ä¹±ç ï¼Œå¹¶ä¸”æœåŠ¡å™¨è‡ªå·±ç¼“å­˜ä¸€äº›ä¸œè¥¿ï¼Œä¸‹æ¬¡æœåŠ¡å™¨å¸¦ç€ä¹±ç è¯·æ±‚ï¼Œä¸ç¼“å­˜æ¯”å¯¹ï¼Œå°±çŸ¥é“è¯·æ±‚ç”¨æˆ·æ˜¯è°äº†ã€‚</span><br><span class="line"></span><br><span class="line">nodeä¸­çš„Sessionï¼š</span><br><span class="line">    å‰æï¼šnpm install express-session</span><br><span class="line">    let express = require(&#x27;express&#x27;);</span><br><span class="line">    let app = express();</span><br><span class="line"></span><br><span class="line">    let session = require(&#x27;express-session&#x27;);</span><br><span class="line"></span><br><span class="line">    app.use(session(&#123;</span><br><span class="line">        secret:&#x27;wq&#x27;,</span><br><span class="line">        resave:false,</span><br><span class="line">        saveUninitialized:true</span><br><span class="line">    &#125;))</span><br><span class="line"></span><br><span class="line">    app.get(&#x27;/&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">        if (req.session.userInfo) &#123;</span><br><span class="line">            res.send(&#x27;æ¬¢è¿æ‚¨,&#x27;+req.session.userInfo);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        res.send(&#x27;æ‚¨æœªç™»å½•ï¼Œè¯·å…ˆç™»å½•ï¼ï¼&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    app.get(&#x27;/login&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">        req.session.userInfo = &#x27;ç‹æ¸…&#x27;;  // è®¾ç½®Session</span><br><span class="line">        res.send(&#x27;æ‚¨å·²æˆåŠŸç™»å½•ï¼&#x27;);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    app.listen(3000);</span><br></pre></td></tr></table></figure>

<h2 id="14-MD5-åŠ å¯†"><a href="#14-MD5-åŠ å¯†" class="headerlink" title="14.MD5 åŠ å¯†"></a>14.MD5 åŠ å¯†</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    MD5åŠ å¯†æ˜¯å‡½æ•°å‹åŠ å¯†ï¼Œå°±æ˜¯æ¯æ¬¡åŠ å¯†çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œæ²¡æœ‰éšæœºä½ã€‚</span><br><span class="line">    ç‰¹ç‚¹ï¼š</span><br><span class="line">    1)æ— è®ºéœ€è¦åŠ å¯†çš„æ–‡å­—å¤šé•¿å¤šçŸ­ï¼Œæ°¸è¿œæ˜¯32ä½ã€‚</span><br><span class="line">    2)å“ªæ€•åªæ”¹ä¸€ä¸ªå­—ï¼Œå¯†æ–‡éƒ½ä¼šå¤§å˜ã€‚</span><br><span class="line"></span><br><span class="line">nodeä¸­çš„åŠ å¯†ï¼š</span><br><span class="line">    å‰æï¼šnpm install crypto</span><br><span class="line">    let express = require(&#x27;express&#x27;);</span><br><span class="line">    let app = express();</span><br><span class="line">    let crypto = require(&#x27;crypto&#x27;);</span><br><span class="line"></span><br><span class="line">    app.get(&#x27;/&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">        // é€‰æ‹©åŠ å¯†æ–¹å¼ï¼Œä¸€èˆ¬æœ‰ï¼šsha1,md5,sha256,sha512</span><br><span class="line">        let md5 = crypto.createHash(&#x27;md5&#x27;);</span><br><span class="line">        let password = md5.update(&#x27;wq&#x27;).digest(&#x27;base64&#x27;);</span><br><span class="line">        res.send(&quot;åŠ å¯†ä¹‹åçš„å¯†ç ï¼š&quot;+password);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    app.listen(3000);</span><br></pre></td></tr></table></figure>

<h2 id="16-Mongoose"><a href="#16-Mongoose" class="headerlink" title="16.Mongoose"></a>16.Mongoose</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">ç®€ä»‹ï¼šæ˜¯ä¸€ä¸ªå°†JavaScriptå¯¹è±¡ä¸æ•°æ®åº“äº§ç”Ÿè”ç³»çš„æ¡†æ¶ã€‚Object Related Model(ORM:å¯¹è±¡å…³ç³»æ¨¡å‹)ã€‚æ“ä½œå¯¹è±¡å°±æ˜¯æ“ä½œæ•°æ®åº“</span><br><span class="line">   å‰æï¼šnpm install mongoose</span><br><span class="line">   ä¾‹å­demoï¼š</span><br><span class="line">       let mongoose = require(&#x27;mongoose&#x27;);</span><br><span class="line">       // è¿æ¥æ•°æ®åº“</span><br><span class="line">       mongoose.connect(&#x27;mongodb://127.0.0.1/animals&#x27;);</span><br><span class="line"></span><br><span class="line">       // åˆ›å»ºæ¨¡å‹ï¼šç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªç±»ï¼Œæ¯ä¸ªCatå®ä¾‹éƒ½æœ‰nameå’Œageå±æ€§ï¼Œåœ¨mongoä¸­ç›¸å½“äºæ–‡æ¡£</span><br><span class="line">       let Cat = mongoose.model(&#x27;cat&#x27;,&#123;name:String,age:Number&#125;);</span><br><span class="line"></span><br><span class="line">       // å®ä¾‹åŒ–</span><br><span class="line">       let Ketty = new Cat(&#123;name:&#x27;Ketty&#x27;,age:12&#125;);</span><br><span class="line"></span><br><span class="line">       // ä¿å­˜åˆ°æ•°æ®åº“</span><br><span class="line">       Ketty.save((err,result)=&gt;&#123;</span><br><span class="line">           console.log(err,result);</span><br><span class="line">       &#125;)</span><br><span class="line">   å°è£…å¢åˆ æ”¹æŸ¥ï¼š</span><br><span class="line">       å‰æï¼šåœ¨åŒä¸€ç›®å½•ä¸‹æ–°å»ºmodelsæ–‡ä»¶å¤¹å’Œapp.jsæ–‡ä»¶ï¼Œmodelsæ–‡ä»¶å¤¹ä¸‹æ–°å»ºdb.jså’Œstudent.js;</span><br><span class="line">       ä»£ç ï¼š</span><br><span class="line">           app.jsï¼š</span><br><span class="line">               let db = require(&#x27;./models/db&#x27;);</span><br><span class="line"></span><br><span class="line">               let Student = require(&#x27;./models/student&#x27;);</span><br><span class="line"></span><br><span class="line">               // æ·»åŠ æ–¹æ³•ä¸€ï¼š</span><br><span class="line">               let xiaoming = new Student(&#123;name:&#x27;å°æ˜&#x27;,age:18&#125;)</span><br><span class="line">               xiaoming.save(()=&gt;&#123;console.log(&#x27;æ·»åŠ å°æ˜æˆåŠŸï¼&#x27;)&#125;)</span><br><span class="line"></span><br><span class="line">               // æ·»åŠ æ–¹æ³•äºŒï¼š</span><br><span class="line">               Student.create(&#123;name:&#x27;å°çº¢&#x27;,age:20,sex:&#x27;å¥³&#x27;&#125;,()=&gt;&#123;console.log(&#x27;æ·»åŠ å°çº¢æˆåŠŸï¼&#x27;)&#125;);</span><br><span class="line"></span><br><span class="line">               // æŸ¥æ‰¾æ–¹æ³•ä¸€ï¼šåˆ©ç”¨è‡ªå®šä¹‰çš„é™æ€æ–¹æ³•æŸ¥æ‰¾</span><br><span class="line">               Student.findByName(&#x27;å°çº¢&#x27;,(err,result)=&gt;&#123;console.log(result)&#125;)</span><br><span class="line"></span><br><span class="line">               // æŸ¥æ‰¾æ–¹æ³•äºŒï¼š</span><br><span class="line">               Student.find(&#123;name:&#x27;å°çº¢&#x27;&#125;,(err,result)=&gt;&#123;console.log(result)&#125;);</span><br><span class="line"></span><br><span class="line">               // ä¿®æ”¹å°çº¢å¹´é¾„ä¸º30å²:è¿™é‡Œå¯ä»¥ä¸ç”¨æ·»åŠ $setä¸º&#123;$set:&#123;age:30&#125;&#125;</span><br><span class="line">               Student.updateOne(&#123;name:&#x27;å°çº¢&#x27;&#125;,&#123;age:30&#125;,(err,result)=&gt;&#123;console.log(result)&#125;)</span><br><span class="line"></span><br><span class="line">			// ä¿®æ”¹æ–¹æ³•äºŒ:</span><br><span class="line">               Student.find(&#123;name:&#x27;å°çº¢&#x27;&#125;,(err,result)=&gt;&#123;</span><br><span class="line">                   let xiaohong = result[0];</span><br><span class="line">                   xiaohong.age=30;</span><br><span class="line">                   xiaohong.save();</span><br><span class="line">               &#125;);</span><br><span class="line"></span><br><span class="line">               // åˆ é™¤å°çº¢</span><br><span class="line">               Student.deleteOne(&#123;name:&#x27;å°çº¢&#x27;&#125;,(err,result)=&gt;&#123;console.log(result)&#125;)</span><br><span class="line"></span><br><span class="line">               // ä½¿ç”¨å®ä¾‹æ–¹æ³•</span><br><span class="line">			let xiaoqiang = new Student(&#123;name:&#x27;å°å¼º&#x27;,age:22&#125;);</span><br><span class="line">			xiaoqiang.console();</span><br><span class="line">           db.jsï¼š</span><br><span class="line">               let mongoose = require(&#x27;mongoose&#x27;);</span><br><span class="line"></span><br><span class="line">               // åˆ›å»ºè¿æ¥ï¼Œç»™æ¯ä¸ªç”¨æˆ·éƒ½ä¼šåˆ›å»ºä¸€ä¸ªè¿æ¥</span><br><span class="line">               let db = mongoose.createConnection(&#x27;mongodb://127.0.0.1:27017/school&#x27;)</span><br><span class="line"></span><br><span class="line">               db.once(&#x27;open&#x27;,()=&gt;&#123;</span><br><span class="line">                   console.log(&#x27;æ•°æ®åº“è¿æ¥æˆåŠŸï¼&#x27;);</span><br><span class="line">               &#125;)</span><br><span class="line"></span><br><span class="line">               module.exports = db;</span><br><span class="line">           student.js:</span><br><span class="line">               let mongoose = require(&#x27;mongoose&#x27;);</span><br><span class="line">               let db = require(&#x27;./db&#x27;);</span><br><span class="line"></span><br><span class="line">               let studentSchema = new mongoose.Schema(&#123;</span><br><span class="line">                   name  : &#123;type:String&#125;,</span><br><span class="line">                   age   : &#123;type:Number&#125;,</span><br><span class="line">                   sex   : &#123;type:String,default:&#x27;ç”·&#x27;&#125;</span><br><span class="line">               &#125;)</span><br><span class="line"></span><br><span class="line">               // åˆ›å»ºæŸ¥è¯¢é™æ€æ–¹æ³•</span><br><span class="line">               studentSchema.statics.findByName = (name,callback) =&gt; &#123;</span><br><span class="line">                   db.model(&#x27;student&#x27;).find(&#123;name&#125;,callback);</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               /**</span><br><span class="line">               * åˆ›å»ºæ›´æ”¹é™æ€æ–¹æ³•</span><br><span class="line">               * conditionsï¼šä¿®æ”¹æ¡ä»¶</span><br><span class="line">               * dataï¼šæ”¹æˆdata</span><br><span class="line">               * options:å¯é€‰å‚æ•°ï¼Œå®ƒæœ‰å¦‚ä¸‹å±æ€§</span><br><span class="line">               *      safe ï¼šï¼ˆå¸ƒå°”å‹ï¼‰å®‰å…¨æ¨¡å¼ï¼ˆé»˜è®¤ä¸ºæ¶æ„ä¸­è®¾ç½®çš„å€¼ï¼ˆtrueï¼‰ï¼‰</span><br><span class="line">                       upsert ï¼šï¼ˆbooleanï¼‰å¦‚æœä¸åŒ¹é…ï¼Œæ˜¯å¦åˆ›å»ºæ–‡æ¡£ï¼ˆfalseï¼‰</span><br><span class="line">                       multi ï¼šï¼ˆbooleanï¼‰æ˜¯å¦åº”è¯¥æ›´æ–°å¤šä¸ªæ–‡æ¡£ï¼ˆfalseï¼‰</span><br><span class="line">                       runValidatorsï¼šå¦‚æœä¸ºtrueï¼Œåˆ™åœ¨æ­¤å‘½ä»¤ä¸Šè¿è¡Œæ›´æ–°éªŒè¯ç¨‹åºã€‚æ›´æ–°éªŒè¯å™¨æ ¹æ®æ¨¡å‹çš„æ¨¡å¼éªŒè¯æ›´æ–°æ“ä½œã€‚</span><br><span class="line">                       strictï¼šï¼ˆå¸ƒå°”ï¼‰è¦†ç›–strictæ­¤æ›´æ–°çš„é€‰é¡¹</span><br><span class="line">                       overwriteï¼š ï¼ˆå¸ƒå°”ï¼‰ç¦ç”¨åªæ›´æ–°æ¨¡å¼ï¼Œå…è®¸æ‚¨è¦†ç›–æ–‡æ¡£ï¼ˆfalseï¼‰</span><br><span class="line">               */</span><br><span class="line">               studentSchema.statics.update = (conditions,data,options,callback) =&gt; &#123;</span><br><span class="line">                   db.model(&#x27;student&#x27;).update(conditions,&#123;$set:data&#125;,options,callback);</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">			// å®šä¹‰å®ä¾‹æ–¹æ³•</span><br><span class="line">			studentSchema.methods.console = ()=&gt;&#123;</span><br><span class="line">			    console.log(&#x27;è¿™æ˜¯å®ä¾‹æ–¹æ³•&#x27;)</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">               let studentModel = db.model(&#x27;student&#x27;,studentSchema);</span><br><span class="line"></span><br><span class="line">               module.exports = studentModel;</span><br></pre></td></tr></table></figure>

<h2 id="17-WebSocket-å’Œ-Socket-IO-æ¡†æ¶"><a href="#17-WebSocket-å’Œ-Socket-IO-æ¡†æ¶" class="headerlink" title="17.WebSocket å’Œ Socket.IO æ¡†æ¶"></a>17.WebSocket å’Œ Socket.IO æ¡†æ¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">WebSocketå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä»¥å…¨åŒå·¥çš„æ–¹å¼è¿›è¡Œé€šä¿¡ï¼›WebSocketçš„åŸç†ï¼šåˆ©ç”¨HTTPè¯·æ±‚äº§ç”Ÿæ¡æ‰‹ä¹‹åï¼ŒäºŒè€…è½¬ç”¨TCPåè®®è¿›è¡Œäº¤æµ(QQåè®®)</span><br><span class="line"></span><br><span class="line">æ–¹æ³•ä¸€ï¼šåˆ©ç”¨socket.ioæ¨¡å—</span><br><span class="line">å‰æï¼šnpm install socket.io</span><br><span class="line">æ¨¡æ‹Ÿwebsocketï¼š</span><br><span class="line">    å‰ç«¯ä»£ç studyWebsocket.html:</span><br><span class="line">        &lt;h1&gt;æ¨¡æ‹Ÿwebsocket&lt;/h1&gt;</span><br><span class="line">        &lt;input id=&#x27;content&#x27; /&gt;&lt;button id=&#x27;send&#x27;&gt;å‘é€&lt;/button&gt;</span><br><span class="line">        &lt;script src=&quot;https://cdn.bootcss.com/socket.io/2.2.0/socket.io.dev.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script&gt;</span><br><span class="line">            var socket = io.connect(&#x27;http://127.0.0.1:3000&#x27;);</span><br><span class="line">            document.getElementById(&#x27;send&#x27;).onclick = ()=&gt;&#123;</span><br><span class="line">                socket.emit(&#x27;question&#x27;,document.getElementById(&#x27;content&#x27;).value);</span><br><span class="line">            &#125;</span><br><span class="line">            socket.on(&#x27;answer&#x27;,data=&gt;console.log(data));</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    Nodeä»£ç ï¼š</span><br><span class="line">    	(</span><br><span class="line">			å¦‚æœä½¿ç”¨expressæ¡†æ¶ï¼š</span><br><span class="line">				const express = require(&#x27;express&#x27;);</span><br><span class="line">				const app = express();</span><br><span class="line">				let server = require(&#x27;http&#x27;).createServer(app);</span><br><span class="line">				let io = require(&#x27;socket.io&#x27;)(server);</span><br><span class="line">		)</span><br><span class="line">        let http = require(&#x27;http&#x27;);</span><br><span class="line">        let fs = require(&#x27;fs&#x27;);</span><br><span class="line"></span><br><span class="line">        let server = http.createServer((req,res)=&gt;&#123;</span><br><span class="line">            if (req.url == &#x27;/&#x27;) &#123;</span><br><span class="line">                fs.readFile(&#x27;./studyWebsocket.html&#x27;,(err,data)=&gt;&#123;</span><br><span class="line">                    res.end(data);</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        let io = require(&#x27;socket.io&#x27;)(server);</span><br><span class="line"></span><br><span class="line">        // ç›‘å¬è¿æ¥äº‹ä»¶</span><br><span class="line">        // å¯¹äºå‰ç«¯å’Œåç«¯çš„socketå¯¹è±¡ï¼Œéƒ½æœ‰emitå’Œonæ–¹æ³•ï¼Œemitå‘é€è¯·æ±‚ï¼Œonæ¥å—è¯·æ±‚</span><br><span class="line">        io.on(&#x27;connection&#x27;,socket=&gt;&#123;</span><br><span class="line">            socket.on(&#x27;question&#x27;,data=&gt;&#123;</span><br><span class="line">                socket.emit(&#x27;answer&#x27;,data);</span><br><span class="line">            &#125;)</span><br><span class="line">            // å¹¿æ’­ï¼šæ‰€æœ‰è¿æ¥åˆ°æ­¤websocketä¸Šæ¥çš„ç”¨æˆ·ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªç”¨æˆ·å‘èµ·thankè¯·æ±‚ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½èƒ½å¾—åˆ°å›åº”</span><br><span class="line">            io.emit(&#x27;broadcast&#x27;,&#123;&#x27;say&#x27;:&#x27;è°¢è°¢&#x27;&#125;);</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        server.listen(3000,&#x27;127.0.0.1&#x27;);</span><br><span class="line"></span><br><span class="line">æ–¹æ³•äºŒï¼šåˆ©ç”¨wsæ¨¡å—</span><br><span class="line">		å‰ç«¯ä»£ç ï¼š</span><br><span class="line">			&lt;h1&gt;æ¨¡æ‹Ÿwebsocket&lt;/h1&gt;</span><br><span class="line">		    &lt;input id=&#x27;content&#x27; /&gt;&lt;button id=&#x27;send&#x27;&gt;å‘é€&lt;/button&gt;</span><br><span class="line">		    &lt;script&gt;</span><br><span class="line">		        var ws = new WebSocket(&#x27;ws://127.0.0.1:3000&#x27;);</span><br><span class="line">		        ws.addEventListener(&#x27;open&#x27;,()=&gt;&#123;</span><br><span class="line">		            ws.send(&#x27;è¿æ¥æˆåŠŸ...&#x27;);</span><br><span class="line">		        &#125;)</span><br><span class="line">		        document.getElementById(&#x27;send&#x27;).onclick = ()=&gt;&#123;</span><br><span class="line">		            // ç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ªå­—ç¬¦ä¸²:</span><br><span class="line">		            ws.send(document.getElementById(&#x27;content&#x27;).value);</span><br><span class="line">		        &#125;</span><br><span class="line">		        ws.onmessage = result=&gt;&#123;</span><br><span class="line">		            console.log(result.data);</span><br><span class="line">		        &#125;</span><br><span class="line">		    &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">		nodeä»£ç ï¼š</span><br><span class="line">			const WebSocket = require(&#x27;ws&#x27;);</span><br><span class="line">			// å®ä¾‹åŒ–:</span><br><span class="line">			const wss = new WebSocket.Server(&#123;</span><br><span class="line">			    port: 3000</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			// ç›‘å¬è¿æ¥äº‹ä»¶</span><br><span class="line">			wss.on(&#x27;connection&#x27;,(ws)=&gt;&#123;</span><br><span class="line">			    // æ¥å—å¯¹æ–¹å‘é€è¿‡æ¥çš„ä¿¡æ¯</span><br><span class="line">			    ws.on(&#x27;message&#x27;,data=&gt;&#123;</span><br><span class="line">			        ws.send(data);</span><br><span class="line">			    &#125;)</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/angular%E5%92%8Cvue%E8%BF%98%E6%9C%89jquery%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/angular%E5%92%8Cvue%E8%BF%98%E6%9C%89jquery%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">angularå’Œvueè¿˜æœ‰jqueryçš„åŒºåˆ«</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:18:06 / ä¿®æ”¹æ—¶é—´ï¼š14:20:14" itemprop="dateCreated datePublished" datetime="2022-12-16T14:18:06+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯æ¡†æ¶æ€»ç»“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="angularjs-ç®€å•ä»‹ç»å’Œç‰¹ç‚¹"><a href="#angularjs-ç®€å•ä»‹ç»å’Œç‰¹ç‚¹" class="headerlink" title="angularjs ç®€å•ä»‹ç»å’Œç‰¹ç‚¹"></a>angularjs ç®€å•ä»‹ç»å’Œç‰¹ç‚¹</h2><p>é¦–å…ˆ angular æ˜¯ä¸€ä¸ª mvc æ¡†æ¶, ä½¿ç”¨ mvc è§£è€¦, é‡‡ç”¨ model, controller ä»¥åŠ view çš„æ–¹å¼å»ç»„ç»‡ä»£ç , ä¼šå°†ä¸€ä¸ª html é¡µé¢åˆ†æˆè‹¥å¹²ä¸ªæ¨¡å—, æ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ scope, service, directive, å„ä¸ªæ¨¡å—ä¹‹é—´ä¹Ÿå¯ä»¥è¿›è¡Œé€šä¿¡, ä½†æ˜¯æ•´ä½“ç»“æ„ä¸Šæ˜¯æ¯”è¾ƒæ¸…æ™°çš„, å°±æ˜¯è¯´å…¶ä»£ç ç»„ç»‡æ˜¯æ¨¡å—åŒ–çš„, angular çš„ view å¯èƒ½ä»…ä»…æ˜¯ä¸€ä¸ªæ¡†æ¶, , å¯¹ view çš„ dom æ“ä½œæˆ–è€…äº‹ä»¶ç›‘å¬éƒ½æ˜¯åœ¨ directive ä¸­å®ç°çš„, è€Œä¸”ä¸€èˆ¬æƒ…å†µä¸‹å¾ˆå°‘ç›´æ¥å»å†™ dom æ“ä½œä»£ç , åªè¦ä½ ç›‘å¬ model, model å‘ç”Ÿå˜åŒ–å view ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–, å°±æ˜¯åŒå‘ç»‘å®šæœºåˆ¶, angularjs é€‚ç”¨äºå•é¡µé¢å¼€å‘</p>
<p>åœ¨ angularJS ä¸­ï¼Œä¸€ä¸ªæ¨¡æ¿å°±æ˜¯ä¸€ä¸ª HTML æ–‡ä»¶ã€‚ä½†æ˜¯ HTML çš„å†…å®¹æ‰©å±•äº†ï¼ŒåŒ…å«äº†å¾ˆå¤šå¸®åŠ©ä½ æ˜ å°„ model åˆ° view çš„å†…å®¹ã€‚</p>
<p>HTML æ¨¡æ¿å°†ä¼šè¢«æµè§ˆå™¨è§£æåˆ° DOM ä¸­ã€‚DOM ç„¶åæˆä¸º AngularJS ç¼–è¯‘å™¨çš„è¾“å…¥ã€‚AngularJS å°†ä¼šéå† DOM æ¨¡æ¿æ¥ç”Ÿæˆä¸€äº›æŒ‡å¯¼ï¼Œå³ï¼Œdirectiveï¼ˆæŒ‡ä»¤ï¼‰ã€‚æ‰€æœ‰çš„æŒ‡ä»¤éƒ½è´Ÿè´£é’ˆå¯¹ view æ¥è®¾ç½®æ•°æ®ç»‘å®šã€‚</p>
<p>angularJS å¹¶ä¸æŠŠæ¨¡æ¿å½“åš String æ¥æ“ä½œã€‚è¾“å…¥ angularJS çš„æ˜¯ DOM è€Œé stringã€‚æ•°æ®ç»‘å®šæ˜¯ DOM å˜åŒ–ï¼Œä¸æ˜¯å­—ç¬¦ä¸²çš„è¿æ¥æˆ–è€… innerHTML å˜åŒ–ã€‚ä½¿ç”¨ DOM ä½œä¸ºè¾“å…¥ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼Œæ˜¯ AngularJS åŒºåˆ«äºå…¶å®ƒçš„æ¡†æ¶çš„æœ€å¤§åŸå› ã€‚ä½¿ç”¨ DOM å…è®¸ä½ æ‰©å±•æŒ‡ä»¤è¯æ±‡å¹¶ä¸”å¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„æŒ‡ä»¤ï¼Œç”šè‡³å¼€å‘å¯é‡ç”¨çš„ç»„ä»¶ã€‚angular å ç”¨çš„å†…å­˜è¾ƒå°, å¯ä»¥å…¼å®¹ä¸»æµçš„æµè§ˆå™¨, ä»–æ‹¥æœ‰å†…ç½®çš„ä¾èµ–æ³¨å…¥çš„å­ç³»ç»Ÿ, å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜æ›´å®¹æ˜“å¼€å‘, ç†è§£å’Œæµ‹è¯•å’Œåº”ç”¨, DI å…è®¸ä½ è¯·æ±‚ä½ çš„ä¾èµ–ï¼Œè€Œä¸æ˜¯è‡ªå·±æ‰¾å¯»å®ƒä»¬ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸œè¥¿ï¼ŒDI è´Ÿè´£æ‰¾åˆ›å»ºå¹¶ä¸”æä¾›ç»™æˆ‘ä»¬ã€‚é‚£ä¹ˆ AngularJS å¯ä»¥åšåˆ°ã€‚æŒ‡ä»¤å¯ä»¥ç”¨æ¥åˆ›å»ºè‡ªå®šä¹‰çš„æ ‡ç­¾ã€‚å®ƒä»¬å¯ä»¥ç”¨æ¥è£…é¥°å…ƒç´ æˆ–è€…æ“ä½œ DOM å±æ€§ã€‚</p>
<h2 id="vuejs-ç®€å•ä»‹ç»ç‰¹ç‚¹"><a href="#vuejs-ç®€å•ä»‹ç»ç‰¹ç‚¹" class="headerlink" title="vuejs ç®€å•ä»‹ç»ç‰¹ç‚¹"></a>vuejs ç®€å•ä»‹ç»ç‰¹ç‚¹</h2><p>å®˜ç½‘: <a target="_blank" rel="noopener" href="http://cn.vuejs.org/">http://cn.vuejs.org/</a></p>
<p>vue æ˜¯ä¸€ä¸ªæ¸è¿›å¼çš„æ¡†æ¶, æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ¡†æ¶, ä¹Ÿä¸ç®—æ˜¯ä¸€ä¸ªæ¡†æ¶, ä»–æ ¸å¿ƒåªå…³æ³¨å›¾å±‚, æ˜¯ä¸€ä¸ªæ„å»ºæ•°æ®é©±åŠ¨çš„ web ç•Œé¢,æ˜“äºä¸Šæ‰‹, è¿˜ä¾¿äºç¬¬ä¸‰æ–¹åº“æˆ–ä¸æ—¢æœ‰é¡¹ç›®æ•´åˆ,ä¹Ÿèƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨ç¨‹åºæä¾›é©±åŠ¨</p>
<h3 id="1-vue-çš„æ ¸å¿ƒ"><a href="#1-vue-çš„æ ¸å¿ƒ" class="headerlink" title="1. vue çš„æ ¸å¿ƒ"></a>1. vue çš„æ ¸å¿ƒ</h3><p>æ˜¯ä¸€ä¸ªå…è®¸é‡‡ç”¨ç®€æ´çš„æ¨¡æ¿è¯­æ³•æ¥å£°æ˜å¼çš„å°†æ•°æ®æ¸²æŸ“è¿› dom</p>
<p>å…ˆåˆ›å»ºä¸€ä¸ªåç¼€åä¸º.html çš„æ–‡ä»¶</p>
<p>ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">html:  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">jsé‡Œé¢çš„ã€€var app = new Vue(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€el: &#x27;#app&#x27;,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€data: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€msg: &#x27;Hello Vue!&#x27;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€ã€€&#125;)</span><br></pre></td></tr></table></figure>

<p>åœ¨æµè§ˆå™¨çª—å£ä¸Šå‡ºç°çš„å†…å®¹:ã€€ Hello Vue<br>æ•°æ®å’Œ DOM å·²ç»ç»‘å®šåœ¨ä¸€èµ·, éªŒè¯æ˜¯å¦æ˜¯å“åº”å¼çš„, ä¿®æ”¹æ§åˆ¶å°é‡Œé¢ app.msg,ä½ å°±ä¼šçœ‹åˆ°ä¸Šé¢æ¸²æŸ“æ˜¯åˆ—å­ä¹Ÿæ›´æ–°å‡ºæ¥äº†æ–‡æœ¬æ’å€¼, è¿˜å¯ä»¥ç”¨ç»‘å®š DOM å…ƒç´ å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app-2&quot;&gt;</span><br><span class="line">    &lt;span v-bind:title=&quot;message&quot;&gt;</span><br><span class="line">ã€€ã€€ã€€æŸ¥çœ‹æ­¤å¤„åŠ¨æ€ç»‘å®šæç¤ºä¿¡æ¯ï¼</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">jsä»£ç :</span><br><span class="line">var app2 = new Vue(&#123;</span><br><span class="line">ã€€ã€€el: &#x27;#app-2&#x27;,</span><br><span class="line">ã€€ã€€data: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€message: &#x27;é¡µé¢åŠ è½½äº &#x27; + new Date()</span><br><span class="line">ã€€ã€€ã€€&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="2-vue-æŒ‡ä»¤"><a href="#2-vue-æŒ‡ä»¤" class="headerlink" title="2. vue æŒ‡ä»¤"></a>2. vue æŒ‡ä»¤</h3><p>æŒ‡ä»¤å¸¦æœ‰å‰ç¼€ v-, ä»¥è¡¨ç¤ºä»–ä»¬æ˜¯ Vue æä¾›çš„ç‰¹æ®Šå±æ€§, ä»–ä»¬ä¼šåœ¨æ¸²æŸ“çš„ DOM ä¸Šåº”ç”¨ç‰¹æ®Šçš„å“åº”å¼è¡Œä¸º</p>
<p>v-bind : str &#x3D; â€œmsgâ€ å°†è¿™ä¸ªå…ƒç´ çš„èŠ‚ç‚¹çš„ str å±æ€§å’Œ vue å®ä¾‹å¯¹è±¡çš„ msg å±æ€§ä¿æŒä¸€è‡´</p>
<p>v-if &#x3D; å¸ƒå°”å€¼ æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤, æ ¹æ®å…¶åè¡¨è¾¾å¼çš„å¸ƒå°”å€¼è¿›è¡Œåˆ¤æ–­æ˜¯å¦æ¸²æŸ“è¯¥å…ƒç´ , v-if åªä¼šæ¸²æŸ“ä»–èº«åè¡¨è¾¾å¼ä¸º true çš„å…ƒç´ </p>
<p>v-show &#x3D; å¸ƒå°”å€¼ å’Œ v-if ç±»ä¼¼,åªæ˜¯ä¼šæ¸²æŸ“ä»–èº«åè¡¨è¾¾å¼ä¸º false çš„å…ƒç´ , è€Œä¸”ä¼šç»™è¿™æ ·çš„å…ƒç´ æ·»åŠ  css çš„ä»£ç , style &#x3D; â€œdisplay:noneâ€</p>
<p>v-else å¿…é¡»åœ¨ v-if&#x2F;v-show æŒ‡ä»¤å, ä¸ç„¶å°±ä¸ä¼šèµ·ä½œç”¨, å¦‚æœ v-if&#x2F;v-show çš„æŒ‡ä»¤è¡¨è¾¾å¼ä¸º true, åˆ™ else å°±ä¸æ˜¾ç¤º, å¦‚æœ v-if&#x2F;v-show æŒ‡ä»¤çš„è¡¨è¾¾å¼ä¸º false, åˆ™ else å…ƒç´ ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</p>
<p>v-for ç±»ä¼¼äº js çš„éå†, ç”¨æ³•ä¸º v-for&#x3D;â€(item,index) in imgsâ€ :key&#x3D;â€indexâ€, items æ˜¯æ•°ç»„, item ä¸ºæ•°ç»„ä¸­çš„æ•°ç»„å…ƒç´ , index æ˜¯ç´¢å¼•å·, key æ˜¯ä¸ºäº†æ›´é«˜æ•ˆçš„æŸ¥æ‰¾åˆ°æŒ‡å®šå…ƒç´ </p>
<p>v-on ç”¨äºç›‘å¬æŒ‡å®šå…ƒç´ çš„ DOM äº‹ä»¶ v-on:click&#x3D;â€greetâ€</p>
<h3 id="3-vue-çš„åŒå‘æ•°æ®ç»‘å®š"><a href="#3-vue-çš„åŒå‘æ•°æ®ç»‘å®š" class="headerlink" title="3. vue çš„åŒå‘æ•°æ®ç»‘å®š"></a>3. vue çš„åŒå‘æ•°æ®ç»‘å®š</h3><p>vueJS æ˜¯ä½¿ç”¨ ES5 æä¾›çš„ Object.defineProperty()æ–¹æ³•, ç›‘æ§å¯¹æ•°æ®çš„æ“ä½œ, ä»è€Œå¯ä»¥è‡ªåŠ¨è§¦å‘æ•°æ®, å¹¶ä¸”, ç”±äºæ˜¯åœ¨ä¸åŒçš„æ•°æ®ä¸Šè§¦å‘åŒæ­¥, å¯ä»¥ç²¾ç¡®çš„å°†å˜æ›´å‘é€ç»™ç»‘å®šçš„è§†å›¾, è€Œä¸æ˜¯å¯¹æ‰€æœ‰çš„æ•°æ®éƒ½æ‰§è¡Œä¸€æ¬¡æ£€æµ‹</p>
<p>vue å’Œ angular ä¸­, éƒ½æ˜¯é€šè¿‡åœ¨ html ä¸­æ·»åŠ æŒ‡ä»¤çš„æ–¹å¼, å°†è§†å›¾å…ƒç´ ä¸æ•°æ®çš„ç»‘å®šå…³ç³»è¿›è¡Œå£°æ˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id= &quot;app&quot;&gt;</span><br><span class="line">ã€€ã€€&lt;input type=&quot;test&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šçš„ html ä»£ç è¡¨ç¤ºè¯¥ input å…ƒç´ ä¸ name æ•°æ®è¿›è¡Œç»‘å®š, åœ¨ js ä»£ç æ€»å¯ä»¥è¿™æ ·è¿›è¡Œåˆå§‹åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">ã€€ã€€el: &quot;#app&quot;,</span><br><span class="line">ã€€ã€€data:&#123;</span><br><span class="line">ã€€ã€€ã€€name: &quot;è¯·è¾“å…¥ä½ çš„åå­—&quot;</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä»£ç æ‰§è¡Œæ­£ç¡®å, é¡µé¢ä¸Š input å…ƒç´ å¯¹åº”çš„ä½ç½®ä¼šæ˜¾ç¤ºä¸Šé¢çš„ä»£ç ç»™å‡ºçš„åˆå§‹å€¼ â€œè¯·è¾“å…¥ä½ çš„åå­—â€, ç”±äºåŒå‘ç»‘å®šæ•°æ®å·²ç»å»ºç«‹, å› æ­¤, åœ¨ vm.name&#x3D;â€å°ç±³â€, åˆ™ input ä¹Ÿä¼šæ›´æ–°ä¸ºå°æ˜, åœ¨é¡µé¢ input ä¸Šè¾“å…¥å°æ˜, åˆ™ vm.name è·å–çš„å€¼ä¸ºå°æ˜</p>
<h3 id="4-vue-çš„æ’ä»¶åŒ–"><a href="#4-vue-çš„æ’ä»¶åŒ–" class="headerlink" title="4. vue çš„æ’ä»¶åŒ–"></a>4. vue çš„æ’ä»¶åŒ–</h3><p>æ’ä»¶é€šå¸¸ä¼šä¸º vue æ·»åŠ å…¨å±€åŠŸèƒ½, æ’ä»¶çš„èŒƒå›´æ²¡æœ‰é™åˆ¶</p>
<p>æ·»åŠ å…¨å±€çš„æ–¹æ³•æˆ–è€…å±æ€§ vue-element è¿™ä¸ªæˆ‘å¹¶ä¸æ˜¯å¾ˆæ‡‚</p>
<p>æ·»åŠ å…¨å±€èµ„æº æŒ‡ä»¤&#x2F;è¿‡æ»¤å™¨&#x2F; è¿‡æ¸¡</p>
<p>æ·»åŠ  vue å®ä¾‹çš„åŠæ³•, å°†ä»–ä»¬æ·»åŠ åˆ° vue-prototype ä¸Šå®ç°</p>
<p>å¼•å…¥ä¸€ä¸ªåº“, æ¥æä¾›è‡ªå·±çš„ api, åŒæ—¶æä¾›ä¸Šé¢çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªåŠŸèƒ½, å¦‚ vue-router</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import vueRouter from &#x27;&#x27;vue-router&#x27;;  //ä½¿ç”¨webpackçš„å•æ–‡ä»¶ç»„ä»¶æ‰“åŒ…çš„æ–¹å¼ ä¼šè°ƒç”¨vue.componentæ¥æ³¨å†Œå…¨å±€ç»„ä»¶æˆ–è€…vue.componentsæ³¨å†Œå±€éƒ¨ç»„ä»¶</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯åè€…ï¼Œæ¯ä¸ªå•æ–‡ä»¶ç»„ä»¶ä¸­éƒ½ä¸éœ€è¦å¼•å…¥ vue,<br>å› ä¸ºå•æ–‡ä»¶ç»„ä»¶ç» webpack æ‰“åŒ…åï¼Œç”Ÿæˆçš„æ¨¡å—åªæ˜¯ä¸€ä¸ªç»„ä»¶é€‰é¡¹å¯¹è±¡ï¼Œè¢«å…¶ä»–ç»„ä»¶æˆ– Vue å®ä¾‹æ³¨å†Œæ—¶ä½¿ç”¨è¯­æ³•ç³–ï¼Œåªéœ€è¦ å­—é¢é‡å¯¹è±¡çš„ ç»„ä»¶é€‰é¡¹å¯¹è±¡å°±å¯ä»¥äº†ã€‚</p>
<p>ä½¿ç”¨æ’ä»¶:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue.use(vueRouter); //é€šè¿‡å…¨å±€æ–¹æ³•Vue.use()ä½¿ç”¨æ’ä»¶, ä¼šé˜»æ­¢æ³¨å†Œç›¸åŒæ’ä»¶å¤šæ¬¡, åªä¼šæ³¨å†Œä¸€æ¬¡è¯¥æ’ä»¶</span><br></pre></td></tr></table></figure>



<h2 id="angular-å’Œ-jquery-çš„åŒºåˆ«"><a href="#angular-å’Œ-jquery-çš„åŒºåˆ«" class="headerlink" title="angular å’Œ jquery çš„åŒºåˆ«"></a>angular å’Œ jquery çš„åŒºåˆ«</h2><p>angular ä¸­æ˜¯å°½é‡é¿å…æ“ä½œ DOM, angular æ˜¯åŸºäºæ•°æ®é©±åŠ¨, é€‚åˆåšæ•°æ®æ“ä½œæ¯”è¾ƒç¹ççš„é¡¹ç›®,angular é€‚ç”¨äºå•é¡µé¢å¼€å‘,æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®Œå–„çš„ mvvm æ¡†æ¶, åŒ…å«æ¨¡æ¿å’ŒåŒå‘æ•°æ®ç»‘å®š, è·¯ç”±, æ¨¡å—åŒ–, æœåŠ¡, è¿‡æ»¤å™¨, ä¾èµ–æ³¨å…¥ç­‰æ‰€æœ‰åŠŸèƒ½,ä½†æ˜¯ angular éªŒè¯åŠŸèƒ½æ¯”è¾ƒè–„å¼±, éœ€è¦å†™å¾ˆå¤šæ¨¡æ¿æ ‡ç­¾, è€Œä¸” ngview åªèƒ½æœ‰ä¸€ä¸ª, ä¸èƒ½åµŒå¥—å¤šä¸ªè§†å›¾,angular çš„å…¼å®¹æ€§æ¯”è¾ƒå¥½, jquery æ˜¯åŸºäºæ“ä½œ DOM, é€‚ç”¨äºæ“ä½œ DOM æ¯”è¾ƒå¤šçš„é¡¹ç›®, jquery æ˜¯ä¸€ä¸ªåº“, æ¯”è¾ƒå¤§,å…¼å®¹å¤§éƒ¨åˆ†æµè§ˆå™¨, æœ‰ä¸°å¯Œçš„æ’ä»¶, å¯æ‹“å±•æ€§å¼º, jquery ä¸èƒ½å‘åå…¼å®¹, ä½¿ç”¨æ’ä»¶æ—¶,å¯èƒ½ä¼šæœ‰å†²çª,</p>
<h2 id="angular-å’Œ-vue-çš„å·®åˆ«"><a href="#angular-å’Œ-vue-çš„å·®åˆ«" class="headerlink" title="angular å’Œ vue çš„å·®åˆ«"></a>angular å’Œ vue çš„å·®åˆ«</h2><p>ä¸€ angular æ˜¯ mvvm æ¡†æ¶, è€Œ vue æ˜¯ä¸€ä¸ªæ¸è¿›å¼çš„æ¡†æ¶, ç›¸å½“äº view å±‚, éƒ½æœ‰åŒå‘æ•°æ®ç»‘å®š, ä½†æ˜¯ angular ä¸­çš„åŒå‘æ•°æ®ç»‘å®šæ˜¯åŸºäºè„æ£€æŸ¥æœºåˆ¶, vue çš„åŒå‘æ•°æ®ç»‘å®šæ˜¯åŸºäº ES5 çš„ getter å’Œ setter æ¥å®ç°, è€Œ angular æ˜¯æœ‰è‡ªå·±å®ç°ä¸€å¥—æ¨¡æ¿ç¼–è¯‘è§„åˆ™,vue æ¯” angular æ›´è½»é‡, æ€§èƒ½ä¸Šæ›´é«˜æ•ˆ, æ¯” angular æ›´å®¹æ˜“ä¸Šæ‰‹, å­¦ä¹ æˆæœ¬ä½, vue éœ€è¦ä¸€ä¸ª el å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–, è€Œ angular æ˜¯æ•´ä¸ª html é¡µé¢ä¸‹çš„,å•é¡µé¢åº”ç”¨, è€Œ vue å¯ä»¥æœ‰å¤šä¸ª vue å®ä¾‹</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/TypeScript%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/TypeScript%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/" class="post-title-link" itemprop="url">TypeScriptçš„ä½¿ç”¨æŠ€å·§</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:17:58 / ä¿®æ”¹æ—¶é—´ï¼š14:23:00" itemprop="dateCreated datePublished" datetime="2022-12-16T14:17:58+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯æ¡†æ¶æ€»ç»“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ä¸€ã€Enum-ç±»å‹"><a href="#ä¸€ã€Enum-ç±»å‹" class="headerlink" title="ä¸€ã€Enum ç±»å‹"></a>ä¸€ã€Enum ç±»å‹</h1><p>ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦åå­—çš„å¸¸é‡ã€‚ ä½¿ç”¨æšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚ TypeScript æ”¯æŒæ•°å­—çš„å’ŒåŸºäºå­—ç¬¦ä¸²çš„æšä¸¾ã€‚</p>
<h2 id="1-æ•°å­—æšä¸¾"><a href="#1-æ•°å­—æšä¸¾" class="headerlink" title="1.æ•°å­—æšä¸¾"></a>1.æ•°å­—æšä¸¾</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  NORTH,</span><br><span class="line">  SOUTH,</span><br><span class="line">  EAST,</span><br><span class="line">  WEST,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let dir: Direction = Direction.NORTH;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNORTH çš„åˆå§‹å€¼ä¸º 0ï¼Œå…¶ä½™çš„æˆå‘˜ä¼šä» 1 å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚æ¢å¥è¯è¯´ï¼ŒDirection.SOUTH çš„å€¼ä¸º 1ï¼ŒDirection.EAST çš„å€¼ä¸º 2ï¼ŒDirection.WEST çš„å€¼ä¸º 3ã€‚ä¸Šé¢çš„æšä¸¾ç¤ºä¾‹ä»£ç ç»è¿‡ç¼–è¯‘åä¼šç”Ÿæˆä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&quot;use strict&quot;;</span><br><span class="line">var Direction;</span><br><span class="line">(function (Direction) &#123;</span><br><span class="line">  Direction[(Direction[&quot;NORTH&quot;] = 0)] = &quot;NORTH&quot;;</span><br><span class="line">  Direction[(Direction[&quot;SOUTH&quot;] = 1)] = &quot;SOUTH&quot;;</span><br><span class="line">  Direction[(Direction[&quot;EAST&quot;] = 2)] = &quot;EAST&quot;;</span><br><span class="line">  Direction[(Direction[&quot;WEST&quot;] = 3)] = &quot;WEST&quot;;</span><br><span class="line">&#125;)(Direction || (Direction = &#123;&#125;));</span><br><span class="line">var dir = Direction.NORTH;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½® NORTH çš„åˆå§‹å€¼ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  NORTH = 3,</span><br><span class="line">  SOUTH,</span><br><span class="line">  EAST,</span><br><span class="line">  WEST,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-å­—ç¬¦ä¸²æšä¸¾"><a href="#2-å­—ç¬¦ä¸²æšä¸¾" class="headerlink" title="2.å­—ç¬¦ä¸²æšä¸¾"></a>2.å­—ç¬¦ä¸²æšä¸¾</h2><p>åœ¨ TypeScript 2.4 ç‰ˆæœ¬ï¼Œå…è®¸æˆ‘ä»¬ä½¿ç”¨å­—ç¬¦ä¸²æšä¸¾ã€‚åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  NORTH = &quot;NORTH&quot;,</span><br><span class="line">  SOUTH = &quot;SOUTH&quot;,</span><br><span class="line">  EAST = &quot;EAST&quot;,</span><br><span class="line">  WEST = &quot;WEST&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç å¯¹äºçš„ ES5 ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&quot;use strict&quot;;</span><br><span class="line">var Direction;</span><br><span class="line">(function (Direction) &#123;</span><br><span class="line">    Direction[&quot;NORTH&quot;] = &quot;NORTH&quot;;</span><br><span class="line">    Direction[&quot;SOUTH&quot;] = &quot;SOUTH&quot;;</span><br><span class="line">    Direction[&quot;EAST&quot;] = &quot;EAST&quot;;</span><br><span class="line">    Direction[&quot;WEST&quot;] = &quot;WEST&quot;;</span><br><span class="line">&#125;)(Direction || (Direction = &#123;&#125;));</span><br></pre></td></tr></table></figure>

<h2 id="3-å¼‚æ„æšä¸¾"><a href="#3-å¼‚æ„æšä¸¾" class="headerlink" title="3.å¼‚æ„æšä¸¾"></a>3.å¼‚æ„æšä¸¾</h2><p>å¼‚æ„æšä¸¾çš„æˆå‘˜å€¼æ˜¯æ•°å­—å’Œå­—ç¬¦ä¸²çš„æ··åˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">enum Enum &#123;</span><br><span class="line">  A,</span><br><span class="line">  B,</span><br><span class="line">  C = &quot;C&quot;,</span><br><span class="line">  D = &quot;D&quot;,</span><br><span class="line">  E = 8,</span><br><span class="line">  F,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç å¯¹äºçš„ ES5 ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&quot;use strict&quot;;</span><br><span class="line">var Enum;</span><br><span class="line">(function (Enum) &#123;</span><br><span class="line">    Enum[Enum[&quot;A&quot;] = 0] = &quot;A&quot;;</span><br><span class="line">    Enum[Enum[&quot;B&quot;] = 1] = &quot;B&quot;;</span><br><span class="line">    Enum[&quot;C&quot;] = &quot;C&quot;;</span><br><span class="line">    Enum[&quot;D&quot;] = &quot;D&quot;;</span><br><span class="line">    Enum[Enum[&quot;E&quot;] = 8] = &quot;E&quot;;</span><br><span class="line">    Enum[Enum[&quot;F&quot;] = 9] = &quot;F&quot;;</span><br><span class="line">&#125;)(Enum || (Enum = &#123;&#125;));</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è§‚å¯Ÿä¸Šè¿°ç”Ÿæˆçš„ ES5 ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æ•°å­—æšä¸¾ç›¸å¯¹å­—ç¬¦ä¸²æšä¸¾å¤šäº† â€œåå‘æ˜ å°„â€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(Enum.A) //è¾“å‡ºï¼š0</span><br><span class="line">console.log(Enum[0]) // è¾“å‡ºï¼šA</span><br></pre></td></tr></table></figure>

<h1 id="äºŒã€ç‰¹æ®Šæ•°æ®ç±»å‹"><a href="#äºŒã€ç‰¹æ®Šæ•°æ®ç±»å‹" class="headerlink" title="äºŒã€ç‰¹æ®Šæ•°æ®ç±»å‹"></a>äºŒã€ç‰¹æ®Šæ•°æ®ç±»å‹</h1><h2 id="1-Unknown-ç±»å‹"><a href="#1-Unknown-ç±»å‹" class="headerlink" title="1. Unknown ç±»å‹"></a>1. Unknown ç±»å‹</h2><p>å°±åƒæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™ anyï¼Œæ‰€æœ‰ç±»å‹ä¹Ÿéƒ½å¯ä»¥èµ‹å€¼ç»™ unknownã€‚è¿™ä½¿å¾— unknown æˆä¸º TypeScript ç±»å‹ç³»ç»Ÿçš„å¦ä¸€ç§é¡¶çº§ç±»å‹ï¼ˆå¦ä¸€ç§æ˜¯ anyï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ unknown ç±»å‹çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let value: unknown;</span><br><span class="line"></span><br><span class="line">value = true; // OK</span><br><span class="line">value = 42; // OK</span><br><span class="line">value = &quot;Hello World&quot;; // OK</span><br><span class="line">value = []; // OK</span><br><span class="line">value = &#123;&#125;; // OK</span><br><span class="line">value = Math.random; // OK</span><br><span class="line">value = null; // OK</span><br><span class="line">value = undefined; // OK</span><br><span class="line">value = new TypeError(); // OK</span><br><span class="line">value = Symbol(&quot;type&quot;); // OK</span><br></pre></td></tr></table></figure>

<p>å¯¹ <code>value</code> å˜é‡çš„æ‰€æœ‰èµ‹å€¼éƒ½è¢«è®¤ä¸ºæ˜¯ç±»å‹æ­£ç¡®çš„ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬å°è¯•å°†ç±»å‹ä¸º <code>unknown</code> çš„å€¼èµ‹å€¼ç»™å…¶ä»–ç±»å‹çš„å˜é‡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let value: unknown;</span><br><span class="line"></span><br><span class="line">let value1: unknown = value; // OK</span><br><span class="line">let value2: any = value; // OK</span><br><span class="line">let value3: boolean = value; // Error</span><br><span class="line">let value4: number = value; // Error</span><br><span class="line">let value5: string = value; // Error</span><br><span class="line">let value6: object = value; // Error</span><br><span class="line">let value7: any[] = value; // Error</span><br><span class="line">let value8: Function = value; // Error</span><br></pre></td></tr></table></figure>

<p><code>unknown</code> ç±»å‹åªèƒ½è¢«èµ‹å€¼ç»™ <code>any</code> ç±»å‹å’Œ <code>unknown</code> ç±»å‹æœ¬èº«ã€‚ç›´è§‚åœ°è¯´ï¼Œè¿™æ˜¯æœ‰é“ç†çš„ï¼šåªæœ‰èƒ½å¤Ÿä¿å­˜ä»»æ„ç±»å‹å€¼çš„å®¹å™¨æ‰èƒ½ä¿å­˜ <code>unknown</code> ç±»å‹çš„å€¼ã€‚æ¯•ç«Ÿæˆ‘ä»¬ä¸çŸ¥é“å˜é‡ <code>value</code> ä¸­å­˜å‚¨äº†ä»€ä¹ˆç±»å‹çš„å€¼ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬å°è¯•å¯¹ç±»å‹ä¸º unknown çš„å€¼æ‰§è¡Œæ“ä½œæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨ä¹‹å‰ any ç« èŠ‚çœ‹è¿‡çš„ç›¸åŒæ“ä½œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let value: unknown;</span><br><span class="line"></span><br><span class="line">value.foo.bar; // Error</span><br><span class="line">value.trim(); // Error</span><br><span class="line">value(); // Error</span><br><span class="line">new value(); // Error</span><br><span class="line">value[0][1]; // Error</span><br></pre></td></tr></table></figure>

<p>å°† <code>value</code> å˜é‡ç±»å‹è®¾ç½®ä¸º <code>unknown</code> åï¼Œè¿™äº›æ“ä½œéƒ½ä¸å†è¢«è®¤ä¸ºæ˜¯ç±»å‹æ­£ç¡®çš„ã€‚é€šè¿‡å°† <code>any</code> ç±»å‹æ”¹å˜ä¸º <code>unknown</code> ç±»å‹ï¼Œæˆ‘ä»¬å·²å°†å…è®¸æ‰€æœ‰æ›´æ”¹çš„é»˜è®¤è®¾ç½®ï¼Œæ›´æ”¹ä¸ºç¦æ­¢ä»»ä½•æ›´æ”¹ã€‚</p>
<h2 id="2-Never-ç±»å‹"><a href="#2-Never-ç±»å‹" class="headerlink" title="2. Never ç±»å‹"></a>2. Never ç±»å‹</h2><p><code>never</code> ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œ<code>never</code> ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span><br><span class="line">function error(message: string): never &#123;</span><br><span class="line">  throw new Error(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function infiniteLoop(): never &#123;</span><br><span class="line">  while (true) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ TypeScript ä¸­ï¼Œå¯ä»¥åˆ©ç”¨ never ç±»å‹çš„ç‰¹æ€§æ¥å®ç°å…¨é¢æ€§æ£€æŸ¥ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">type Foo = string | number;</span><br><span class="line"></span><br><span class="line">function controlFlowAnalysisWithNever(foo: Foo) &#123;</span><br><span class="line">  if (typeof foo === &quot;string&quot;) &#123;</span><br><span class="line">    // è¿™é‡Œ foo è¢«æ”¶çª„ä¸º string ç±»å‹</span><br><span class="line">  &#125; else if (typeof foo === &quot;number&quot;) &#123;</span><br><span class="line">    // è¿™é‡Œ foo è¢«æ”¶çª„ä¸º number ç±»å‹</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // foo åœ¨è¿™é‡Œæ˜¯ never</span><br><span class="line">    const check: never = foo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„åœ¨ else åˆ†æ”¯é‡Œé¢ï¼Œæˆ‘ä»¬æŠŠæ”¶çª„ä¸º never çš„ foo èµ‹å€¼ç»™ä¸€ä¸ªæ˜¾ç¤ºå£°æ˜çš„ never å˜é‡ã€‚å¦‚æœä¸€åˆ‡é€»è¾‘æ­£ç¡®ï¼Œé‚£ä¹ˆè¿™é‡Œåº”è¯¥èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚ä½†æ˜¯å‡å¦‚åæ¥æœ‰ä¸€å¤©ä½ çš„åŒäº‹ä¿®æ”¹äº† Foo çš„ç±»å‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type Foo = string | number | boolean;</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œä»–å¿˜è®°åŒæ—¶ä¿®æ”¹ <code>controlFlowAnalysisWithNever</code> æ–¹æ³•ä¸­çš„æ§åˆ¶æµç¨‹ï¼Œè¿™æ—¶å€™ else åˆ†æ”¯çš„ foo ç±»å‹ä¼šè¢«æ”¶çª„ä¸º <code>boolean</code> ç±»å‹ï¼Œå¯¼è‡´æ— æ³•èµ‹å€¼ç»™ never ç±»å‹ï¼Œè¿™æ—¶å°±ä¼šäº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚é€šè¿‡è¿™ä¸ªæ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿</p>
<p><code>controlFlowAnalysisWithNever</code> æ–¹æ³•æ€»æ˜¯ç©·å°½äº† Foo çš„æ‰€æœ‰å¯èƒ½ç±»å‹ã€‚ é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šä½¿ç”¨ never é¿å…å‡ºç°æ–°å¢äº†è”åˆç±»å‹æ²¡æœ‰å¯¹åº”çš„å®ç°ï¼Œç›®çš„å°±æ˜¯å†™å‡ºç±»å‹ç»å¯¹å®‰å…¨çš„ä»£ç ã€‚</p>
<h1 id="ä¸‰ã€Typescript-çš„ç±»å‹ç³»ç»Ÿ"><a href="#ä¸‰ã€Typescript-çš„ç±»å‹ç³»ç»Ÿ" class="headerlink" title="ä¸‰ã€Typescript çš„ç±»å‹ç³»ç»Ÿ"></a>ä¸‰ã€Typescript çš„ç±»å‹ç³»ç»Ÿ</h1><p>å……åˆ†ä½¿ç”¨ç¼–è¾‘å™¨çš„ language service åŠŸèƒ½ï¼ˆç±»å‹æç¤ºï¼Œç±»å‹æ£€æŸ¥ï¼Œç±»å‹æ¨å€’ï¼Œè‡ªåŠ¨è¡¥å…¨ï¼Œç±»å‹å®šä¹‰è·³è½¬)</p>
<p>æŠŠç±»å‹å½“åšå€¼çš„é›†åˆæ€è€ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">type A= &#x27;A&#x27; // å•å€¼é›†åˆ &#123; &#x27;A&#x27; &#125;</span><br><span class="line">type B= &#x27;B&#x27; // å•å€¼é›†åˆ &#123; &#x27;B&#x27; &#125;</span><br><span class="line">type AB = &#x27;A&#x27; | &#x27;B&#x27;  // é›†åˆçš„å¹¶é›† &#123; &#x27;A&#x27;, &#x27;B&#x27; &#125;</span><br><span class="line">type twoInt =  2 | 4 | 5 ... // æ— é™å…ƒç´ é›†åˆ &#123; 1,2,3,4&#125;</span><br><span class="line">type threeInt = 3 | 6 | 9 // æ— é™é›†åˆ</span><br><span class="line">type twoIntersectThreeInt = twoInt &amp; threeInt // æ— é™é›†åˆçš„äº¤é›†</span><br><span class="line">type twoUnionThreeInt = 2| 3 | 4 | 6 ... // æ— é™é›†åˆçš„å¹¶é›†</span><br><span class="line">keyof (A&amp;B) = (keyof A) | (keyof B)</span><br><span class="line">keyof (A|B) = (keyof A) &amp; (keyof B)</span><br></pre></td></tr></table></figure>

<p>æœ¯è¯­å’Œé›†åˆæœ¯è¯­å¯¹ç…§è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Typescriptæœ¯è¯­	                  é›†åˆæœ¯è¯­</span><br><span class="line">never	                          ç©ºé›†</span><br><span class="line">literal type	                  å•å€¼é›†åˆ</span><br><span class="line">value å¯èµ‹å€¼ç»™ T	              value âˆˆT</span><br><span class="line">T1 assignable to T2	              T1æ˜¯T2çš„å­é›†</span><br><span class="line">T1 extends T2	                  T1æ˜¯T2çš„å­é›†</span><br><span class="line">T1	                              T2</span><br><span class="line">T1 &amp; T2	                          T1 å’ŒT2çš„äº¤é›†</span><br><span class="line">unknown	                          universal set</span><br></pre></td></tr></table></figure>

<h1 id="å››ã€äº†è§£-type-å’Œ-interface-çš„åŒºåˆ«"><a href="#å››ã€äº†è§£-type-å’Œ-interface-çš„åŒºåˆ«" class="headerlink" title="å››ã€äº†è§£ type å’Œ interface çš„åŒºåˆ«"></a>å››ã€äº†è§£ type å’Œ interface çš„åŒºåˆ«</h1><p>ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œtype å’Œ interface éƒ½èƒ½ç­‰ä»·è½¬æ¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">// æ™®é€šå¯¹è±¡</span><br><span class="line">type TState = &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    capital: string;</span><br><span class="line">&#125;</span><br><span class="line">interface IState &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    capital: string;</span><br><span class="line">&#125;</span><br><span class="line">// index signature</span><br><span class="line">type TDict = &#123;[key:string]: string &#125;</span><br><span class="line">interface IDict &#123;</span><br><span class="line">    [key:string]: string</span><br><span class="line">&#125;</span><br><span class="line">type TFn = (x:number) =&gt; string;</span><br><span class="line">interface IFn &#123;</span><br><span class="line">    (x:number):string;</span><br><span class="line">&#125;</span><br><span class="line">// function with props</span><br><span class="line">type TFnWithProps = &#123;</span><br><span class="line">    (x:number):number;</span><br><span class="line">    prop: string;</span><br><span class="line">&#125;</span><br><span class="line">interface IFnWithProps &#123;</span><br><span class="line">    (x:number):number;</span><br><span class="line">    prop: string;</span><br><span class="line">&#125;</span><br><span class="line">//  constructor</span><br><span class="line">type TConstructor = new(x:number) =&gt; &#123;x:number&#125;</span><br><span class="line">interface IConstructor&#123;</span><br><span class="line">    new(x:number): &#123;x:number&#125;</span><br><span class="line">&#125;</span><br><span class="line">// generic</span><br><span class="line">type TPair&lt;T&gt;= &#123;</span><br><span class="line">    first: T;</span><br><span class="line">    second: T;</span><br><span class="line">&#125;</span><br><span class="line">interface IPair&lt;T&gt; &#123;</span><br><span class="line">    first: T;</span><br><span class="line">    second: T;</span><br><span class="line">&#125;</span><br><span class="line">// extends</span><br><span class="line">type TStateWithProps = TState &amp; &#123; population : number&#125;</span><br><span class="line">interface IStateWithProp extends IState &#123;</span><br><span class="line">    population: number;</span><br><span class="line">&#125;</span><br><span class="line">// implements</span><br><span class="line">class StateT implements TState &#123;</span><br><span class="line">    name = &#x27;&#x27;;</span><br><span class="line">    capital = &#x27;&#x27;;</span><br><span class="line">&#125;</span><br><span class="line">class StateI implements IState &#123;</span><br><span class="line">    name=&#x27;&#x27;;</span><br><span class="line">    capital = &#x27;&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>type å’Œ interface äº¦æœ‰æ‰€åŒºåˆ«</p>
<ol>
<li>interface æ— æ³•åº”ç”¨äº union type | intersection type | conditional type | tuple</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type AorB = &#x27;A&#x27; | &#x27;B&#x27;</span><br><span class="line">type NamedVariable = (Input | Output) &amp; &#123; name: string&#125;</span><br><span class="line">type Pair = [number,number]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>interface å¯ä»¥ argumented,è€Œ type ä¸å¯ä»¥</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// inner</span><br><span class="line">interface IState &#123;</span><br><span class="line">    name :string;</span><br><span class="line">    capital: string;</span><br><span class="line">&#125;</span><br><span class="line">// outer</span><br><span class="line">interface IState &#123;</span><br><span class="line">    population: number</span><br><span class="line">&#125;</span><br><span class="line">const wyoming: IState = &#123;</span><br><span class="line">    name: &#x27;Wyoming&#x27;,</span><br><span class="line">    capital: &#x27;Cheyenne&#x27;,</span><br><span class="line">    population: 500_000</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="äº”ã€keyof-æ“ä½œç¬¦"><a href="#äº”ã€keyof-æ“ä½œç¬¦" class="headerlink" title="äº”ã€keyof æ“ä½œç¬¦"></a>äº”ã€keyof æ“ä½œç¬¦</h1><h2 id="keyof-ç®€ä»‹"><a href="#keyof-ç®€ä»‹" class="headerlink" title="keyof ç®€ä»‹"></a>keyof ç®€ä»‹</h2><p>TypeScript å…è®¸æˆ‘ä»¬éå†æŸç§ç±»å‹çš„å±æ€§ï¼Œå¹¶é€šè¿‡ keyof æ“ä½œç¬¦æå–å…¶å±æ€§çš„åç§°ã€‚keyof æ“ä½œç¬¦æ˜¯åœ¨ TypeScript 2.1 ç‰ˆæœ¬å¼•å…¥çš„ï¼Œè¯¥æ“ä½œç¬¦å¯ä»¥ç”¨äºè·å–æŸç§ç±»å‹çš„æ‰€æœ‰é”®ï¼Œå…¶è¿”å›ç±»å‹æ˜¯è”åˆç±»å‹ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">  location: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type K1 = keyof Person; // &quot;name&quot; | &quot;age&quot; | &quot;location&quot;</span><br><span class="line">type K2 = keyof Person[];  // number | &quot;length&quot; | &quot;push&quot; | &quot;concat&quot; | ...</span><br><span class="line">type K3 = keyof &#123; [x: string]: Person &#125;;  // string | number</span><br></pre></td></tr></table></figure>

<p>é™¤äº†æ¥å£å¤–ï¼Œkeyof ä¹Ÿå¯ä»¥ç”¨äºæ“ä½œç±»ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line">  name: string = &quot;Semlinker&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let sname: keyof Person;</span><br><span class="line">sname = &quot;name&quot;;</span><br></pre></td></tr></table></figure>

<p>è‹¥æŠŠ <code>sname = &quot;name&quot;</code> æ”¹ä¸º <code>sname = &quot;age&quot;</code> çš„è¯ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Type &#x27;&quot;age&quot;&#x27; is not assignable to type &#x27;&quot;name&quot;&#x27;.</span><br></pre></td></tr></table></figure>

<p>keyof æ“ä½œç¬¦é™¤äº†æ”¯æŒæ¥å£å’Œç±»ä¹‹å¤–ï¼Œå®ƒä¹Ÿæ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let K1: keyof boolean; // let K1: &quot;valueOf&quot;</span><br><span class="line">let K2: keyof number; // let K2: &quot;toString&quot; | &quot;toFixed&quot; | &quot;toExponential&quot; | ...</span><br><span class="line">let K3: keyof symbol; // let K3: &quot;valueOf&quot;</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤– keyof ä¹Ÿç§°ä¸ºè¾“å…¥ç´¢å¼•ç±»å‹æŸ¥è¯¢ï¼Œä¸ä¹‹ç›¸å¯¹åº”çš„æ˜¯ç´¢å¼•è®¿é—®ç±»å‹ï¼Œä¹Ÿç§°ä¸ºæŸ¥æ‰¾ç±»å‹ã€‚åœ¨è¯­æ³•ä¸Šï¼Œå®ƒä»¬çœ‹èµ·æ¥åƒå±æ€§æˆ–å…ƒç´ è®¿é—®ï¼Œä½†æœ€ç»ˆä¼šè¢«è½¬æ¢ä¸ºç±»å‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type P1 = Person[&quot;name&quot;];  // string</span><br><span class="line">type P2 = Person[&quot;name&quot; | &quot;age&quot;];  // string | number</span><br><span class="line">type P3 = string[&quot;charAt&quot;];  // (pos: number) =&gt; string</span><br><span class="line">type P4 = string[][&quot;push&quot;];  // (...items: string[]) =&gt; number</span><br><span class="line">type P5 = string[][0];  // string</span><br></pre></td></tr></table></figure>

<h2 id="keyof-çš„ä½œç”¨"><a href="#keyof-çš„ä½œç”¨" class="headerlink" title="keyof çš„ä½œç”¨"></a>keyof çš„ä½œç”¨</h2><p>JavaScript æ˜¯ä¸€ç§é«˜åº¦åŠ¨æ€çš„è¯­è¨€ã€‚æœ‰æ—¶åœ¨é™æ€ç±»å‹ç³»ç»Ÿä¸­æ•è·æŸäº›æ“ä½œçš„è¯­ä¹‰å¯èƒ½ä¼šå¾ˆæ£˜æ‰‹ã€‚ä»¥ä¸€ä¸ªç®€å•çš„ prop å‡½æ•°ä¸ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function prop(obj, key) &#123;</span><br><span class="line">  return obj[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥å‡½æ•°æ¥æ”¶ obj å’Œ key ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›å¯¹åº”å±æ€§çš„å€¼ã€‚å¯¹è±¡ä¸Šçš„ä¸åŒå±æ€§ï¼Œå¯ä»¥å…·æœ‰å®Œå…¨ä¸åŒçš„ç±»å‹ï¼Œæˆ‘ä»¬ç”šè‡³ä¸çŸ¥é“ obj å¯¹è±¡é•¿ä»€ä¹ˆæ ·ã€‚</p>
<p>é‚£ä¹ˆåœ¨ TypeScript ä¸­å¦‚ä½•å®šä¹‰ä¸Šé¢çš„ prop å‡½æ•°å‘¢ï¼Ÿæˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function prop(obj: object, key: string) &#123;</span><br><span class="line">  return obj[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œä¸ºäº†é¿å…è°ƒç”¨ prop å‡½æ•°æ—¶ä¼ å…¥é”™è¯¯çš„å‚æ•°ç±»å‹ï¼Œæˆ‘ä»¬ä¸º obj å’Œ key å‚æ•°è®¾ç½®äº†ç±»å‹ï¼Œåˆ†åˆ«ä¸º {} å’Œ string ç±»å‹ã€‚ç„¶è€Œï¼Œäº‹æƒ…å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚é’ˆå¯¹ä¸Šè¿°çš„ä»£ç ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šè¾“å‡ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Element implicitly has an &#x27;any&#x27; type because expression of type &#x27;string&#x27; can&#x27;t be used to index type &#x27;&#123;&#125;&#x27;.</span><br></pre></td></tr></table></figure>

<p>å…ƒç´ éšå¼åœ°æ‹¥æœ‰ any ç±»å‹ï¼Œå› ä¸º string ç±»å‹ä¸èƒ½è¢«ç”¨äºç´¢å¼• {} ç±»å‹ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹éå¸¸æš´åŠ›çš„æ–¹æ¡ˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function prop(obj: object, key: string) &#123;</span><br><span class="line">  return (obj as any)[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¾ˆæ˜æ˜¾è¯¥æ–¹æ¡ˆå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ prop å‡½æ•°çš„ä½œç”¨ï¼Œè¯¥å‡½æ•°ç”¨äºè·å–æŸä¸ªå¯¹è±¡ä¸­æŒ‡å®šå±æ€§çš„å±æ€§å€¼ã€‚å› æ­¤æˆ‘ä»¬æœŸæœ›ç”¨æˆ·è¾“å…¥çš„å±æ€§æ˜¯å¯¹è±¡ä¸Šå·²å­˜åœ¨çš„å±æ€§ï¼Œé‚£ä¹ˆå¦‚ä½•é™åˆ¶å±æ€§åçš„èŒƒå›´å‘¢ï¼Ÿè¿™æ—¶æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æœ¬æ–‡çš„ä¸»è§’ keyof æ“ä½œç¬¦ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function prop&lt;T extends object, K extends keyof T&gt;(obj: T, key: K) &#123;</span><br><span class="line">  return obj[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† TypeScript çš„æ³›å‹å’Œæ³›å‹çº¦æŸã€‚é¦–å…ˆå®šä¹‰äº† T ç±»å‹å¹¶ä½¿ç”¨ extends å…³é”®å­—çº¦æŸè¯¥ç±»å‹å¿…é¡»æ˜¯ object ç±»å‹çš„å­ç±»å‹ï¼Œç„¶åä½¿ç”¨ keyof æ“ä½œç¬¦è·å– T ç±»å‹çš„æ‰€æœ‰é”®ï¼Œå…¶è¿”å›ç±»å‹æ˜¯è”åˆç±»å‹ï¼Œæœ€ååˆ©ç”¨ extends å…³é”®å­—çº¦æŸ K ç±»å‹å¿…é¡»ä¸º keyof T è”åˆç±»å‹çš„å­ç±»å‹ã€‚ æ˜¯éª¡å­æ˜¯é©¬æ‹‰å‡ºæ¥é›é›å°±çŸ¥é“äº†ï¼Œæˆ‘ä»¬æ¥å®é™…æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">type Todo = &#123;</span><br><span class="line">  id: number;</span><br><span class="line">  text: string;</span><br><span class="line">  done: boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const todo: Todo = &#123;</span><br><span class="line">  id: 1,</span><br><span class="line">  text: &quot;Learn TypeScript keyof&quot;,</span><br><span class="line">  done: false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function prop&lt;T extends object, K extends keyof T&gt;(obj: T, key: K) &#123;</span><br><span class="line">  return obj[key];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const id = prop(todo, &quot;id&quot;); // const id: number</span><br><span class="line">const text = prop(todo, &quot;text&quot;); // const text: string</span><br><span class="line">const done = prop(todo, &quot;done&quot;); // const done: boolean</span><br></pre></td></tr></table></figure>

<p>å¾ˆæ˜æ˜¾ä½¿ç”¨æ³›å‹ï¼Œé‡æ–°å®šä¹‰åçš„ prop&lt;T extends object, K extends keyof T&gt;(obj: T, key: K) å‡½æ•°ï¼Œå·²ç»å¯ä»¥æ­£ç¡®åœ°æ¨å¯¼å‡ºæŒ‡å®šé”®å¯¹åº”çš„ç±»å‹ã€‚é‚£ä¹ˆå½“è®¿é—® todo å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§æ—¶ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const date = prop(todo, &quot;date&quot;);</span><br></pre></td></tr></table></figure>

<p>å¯¹äºä¸Šè¿°ä»£ç ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Argument of type &#x27;&quot;date&quot;&#x27; is not assignable to parameter of type &#x27;&quot;id&quot; | &quot;text&quot; | &quot;done&quot;&#x27;.</span><br></pre></td></tr></table></figure>

<p>è¿™å°±é˜»æ­¢æˆ‘ä»¬å°è¯•è¯»å–ä¸å­˜åœ¨çš„å±æ€§ã€‚</p>
<h2 id="keyof-ä¸å¯¹è±¡çš„æ•°å€¼å±æ€§"><a href="#keyof-ä¸å¯¹è±¡çš„æ•°å€¼å±æ€§" class="headerlink" title="keyof ä¸å¯¹è±¡çš„æ•°å€¼å±æ€§"></a>keyof ä¸å¯¹è±¡çš„æ•°å€¼å±æ€§</h2><p>åœ¨ä½¿ç”¨å¯¹è±¡çš„æ•°å€¼å±æ€§æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ keyof å…³é”®å­—ã€‚è¯·è®°ä½ï¼Œå¦‚æœæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¸¦æœ‰æ•°å€¼å±æ€§çš„å¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ—¢éœ€è¦å®šä¹‰è¯¥å±æ€§ï¼Œåˆéœ€è¦ä½¿ç”¨æ•°ç»„è¯­æ³•è®¿é—®è¯¥å±æ€§ï¼Œ å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class ClassWithNumericProperty &#123;</span><br><span class="line">  [1]: string = &quot;Semlinker&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let classWithNumeric = new ClassWithNumericProperty();</span><br><span class="line">console.log(`$&#123;classWithNumeric[1]&#125; `);</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æˆ‘ä»¬æ¥ä¸¾ä¸ªç¤ºä¾‹ï¼Œä»‹ç»ä¸€ä¸‹åœ¨å«æœ‰æ•°å€¼å±æ€§çš„å¯¹è±¡ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨ keyof æ“ä½œç¬¦æ¥å®‰å…¨åœ°è®¿é—®å¯¹è±¡çš„å±æ€§ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">enum Currency &#123;</span><br><span class="line">  CNY = 6,</span><br><span class="line">  EUR = 8,</span><br><span class="line">  USD = 10</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const CurrencyName = &#123;</span><br><span class="line">  [Currency.CNY]: &quot;äººæ°‘å¸&quot;,</span><br><span class="line">  [Currency.EUR]: &quot;æ¬§å…ƒ&quot;,</span><br><span class="line">  [Currency.USD]: &quot;ç¾å…ƒ&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">console.log(`CurrencyName[Currency.CNY] = $&#123;CurrencyName[Currency.CNY]&#125;`);</span><br><span class="line">console.log(`CurrencyName[36] = $&#123;CurrencyName[6]&#125;`);</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª Currency æšä¸¾ç”¨äºè¡¨ç¤ºä¸‰ç§è´§å¸ç±»å‹ï¼Œæ¥ç€å®šä¹‰ä¸€ä¸ª CurrencyName å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä½¿ç”¨æ•°å€¼å±æ€§ä½œä¸ºé”®ï¼Œå¯¹åº”çš„å€¼æ˜¯è¯¥è´§å¸ç±»å‹çš„åç§°ã€‚è¯¥ä»£ç æˆåŠŸè¿è¡Œåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CurrencyName[Currency.CNY] = äººæ°‘å¸</span><br><span class="line">CurrencyName[36] = äººæ°‘å¸</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·èƒ½æ ¹æ®è´§å¸ç±»å‹æ¥è·å–å¯¹åº”çš„è´§å¸åç§°ï¼Œæˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ª getCurrencyName å‡½æ•°ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function getCurrencyName&lt;T, K extends keyof T&gt;(key: K, map: T): T[K] &#123;</span><br><span class="line">  return map[key];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(`name = $&#123;getCurrencyName(Currency.CNY, CurrencyName)&#125;`);</span><br></pre></td></tr></table></figure>

<p>åŒæ ·ï¼ŒgetCurrencyName å‡½æ•°å’Œå‰é¢ä»‹ç»çš„ prop å‡½æ•°ä¸€æ ·ï¼Œä½¿ç”¨äº†æ³›å‹å’Œæ³›å‹çº¦æŸï¼Œä»è€Œæ¥ä¿è¯å±æ€§çš„å®‰å…¨è®¿é—®ã€‚æœ€åï¼Œæˆ‘ä»¬æ¥ç®€å•ä»‹ç»ä¸€ä¸‹ keyof ä¸ typeof æ“ä½œç¬¦å¦‚ä½•é…åˆä½¿ç”¨ã€‚</p>
<h2 id="keyof-ä¸-typeof-æ“ä½œç¬¦"><a href="#keyof-ä¸-typeof-æ“ä½œç¬¦" class="headerlink" title="keyof ä¸ typeof æ“ä½œç¬¦"></a>keyof ä¸ typeof æ“ä½œç¬¦</h2><p>typeof æ“ä½œç¬¦ç”¨äºè·å–å˜é‡çš„ç±»å‹ã€‚å› æ­¤è¿™ä¸ªæ“ä½œç¬¦çš„åé¢æ¥çš„å§‹ç»ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œä¸”éœ€è¦è¿ç”¨åˆ°ç±»å‹å®šä¹‰å½“ä¸­ã€‚ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªå…·ä½“çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">type Person = &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let man: Person = &#123;</span><br><span class="line">  name: &quot;Semlinker&quot;,</span><br><span class="line">  age: 30</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Human = typeof man;</span><br></pre></td></tr></table></figure>

<p>äº†è§£å®Œ typeof å’Œ keyof æ“ä½œç¬¦çš„ä½œç”¨ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ï¼Œä»‹ç»ä¸€ä¸‹å®ƒä»¬å¦‚ä½•ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const COLORS = &#123;</span><br><span class="line">  red: &#x27;red&#x27;,</span><br><span class="line">  blue: &#x27;blue&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// é¦–å…ˆé€šè¿‡typeofæ“ä½œç¬¦è·å–colorå˜é‡çš„ç±»å‹ï¼Œç„¶åé€šè¿‡keyofæ“ä½œç¬¦è·å–è¯¥ç±»å‹çš„æ‰€æœ‰é”®ï¼Œ</span><br><span class="line">// å³å­—ç¬¦ä¸²å­—é¢é‡è”åˆç±»å‹ &#x27;red&#x27; | &#x27;blue&#x27;</span><br><span class="line">type Colors = keyof typeof COLORS</span><br><span class="line">let color: Colors;</span><br><span class="line">color = &#x27;red&#x27; // Ok</span><br><span class="line">color = &#x27;blue&#x27; // Ok</span><br><span class="line"></span><br><span class="line">// Type &#x27;&quot;yellow&quot;&#x27; is not assignable to type &#x27;&quot;red&quot; | &quot;blue&quot;&#x27;.</span><br><span class="line">color = &#x27;yellow&#x27; // Error</span><br></pre></td></tr></table></figure>

<h1 id="å…­ã€TypeScript-æ³›å‹"><a href="#å…­ã€TypeScript-æ³›å‹" class="headerlink" title="å…­ã€TypeScript æ³›å‹"></a>å…­ã€TypeScript æ³›å‹</h1><p>è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„ APIï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚</p>
<p>åœ¨åƒ <code>C#</code> å’Œ <code>Java</code> è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚ è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚</p>
<p>è®¾è®¡æ³›å‹çš„å…³é”®ç›®çš„æ˜¯åœ¨æˆå‘˜ä¹‹é—´æä¾›æœ‰æ„ä¹‰çš„çº¦æŸï¼Œè¿™äº›æˆå‘˜å¯ä»¥æ˜¯ï¼šç±»çš„å®ä¾‹æˆå‘˜ã€ç±»çš„æ–¹æ³•ã€å‡½æ•°å‚æ•°å’Œå‡½æ•°è¿”å›å€¼ã€‚</p>
<p>æ³›å‹ï¼ˆGenericsï¼‰æ˜¯å…è®¸åŒä¸€ä¸ªå‡½æ•°æ¥å—ä¸åŒç±»å‹å‚æ•°çš„ä¸€ç§æ¨¡æ¿ã€‚ç›¸æ¯”äºä½¿ç”¨ any ç±»å‹ï¼Œä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶è¦æ›´å¥½ï¼Œå› ä¸ºæ³›å‹ä¼šä¿ç•™å‚æ•°ç±»å‹ã€‚</p>
<h2 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a>æ³›å‹æ¥å£</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface GenericIdentityFn&lt;T&gt; &#123;</span><br><span class="line">  (arg: T): T;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class GenericNumber&lt;T&gt; &#123;</span><br><span class="line">  zeroValue: T;</span><br><span class="line">  add: (x: T, y: T) =&gt; T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let myGenericNumber = new GenericNumber&lt;number&gt;();</span><br><span class="line">myGenericNumber.zeroValue = 0;</span><br><span class="line">myGenericNumber.add = function (x, y) &#123;</span><br><span class="line">  return x + y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="æ³›å‹å˜é‡"><a href="#æ³›å‹å˜é‡" class="headerlink" title="æ³›å‹å˜é‡"></a>æ³›å‹å˜é‡</h2><p>å¯¹åˆšæ¥è§¦ TypeScript æ³›å‹çš„å°ä¼™ä¼´æ¥è¯´ï¼Œçœ‹åˆ° T å’Œ Eï¼Œè¿˜æœ‰ K å’Œ V è¿™äº›æ³›å‹å˜é‡æ—¶ï¼Œä¼°è®¡ä¼šä¸€è„¸æ‡µé€¼ã€‚å…¶å®è¿™äº›å¤§å†™å­—æ¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯ä¸€ä¸ªçº¦å®šå¥½çš„è§„èŒƒè€Œå·²ã€‚ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨å¤§å†™å­—æ¯ A-Z å®šä¹‰çš„ç±»å‹å˜é‡éƒ½å±äºæ³›å‹ï¼ŒæŠŠ T æ¢æˆ Aï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ä¸€äº›å¸¸è§æ³›å‹å˜é‡ä»£è¡¨çš„æ„æ€ï¼š</p>
<ul>
<li>Tï¼ˆTypeï¼‰ï¼šè¡¨ç¤ºä¸€ä¸ª TypeScript ç±»å‹</li>
<li>Kï¼ˆKeyï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„é”®ç±»å‹</li>
<li>Vï¼ˆValueï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„å€¼ç±»å‹</li>
<li>Eï¼ˆElementï¼‰ï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹</li>
</ul>
<h2 id="æ³›å‹å·¥å…·ç±»å‹"><a href="#æ³›å‹å·¥å…·ç±»å‹" class="headerlink" title="æ³›å‹å·¥å…·ç±»å‹"></a>æ³›å‹å·¥å…·ç±»å‹</h2><p>ä¸ºäº†æ–¹ä¾¿å¼€å‘è€… TypeScript å†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„å·¥å…·ç±»å‹ï¼Œæ¯”å¦‚ Partialã€Requiredã€Readonlyã€Record å’Œ ReturnType ç­‰ã€‚å‡ºäºç¯‡å¹…è€ƒè™‘ï¼Œè¿™é‡Œæˆ‘ä»¬åªç®€å•ä»‹ç» Partial å·¥å…·ç±»å‹ã€‚ä¸è¿‡åœ¨å…·ä½“ä»‹ç»ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆä»‹ç»ä¸€äº›ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œæ–¹ä¾¿è¯»è€…è‡ªè¡Œå­¦ä¹ å…¶å®ƒçš„å·¥å…·ç±»å‹ã€‚</p>
<p><strong>1.typeof</strong><br>åœ¨ TypeScript ä¸­ï¼Œtypeof æ“ä½œç¬¦å¯ä»¥ç”¨æ¥è·å–ä¸€ä¸ªå˜é‡å£°æ˜æˆ–å¯¹è±¡çš„ç±»å‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const sem: Person = &#123; name: &#x27;semlinker&#x27;, age: 30 &#125;;</span><br><span class="line">type Sem= typeof sem; // -&gt; Person</span><br><span class="line"></span><br><span class="line">function toArray(x: number): Array&lt;number&gt; &#123;</span><br><span class="line">  return [x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Func = typeof toArray; // -&gt; (x: number) =&gt; number[]</span><br></pre></td></tr></table></figure>

<p><strong>2.keyof</strong><br>keyof æ“ä½œç¬¦å¯ä»¥ç”¨æ¥è·å–ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰ key å€¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type K1 = keyof Person; // &quot;name&quot; | &quot;age&quot;</span><br><span class="line">type K2 = keyof Person[]; // &quot;length&quot; | &quot;toString&quot; | &quot;pop&quot; | &quot;push&quot; | &quot;concat&quot; | &quot;join&quot;</span><br><span class="line">type K3 = keyof &#123; [x: string]: Person &#125;;  // string | number</span><br></pre></td></tr></table></figure>

<p><strong>3.in</strong><br>in ç”¨æ¥éå†æšä¸¾ç±»å‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Keys = &quot;a&quot; | &quot;b&quot; | &quot;c&quot;</span><br><span class="line"></span><br><span class="line">type Obj =  &#123;</span><br><span class="line">  [p in Keys]: any</span><br><span class="line">&#125; // -&gt; &#123; a: any, b: any, c: any &#125;</span><br></pre></td></tr></table></figure>

<p><strong>4.infer</strong><br>åœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨ infer å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type ReturnType&lt;T&gt; = T extends (</span><br><span class="line">  ...args: any[]</span><br><span class="line">) =&gt; infer R ? R : any;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç ä¸­ infer R å°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚</p>
<p><strong>5.extends</strong><br>æœ‰æ—¶å€™æˆ‘ä»¬å®šä¹‰çš„æ³›å‹ä¸æƒ³è¿‡äºçµæ´»æˆ–è€…è¯´æƒ³ç»§æ‰¿æŸäº›ç±»ç­‰ï¼Œå¯ä»¥é€šè¿‡ extends å…³é”®å­—æ·»åŠ æ³›å‹çº¦æŸã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface ILengthwise &#123;</span><br><span class="line">  length: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function loggingIdentity&lt;T extends ILengthwise&gt;(arg: T): T &#123;</span><br><span class="line">  console.log(arg.length);</span><br><span class="line">  return arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸï¼Œå› æ­¤å®ƒä¸å†æ˜¯é€‚ç”¨äºä»»æ„ç±»å‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loggingIdentity(3);  // Error, number doesn&#x27;t have a .length property</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼ï¼Œå¿…é¡»åŒ…å«å¿…é¡»çš„å±æ€§ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loggingIdentity(&#123;length: 10, value: 3&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>6.Partial</strong></p>
<p>Partial<T> çš„ä½œç”¨å°±æ˜¯å°†æŸä¸ªç±»å‹é‡Œçš„å±æ€§å…¨éƒ¨å˜ä¸ºå¯é€‰é¡¹ ?ã€‚</p>
<p><strong>å®šä¹‰ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * node_modules/typescript/lib/lib.es5.d.ts</span><br><span class="line"> * Make all properties in T optional</span><br><span class="line"> */</span><br><span class="line">type Partial&lt;T&gt; = &#123;</span><br><span class="line">  [P in keyof T]?: T[P];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œé¦–å…ˆé€šè¿‡ keyof T æ‹¿åˆ° T çš„æ‰€æœ‰å±æ€§åï¼Œç„¶åä½¿ç”¨ in è¿›è¡Œéå†ï¼Œå°†å€¼èµ‹ç»™ Pï¼Œæœ€åé€šè¿‡ T[P] å–å¾—ç›¸åº”çš„å±æ€§å€¼ã€‚ä¸­é—´çš„ ? å·ï¼Œç”¨äºå°†æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">interface Todo &#123;</span><br><span class="line">  title: string;</span><br><span class="line">  description: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function updateTodo(todo: Todo, fieldsToUpdate: Partial&lt;Todo&gt;) &#123;</span><br><span class="line">  return &#123; ...todo, ...fieldsToUpdate &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const todo1 = &#123;</span><br><span class="line">  title: &quot;organize desk&quot;,</span><br><span class="line">  description: &quot;clear clutter&quot;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const todo2 = updateTodo(todo1, &#123;</span><br><span class="line">  description: &quot;throw out trash&quot;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ updateTodo æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ Partial<T> å·¥å…·ç±»å‹ï¼Œå®šä¹‰ fieldsToUpdate çš„ç±»å‹ä¸º Partial<Todo>ï¼Œå³ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   title?: string | undefined;</span><br><span class="line">   description?: string | undefined;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ä¸ƒã€å……åˆ†åˆ©ç”¨æ³›å‹å’Œç±»å‹è¿ç®—é¿å…å†—ä½™ç±»å‹æ ‡è®°"><a href="#ä¸ƒã€å……åˆ†åˆ©ç”¨æ³›å‹å’Œç±»å‹è¿ç®—é¿å…å†—ä½™ç±»å‹æ ‡è®°" class="headerlink" title="ä¸ƒã€å……åˆ†åˆ©ç”¨æ³›å‹å’Œç±»å‹è¿ç®—é¿å…å†—ä½™ç±»å‹æ ‡è®°"></a>ä¸ƒã€å……åˆ†åˆ©ç”¨æ³›å‹å’Œç±»å‹è¿ç®—é¿å…å†—ä½™ç±»å‹æ ‡è®°</h1><p>ä½¿ç”¨æ³›å‹æå–å…¬å…±çš„ util typeï¼Œç®€åŒ–ç±»å‹ç¼–å†™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">interface ButtonProps &#123;</span><br><span class="line">    type: string;</span><br><span class="line">    size: &#x27;large&#x27; | &#x27;middle&#x27;| &#x27;small&#x27;</span><br><span class="line">&#125;</span><br><span class="line">interface ButtonPropsWithChildren&#123;</span><br><span class="line">    type: string;</span><br><span class="line">    size: &#x27;large&#x27; | &#x27;middle&#x27;| &#x27;small&#x27;,</span><br><span class="line">    children: React.ReactNode</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ PropsWithChildren ç®€åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; PropsWithChildren &#125; from &#x27;react&#x27;;</span><br><span class="line">type ButtonPropsWithChildren = PropsWithChildren&lt;ButtonProps&gt;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ index type | mapped type | keyof ç­‰è¿›è¡Œç±»å‹ä¼ é€’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">interface State &#123;</span><br><span class="line">    userId: string;</span><br><span class="line">    pageTitle: string;</span><br><span class="line">    recentFiles: string[]</span><br><span class="line">    pageContents: string;</span><br><span class="line">&#125;</span><br><span class="line">interface TopNavState &#123;</span><br><span class="line">    userId: string;</span><br><span class="line">    pageTitle: string;</span><br><span class="line">    recentFiles: string[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç å¯é€šè¿‡ lookup type ç®€åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface TopNavState = &#123;</span><br><span class="line">    userId: State[&#x27;userId&#x27;];</span><br><span class="line">    pageTitle: State[&#x27;pageTitle&#x27;]</span><br><span class="line">    recentFiles: State[&#x27;recentFiles&#x27;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ mapped type å¯è¿›ä¸€æ­¥ç®€åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type TopNavState = &#123;</span><br><span class="line">    [k in &#x27;userId&#x27; | &#x27;pageTitle&#x27; | &#x27;recentFiles&#x27;] : State[k]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†ä½¿ç”¨å·¥å…·ç±»è¿›ä¸€æ­¥ç®€åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type TopNavState = Pick&lt;State, &#x27;userId&#x27;, &#x27;pageTitle&#x27;, &#x27;rencentFiles&#x27;&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ typeof æ¥è¿›è¡Œç±»å‹ä¼ é€’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function getUserInfo(userId:string)&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    userId,</span><br><span class="line">    name,</span><br><span class="line">    age,</span><br><span class="line">    height,</span><br><span class="line">    weight,</span><br><span class="line">    favoriteColor</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">type UserInfo = ReturnType&lt;typeof getUserInfo&gt;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™ utility type æ—¶ï¼Œå¤šå¤šä½¿ç”¨ generic constraint ä¿è¯å®ä¾‹åŒ–æ—¶çš„ç±»å‹å®‰å…¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">interface Name &#123;</span><br><span class="line">    first: string;</span><br><span class="line">    last: string</span><br><span class="line">&#125;</span><br><span class="line">type Pick1&lt;T, K&gt;&#123;</span><br><span class="line">    [k in K]: T[k]</span><br><span class="line">&#125;</span><br><span class="line">type FirstLast = Pick1&lt;Name, &#x27;first&#x27;| &#x27;last&#x27;&gt;</span><br><span class="line">type FirstMiddle = Pick1&lt;Name, &#x27;first&#x27;, &#x27;middle&#x27;&gt; // åº”è¯¥æŠ¥é”™ä½†æ²¡æŠ¥é”™</span><br><span class="line">type Pick2&lt;T, K extends keyof T&gt; = &#123; // æ·»åŠ æ³›å‹çº¦æŸ</span><br><span class="line">    [k in K]: T[K]</span><br><span class="line">&#125;</span><br><span class="line">type FirstMiddle = Pick2&lt;Name, &#x27;first&#x27;, &#x27;middle&#x27;&gt; // æ­£ç¡®çš„æŠ¥é”™äº†</span><br></pre></td></tr></table></figure>

<h1 id="å…«ã€ç”¨-TypeScript-ç¼–å†™-React-çš„æœ€ä½³å®è·µ"><a href="#å…«ã€ç”¨-TypeScript-ç¼–å†™-React-çš„æœ€ä½³å®è·µ" class="headerlink" title="å…«ã€ç”¨ TypeScript ç¼–å†™ React çš„æœ€ä½³å®è·µ"></a>å…«ã€ç”¨ TypeScript ç¼–å†™ React çš„æœ€ä½³å®è·µ</h1><h2 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h2><p>React çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€æ˜¯ç»„ä»¶ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†å¼•ç”¨ React v16.8 ä»¥åçš„æ ‡å‡†ç»„ä»¶ï¼Œè¿™æ„å‘³ç€ä½¿ç”¨ Hook è€Œä¸æ˜¯ç±»çš„ç»„ä»¶ã€‚</p>
<p>é€šå¸¸ï¼Œä¸€ä¸ªåŸºæœ¬çš„ç»„ä»¶æœ‰å¾ˆå¤šéœ€è¦å…³æ³¨çš„åœ°æ–¹ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">importÂ ReactÂ fromÂ &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">//Â å‡½æ•°å£°æ˜å¼å†™æ³•</span><br><span class="line">functionÂ Heading():Â React.ReactNodeÂ &#123;</span><br><span class="line">Â Â returnÂ &lt;h1&gt;MyÂ WebsiteÂ Heading&lt;/h1&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//Â å‡½æ•°æ‰©å±•å¼å†™æ³•</span><br><span class="line">constÂ OtherHeading:Â React.FCÂ =Â ()Â =&gt;Â &lt;h1&gt;MyÂ WebsiteÂ Heading&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„è¿™é‡Œçš„å…³é”®åŒºåˆ«ã€‚åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°å£°æ˜å¼å†™æ³•ï¼Œæˆ‘ä»¬æ³¨æ˜äº†è¿™ä¸ªå‡½æ•°è¿”å›å€¼æ˜¯ <code>React.ReactNode</code> ç±»å‹ã€‚ç›¸åï¼Œç¬¬äºŒä¸ªä¾‹å­ä½¿ç”¨äº†ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ã€‚å› ä¸ºç¬¬äºŒä¸ªå®ä¾‹è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå€¼æˆ–è¡¨è¾¾å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æˆ‘ä»¬æ³¨æ˜äº†è¿™ä¸ªå‡½æ•°è¿”å›å€¼æ˜¯ <code>React.FC</code> ç±»å‹ã€‚</p>
<p>è®°ä½è¿™ä¸¤ç§æ–¹å¼å¯èƒ½ä¼šè®©äººæ··æ·†ã€‚è¿™ä¸»è¦å–å†³äºè®¾è®¡é€‰æ‹©ã€‚æ— è®ºæ‚¨é€‰æ‹©åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å“ªä¸ªï¼Œéƒ½è¦å§‹ç»ˆå¦‚ä¸€åœ°ä½¿ç”¨å®ƒã€‚</p>
<h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><p>æˆ‘ä»¬å°†ä»‹ç»çš„ä¸‹ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯ Propsã€‚ä½ å¯ä»¥ä½¿ç”¨ interface æˆ– type æ¥å®šä¹‰ Props ã€‚è®©æˆ‘ä»¬çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">importÂ ReactÂ fromÂ &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">interfaceÂ PropsÂ &#123;</span><br><span class="line">Â Â name:Â string;</span><br><span class="line">Â Â color:Â string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">typeÂ OtherPropsÂ =Â &#123;</span><br><span class="line">Â Â name:Â string;</span><br><span class="line">Â Â color:Â string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//Â NoticeÂ hereÂ we&#x27;reÂ usingÂ theÂ functionÂ declarationÂ withÂ theÂ interfaceÂ Props</span><br><span class="line">functionÂ Heading(&#123;Â name,Â colorÂ &#125;:Â Props):Â React.ReactNodeÂ &#123;</span><br><span class="line">Â Â returnÂ &lt;h1&gt;MyÂ WebsiteÂ Heading&lt;/h1&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//Â NoticeÂ hereÂ we&#x27;reÂ usingÂ theÂ functionÂ expressionÂ withÂ theÂ typeÂ OtherProps</span><br><span class="line">constÂ OtherHeading:Â React.FC&lt;OtherProps&gt;Â =Â (&#123;Â name,Â colorÂ &#125;)Â =&gt;</span><br><span class="line">Â Â &lt;h1&gt;MyÂ WebsiteÂ Heading&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p>å…³äº interface æˆ– type ï¼Œæˆ‘ä»¬å»ºè®®éµå¾ª react-typescript-cheatsheet ç¤¾åŒºæå‡ºçš„å‡†åˆ™ï¼š</p>
<ul>
<li>åœ¨ç¼–å†™åº“æˆ–ç¬¬ä¸‰æ–¹ç¯å¢ƒç±»å‹å®šä¹‰æ—¶ï¼Œå§‹ç»ˆå°† interface ç”¨äºå…¬å…± API çš„å®šä¹‰ã€‚</li>
<li>è€ƒè™‘ä¸ºä½ çš„ React ç»„ä»¶çš„ State å’Œ Props ä½¿ç”¨ type ï¼Œå› ä¸ºå®ƒæ›´å—çº¦æŸã€‚â€</li>
</ul>
<p>è®©æˆ‘ä»¬å†çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">importÂ ReactÂ fromÂ &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">typeÂ PropsÂ =Â &#123;</span><br><span class="line">Â Â Â /**Â colorÂ toÂ useÂ forÂ theÂ backgroundÂ */</span><br><span class="line">Â Â color?:Â string;</span><br><span class="line">Â Â Â /**Â standardÂ childrenÂ prop:Â acceptsÂ anyÂ validÂ ReactÂ NodeÂ */</span><br><span class="line">Â Â children:Â React.ReactNode;</span><br><span class="line">Â Â Â /**Â callbackÂ functionÂ passedÂ toÂ theÂ onClickÂ handler*/</span><br><span class="line">Â Â onClick:Â ()Â Â =&gt;Â void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">constÂ Button:Â React.FC&lt;Props&gt;Â =Â (&#123;Â children,Â colorÂ =Â &#x27;tomato&#x27;,Â onClickÂ &#125;)Â =&gt;Â &#123;</span><br><span class="line">Â Â Â returnÂ &lt;buttonÂ style=&#123;&#123;Â backgroundColor:Â colorÂ &#125;&#125;Â onClick=&#123;onClick&#125;&gt;&#123;children&#125;&lt;/button&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨æ­¤ <code>&lt;Button /&gt;</code> ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¸º Props ä½¿ç”¨ typeã€‚æ¯ä¸ª Props ä¸Šæ–¹éƒ½æœ‰ç®€çŸ­çš„è¯´æ˜ï¼Œä»¥ä¸ºå…¶ä»–å¼€å‘äººå‘˜æä¾›æ›´å¤šèƒŒæ™¯ä¿¡æ¯ã€‚? è¡¨ç¤º Props æ˜¯å¯é€‰çš„ã€‚<code>children props</code> æ˜¯ä¸€ä¸ª <code>React.ReactNode</code> è¡¨ç¤ºå®ƒè¿˜æ˜¯ä¸€ä¸ª React ç»„ä»¶ã€‚</p>
<p>é€šå¸¸ï¼Œåœ¨ React å’Œ TypeScript é¡¹ç›®ä¸­ç¼–å†™ Props æ—¶ï¼Œè¯·è®°ä½ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>å§‹ç»ˆä½¿ç”¨ TSDoc æ ‡è®°ä¸ºä½ çš„ Props æ·»åŠ æè¿°æ€§æ³¨é‡Š <code>/** comment */</code>ã€‚</li>
<li>æ— è®ºä½ ä¸ºç»„ä»¶ Props ä½¿ç”¨ type è¿˜æ˜¯ interface ï¼Œéƒ½åº”å§‹ç»ˆä½¿ç”¨å®ƒä»¬ã€‚</li>
<li>å¦‚æœ props æ˜¯å¯é€‰çš„ï¼Œè¯·é€‚å½“å¤„ç†æˆ–ä½¿ç”¨é»˜è®¤å€¼ã€‚</li>
</ul>
<h2 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h2><p>å¹¸è¿çš„æ˜¯ï¼Œå½“ä½¿ç”¨ Hook æ—¶ï¼Œ TypeScript ç±»å‹æ¨æ–­å·¥ä½œå¾—å¾ˆå¥½ã€‚è¿™æ„å‘³ç€ä½ æ²¡æœ‰ä»€ä¹ˆå¥½æ‹…å¿ƒçš„ã€‚ä¸¾ä¸ªä¾‹å­:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//Â `value`Â isÂ inferredÂ asÂ aÂ string</span><br><span class="line">//Â `setValue`Â isÂ inferredÂ asÂ (newValue:Â string)Â =&gt;Â void</span><br><span class="line">constÂ [value,Â setValue]Â =Â useState(&#x27;&#x27;)</span><br></pre></td></tr></table></figure>

<p>TypeScript æ¨æ–­å‡º useState é’©å­ç»™å‡ºçš„å€¼ã€‚è¿™æ˜¯ä¸€ä¸ª React å’Œ TypeScript ååŒå·¥ä½œçš„æˆæœã€‚</p>
<p>åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªç©ºå€¼åˆå§‹åŒ– Hook ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹å¹¶ä¼ é€’è”åˆä»¥æ­£ç¡®é”®å…¥ Hook ã€‚æŸ¥çœ‹æ­¤å®ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">typeÂ UserÂ =Â &#123;</span><br><span class="line">Â Â email:Â string;</span><br><span class="line">Â Â id:Â string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//Â theÂ genericÂ isÂ theÂ &lt;Â &gt;</span><br><span class="line">//Â theÂ unionÂ isÂ theÂ UserÂ |Â null</span><br><span class="line">//Â together,Â TypeScriptÂ knows,Â &quot;Ah,Â userÂ canÂ beÂ UserÂ orÂ null&quot;.</span><br><span class="line">constÂ [user,Â setUser]Â =Â useState&lt;UserÂ |Â null&gt;(null);</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ useReducer çš„ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">typeÂ AppStateÂ =Â &#123;&#125;;</span><br><span class="line">typeÂ ActionÂ =</span><br><span class="line">Â Â |Â &#123;Â type:Â &quot;SET_ONE&quot;;Â payload:Â stringÂ &#125;</span><br><span class="line">Â Â |Â &#123;Â type:Â &quot;SET_TWO&quot;;Â payload:Â numberÂ &#125;;</span><br><span class="line"></span><br><span class="line">exportÂ functionÂ reducer(state:Â AppState,Â action:Â Action):Â AppStateÂ &#123;</span><br><span class="line">Â Â switchÂ (action.type)Â &#123;</span><br><span class="line">Â Â Â Â caseÂ &quot;SET_ONE&quot;:</span><br><span class="line">Â Â Â Â Â Â returnÂ &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â ...state,</span><br><span class="line">Â Â Â Â Â Â Â Â one:Â action.payloadÂ //Â `payload`Â isÂ string</span><br><span class="line">Â Â Â Â Â Â &#125;;</span><br><span class="line">Â Â Â Â caseÂ &quot;SET_TWO&quot;:</span><br><span class="line">Â Â Â Â Â Â returnÂ &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â ...state,</span><br><span class="line">Â Â Â Â Â Â Â Â two:Â action.payloadÂ //Â `payload`Â isÂ number</span><br><span class="line">Â Â Â Â Â Â &#125;;</span><br><span class="line">Â Â Â Â default:</span><br><span class="line">Â Â Â Â Â Â returnÂ state;</span><br><span class="line">Â Â &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯è§ï¼ŒHooks å¹¶æ²¡æœ‰ä¸º React å’Œ TypeScript é¡¹ç›®å¢åŠ å¤ªå¤šå¤æ‚æ€§ã€‚</p>
<h2 id="å¸¸è§ç”¨ä¾‹"><a href="#å¸¸è§ç”¨ä¾‹" class="headerlink" title="å¸¸è§ç”¨ä¾‹"></a>å¸¸è§ç”¨ä¾‹</h2><h3 id="å¤„ç†è¡¨å•äº‹ä»¶"><a href="#å¤„ç†è¡¨å•äº‹ä»¶" class="headerlink" title="å¤„ç†è¡¨å•äº‹ä»¶"></a>å¤„ç†è¡¨å•äº‹ä»¶</h3><p>æœ€å¸¸è§çš„æƒ…å†µä¹‹ä¸€æ˜¯ onChange åœ¨è¡¨å•çš„è¾“å…¥å­—æ®µä¸Šæ­£ç¡®é”®å…¥ä½¿ç”¨çš„ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">importÂ ReactÂ fromÂ &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">constÂ MyInputÂ =Â ()Â =&gt;Â &#123;</span><br><span class="line">Â Â constÂ [value,Â setValue]Â =Â React.useState(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">Â Â //Â äº‹ä»¶ç±»å‹æ˜¯â€œChangeEventâ€</span><br><span class="line">Â Â //Â æˆ‘ä»¬å°†Â â€œHTMLInputElementâ€Â ä¼ é€’ç»™Â input</span><br><span class="line">Â Â functionÂ onChange(e:Â React.ChangeEvent&lt;HTMLInputElement&gt;)Â &#123;</span><br><span class="line">Â Â Â Â setValue(e.target.value)</span><br><span class="line">Â Â &#125;</span><br><span class="line"></span><br><span class="line">Â Â returnÂ &lt;inputÂ value=&#123;value&#125;Â onChange=&#123;onChange&#125;Â id=&quot;input-example&quot;/&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ‰©å±•ç»„ä»¶çš„-Props"><a href="#æ‰©å±•ç»„ä»¶çš„-Props" class="headerlink" title="æ‰©å±•ç»„ä»¶çš„ Props"></a>æ‰©å±•ç»„ä»¶çš„ Props</h3><p>æœ‰æ—¶ï¼Œä½ å¸Œæœ›è·å–ä¸ºä¸€ä¸ªç»„ä»¶å£°æ˜çš„ Propsï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œæ‰©å±•ï¼Œä»¥ä¾¿åœ¨å¦ä¸€ä¸ªç»„ä»¶ä¸Šä½¿ç”¨å®ƒä»¬ã€‚ä½†æ˜¯ä½ å¯èƒ½æƒ³è¦ä¿®æ”¹ä¸€ä¸¤ä¸ªå±æ€§ã€‚è¿˜è®°å¾—æˆ‘ä»¬å¦‚ä½•çœ‹å¾…ä¸¤ç§ç±»å‹ç»„ä»¶ Propsã€type æˆ– interface çš„æ–¹æ³•å—?å–å†³äºä½ ä½¿ç”¨çš„ç»„ä»¶å†³å®šäº†ä½ å¦‚ä½•æ‰©å±•ç»„ä»¶ Props ã€‚è®©æˆ‘ä»¬å…ˆçœ‹çœ‹å¦‚ä½•ä½¿ç”¨ type:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">importÂ ReactÂ fromÂ &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">typeÂ ButtonPropsÂ =Â &#123;</span><br><span class="line">Â Â Â Â /**Â theÂ backgroundÂ colorÂ ofÂ theÂ buttonÂ */</span><br><span class="line">Â Â Â Â color:Â string;</span><br><span class="line">Â Â Â Â /**Â theÂ textÂ toÂ showÂ insideÂ theÂ buttonÂ */</span><br><span class="line">Â Â Â Â text:Â string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">typeÂ ContainerPropsÂ =Â ButtonPropsÂ &amp;Â &#123;</span><br><span class="line">Â Â Â Â /**Â theÂ heightÂ ofÂ theÂ containerÂ (valueÂ usedÂ withÂ &#x27;px&#x27;)Â */</span><br><span class="line">Â Â Â Â height:Â number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">constÂ Container:Â React.FC&lt;ContainerProps&gt;Â =Â (&#123;Â color,Â height,Â width,Â textÂ &#125;)Â =&gt;Â &#123;</span><br><span class="line">Â Â returnÂ &lt;divÂ style=&#123;&#123;Â backgroundColor:Â color,Â height:Â `$&#123;height&#125;px`Â &#125;&#125;&gt;&#123;text&#125;&lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ä½¿ç”¨ interface æ¥å£°æ˜ propsï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…³é”®å­— extends ä»æœ¬è´¨ä¸Šâ€œæ‰©å±•â€è¯¥æ¥å£ï¼Œä½†è¦è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">importÂ ReactÂ fromÂ &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">interfaceÂ ButtonPropsÂ &#123;</span><br><span class="line">Â Â Â Â /**Â theÂ backgroundÂ colorÂ ofÂ theÂ buttonÂ */</span><br><span class="line">Â Â Â Â color:Â string;</span><br><span class="line">Â Â Â Â /**Â theÂ textÂ toÂ showÂ insideÂ theÂ buttonÂ */</span><br><span class="line">Â Â Â Â text:Â string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interfaceÂ ContainerPropsÂ extendsÂ ButtonPropsÂ &#123;</span><br><span class="line">Â Â Â Â /**Â theÂ heightÂ ofÂ theÂ containerÂ (valueÂ usedÂ withÂ &#x27;px&#x27;)Â */</span><br><span class="line">Â Â Â Â height:Â number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">constÂ Container:Â React.FC&lt;ContainerProps&gt;Â =Â (&#123;Â color,Â height,Â width,Â textÂ &#125;)Â =&gt;Â &#123;</span><br><span class="line">Â Â returnÂ &lt;divÂ style=&#123;&#123;Â backgroundColor:Â color,Â height:Â `$&#123;height&#125;px`Â &#125;&#125;&gt;&#123;text&#125;&lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥è§£å†³é—®é¢˜ã€‚ç”±æ‚¨å†³å®šä½¿ç”¨å“ªä¸ªã€‚å°±ä¸ªäººè€Œè¨€ï¼Œæ‰©å±• interface æ›´å…·å¯è¯»æ€§ï¼Œä½†æœ€ç»ˆå–å†³äºä½ å’Œä½ çš„å›¢é˜Ÿã€‚</p>
<h1 id="ä¹ã€ç¼–è¯‘ä¸Šä¸‹æ–‡"><a href="#ä¹ã€ç¼–è¯‘ä¸Šä¸‹æ–‡" class="headerlink" title="ä¹ã€ç¼–è¯‘ä¸Šä¸‹æ–‡"></a>ä¹ã€ç¼–è¯‘ä¸Šä¸‹æ–‡</h1><h2 id="tsconfig-json-çš„ä½œç”¨"><a href="#tsconfig-json-çš„ä½œç”¨" class="headerlink" title="tsconfig.json çš„ä½œç”¨"></a>tsconfig.json çš„ä½œç”¨</h2><ul>
<li>ç”¨äºæ ‡è¯† TypeScript é¡¹ç›®çš„æ ¹è·¯å¾„ï¼›</li>
<li>ç”¨äºé…ç½® TypeScript ç¼–è¯‘å™¨ï¼›</li>
<li>ç”¨äºæŒ‡å®šç¼–è¯‘çš„æ–‡ä»¶ã€‚</li>
</ul>
<h2 id="tsconfig-json-é‡è¦å­—æ®µ"><a href="#tsconfig-json-é‡è¦å­—æ®µ" class="headerlink" title="tsconfig.json é‡è¦å­—æ®µ"></a>tsconfig.json é‡è¦å­—æ®µ</h2><ul>
<li>files - è®¾ç½®è¦ç¼–è¯‘çš„æ–‡ä»¶çš„åç§°ï¼›</li>
<li>include - è®¾ç½®éœ€è¦è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›</li>
<li>exclude - è®¾ç½®æ— éœ€è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›</li>
<li>compilerOptions - è®¾ç½®ä¸ç¼–è¯‘æµç¨‹ç›¸å…³çš„é€‰é¡¹ã€‚</li>
</ul>
<h2 id="compilerOptions-é€‰é¡¹"><a href="#compilerOptions-é€‰é¡¹" class="headerlink" title="compilerOptions é€‰é¡¹"></a>compilerOptions é€‰é¡¹</h2><p>compilerOptions æ”¯æŒå¾ˆå¤šé€‰é¡¹ï¼Œå¸¸è§çš„æœ‰ baseUrlã€ targetã€baseUrlã€ moduleResolution å’Œ lib ç­‰ã€‚</p>
<p>compilerOptions æ¯ä¸ªé€‰é¡¹çš„è¯¦ç»†è¯´æ˜å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line"></span><br><span class="line">    /* åŸºæœ¬é€‰é¡¹ */</span><br><span class="line">    &quot;target&quot;: &quot;es5&quot;,                       // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: &#x27;ES3&#x27; (default), &#x27;ES5&#x27;, &#x27;ES6&#x27;/&#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, or &#x27;ESNEXT&#x27;</span><br><span class="line">    &quot;module&quot;: &quot;commonjs&quot;,                  // æŒ‡å®šä½¿ç”¨æ¨¡å—: &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27; or &#x27;es2015&#x27;</span><br><span class="line">    &quot;lib&quot;: [],                             // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶</span><br><span class="line">    &quot;allowJs&quot;: true,                       // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶</span><br><span class="line">    &quot;checkJs&quot;: true,                       // æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯</span><br><span class="line">    &quot;jsx&quot;: &quot;preserve&quot;,                     // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: &#x27;preserve&#x27;, &#x27;react-native&#x27;, or &#x27;react&#x27;</span><br><span class="line">    &quot;declaration&quot;: true,                   // ç”Ÿæˆç›¸åº”çš„ &#x27;.d.ts&#x27; æ–‡ä»¶</span><br><span class="line">    &quot;sourceMap&quot;: true,                     // ç”Ÿæˆç›¸åº”çš„ &#x27;.map&#x27; æ–‡ä»¶</span><br><span class="line">    &quot;outFile&quot;: &quot;./&quot;,                       // å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶</span><br><span class="line">    &quot;outDir&quot;: &quot;./&quot;,                        // æŒ‡å®šè¾“å‡ºç›®å½•</span><br><span class="line">    &quot;rootDir&quot;: &quot;./&quot;,                       // ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.</span><br><span class="line">    &quot;removeComments&quot;: true,                // åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š</span><br><span class="line">    &quot;noEmit&quot;: true,                        // ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶</span><br><span class="line">    &quot;importHelpers&quot;: true,                 // ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°</span><br><span class="line">    &quot;isolatedModules&quot;: true,               // å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ &#x27;ts.transpileModule&#x27; ç±»ä¼¼ï¼‰.</span><br><span class="line"></span><br><span class="line">    /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */</span><br><span class="line">    &quot;strict&quot;: true,                        // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹</span><br><span class="line">    &quot;noImplicitAny&quot;: true,                 // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™</span><br><span class="line">    &quot;strictNullChecks&quot;: true,              // å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥</span><br><span class="line">    &quot;noImplicitThis&quot;: true,                // å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯</span><br><span class="line">    &quot;alwaysStrict&quot;: true,                  // ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ &#x27;use strict&#x27;</span><br><span class="line"></span><br><span class="line">    /* é¢å¤–çš„æ£€æŸ¥ */</span><br><span class="line">    &quot;noUnusedLocals&quot;: true,                // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class="line">    &quot;noUnusedParameters&quot;: true,            // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class="line">    &quot;noImplicitReturns&quot;: true,             // å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class="line">    &quot;noFallthroughCasesInSwitch&quot;: true,    // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰</span><br><span class="line"></span><br><span class="line">    /* æ¨¡å—è§£æé€‰é¡¹ */</span><br><span class="line">    &quot;moduleResolution&quot;: &quot;node&quot;,            // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š &#x27;node&#x27; (Node.js) or &#x27;classic&#x27; (TypeScript pre-1.6)</span><br><span class="line">    &quot;baseUrl&quot;: &quot;./&quot;,                       // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•</span><br><span class="line">    &quot;paths&quot;: &#123;&#125;,                           // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨</span><br><span class="line">    &quot;rootDirs&quot;: [],                        // æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹</span><br><span class="line">    &quot;typeRoots&quot;: [],                       // åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨</span><br><span class="line">    &quot;types&quot;: [],                           // éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨</span><br><span class="line">    &quot;allowSyntheticDefaultImports&quot;: true,  // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚</span><br><span class="line"></span><br><span class="line">    /* Source Map Options */</span><br><span class="line">    &quot;sourceRoot&quot;: &quot;./&quot;,                    // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®</span><br><span class="line">    &quot;mapRoot&quot;: &quot;./&quot;,                       // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®</span><br><span class="line">    &quot;inlineSourceMap&quot;: true,               // ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶</span><br><span class="line">    &quot;inlineSources&quot;: true,                 // å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§</span><br><span class="line"></span><br><span class="line">    /* å…¶ä»–é€‰é¡¹ */</span><br><span class="line">    &quot;experimentalDecorators&quot;: true,        // å¯ç”¨è£…é¥°å™¨</span><br><span class="line">    &quot;emitDecoratorMetadata&quot;: true          // ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>tsconfig.json é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">Â Â &quot;compilerOptions&quot;:Â &#123;</span><br><span class="line">Â Â Â Â &quot;target&quot;:Â &quot;es5&quot;,Â //Â æŒ‡å®šÂ ECMAScriptÂ ç‰ˆæœ¬</span><br><span class="line">Â Â Â Â &quot;lib&quot;:Â [</span><br><span class="line">Â Â Â Â Â Â &quot;dom&quot;,</span><br><span class="line">Â Â Â Â Â Â &quot;dom.iterable&quot;,</span><br><span class="line">Â Â Â Â Â Â &quot;esnext&quot;</span><br><span class="line">Â Â Â Â ],Â //Â è¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„ä¾èµ–åº“æ–‡ä»¶åˆ—è¡¨</span><br><span class="line">Â Â Â Â &quot;allowJs&quot;:Â true,Â //Â å…è®¸ç¼–è¯‘Â JavaScriptÂ æ–‡ä»¶</span><br><span class="line">Â Â Â Â &quot;skipLibCheck&quot;:Â true,Â //Â è·³è¿‡æ‰€æœ‰å£°æ˜æ–‡ä»¶çš„ç±»å‹æ£€æŸ¥</span><br><span class="line">Â Â Â Â &quot;esModuleInterop&quot;:Â true,Â //Â ç¦ç”¨å‘½åç©ºé—´å¼•ç”¨Â (importÂ *Â asÂ fsÂ fromÂ &quot;fs&quot;)Â å¯ç”¨Â CJS/AMD/UMDÂ é£æ ¼å¼•ç”¨Â (importÂ fsÂ fromÂ &quot;fs&quot;)</span><br><span class="line">Â Â Â Â &quot;allowSyntheticDefaultImports&quot;:Â true,Â //Â å…è®¸ä»æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„æ¨¡å—è¿›è¡Œé»˜è®¤å¯¼å…¥</span><br><span class="line">Â Â Â Â &quot;strict&quot;:Â true,Â //Â å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹</span><br><span class="line">Â Â Â Â &quot;forceConsistentCasingInFileNames&quot;:Â true,Â //Â ä¸å…è®¸å¯¹åŒä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨ä¸ä¸€è‡´æ ¼å¼çš„å¼•ç”¨</span><br><span class="line">Â Â Â Â &quot;module&quot;:Â &quot;esnext&quot;,Â //Â æŒ‡å®šæ¨¡å—ä»£ç ç”Ÿæˆ</span><br><span class="line">Â Â Â Â &quot;moduleResolution&quot;:Â &quot;node&quot;,Â //Â ä½¿ç”¨Â Node.jsÂ é£æ ¼è§£ææ¨¡å—</span><br><span class="line">Â Â Â Â &quot;resolveJsonModule&quot;:Â true,Â //Â å…è®¸ä½¿ç”¨Â .jsonÂ æ‰©å±•åå¯¼å…¥çš„æ¨¡å—</span><br><span class="line">Â Â Â Â &quot;noEmit&quot;:Â true,Â //Â ä¸è¾“å‡º(æ„æ€æ˜¯ä¸ç¼–è¯‘ä»£ç ï¼Œåªæ‰§è¡Œç±»å‹æ£€æŸ¥)</span><br><span class="line">Â Â Â Â &quot;jsx&quot;:Â &quot;react&quot;,Â //Â åœ¨.tsxæ–‡ä»¶ä¸­æ”¯æŒJSX</span><br><span class="line">Â Â Â Â &quot;sourceMap&quot;:Â true,Â //Â ç”Ÿæˆç›¸åº”çš„.mapæ–‡ä»¶</span><br><span class="line">Â Â Â Â &quot;declaration&quot;:Â true,Â //Â ç”Ÿæˆç›¸åº”çš„.d.tsæ–‡ä»¶</span><br><span class="line">Â Â Â Â &quot;noUnusedLocals&quot;:Â true,Â //Â æŠ¥å‘Šæœªä½¿ç”¨çš„æœ¬åœ°å˜é‡çš„é”™è¯¯</span><br><span class="line">Â Â Â Â &quot;noUnusedParameters&quot;:Â true,Â //Â æŠ¥å‘Šæœªä½¿ç”¨å‚æ•°çš„é”™è¯¯</span><br><span class="line">Â Â Â Â &quot;experimentalDecorators&quot;:Â true,Â //Â å¯ç”¨å¯¹ESè£…é¥°å™¨çš„å®éªŒæ€§æ”¯æŒ</span><br><span class="line">Â Â Â Â &quot;incremental&quot;:Â true,Â //Â é€šè¿‡ä»ä»¥å‰çš„ç¼–è¯‘ä¸­è¯»å–/å†™å…¥ä¿¡æ¯åˆ°ç£ç›˜ä¸Šçš„æ–‡ä»¶æ¥å¯ç”¨å¢é‡ç¼–è¯‘</span><br><span class="line">Â Â Â Â &quot;noFallthroughCasesInSwitch&quot;:Â trueÂ </span><br><span class="line">Â Â &#125;,</span><br><span class="line">Â Â &quot;include&quot;:Â [</span><br><span class="line">Â Â Â Â &quot;src/**/*&quot;Â //Â ***Â TypeScriptæ–‡ä»¶åº”è¯¥è¿›è¡Œç±»å‹æ£€æŸ¥Â ***</span><br><span class="line">Â Â ],</span><br><span class="line">Â Â &quot;exclude&quot;:Â [&quot;node_modules&quot;,Â &quot;build&quot;]Â //Â ***Â ä¸è¿›è¡Œç±»å‹æ£€æŸ¥çš„æ–‡ä»¶Â ***</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åã€å‚è€ƒèµ„æ–™"><a href="#åã€å‚è€ƒèµ„æ–™" class="headerlink" title="åã€å‚è€ƒèµ„æ–™"></a>åã€å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1641493?from=article.detail.1595718">äº†ä¸èµ·çš„ TypeScript å…¥é—¨æ•™ç¨‹</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.staleclosure.com/effective-typescript/">Effective Typescript</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40906515/article/details/106798727">ç”¨ TypeScript ç¼–å†™ React çš„æœ€ä½³å®è·µ</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1595718">TypeScript keyof æ“ä½œç¬¦</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/Vue3%E6%9C%80%E6%96%B0%E7%9A%8415%E4%B8%AA%E5%B8%B8%E7%94%A8Api/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/Vue3%E6%9C%80%E6%96%B0%E7%9A%8415%E4%B8%AA%E5%B8%B8%E7%94%A8Api/" class="post-title-link" itemprop="url">Vue3æœ€æ–°çš„15ä¸ªå¸¸ç”¨Api</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:17:50 / ä¿®æ”¹æ—¶é—´ï¼š14:23:32" itemprop="dateCreated datePublished" datetime="2022-12-16T14:17:50+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯æ¡†æ¶æ€»ç»“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Vue2 æ¯æ¬¡éƒ½æŠŠæ•´ä¸ª Vue å¯¼å…¥ï¼Œä¾‹å¦‚ Vue2 çš„ main.js æ–‡ä»¶ä¸­çš„ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  render: h =&gt; h(App)</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½†å¾ˆæ˜æ˜¾æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¸å¯èƒ½ç”¨åˆ° Vue æ‰€æœ‰çš„ APIï¼Œå› æ­¤å¾ˆå¤šæ¨¡å—å…¶å®æ˜¯æ²¡æœ‰ç”¨çš„</p>
<p>é‚£ä¹ˆåœ¨ Vue3 ä¸­ï¼Œå¯¹å¤–æš´éœ²äº†å¾ˆå¤šçš„ API ä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œå°†æ‰€éœ€è¦çš„ API ä» Vue ä¸­å¯¼å…¥ã€‚ä¾‹å¦‚ main.js ä¸­çš„ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line"></span><br><span class="line">createApp(App).mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

<p>åˆ©ç”¨äº† import å’Œ export çš„å¯¼å…¥å¯¼å‡ºè¯­æ³•ï¼Œå®ç°äº†æŒ‰éœ€æ‰“åŒ…æ¨¡å—çš„åŠŸèƒ½ï¼Œé¡¹ç›®æ‰“åŒ…åçš„æ–‡ä»¶ä½“ç§¯æ˜æ˜¾å°äº†å¾ˆå¤š</p>
<p>è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æœ¬æ–‡éœ€è¦å¯¹ Vue3 API è¿›è¡Œè¯¦ç»†äº†è§£çš„åŸå› </p>
<h2 id="ï¼ˆ1ï¼‰setup"><a href="#ï¼ˆ1ï¼‰setup" class="headerlink" title="ï¼ˆ1ï¼‰setup"></a>ï¼ˆ1ï¼‰setup</h2><p>setup å‡½æ•°ä¹Ÿæ˜¯ Composition API çš„å…¥å£å‡½æ•°ï¼Œæˆ‘ä»¬çš„å˜é‡ã€æ–¹æ³•éƒ½æ˜¯åœ¨è¯¥å‡½æ•°é‡Œå®šä¹‰çš„ï¼Œæ¥çœ‹ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  	&lt;p&gt;&#123;&#123; number &#125;&#125;&lt;/p&gt;</span><br><span class="line">  	&lt;button @click=&quot;add&quot;&gt;å¢åŠ &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 1. ä» vue ä¸­å¼•å…¥ ref å‡½æ•°</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">  	// 2. ç”¨ ref å‡½æ•°åŒ…è£…ä¸€ä¸ªå“åº”å¼å˜é‡ number</span><br><span class="line">    let number = ref(0)</span><br><span class="line"></span><br><span class="line">    // 3. è®¾å®šä¸€ä¸ªæ–¹æ³•</span><br><span class="line">    function add() &#123;</span><br><span class="line">    	// numberæ˜¯è¢«refå‡½æ•°åŒ…è£…è¿‡äº†çš„ï¼Œå…¶å€¼ä¿å­˜åœ¨.valueä¸­</span><br><span class="line">		number.value ++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    // 4. å°† number å’Œ add è¿”å›å‡ºå»ï¼Œä¾›templateä¸­ä½¿ç”¨</span><br><span class="line">    return &#123;number, add&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä¸­ç”¨åˆ°äº† ref å‡½æ•°ï¼Œä¸‹é¢ä¼šè¯¦ç»†è®²è§£ï¼Œåœ¨è¿™é‡Œä½ åªéœ€è¦ç†è§£å®ƒçš„ä½œç”¨æ˜¯åŒ…è£…ä¸€ä¸ªå“åº”å¼çš„æ•°æ®å³å¯ï¼Œå¹¶ä¸”ä½ å¯ä»¥å°† ref å‡½æ•°åŒ…è£…è¿‡çš„å˜é‡çœ‹ä½œæ˜¯ Vue2 data ä¸­çš„å˜é‡</p>
<p>è¿™æ ·å°±ç®€å•å®ç°äº†ä¸€ä¸ªç‚¹å‡»æŒ‰é’®æ•°å­—åŠ  1 çš„åŠŸèƒ½</p>
<hr>
<p>åœ¨ Vue2 ä¸­ï¼Œæˆ‘ä»¬è®¿é—® data æˆ– props ä¸­çš„å˜é‡ï¼Œéƒ½æ˜¯é€šè¿‡ç±»ä¼¼ this.number è¿™æ ·çš„å½¢å¼å»è·å–çš„ï¼Œä½†è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œåœ¨ setup ä¸­ï¼Œthis æŒ‡å‘çš„æ˜¯ undefinedï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½å†å‘ Vue2 ä¸€æ ·é€šè¿‡ this å»è·å–å˜é‡äº†</p>
<p>é‚£ä¹ˆåˆ°åº•è¯¥å¦‚ä½•è·å–åˆ° props ä¸­çš„æ•°æ®å‘¢ï¼Ÿ</p>
<p>å…¶å® setup å‡½æ•°è¿˜æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ props ã€contextï¼Œå‰è€…å­˜å‚¨ç€å®šä¹‰å½“å‰ç»„ä»¶å…è®¸å¤–ç•Œä¼ é€’è¿‡æ¥çš„å‚æ•°åç§°ä»¥åŠå¯¹åº”çš„å€¼ï¼›åè€…æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œèƒ½ä»ä¸­è®¿é—®åˆ° attr ã€emit ã€slots</p>
<p>å…¶ä¸­ emit å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ Vue2 ä¸­ä¸çˆ¶ç»„ä»¶é€šä¿¡çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥è°ƒç”¨</p>
<h2 id="ï¼ˆ2ï¼‰ç”Ÿå‘½å‘¨æœŸ"><a href="#ï¼ˆ2ï¼‰ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ï¼ˆ2ï¼‰ç”Ÿå‘½å‘¨æœŸ"></a>ï¼ˆ2ï¼‰ç”Ÿå‘½å‘¨æœŸ</h2><p>Vue2 ä¸­æœ‰ beforeCreate ã€created ã€beforeMount ã€mounted ã€beforeUpdate ç­‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p>
<p>è€Œåœ¨ Vue3 ä¸­ï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸéƒ¨åˆ†æœ‰æ‰€å˜åŒ–ï¼Œå¹¶ä¸”è°ƒç”¨çš„æ–¹å¼ä¹Ÿæœ‰æ‰€æ”¹å˜ï¼Œä¸‹é¢æ”¾ä¸Šä¸€å¼ å˜åŒ–å›¾æ¥ç®€å•äº†è§£ä¸€ä¸‹</p>
<table>
<thead>
<tr>
<th>Vue2</th>
<th>Vue3</th>
</tr>
</thead>
<tbody><tr>
<td>beforeCreate</td>
<td>setup</td>
</tr>
<tr>
<td>created</td>
<td>setup</td>
</tr>
<tr>
<td>beforeMount</td>
<td>onBeforeMount</td>
</tr>
<tr>
<td>mounted</td>
<td>onMounted</td>
</tr>
<tr>
<td>beforeUpdate</td>
<td>onBeforeUpdate</td>
</tr>
<tr>
<td>updated</td>
<td>onUpdated</td>
</tr>
<tr>
<td>beforeDestory</td>
<td>onBeforeUnmount</td>
</tr>
<tr>
<td>destoryed</td>
<td>onUnmounted</td>
</tr>
</tbody></table>
<p>Vue3 çš„è¿™äº›ç”Ÿå‘½å‘¨æœŸè°ƒç”¨ä¹Ÿå¾ˆç®€å•ï¼ŒåŒæ ·æ˜¯å…ˆä» vue ä¸­å¯¼å…¥ï¼Œå†è¿›è¡Œç›´æ¥è°ƒç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 1. ä» vue ä¸­å¼•å…¥ å¤šä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°</span><br><span class="line">import &#123;onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, unMounted&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">	onBeforeMount(() =&gt; &#123;</span><br><span class="line">		// åœ¨æŒ‚è½½å‰æ‰§è¡ŒæŸäº›ä»£ç </span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	onMounted(() =&gt; &#123;</span><br><span class="line">		// åœ¨æŒ‚è½½åæ‰§è¡ŒæŸäº›ä»£ç </span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	onBeforeUpdate(() =&gt; &#123;</span><br><span class="line">		// åœ¨æ›´æ–°å‰å‰æ‰§è¡ŒæŸäº›ä»£ç </span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	onUpdated(() =&gt; &#123;</span><br><span class="line">		// åœ¨æ›´æ–°åæ‰§è¡ŒæŸäº›ä»£ç </span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	onBeforeUnmount(() =&gt; &#123;</span><br><span class="line">		// åœ¨ç»„ä»¶é”€æ¯å‰æ‰§è¡ŒæŸäº›ä»£ç </span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	onUnmounted(() =&gt; &#123;</span><br><span class="line">		// åœ¨ç»„ä»¶é”€æ¯åæ‰§è¡ŒæŸäº›ä»£ç </span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ï¼ˆ3ï¼‰reactive"><a href="#ï¼ˆ3ï¼‰reactive" class="headerlink" title="ï¼ˆ3ï¼‰reactive"></a>ï¼ˆ3ï¼‰reactive</h2><p>reactive æ–¹æ³•æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„æ•°æ®å¯¹è±¡ï¼Œè¯¥ API ä¹Ÿå¾ˆå¥½åœ°è§£å†³äº† Vue2 é€šè¿‡ defineProperty å®ç°æ•°æ®å“åº”å¼çš„ç¼ºé™·</p>
<p>ç”¨æ³•å¾ˆç®€å•ï¼Œåªéœ€å°†æ•°æ®ä½œä¸ºå‚æ•°ä¼ å…¥å³å¯ï¼Œä»£ç å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  	&lt;!-- 4. è®¿é—®å“åº”å¼æ•°æ®å¯¹è±¡ä¸­çš„ count  --&gt;</span><br><span class="line">  	&#123;&#123; state.count &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 1. ä» vue ä¸­å¯¼å…¥ reactive</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">  	// 2. åˆ›å»ºå“åº”å¼çš„æ•°æ®å¯¹è±¡</span><br><span class="line">	const state = reactive(&#123;count: 3&#125;)</span><br><span class="line"></span><br><span class="line">	// 3. å°†å“åº”å¼æ•°æ®å¯¹è±¡state return å‡ºå»ï¼Œä¾›templateä½¿ç”¨</span><br><span class="line">    return &#123;state&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ï¼ˆ4ï¼‰ref"><a href="#ï¼ˆ4ï¼‰ref" class="headerlink" title="ï¼ˆ4ï¼‰ref"></a>ï¼ˆ4ï¼‰ref</h2><p>åœ¨ä»‹ç» setup å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† ref å‡½æ•°åŒ…è£…äº†ä¸€ä¸ªå“åº”å¼çš„æ•°æ®å¯¹è±¡ï¼Œè¿™é‡Œè¡¨é¢ä¸Šçœ‹ä¸Šå»è·Ÿ reactive å¥½åƒåŠŸèƒ½ä¸€æ¨¡ä¸€æ ·å•Šï¼Œç¡®å®å·®ä¸å¤šï¼Œå› ä¸º ref å°±æ˜¯é€šè¿‡ reactive åŒ…è£…äº†ä¸€ä¸ªå¯¹è±¡ ï¼Œç„¶åæ˜¯å°†å€¼ä¼ ç»™è¯¥å¯¹è±¡ä¸­çš„ value å±æ€§ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆæ¯æ¬¡è®¿é—®æ—¶æˆ‘ä»¬éƒ½éœ€è¦åŠ ä¸Š .value</p>
<p>æˆ‘ä»¬å¯ä»¥ç®€å•åœ°æŠŠ ref(obj) ç†è§£ä¸ºè¿™ä¸ªæ ·å­ reactive({value: obj})</p>
<p>è¿™é‡Œæˆ‘ä»¬å†™ä¸€æ®µä»£ç æ¥å…·ä½“çœ‹ä¸€ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref, reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">  	const obj = &#123;count: 3&#125;</span><br><span class="line">  	const state1 = ref(obj)</span><br><span class="line">  	const state2 = reactive(obj)</span><br><span class="line"></span><br><span class="line">	console.log(state1)</span><br><span class="line">	console.log(state2)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æ¥çœ‹ä¸€ä¸‹æ‰“å°ç»“æœ<br><img src="https://img-blog.csdnimg.cn/20201118122406844.png?x-oss-process=image" alt="image"></p>
<blockquote>
<p>æ³¨æ„ï¼š è¿™é‡ŒæŒ‡çš„ .value æ˜¯åœ¨ setup å‡½æ•°ä¸­è®¿é—® ref åŒ…è£…åçš„å¯¹è±¡æ—¶æ‰éœ€è¦åŠ çš„ï¼Œåœ¨ template æ¨¡æ¿ä¸­è®¿é—®æ—¶æ˜¯ä¸éœ€è¦çš„ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè‡ªåŠ¨è¯†åˆ«å…¶æ˜¯å¦ä¸º ref åŒ…è£…è¿‡çš„</p>
</blockquote>
<p>é‚£ä¹ˆæˆ‘ä»¬åˆ°åº•è¯¥å¦‚ä½•é€‰æ‹© ref å’Œ reactive å‘¢ï¼Ÿ</p>
<p><strong>å»ºè®®ï¼š</strong></p>
<ol>
<li>åŸºæœ¬ç±»å‹å€¼ï¼ˆString ã€Number ã€Boolean ç­‰ï¼‰æˆ–å•å€¼å¯¹è±¡ï¼ˆç±»ä¼¼åƒ {count: 3} è¿™æ ·åªæœ‰ä¸€ä¸ªå±æ€§å€¼çš„å¯¹è±¡ï¼‰ä½¿ç”¨ ref</li>
<li>å¼•ç”¨ç±»å‹å€¼ï¼ˆObject ã€Arrayï¼‰ä½¿ç”¨ reactive</li>
</ol>
<h2 id="ï¼ˆ5ï¼‰toRef"><a href="#ï¼ˆ5ï¼‰toRef" class="headerlink" title="ï¼ˆ5ï¼‰toRef"></a>ï¼ˆ5ï¼‰toRef</h2><p>toRef æ˜¯å°†æŸä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå€¼è½¬åŒ–ä¸ºå“åº”å¼æ•°æ®ï¼Œå…¶æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸º obj å¯¹è±¡ï¼›ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¯¹è±¡ä¸­çš„å±æ€§å</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">// 1. å¯¼å…¥ toRef</span><br><span class="line">import &#123;toRef&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;count: 3&#125;</span><br><span class="line">        // 2. å°† obj å¯¹è±¡ä¸­å±æ€§countçš„å€¼è½¬åŒ–ä¸ºå“åº”å¼æ•°æ®</span><br><span class="line">        const state = toRef(obj, &#x27;count&#x27;)</span><br><span class="line"></span><br><span class="line">		// 3. å°†toRefåŒ…è£…è¿‡çš„æ•°æ®å¯¹è±¡è¿”å›ä¾›templateä½¿ç”¨</span><br><span class="line">        return &#123;state&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>ä½†å…¶å®è¡¨é¢ä¸Šçœ‹ä¸Šå» toRef è¿™ä¸ª API å¥½åƒéå¸¸çš„æ²¡ç”¨ï¼Œå› ä¸ºè¿™ä¸ªåŠŸèƒ½ä¹Ÿå¯ä»¥ç”¨ ref å®ç°ï¼Œä»£ç å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">// 1. å¯¼å…¥ ref</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;count: 3&#125;</span><br><span class="line">        // 2. å°† obj å¯¹è±¡ä¸­å±æ€§countçš„å€¼è½¬åŒ–ä¸ºå“åº”å¼æ•°æ®</span><br><span class="line">        const state = ref(obj.count)</span><br><span class="line"></span><br><span class="line">		// 3. å°†refåŒ…è£…è¿‡çš„æ•°æ®å¯¹è±¡è¿”å›ä¾›templateä½¿ç”¨</span><br><span class="line">        return &#123;state&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>ä¹ä¸€çœ‹å¥½åƒè¿˜çœŸæ˜¯ï¼Œå…¶å®è¿™ä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥æ¯”è¾ƒä¸€ä¸‹ï¼Œä»£ç å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; state1 &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;add1&quot;&gt;å¢åŠ &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">	&lt;p&gt;&#123;&#123; state2 &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;add2&quot;&gt;å¢åŠ &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref, toRef&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;count: 3&#125;</span><br><span class="line">        const state1 = ref(obj.count)</span><br><span class="line">        const state2 = toRef(obj, &#x27;count&#x27;)</span><br><span class="line"></span><br><span class="line">        function add1() &#123;</span><br><span class="line">            state1.value ++</span><br><span class="line">            console.log(&#x27;åŸå§‹å€¼ï¼š&#x27;, obj);</span><br><span class="line">            console.log(&#x27;å“åº”å¼æ•°æ®å¯¹è±¡ï¼š&#x27;, state1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		function add2() &#123;</span><br><span class="line">            state2.value ++</span><br><span class="line">            console.log(&#x27;åŸå§‹å€¼ï¼š&#x27;, obj);</span><br><span class="line">            console.log(&#x27;å“åº”å¼æ•°æ®å¯¹è±¡ï¼š&#x27;, state2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return &#123;state1, state2, add1, add2&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åˆ†åˆ«ç”¨ ref å’Œ toRef å°† obj ä¸­çš„ count è½¬åŒ–ä¸ºå“åº”å¼ï¼Œå¹¶å£°æ˜äº†ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«ä½¿ count å€¼å¢åŠ ï¼Œæ¯æ¬¡å¢åŠ åæ‰“å°ä¸€ä¸‹åŸå§‹å€¼ obj å’Œè¢«åŒ…è£…è¿‡çš„å“åº”å¼æ•°æ®å¯¹è±¡ï¼ŒåŒæ—¶è¿˜è¦çœ‹çœ‹è§†å›¾çš„å˜åŒ–</p>
<p><strong>refï¼š</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20201118131536584.gif#pic_center" alt="image"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å¯¹å“åº”å¼æ•°æ®çš„å€¼è¿›è¡Œ +1 æ“ä½œåï¼Œè§†å›¾æ”¹å˜äº†ï¼ŒåŸå§‹å€¼æœªæ”¹å˜ï¼Œå“åº”å¼æ•°æ®å¯¹è±¡çš„å€¼ä¹Ÿæ”¹å˜äº†ï¼Œè¿™è¯´æ˜ ref æ˜¯å¯¹åŸæ•°æ®çš„ä¸€ä¸ªæ‹·è´ï¼Œä¸ä¼šå½±å“åˆ°åŸå§‹å€¼ï¼ŒåŒæ—¶å“åº”å¼æ•°æ®å¯¹è±¡å€¼æ”¹å˜åä¼šåŒæ­¥æ›´æ–°è§†å›¾</p>
<p><strong>toRefï¼š</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20201118131948827.gif#pic_center" alt="image"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å¯¹å“åº”å¼æ•°æ®çš„å€¼è¿›è¡Œ +1 æ“ä½œåï¼Œè§†å›¾æœªå‘ç”Ÿæ”¹å˜ï¼ŒåŸå§‹å€¼æ”¹å˜äº†ï¼Œå“åº”å¼æ•°æ®å¯¹è±¡çš„å€¼ä¹Ÿæ”¹å˜äº†ï¼Œè¿™è¯´æ˜ toRef æ˜¯å¯¹åŸæ•°æ®çš„ä¸€ä¸ªå¼•ç”¨ï¼Œä¼šå½±å“åˆ°åŸå§‹å€¼ï¼Œä½†æ˜¯å“åº”å¼æ•°æ®å¯¹è±¡å€¼æ”¹å˜åä¼šä¸ä¼šæ›´æ–°è§†å›¾</p>
<p>æ€»ç»“ï¼š</p>
<ul>
<li>ref æ˜¯å¯¹ä¼ å…¥æ•°æ®çš„æ‹·è´ï¼›toRef æ˜¯å¯¹ä¼ å…¥æ•°æ®çš„å¼•ç”¨</li>
<li>ref çš„å€¼æ”¹å˜ä¼šæ›´æ–°è§†å›¾ï¼›toRef çš„å€¼æ”¹å˜ä¸ä¼šæ›´æ–°è§†å›¾</li>
</ul>
<h2 id="ï¼ˆ6ï¼‰toRefs"><a href="#ï¼ˆ6ï¼‰toRefs" class="headerlink" title="ï¼ˆ6ï¼‰toRefs"></a>ï¼ˆ6ï¼‰toRefs</h2><p>äº†è§£å®Œ toRef åï¼Œå°±å¾ˆå¥½ç†è§£ toRefs äº†ï¼Œå…¶ä½œç”¨å°±æ˜¯å°†ä¼ å…¥çš„å¯¹è±¡é‡Œæ‰€æœ‰çš„å±æ€§çš„å€¼éƒ½è½¬åŒ–ä¸ºå“åº”å¼æ•°æ®å¯¹è±¡ï¼Œè¯¥å‡½æ•°æ”¯æŒä¸€ä¸ªå‚æ•°ï¼Œå³ obj å¯¹è±¡</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®ƒçš„åŸºæœ¬ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">// 1. å¯¼å…¥ toRefs</span><br><span class="line">import &#123;toRefs&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;</span><br><span class="line">			name: &#x27;å‰ç«¯å°è±¡&#x27;,</span><br><span class="line">			age: 22,</span><br><span class="line">			gender: 0</span><br><span class="line">		&#125;</span><br><span class="line">        // 2. å°† obj å¯¹è±¡ä¸­å±æ€§countçš„å€¼è½¬åŒ–ä¸ºå“åº”å¼æ•°æ®</span><br><span class="line">        const state = toRefs(obj)</span><br><span class="line"></span><br><span class="line">		// 3. æ‰“å°æŸ¥çœ‹ä¸€ä¸‹</span><br><span class="line">		console.log(state)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°ç»“æœå¦‚ä¸‹ï¼š<br><img src="https://img-blog.csdnimg.cn/20201118132812793.png#pic_center" alt="image"></p>
<p>è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡ŒåŒ…å«äº†æ¯ä¸€ä¸ªåŒ…è£…è¿‡åçš„å“åº”å¼æ•°æ®å¯¹è±¡</p>
<h2 id="ï¼ˆ7ï¼‰shallowReactive"><a href="#ï¼ˆ7ï¼‰shallowReactive" class="headerlink" title="ï¼ˆ7ï¼‰shallowReactive"></a>ï¼ˆ7ï¼‰shallowReactive</h2><p>å¬è¿™ä¸ª API çš„åç§°å°±çŸ¥é“ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¸å±‚çš„ reactiveï¼Œéš¾é“æ„æ€å°±æ˜¯åŸæœ¬çš„ reactive æ˜¯æ·±å±‚çš„å‘—ï¼Œæ²¡é”™ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºæ€§èƒ½ä¼˜åŒ–çš„ API</p>
<p>å…¶å®å°† obj ä½œä¸ºå‚æ•°ä¼ é€’ç»™ reactive ç”Ÿæˆå“åº”å¼æ•°æ®å¯¹è±¡æ—¶ï¼Œè‹¥ obj çš„å±‚çº§ä¸æ­¢ä¸€å±‚ï¼Œé‚£ä¹ˆä¼šå°†æ¯ä¸€å±‚éƒ½ç”¨ Proxy åŒ…è£…ä¸€æ¬¡ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;</span><br><span class="line">			a: 1,</span><br><span class="line">			first: &#123;</span><br><span class="line">				b: 2,</span><br><span class="line">				second: &#123;</span><br><span class="line">					c: 3</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        const state = reactive(obj)</span><br><span class="line"></span><br><span class="line">		console.log(state)</span><br><span class="line">		console.log(state.first)</span><br><span class="line">		console.log(state.first.second)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æ¥çœ‹ä¸€ä¸‹æ‰“å°ç»“æœï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20201118134158778.png#pic_center" alt="image"></p>
<p>è®¾æƒ³ä¸€ä¸‹å¦‚æœä¸€ä¸ªå¯¹è±¡å±‚çº§æ¯”è¾ƒæ·±ï¼Œé‚£ä¹ˆæ¯ä¸€å±‚éƒ½ç”¨ Proxy åŒ…è£…åï¼Œå¯¹äºæ€§èƒ½æ˜¯éå¸¸ä¸å‹å¥½çš„</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹çœ‹ shallowReactive</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;shallowReactive&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;</span><br><span class="line">			a: 1,</span><br><span class="line">			first: &#123;</span><br><span class="line">				b: 2,</span><br><span class="line">				second: &#123;</span><br><span class="line">					c: 3</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        const state = shallowReactive(obj)</span><br><span class="line"></span><br><span class="line">		console.log(state)</span><br><span class="line">		console.log(state.first)</span><br><span class="line">		console.log(state.first.second)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æ¥çœ‹ä¸€ä¸‹æ‰“å°ç»“æœï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20201118134358346.png#pic_center" alt="image"></p>
<p>ç»“æœéå¸¸çš„æ˜äº†äº†ï¼Œåªæœ‰ç¬¬ä¸€å±‚è¢« Proxy å¤„ç†äº†ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä¿®æ”¹ç¬¬ä¸€å±‚çš„å€¼æ—¶ï¼Œæ‰ä¼šå“åº”å¼æ›´æ–°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.a &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.first.b &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.first.second.c &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;button @click=&quot;change1&quot;&gt;æ”¹å˜1&lt;/button&gt;</span><br><span class="line">	&lt;button @click=&quot;change2&quot;&gt;æ”¹å˜2&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;shallowReactive&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;</span><br><span class="line">			a: 1,</span><br><span class="line">			first: &#123;</span><br><span class="line">				b: 2,</span><br><span class="line">				second: &#123;</span><br><span class="line">					c: 3</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        const state = shallowReactive(obj)</span><br><span class="line"></span><br><span class="line">		function change1() &#123;</span><br><span class="line">			state.a = 7</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		function change2() &#123;</span><br><span class="line">			state.first.b = 8</span><br><span class="line">			state.first.second.c = 9</span><br><span class="line">			console.log(state);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return &#123;state&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æ¥çœ‹ä¸€ä¸‹å…·ä½“è¿‡ç¨‹ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/2020111814184662.gif#pic_center" alt="image"></p>
<p>é¦–å…ˆæˆ‘ä»¬ç‚¹å‡»äº†ç¬¬äºŒä¸ªæŒ‰é’®ï¼Œæ”¹å˜äº†ç¬¬äºŒå±‚çš„ b å’Œç¬¬ä¸‰å±‚çš„ cï¼Œè™½ç„¶å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œä½†æ˜¯è§†å›¾å´æ²¡æœ‰è¿›è¡Œæ›´æ–°ï¼›</p>
<p>å½“æˆ‘ä»¬ç‚¹å‡»äº†ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼Œæ”¹å˜äº†ç¬¬ä¸€å±‚çš„ a æ—¶ï¼Œæ•´ä¸ªè§†å›¾è¿›è¡Œäº†æ›´æ–°ï¼›</p>
<p>ç”±æ­¤å¯è¯´æ˜ï¼ŒshallowReactive ç›‘å¬äº†ç¬¬ä¸€å±‚å±æ€§çš„å€¼ï¼Œä¸€æ—¦å‘ç”Ÿæ”¹å˜ï¼Œåˆ™æ›´æ–°è§†å›¾</p>
<h2 id="ï¼ˆ8ï¼‰shallowRef"><a href="#ï¼ˆ8ï¼‰shallowRef" class="headerlink" title="ï¼ˆ8ï¼‰shallowRef"></a>ï¼ˆ8ï¼‰shallowRef</h2><p>è¿™æ˜¯ä¸€ä¸ªæµ…å±‚çš„ refï¼Œä¸ shallowReactive ä¸€æ ·æ˜¯æ‹¿æ¥åšæ€§èƒ½ä¼˜åŒ–çš„</p>
<p>shallowReactive æ˜¯ç›‘å¬å¯¹è±¡ç¬¬ä¸€å±‚çš„æ•°æ®å˜åŒ–ç”¨äºé©±åŠ¨è§†å›¾æ›´æ–°ï¼Œé‚£ä¹ˆ shallowRef åˆ™æ˜¯ç›‘å¬ .value çš„å€¼çš„å˜åŒ–æ¥æ›´æ–°è§†å›¾çš„</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…·ä½“ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.a &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.first.b &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.first.second.c &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;button @click=&quot;change1&quot;&gt;æ”¹å˜1&lt;/button&gt;</span><br><span class="line">	&lt;button @click=&quot;change2&quot;&gt;æ”¹å˜2&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;shallowRef&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;</span><br><span class="line">			a: 1,</span><br><span class="line">			first: &#123;</span><br><span class="line">				b: 2,</span><br><span class="line">				second: &#123;</span><br><span class="line">					c: 3</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		const state = shallowRef(obj)</span><br><span class="line">		console.log(state);</span><br><span class="line"></span><br><span class="line">		function change1() &#123;</span><br><span class="line">			// ç›´æ¥å°†state.valueé‡æ–°èµ‹å€¼</span><br><span class="line">			state.value = &#123;</span><br><span class="line">				a: 7,</span><br><span class="line">				first: &#123;</span><br><span class="line">					b: 8,</span><br><span class="line">					second: &#123;</span><br><span class="line">						c: 9</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		function change2() &#123;</span><br><span class="line">			state.value.first.b = 8</span><br><span class="line">            state.value.first.second.c = 9</span><br><span class="line">            console.log(state);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return &#123;state, change1, change2&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆçœ‹ä¸€ä¸‹è¢« shallowRef åŒ…è£…è¿‡åæ˜¯æ€æ ·çš„ç»“æ„</p>
<p><img src="https://img-blog.csdnimg.cn/20201119112420368.png?x-oss-process=image" alt="image"></p>
<p>ç„¶åå†æ¥çœ‹çœ‹æ”¹å˜å…¶å€¼ä¼šæœ‰ä»€ä¹ˆå˜åŒ–</p>
<p><img src="https://img-blog.csdnimg.cn/20201119112840682.gif#pic_center" alt="image"></p>
<p>æˆ‘ä»¬å…ˆç‚¹å‡»äº†ç¬¬äºŒä¸ªæŒ‰é’®ï¼Œå‘ç°æ•°æ®ç¡®å®è¢«æ”¹å˜äº†ï¼Œä½†æ˜¯è§†å›¾å¹¶æ²¡éšä¹‹æ›´æ–°ï¼›</p>
<p>äºæ˜¯ç‚¹å‡»äº†ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼Œå³å°†æ•´ä¸ª .value é‡æ–°èµ‹å€¼äº†ï¼Œè§†å›¾å°±ç«‹é©¬æ›´æ–°äº†</p>
<p>è¿™ä¹ˆä¸€çœ‹ï¼Œæœªå…ä¹Ÿå¤ªè¿‡éº»çƒ¦äº†ï¼Œæ”¹ä¸ªæ•°æ®è¿˜è¦é‡æ–°èµ‹å€¼ï¼Œä¸è¦æ‹…å¿ƒï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç”¨åˆ°å¦ä¸€ä¸ª APIï¼Œå«åš triggerRef ï¼Œè°ƒç”¨å®ƒå°±å¯ä»¥ç«‹é©¬æ›´æ–°è§†å›¾ï¼Œå…¶æ¥æ”¶ä¸€ä¸ªå‚æ•° state ï¼Œå³éœ€è¦æ›´æ–°çš„ ref å¯¹è±¡</p>
<p>æˆ‘ä»¬æ¥ä½¿ç”¨ä¸€ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.a &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.first.b &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.first.second.c &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;button @click=&quot;change&quot;&gt;æ”¹å˜&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;shallowRef, triggerRef&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;</span><br><span class="line">			a: 1,</span><br><span class="line">			first: &#123;</span><br><span class="line">				b: 2,</span><br><span class="line">				second: &#123;</span><br><span class="line">					c: 3</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		const state = shallowRef(obj)</span><br><span class="line">		console.log(state);</span><br><span class="line"></span><br><span class="line">		function change() &#123;</span><br><span class="line">			state.value.first.b = 8</span><br><span class="line">            state.value.first.second.c = 9</span><br><span class="line">            // ä¿®æ”¹å€¼åç«‹å³é©±åŠ¨è§†å›¾æ›´æ–°</span><br><span class="line">            triggerRef(state)</span><br><span class="line">            console.log(state);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return &#123;state, change&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…·ä½“è¿‡ç¨‹<br><img src="https://img-blog.csdnimg.cn/20201119113821279.gif#pic_center" alt="image"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ²¡æœ‰ç»™ .value é‡æ–°èµ‹å€¼ï¼Œåªæ˜¯åœ¨ä¿®æ”¹å€¼åï¼Œè°ƒç”¨äº† triggerRef å°±å®ç°äº†è§†å›¾çš„æ›´æ–°</p>
<h2 id="ï¼ˆ9ï¼‰toRaw"><a href="#ï¼ˆ9ï¼‰toRaw" class="headerlink" title="ï¼ˆ9ï¼‰toRaw"></a>ï¼ˆ9ï¼‰toRaw</h2><p>toRaw æ–¹æ³•æ˜¯ç”¨äºè·å– ref æˆ– reactive å¯¹è±¡çš„åŸå§‹æ•°æ®çš„</p>
<p>å…ˆæ¥çœ‹ä¸€æ®µä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.age &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;button @click=&quot;change&quot;&gt;æ”¹å˜&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;</span><br><span class="line">			name: &#x27;å‰ç«¯å°è±¡&#x27;,</span><br><span class="line">			age: 22</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		const state = reactive(obj)</span><br><span class="line"></span><br><span class="line">		function change() &#123;</span><br><span class="line">			state.age = 90</span><br><span class="line">			console.log(obj); // æ‰“å°åŸå§‹æ•°æ®obj</span><br><span class="line">			console.log(state);  // æ‰“å° reactiveå¯¹è±¡</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return &#123;state, change&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æ¥çœ‹çœ‹å…·ä½“è¿‡ç¨‹</p>
<p><img src="https://img-blog.csdnimg.cn/20201119120334341.gif#pic_center" alt="image"></p>
<p>æˆ‘ä»¬æ”¹å˜äº† reactive å¯¹è±¡ä¸­çš„æ•°æ®ï¼Œäºæ˜¯çœ‹åˆ°åŸå§‹æ•°æ® obj å’Œè¢« reactive åŒ…è£…è¿‡çš„å¯¹è±¡çš„å€¼éƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸¤è€…æ˜¯ä¸€ä¸ªå¼•ç”¨å…³ç³»</p>
<p>é‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å°±æƒ³äº†ï¼Œé‚£å¦‚æœç›´æ¥æ”¹å˜åŸå§‹æ•°æ® obj çš„å€¼ï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š reactive çš„å€¼ä¹Ÿä¼šè·Ÿç€æ”¹å˜ï¼Œä½†æ˜¯è§†å›¾ä¸ä¼šæ›´æ–°</p>
<p>ç”±æ­¤å¯è§ï¼Œå½“æˆ‘ä»¬æƒ³ä¿®æ”¹æ•°æ®ï¼Œä½†ä¸æƒ³è®©è§†å›¾æ›´æ–°æ—¶ï¼Œå¯ä»¥é€‰æ‹©ç›´æ¥ä¿®æ”¹åŸå§‹æ•°æ®ä¸Šçš„å€¼ï¼Œå› æ­¤éœ€è¦å…ˆè·å–åˆ°åŸå§‹æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Vue3 æä¾›çš„ toRaw æ–¹æ³•</p>
<p>toRaw æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³ ref å¯¹è±¡æˆ– reactive å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive, toRaw&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;</span><br><span class="line">			name: &#x27;å‰ç«¯å°è±¡&#x27;,</span><br><span class="line">			age: 22</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		const state = reactive(obj)</span><br><span class="line">		const raw = toRaw(state)</span><br><span class="line"></span><br><span class="line">		console.log(obj === raw)   // true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç å°±è¯æ˜äº† toRaw æ–¹æ³•ä» reactive å¯¹è±¡ä¸­è·å–åˆ°çš„æ˜¯åŸå§‹æ•°æ®ï¼Œå› æ­¤æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡ä¿®æ”¹åŸå§‹æ•°æ®çš„å€¼è€Œä¸æ›´æ–°è§†å›¾æ¥åšä¸€äº›æ€§èƒ½ä¼˜åŒ–äº†</p>
<blockquote>
<p>æ³¨æ„ï¼š è¡¥å……ä¸€å¥ï¼Œå½“ toRaw æ–¹æ³•æ¥æ”¶çš„å‚æ•°æ˜¯ ref å¯¹è±¡æ—¶ï¼Œéœ€è¦åŠ ä¸Š .value æ‰èƒ½è·å–åˆ°åŸå§‹æ•°æ®å¯¹è±¡</p>
</blockquote>
<h2 id="ï¼ˆ10ï¼‰markRaw"><a href="#ï¼ˆ10ï¼‰markRaw" class="headerlink" title="ï¼ˆ10ï¼‰markRaw"></a>ï¼ˆ10ï¼‰markRaw</h2><p>markRaw æ–¹æ³•å¯ä»¥å°†åŸå§‹æ•°æ®æ ‡è®°ä¸ºéå“åº”å¼çš„ï¼Œå³ä½¿ç”¨ ref æˆ– reactive å°†å…¶åŒ…è£…ï¼Œä»æ— æ³•å®ç°æ•°æ®å“åº”å¼ï¼Œå…¶æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³åŸå§‹æ•°æ®ï¼Œå¹¶è¿”å›è¢«æ ‡è®°åçš„æ•°æ®</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; state.age &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;button @click=&quot;change&quot;&gt;æ”¹å˜&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive, markRaw&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj = &#123;</span><br><span class="line">			name: &#x27;å‰ç«¯å°è±¡&#x27;,</span><br><span class="line">			age: 22</span><br><span class="line">		&#125;</span><br><span class="line">		// é€šè¿‡markRawæ ‡è®°åŸå§‹æ•°æ®obj, ä½¿å…¶æ•°æ®æ›´æ–°ä¸å†è¢«è¿½è¸ª</span><br><span class="line">		const raw = markRaw(obj)</span><br><span class="line">		// è¯•å›¾ç”¨reactiveåŒ…è£…raw, ä½¿å…¶å˜æˆå“åº”å¼æ•°æ®</span><br><span class="line">		const state = reactive(raw)</span><br><span class="line"></span><br><span class="line">		function change() &#123;</span><br><span class="line">			state.age = 90</span><br><span class="line">			console.log(state);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return &#123;state, change&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åœ¨è¢« markRaw æ–¹æ³•å¤„ç†è¿‡åçš„æ•°æ®æ˜¯å¦è¿˜èƒ½è¢« reactive åŒ…è£…æˆå“åº”å¼æ•°æ®</p>
<p><img src="https://img-blog.csdnimg.cn/20201119130344291.gif#pic_center" alt="image"></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿æˆ‘ä»¬ä¿®æ”¹äº†å€¼ä¹Ÿä¸ä¼šæ›´æ–°è§†å›¾äº†ï¼Œå³æ²¡æœ‰å®ç°æ•°æ®å“åº”å¼</p>
<h2 id="ï¼ˆ11ï¼‰provide-amp-amp-inject"><a href="#ï¼ˆ11ï¼‰provide-amp-amp-inject" class="headerlink" title="ï¼ˆ11ï¼‰provide &amp;&amp; inject"></a>ï¼ˆ11ï¼‰provide &amp;&amp; inject</h2><p>ä¸ Vue2 ä¸­çš„ provide å’Œ inject ä½œç”¨ç›¸åŒï¼Œåªä¸è¿‡åœ¨ Vue3 ä¸­éœ€è¦æ‰‹åŠ¨ä» vue ä¸­å¯¼å…¥</p>
<p>è¿™é‡Œç®€å•è¯´æ˜ä¸€ä¸‹è¿™ä¸¤ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼š</p>
<ul>
<li>provide ï¼šå‘å­ç»„ä»¶ä»¥åŠå­å­™ç»„ä»¶ä¼ é€’æ•°æ®ã€‚æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ keyï¼Œå³æ•°æ®çš„åç§°ï¼›ç¬¬äºŒä¸ªå‚æ•°ä¸º valueï¼Œå³æ•°æ®çš„å€¼</li>
<li>inject ï¼šæ¥æ”¶çˆ¶ç»„ä»¶æˆ–ç¥–å…ˆç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®ã€‚æ¥æ”¶ä¸€ä¸ªå‚æ•° keyï¼Œå³çˆ¶ç»„ä»¶æˆ–ç¥–å…ˆç»„ä»¶ä¼ é€’çš„æ•°æ®åç§°</li>
</ul>
<p>å‡è®¾è¿™æœ‰ä¸‰ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ A.vue ã€B.vue ã€C.vueï¼Œå…¶ä¸­ B.vue æ˜¯ A.vue çš„å­ç»„ä»¶ï¼ŒC.vue æ˜¯ B.vue çš„å­ç»„ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">// A.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;provide&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const obj= &#123;</span><br><span class="line">			name: &#x27;å‰ç«¯å°è±¡&#x27;,</span><br><span class="line">			age: 22</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		// å‘å­ç»„ä»¶ä»¥åŠå­å­™ç»„ä»¶ä¼ é€’åä¸ºinfoçš„æ•°æ®</span><br><span class="line">		provide(&#x27;info&#x27;, obj)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">// B.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;inject&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">		// æ¥æ”¶A.vueä¼ é€’è¿‡æ¥çš„æ•°æ®</span><br><span class="line">		inject(&#x27;info&#x27;)  // &#123;name: &#x27;å‰ç«¯å°è±¡&#x27;, age: 22&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">// C.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;inject&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">		// æ¥æ”¶A.vueä¼ é€’è¿‡æ¥çš„æ•°æ®</span><br><span class="line">		inject(&#x27;info&#x27;)  // &#123;name: &#x27;å‰ç«¯å°è±¡&#x27;, age: 22&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ï¼ˆ12ï¼‰watch-amp-amp-watchEffect"><a href="#ï¼ˆ12ï¼‰watch-amp-amp-watchEffect" class="headerlink" title="ï¼ˆ12ï¼‰watch &amp;&amp; watchEffect"></a>ï¼ˆ12ï¼‰watch &amp;&amp; watchEffect</h3><p>watch å’Œ watchEffect éƒ½æ˜¯ç”¨æ¥ç›‘è§†æŸé¡¹æ•°æ®å˜åŒ–ä»è€Œæ‰§è¡ŒæŒ‡å®šçš„æ“ä½œçš„ï¼Œä½†ç”¨æ³•ä¸Šè¿˜æ˜¯æœ‰æ‰€åŒºåˆ«</p>
<p>watchï¼šwatch( source, cb, [options] )</p>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>sourceï¼šå¯ä»¥æ˜¯è¡¨è¾¾å¼æˆ–å‡½æ•°ï¼Œç”¨äºæŒ‡å®šç›‘å¬çš„ä¾èµ–å¯¹è±¡</li>
<li>cbï¼šä¾èµ–å¯¹è±¡å˜åŒ–åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</li>
<li>optionsï¼šå¯é€‰å‚æ•°ï¼Œå¯ä»¥é…ç½®çš„å±æ€§æœ‰ immediateï¼ˆç«‹å³è§¦å‘å›è°ƒå‡½æ•°ï¼‰ã€deepï¼ˆæ·±åº¦ç›‘å¬ï¼‰<br>å½“ç›‘å¬ ref ç±»å‹æ—¶ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">		const state = ref(0)</span><br><span class="line"></span><br><span class="line">		watch(state, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">			console.log(`åŸå€¼ä¸º$&#123;oldValue&#125;`)</span><br><span class="line">			console.log(`æ–°å€¼ä¸º$&#123;newValue&#125;`)</span><br><span class="line">			/* 1ç§’åæ‰“å°ç»“æœï¼š</span><br><span class="line">							åŸå€¼ä¸º0</span><br><span class="line">							æ–°å€¼ä¸º1</span><br><span class="line">			*/</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		// 1ç§’åå°†stateå€¼+1</span><br><span class="line">		setTimeout(() =&gt; &#123;</span><br><span class="line">			state.value ++</span><br><span class="line">		&#125;, 1000)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>å½“ç›‘å¬ reactive ç±»å‹æ—¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">		const state = reactive(&#123;count: 0&#125;)</span><br><span class="line"></span><br><span class="line">		watch(() =&gt; state.count, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">			console.log(`åŸå€¼ä¸º$&#123;oldValue&#125;`)</span><br><span class="line">			console.log(`æ–°å€¼ä¸º$&#123;newValue&#125;`)</span><br><span class="line">			/* 1ç§’åæ‰“å°ç»“æœï¼š</span><br><span class="line">							åŸå€¼ä¸º0</span><br><span class="line">							æ–°å€¼ä¸º1</span><br><span class="line">			*/</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		// 1ç§’åå°†state.countçš„å€¼+1</span><br><span class="line">		setTimeout(() =&gt; &#123;</span><br><span class="line">			state.count ++</span><br><span class="line">		&#125;, 1000)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>å½“åŒæ—¶ç›‘å¬å¤šä¸ªå€¼æ—¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive, watch&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">		const state = reactive(&#123; count: 0, name: &#x27;zs&#x27; &#125;)</span><br><span class="line"></span><br><span class="line">	   watch(</span><br><span class="line">	      [() =&gt; state.count, () =&gt; state.name],</span><br><span class="line">	      ([newCount, newName], [oldvCount, oldvName]) =&gt; &#123;</span><br><span class="line">	        console.log(oldvCount) // æ—§çš„ count å€¼</span><br><span class="line">	        console.log(newCount) // æ–°çš„ count å€¼</span><br><span class="line">	        console.log(oldName) // æ—§çš„ name å€¼</span><br><span class="line">	        console.log(newvName) // æ–°çš„ name å€¼</span><br><span class="line">	      &#125;</span><br><span class="line">	    )</span><br><span class="line"></span><br><span class="line">	    setTimeout(() =&gt; &#123;</span><br><span class="line">	      state.count ++</span><br><span class="line">	      state.name = &#x27;ls&#x27;</span><br><span class="line">	    &#125;, 1000)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>å› ä¸º watch æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æˆ‘ä»¬å·²ç»æŒ‡å®šäº†ç›‘å¬çš„å¯¹è±¡ï¼Œå› æ­¤å½“ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œä¸ä¼šæ‰§è¡Œç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å›è°ƒå‡½æ•°ï¼Œè‹¥æˆ‘ä»¬æƒ³è®©å…¶åˆå§‹åŒ–æ—¶å°±å…ˆæ‰§è¡Œä¸€éï¼Œå¯ä»¥åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°å¯¹è±¡ä¸­è®¾ç½® immediate: true</p>
<p>watch æ–¹æ³•é»˜è®¤æ˜¯æµ…å±‚çš„ç›‘å¬æˆ‘ä»¬æŒ‡å®šçš„æ•°æ®ï¼Œä¾‹å¦‚å¦‚æœç›‘å¬çš„æ•°æ®æœ‰å¤šå±‚åµŒå¥—ï¼Œæ·±å±‚çš„æ•°æ®å˜åŒ–ä¸ä¼šè§¦å‘ç›‘å¬çš„å›è°ƒï¼Œè‹¥æˆ‘ä»¬æƒ³è¦å…¶å¯¹æ·±å±‚æ•°æ®ä¹Ÿè¿›è¡Œç›‘å¬ï¼Œå¯ä»¥åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°å¯¹è±¡ä¸­è®¾ç½® deep: true</p>
<blockquote>
<p>è¡¥å……ï¼š watch æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª stop æ–¹æ³•ï¼Œè‹¥æƒ³è¦åœæ­¢ç›‘å¬ï¼Œä¾¿å¯ç›´æ¥æ‰§è¡Œè¯¥ stop å‡½æ•°</p>
</blockquote>
<p>æ¥ä¸‹æ¥å†æ¥èŠèŠ watchEffectï¼Œå®ƒä¸ watch çš„åŒºåˆ«ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>ä¸éœ€è¦æ‰‹åŠ¨ä¼ å…¥ä¾èµ–</li>
<li>æ¯æ¬¡åˆå§‹åŒ–æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°æ¥è‡ªåŠ¨è·å–ä¾èµ–</li>
<li>æ— æ³•è·å–åˆ°åŸå€¼ï¼Œåªèƒ½å¾—åˆ°å˜åŒ–åçš„å€¼<br>æ¥çœ‹ä¸€ä¸‹è¯¥æ–¹æ³•å¦‚ä½•ä½¿ç”¨ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive, watchEffect&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">		const state = reactive(&#123; count: 0, name: &#x27;zs&#x27; &#125;)</span><br><span class="line"></span><br><span class="line">	   	watchEffect(() =&gt; &#123;</span><br><span class="line">			console.log(state.count)</span><br><span class="line">			console.log(state.name)</span><br><span class="line">			/*  åˆå§‹åŒ–æ—¶æ‰“å°ï¼š</span><br><span class="line">							0</span><br><span class="line">							zs</span><br><span class="line"></span><br><span class="line">				1ç§’åæ‰“å°ï¼š</span><br><span class="line">							1</span><br><span class="line">							ls</span><br><span class="line">			*/</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">	    setTimeout(() =&gt; &#123;</span><br><span class="line">	      state.count ++</span><br><span class="line">	      state.name = &#x27;ls&#x27;</span><br><span class="line">	    &#125;, 1000)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šè¿°ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åƒ watch æ–¹æ³•ä¸€æ ·å…ˆç»™å…¶ä¼ å…¥ä¸€ä¸ªä¾èµ–ï¼Œè€Œæ˜¯ç›´æ¥æŒ‡å®šäº†ä¸€ä¸ªå›è°ƒå‡½æ•°</p>
<p>å½“ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œå°†è¯¥å›è°ƒå‡½æ•°æ‰§è¡Œä¸€æ¬¡ï¼Œè‡ªåŠ¨è·å–åˆ°éœ€è¦æ£€æµ‹çš„æ•°æ®æ˜¯ state.count å’Œ state.name</p>
<p>æ ¹æ®ä»¥ä¸Šç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªè¡Œé€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªç›‘å¬å™¨</p>
<h2 id="ï¼ˆ13ï¼‰getCurrentInstance"><a href="#ï¼ˆ13ï¼‰getCurrentInstance" class="headerlink" title="ï¼ˆ13ï¼‰getCurrentInstance"></a>ï¼ˆ13ï¼‰getCurrentInstance</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“åœ¨ Vue2 çš„ä»»ä½•ä¸€ä¸ªç»„ä»¶ä¸­æƒ³è¦è·å–å½“å‰ç»„ä»¶çš„å®ä¾‹å¯ä»¥é€šè¿‡ this æ¥å¾—åˆ°ï¼Œè€Œåœ¨ Vue3 ä¸­æˆ‘ä»¬å¤§é‡çš„ä»£ç éƒ½åœ¨ setup å‡½æ•°ä¸­è¿è¡Œï¼Œå¹¶ä¸”åœ¨è¯¥å‡½æ•°ä¸­ this æŒ‡å‘çš„æ˜¯ undefinedï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•è·å–åˆ°å½“å‰ç»„ä»¶çš„å®ä¾‹å‘¢ï¼Ÿ</p>
<p>è¿™æ—¶å¯ä»¥ç”¨åˆ°å¦ä¸€ä¸ªæ–¹æ³•ï¼Œå³ getCurrentInstance</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; num &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref, getCurrentInstance&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">    	const num = ref(3)</span><br><span class="line">		const instance = getCurrentInstance()</span><br><span class="line">		console.log(instance)</span><br><span class="line"></span><br><span class="line">		return &#123;num&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…¶æ‰“å°ç»“æœ</p>
<p><img src="https://img-blog.csdnimg.cn/20201119141859447.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xfUFBQ,size_16,color_FFFFFF,t_70#pic_center" alt="image"></p>
<p>å› ä¸º instance åŒ…å«çš„å†…å®¹å¤ªå¤šï¼Œæ‰€ä»¥æ²¡æˆªå®Œæ•´ï¼Œä½†æ˜¯ä¸»è¦çš„å†…å®¹éƒ½åœ¨å›¾ä¸Šäº†ï¼Œæˆ‘ä»¬é‡ç‚¹æ¥çœ‹ä¸€ä¸‹ ctx å’Œ proxyï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ‰æ˜¯æˆ‘ä»¬æƒ³è¦çš„ this çš„å†…å®¹</p>
<p><img src="https://img-blog.csdnimg.cn/20201119142920681.png?x-oss-process=image" alt="image"></p>
<p>å¯ä»¥çœ‹åˆ° ctx å’Œ proxy çš„å†…å®¹ååˆ†ç±»ä¼¼ï¼Œåªæ˜¯åè€…ç›¸å¯¹äºå‰è€…å¤–éƒ¨åŒ…è£…äº†ä¸€å±‚ proxyï¼Œç”±æ­¤å¯è¯´æ˜ proxy æ˜¯å“åº”å¼çš„</p>
<h2 id="ï¼ˆ14ï¼‰useStore"><a href="#ï¼ˆ14ï¼‰useStore" class="headerlink" title="ï¼ˆ14ï¼‰useStore"></a>ï¼ˆ14ï¼‰useStore</h2><p>åœ¨ Vue2 ä¸­ä½¿ç”¨ Vuexï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ this.$store æ¥è·å–åˆ° Vuex å®ä¾‹ï¼Œä½†ä¸Šä¸€éƒ¨åˆ†è¯´äº†åŸæœ¬ Vue2 ä¸­çš„ this çš„è·å–æ–¹å¼ä¸ä¸€æ ·äº†ï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨ Vue3 çš„ getCurrentInstance().ctx ä¸­ä¹Ÿæ²¡æœ‰å‘ç° $store è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå¦‚ä½•è·å–åˆ° Vuex å®ä¾‹å‘¢ï¼Ÿè¿™å°±è¦é€šè¿‡ vuex ä¸­çš„ä¸€ä¸ªæ–¹æ³•äº†ï¼Œå³ useStore</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// store æ–‡ä»¶å¤¹ä¸‹çš„ index.js</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">const store = Vuex.createStore(&#123;</span><br><span class="line">	state: &#123;</span><br><span class="line">		name: &#x27;å‰ç«¯å°è±¡&#x27;,</span><br><span class="line">		age: 22</span><br><span class="line">	&#125;,</span><br><span class="line">	mutations: &#123;</span><br><span class="line">		â€¦â€¦</span><br><span class="line">	&#125;,</span><br><span class="line">	â€¦â€¦</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// example.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ä» vuex ä¸­å¯¼å…¥ useStore æ–¹æ³•</span><br><span class="line">import &#123;useStore&#125; from &#x27;vuex&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">    	// è·å– vuex å®ä¾‹</span><br><span class="line">    	const store = useStore()</span><br><span class="line"></span><br><span class="line">		console.log(store)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ‰“å°ç»“æœ</p>
<p><img src="https://img-blog.csdnimg.cn/20201119145014243.png?x-oss-process=image#pic_center" alt="image"></p>
<p>ç„¶åæ¥ä¸‹æ¥å°±å¯ä»¥åƒä¹‹å‰ä¸€æ ·æ­£å¸¸ä½¿ç”¨ vuex äº†</p>
<h2 id="ï¼ˆ15ï¼‰è·å–æ ‡ç­¾å…ƒç´ "><a href="#ï¼ˆ15ï¼‰è·å–æ ‡ç­¾å…ƒç´ " class="headerlink" title="ï¼ˆ15ï¼‰è·å–æ ‡ç­¾å…ƒç´ "></a>ï¼ˆ15ï¼‰è·å–æ ‡ç­¾å…ƒç´ </h2><p>æœ€åå†è¡¥å……ä¸€ä¸ª ref å¦å¤–çš„ä½œç”¨ï¼Œé‚£å°±æ˜¯å¯ä»¥è·å–åˆ°æ ‡ç­¾å…ƒç´ æˆ–ç»„ä»¶</p>
<p>åœ¨ Vue2 ä¸­ï¼Œæˆ‘ä»¬è·å–å…ƒç´ éƒ½æ˜¯é€šè¿‡ç»™å…ƒç´ ä¸€ä¸ª ref å±æ€§ï¼Œç„¶åé€šè¿‡ this.$refs.xx æ¥è®¿é—®çš„ï¼Œä½†è¿™åœ¨ Vue3 ä¸­å·²ç»ä¸å†é€‚ç”¨äº†</p>
<p>æ¥ä¸‹æ¥çœ‹çœ‹ Vue3 ä¸­æ˜¯å¦‚ä½•è·å–å…ƒç´ çš„å§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div ref=&quot;el&quot;&gt;divå…ƒç´ &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    // åˆ›å»ºä¸€ä¸ªDOMå¼•ç”¨ï¼Œåç§°å¿…é¡»ä¸å…ƒç´ çš„refå±æ€§åç›¸åŒ</span><br><span class="line">    const el = ref(null)</span><br><span class="line"></span><br><span class="line">    // åœ¨æŒ‚è½½åæ‰èƒ½é€šè¿‡ el è·å–åˆ°ç›®æ ‡å…ƒç´ </span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      el.value.innerHTML = &#x27;å†…å®¹è¢«ä¿®æ”¹&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    // æŠŠåˆ›å»ºçš„å¼•ç”¨ return å‡ºå»</span><br><span class="line">    return &#123;el&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>è·å–å…ƒç´ çš„æ“ä½œä¸€å…±åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>å…ˆç»™ç›®æ ‡å…ƒç´ çš„ ref å±æ€§è®¾ç½®ä¸€ä¸ªå€¼ï¼Œå‡è®¾ä¸º el</li>
<li>ç„¶ååœ¨ setup å‡½æ•°ä¸­è°ƒç”¨ ref å‡½æ•°ï¼Œå€¼ä¸º nullï¼Œå¹¶èµ‹å€¼ç»™å˜é‡ elï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œè¯¥å˜é‡åå¿…é¡»ä¸æˆ‘ä»¬ç»™å…ƒç´ è®¾ç½®çš„ ref å±æ€§åç›¸åŒ</li>
<li>æŠŠå¯¹å…ƒç´ çš„å¼•ç”¨å˜é‡ el è¿”å›ï¼ˆreturnï¼‰å‡ºå»</li>
</ul>
<blockquote>
<p>è¡¥å……ï¼šè®¾ç½®çš„å…ƒç´ å¼•ç”¨å˜é‡åªæœ‰åœ¨ç»„ä»¶æŒ‚è½½åæ‰èƒ½è®¿é—®åˆ°ï¼Œå› æ­¤åœ¨æŒ‚è½½å‰å¯¹å…ƒç´ è¿›è¡Œæ“ä½œéƒ½æ˜¯æ— æ•ˆçš„</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/Vue%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/Vue%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Vueå­¦ä¹ çŸ¥è¯†ç‚¹æ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:17:42 / ä¿®æ”¹æ—¶é—´ï¼š14:34:31" itemprop="dateCreated datePublished" datetime="2022-12-16T14:17:42+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯æ¡†æ¶æ€»ç»“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Vue æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚</p>
<h2 id="ä¸€ã€Vue-åŸºç¡€ä½¿ç”¨"><a href="#ä¸€ã€Vue-åŸºç¡€ä½¿ç”¨" class="headerlink" title="ä¸€ã€Vue åŸºç¡€ä½¿ç”¨"></a>ä¸€ã€Vue åŸºç¡€ä½¿ç”¨</h2><h3 id="vue-çš„ä½¿ç”¨"><a href="#vue-çš„ä½¿ç”¨" class="headerlink" title="vue çš„ä½¿ç”¨"></a>vue çš„ä½¿ç”¨</h3><blockquote>
<p>ä¸‹è½½ Vueï¼šnpm i vue</p>
</blockquote>
<ol>
<li>é¦–å…ˆä¸‹è½½ vueï¼Œå¼•å…¥ vue.js</li>
<li>js ä¸­åˆ›å»ºä¸€ä¸ª Vue å¯¹è±¡å®ä¾‹</li>
<li>é€šè¿‡ el æŒ‡å®š vue ç®¡ç†é¡µé¢çš„è¾¹ç•Œ</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼•å…¥vue.jsæ–‡ä»¶ --&gt;</span><br><span class="line">&lt;script src=&quot;lib/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;message&quot; type=&quot;text&quot;&gt;&lt;br&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123;message&#125;&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸‹è½½Vueï¼šnpm i vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        /**</span><br><span class="line">        *   elæ˜¯elementçš„ç®€å†™ï¼Œç”¨æ¥æŒ‡å®švueç®¡ç†é¡µé¢çš„è¾¹ç•Œï¼Œ</span><br><span class="line">        *   ä¹Ÿå°±æ˜¯è¯´åªæœ‰åŒ…è£¹åœ¨ #appå†…éƒ¨çš„å…ƒç´ ï¼Œæ‰ä¼šæ”¶åˆ°Vueçš„ç®¡ç†ï¼ï¼ï¼</span><br><span class="line">        */</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">        *   é¡µé¢ä¸­ç”¨çš„åˆ°æ•°æ®éƒ½æ”¾åˆ°dataå¯¹è±¡ä¸­</span><br><span class="line">        */</span><br><span class="line">        data: &#123;</span><br><span class="line">            message: &#x27;é‚“ç´«æ£‹å–œæ¬¢ä½ &#x27;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // å†™Vueå¯èƒ½ä¼šé‡åˆ°çš„é”™è¯¯ï¼š</span><br><span class="line">        // 1 æ³¨æ„ï¼šVue æ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ï¼ï¼</span><br><span class="line">        // 2 æ³¨æ„ï¼šåœ¨ Vue ä¸­ï¼ŒHTMLå±æ€§å€¼æ— æ³•ä½¿ç”¨ `&#123;&#123;&#125;&#125;`ï¼ï¼ï¼</span><br><span class="line">        // 3 å¼€å‘æœŸé—´ä¸€å®šè¦ä½¿ç”¨æœªå‹ç¼©ç‰ˆçš„Vueï¼ˆå¼€å‘ç‰ˆï¼‰</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">    *   vmæ˜¯Vueçš„å¯¹è±¡å®ä¾‹ï¼Œå¯ä»¥é€šè¿‡vm.$data.å±æ€§åè·å–dataä¸­çš„å±æ€§å€¼ï¼Œå¯ä»¥çœç•¥$data</span><br><span class="line">    */</span><br><span class="line">    console.log(vm.message)</span><br><span class="line">    console.log(vm.$data.message)</span><br><span class="line">    console.log(vm.message === vm.$data.message)</span><br></pre></td></tr></table></figure>

<h3 id="Mustache-è¡¨è¾¾å¼ä½¿ç”¨"><a href="#Mustache-è¡¨è¾¾å¼ä½¿ç”¨" class="headerlink" title="Mustache è¡¨è¾¾å¼ä½¿ç”¨"></a>Mustache è¡¨è¾¾å¼ä½¿ç”¨</h3><blockquote>
<p>åŒèŠ±æ‹¬å·<code>&#123;&#123;&#125;&#125;</code> å°±æ˜¯ mustache è¯­æ³•ï¼Œç”¨äºå±•ç¤º data ä¸­çš„å†…å®¹,mustache ä¸­å¯ä»¥å‡ºç°ä»»æ„çš„ JS è¡¨è¾¾å¼ï¼›</p>
</blockquote>
<ul>
<li>è¡¨è¾¾å¼<code>&#123;&#123;&#125;&#125;</code>åªèƒ½ä»æ•°æ®å¯¹è±¡ data ä¸­è·å–æ•°æ®ï¼›</li>
<li>mustache ä¸­ä¸èƒ½å‡ºç°è¯­å¥ï¼Œæ¯”å¦‚ï¼šif () {} &#x2F; for(var i &#x3D;0 â€¦) {} &#x2F; var num &#x3D; 1;</li>
<li>Mustache è¯­æ³•ä¸èƒ½ä½œç”¨åœ¨ HTML å…ƒç´ çš„å±æ€§ä¸Šï¼›</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; 1 + 2 &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; [&#x27;a&#x27;, &#x27;c&#x27;, &#x27;b&#x27;] &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; [&#x27;a&#x27;, &#x27;c&#x27;, &#x27;b&#x27;].join(&#x27;-&#x27;) &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; msg + &#x27; -- æ‹¼æ¥å†…å®¹&#x27; &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; age &gt; 18 ? &#x27;æˆå¹´äº†&#x27; : &#x27;æœªæˆå¹´&#x27; &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; Math.random() &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el:&#x27;#app&#x27;,</span><br><span class="line">        data:&#123;</span><br><span class="line">            msg:&#x27;é‚“ç´«æ£‹é‡‘é±¼å˜´&#x27;,</span><br><span class="line">            age:19</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="æŒ‡ä»¤-v-ä½¿ç”¨"><a href="#æŒ‡ä»¤-v-ä½¿ç”¨" class="headerlink" title="æŒ‡ä»¤ v-ä½¿ç”¨"></a>æŒ‡ä»¤ v-ä½¿ç”¨</h3><blockquote>
<p>æŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Šå±æ€§ï¼Œå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äº DOMã€‚</p>
</blockquote>
<h4 id="1-v-text"><a href="#1-v-text" class="headerlink" title="1.v-text"></a>1.v-text</h4><blockquote>
<p>ç”¨æ¥è®¾ç½®å½“å‰å…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼Œç›¸å½“äº DOM å¯¹è±¡çš„ innerText æˆ– textContent</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-text=&#x27;msg&#x27;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-v-html"><a href="#2-v-html" class="headerlink" title="2.v-html"></a>2.v-html</h4><blockquote>
<p>æ›´æ–° DOM å¯¹è±¡çš„ innerHTML</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-html=&#x27;htmlMsg&#x27;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-v-bind"><a href="#3-v-bind" class="headerlink" title="3.v-bind"></a>3.v-bind</h4><blockquote>
<p>é€šè¿‡ v-bind ä¸º HTML å…ƒç´ ç»‘å®šå±æ€§ï¼Œä½¿ç”¨ data ä¸­æä¾›çš„æ•°æ®;<br>å› ä¸º v-bind:title è¿™ç§ä½¿ç”¨æ–¹å¼å¾ˆç¹çï¼Œæ‰€ä»¥ï¼Œvue æä¾›äº†ä¸€ä¸ªç®€åŒ–è¯­æ³• :title</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;img v-bind:title=&#x27;msg&#x27; v-bind:src=&#x27;imgPath&#x27; v-bind:name=&#x27;name&#x27;&gt;</span><br><span class="line">&lt;img :title=&#x27;msg&#x27; :src=&#x27;imgPath&#x27; :name=&#x27;name&#x27;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4-v-on"><a href="#4-v-on" class="headerlink" title="4.v-on"></a>4.v-on</h4><blockquote>
<p>ç»‘å®šäº‹ä»¶,<strong>æ”¯æŒ js æ‰€æœ‰çš„äº‹ä»¶ç±»å‹</strong>ï¼Œ v-on ç»‘å®šçš„äº‹ä»¶æ–¹æ³•éƒ½è¦å†™åœ¨ Vue å®ä¾‹ä¸­çš„ methods å¯¹è±¡ä¸­;<br>v-on:çœç•¥å†™ @</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-on:click=&#x27;getData&#x27;&gt;ç‚¹æˆ‘&lt;/button&gt;&lt;input v-on:onfocus=&#x27;getFocus&#x27;&gt;</span><br><span class="line">&lt;button @click=&#x27;getData&#x27;&gt;ç‚¹æˆ‘&lt;/button&gt;&lt;input @onfocus=&#x27;getFocus&#x27;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="5-v-model"><a href="#5-v-model" class="headerlink" title="5.v-model"></a>5.v-model</h4><blockquote>
<p>åœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®š;<br>åªèƒ½ç”¨åœ¨è¡¨å•å…ƒç´ ä¸­ï¼Œæ³¨æ„ï¼šä¸åŒçš„è¡¨å•å…ƒç´ ï¼Œv-model çš„è¡¨ç°å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚<br>æ¯”å¦‚ï¼šv-model æ“ä½œæ–‡æœ¬æ¡†çš„ value å±æ€§ï¼Œè€Œå¤é€‰æ¡† v-model å°±æ˜¯æ“ä½œå…¶é€‰ä¸­çŠ¶æ€;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç»‘å®šçš„æ˜¯æ–‡æœ¬æ¡†è¾“å…¥çš„å†…å®¹ --&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&#x27;msg&#x27;&gt;</span><br><span class="line">&lt;!-- ç»‘å®šçš„æ˜¯å¤é€‰æ¡†æ˜¯å¦é€‰ä¸­ --&gt;</span><br><span class="line">&lt;input type=&quot;checkbox&quot; v-model=&#x27;isCheck&#x27;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="6-v-for"><a href="#6-v-for" class="headerlink" title="6.v-for"></a>6.v-for</h4><blockquote>
<p>åŸºäºæºæ•°æ®å¤šæ¬¡æ¸²æŸ“å…ƒç´ æˆ–æ¨¡æ¿å—,ä¸ä»…å¯ä»¥æ¸²æŸ“é›†åˆ List ä¹Ÿå¯ä»¥éå†å¯¹è±¡ Objï¼›</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- v-for éå†listé›†åˆ--&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;!--1.itemæ˜¯æ¯ä¸€é¡¹å¯¹è±¡</span><br><span class="line">        ä½¿ç”¨ v-for çš„æ—¶å€™æä¾› key å±æ€§ï¼Œä»¥è·å¾—æ€§èƒ½æå‡ã€‚</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;li v-for=&#x27;item in list&#x27; :key=&#x27;item.key&#x27;&gt;</span><br><span class="line">        å§“åï¼š&#123;&#123;item.name&#125;&#125; -- å¹´é¾„ï¼š&#123;&#123;item.age&#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--2.item ä¸ºå½“å‰é¡¹ï¼Œindex ä¸ºç´¢å¼• --&gt;</span><br><span class="line">    &lt;li v-for=&#x27;(item,index) in list&#x27;&gt;</span><br><span class="line">        å§“åï¼š&#123;&#123;item.name&#125;&#125; -- å¹´é¾„ï¼š&#123;&#123;item.age&#125;&#125; -- ä¸‹æ ‡ï¼š&#123;&#123;index&#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- v-for Objå¯¹è±¡ value,key,indexé¡ºåºä¸èƒ½å˜ --&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&#x27;(value,key,index) in csObj&#x27;&gt;</span><br><span class="line">        key=&#123;&#123;key&#125;&#125; -- value=&#123;&#123;value&#125;&#125; -- index=&#123;&#123;index&#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<h4 id="7-v-bind-class-å’Œ-v-bind-style"><a href="#7-v-bind-class-å’Œ-v-bind-style" class="headerlink" title="7.v-bind:class å’Œ v-bind:style"></a>7.v-bind:class å’Œ v-bind:style</h4><blockquote>
<p>è¡¨è¾¾å¼çš„ç±»å‹ï¼šå­—ç¬¦ä¸²ã€æ•°ç»„ã€å¯¹è±¡ï¼ˆé‡ç‚¹ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¯ä»¥æ˜¯å¯¹è±¡ï¼Œkeyæ˜¯ç±»å valueæ˜¯å¸ƒå°”å€¼ï¼Œå¦‚æœæ˜¯trueå°±æ·»åŠ è¿™ä¸ªç±»ï¼Œå¦åˆ™å°±ä¸æ·»åŠ --&gt;</span><br><span class="line">&lt;h2 :class=&#x27;&#123;pink:true,green:true&#125;&#x27;&gt;ä¸­å›½æƒŠå¥‡å…ˆç”Ÿ&lt;/h2&gt;</span><br><span class="line">&lt;!-- å¯ä»¥æ˜¯æ•°ç»„ï¼Œ--&gt;</span><br><span class="line">&lt;h2 :class=&#x27;[&#x27;pink&#x27;,&#x27;fz&#x27;,&#x27;green&#x27;]&#x27;&gt;æ–—ç½—å¤§é™†&lt;/h2&gt;</span><br><span class="line">&lt;h2 :style=&quot;&#123; color: activeColor, &#x27;font-size&#x27;: fontSize + &#x27;px&#x27; &#125;&quot;&gt;ä¸è‰¯äºº&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<h4 id="8-v-if"><a href="#8-v-if" class="headerlink" title="8.v-if"></a>8.v-if</h4><blockquote>
<p>æ ¹æ®è¡¨è¾¾å¼å¸ƒå°”å€¼çš„çœŸå‡æ¡ä»¶æ˜¯å¦åŠ è½½è¿™æ®µä»£ç ï¼Œ true:DOM ä¸­ä¼šåŠ è½½è¿™æ®µä»£ç ï¼Œfalse:DOM ä¸­ä¸ä¼šåŠ è½½è¿™æ®µä»£ç ï¼›</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3 v-if=&#x27;isIF&#x27;&gt;æˆ‘æ˜¯v-if,æ˜¯å¦ä¼šåŠ è½½æˆ‘&lt;/h3&gt;</span><br></pre></td></tr></table></figure>

<h4 id="9-v-show"><a href="#9-v-show" class="headerlink" title="9.v-show"></a>9.v-show</h4><blockquote>
<p>æ ¹æ®è¡¨è¾¾å¼ä¹‹çœŸå‡å€¼ï¼Œåˆ‡æ¢å…ƒç´ çš„ display CSS å±æ€§ï¼Œæ— è®º true è¿˜æ˜¯ false DOM ä¸­éƒ½ä¼šåŠ è½½è¿™æ®µä»£ç ï¼›</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3 v-show=&#x27;isShow&#x27;&gt;æˆ‘æ˜¯v-showï¼Œæ˜¯å¦ä¼šæ˜¾ç¤ºå‡ºæ¥</span><br><span class="line">&lt;/h3&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-v-pre"><a href="#10-v-pre" class="headerlink" title="10.v-pre"></a>10.v-pre</h4><blockquote>
<p>è·³è¿‡è¿™ä¸ªå…ƒç´ å’Œå®ƒçš„å­å…ƒç´ çš„ç¼–è¯‘è¿‡ç¨‹ã€‚å¯ä»¥ç”¨æ¥æ˜¾ç¤ºåŸå§‹ Mustache æ ‡ç­¾ã€‚è·³è¿‡å¤§é‡æ²¡æœ‰æŒ‡ä»¤çš„èŠ‚ç‚¹ä¼šåŠ å¿«ç¼–è¯‘ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--æµ‹è¯•ï¼šé¡µé¢ä¸­çš„msgä¸ä¼šæ˜¾ç¤ºdataä¸­çš„å†…å®¹ï¼Œå› ä¸ºè·³è¿‡äº†è¡¨è¾¾å¼ç¼–è¯‘--&gt;</span><br><span class="line"> &lt;div v-pre&gt;v-preè·³è¿‡ç¼–è¯‘è¿‡ç¨‹ &#123;&#123;msg&#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="11-v-once"><a href="#11-v-once" class="headerlink" title="11.v-once"></a>11.v-once</h4><blockquote>
<p>åªæ¸²æŸ“å…ƒç´ å’Œç»„ä»¶ä¸€æ¬¡ã€‚éšåçš„é‡æ–°æ¸²æŸ“ï¼Œå…ƒç´ &#x2F;ç»„ä»¶åŠå…¶æ‰€æœ‰çš„å­èŠ‚ç‚¹å°†è¢«è§†ä¸ºé™æ€å†…å®¹å¹¶è·³è¿‡ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--æµ‹è¯•ï¼šåœ¨æ§åˆ¶å°é€šè¿‡vmå¯¹è±¡ä¿®æ”¹msg,é¡µé¢æ˜¾ç¤ºä¸­çš„msgå†…å®¹ä¸ä¼šæœ‰å˜åŒ–--&gt;</span><br><span class="line">    &lt;div v-once&gt;v-onceè·³è¿‡ç¼–è¯‘è¿‡ç¨‹ &#123;&#123;msg&#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="12-v-cloak"><a href="#12-v-cloak" class="headerlink" title="12.v-cloak"></a>12.v-cloak</h4><blockquote>
<p>é¡µé¢ä¸­ä½¿ç”¨ <code>&#123;&#123;&#125;&#125;</code> çš„æ—¶å€™ï¼Œç»å†äº†ç”± <code>&#123;&#123;&#125;&#125;</code> -&gt; å…·ä½“å†…å®¹ï¼Œè¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼Œæ‰€ä»¥é¡µé¢ä¼šé€ æˆâ€œé—ªçƒâ€<br>è§£å†³ï¼šé€šè¿‡æ·»åŠ  v-cloak æŒ‡ä»¤ï¼Œé…åˆ [v-cloak] { display: none; } é¿å…äº†é¡µé¢é—ªçƒ</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-cloak&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="åŠ¨æ€æ·»åŠ æ•°æ®åˆ°-dataã€å¼‚æ­¥æ›´æ–°-DOM"><a href="#åŠ¨æ€æ·»åŠ æ•°æ®åˆ°-dataã€å¼‚æ­¥æ›´æ–°-DOM" class="headerlink" title="åŠ¨æ€æ·»åŠ æ•°æ®åˆ° dataã€å¼‚æ­¥æ›´æ–° DOM"></a>åŠ¨æ€æ·»åŠ æ•°æ®åˆ° dataã€å¼‚æ­¥æ›´æ–° DOM</h3><h4 id="1-åŠ¨æ€æ·»åŠ æ•°æ®åˆ°-data"><a href="#1-åŠ¨æ€æ·»åŠ æ•°æ®åˆ°-data" class="headerlink" title="1.åŠ¨æ€æ·»åŠ æ•°æ®åˆ° data"></a>1.åŠ¨æ€æ·»åŠ æ•°æ®åˆ° data</h4><blockquote>
<p>åªæœ‰ data ä¸­çš„æ•°æ®æ‰æ˜¯å“åº”å¼çš„ï¼ŒåŠ¨æ€æ·»åŠ è¿›æ¥çš„æ•°æ®é»˜è®¤ä¸ºéå“åº”å¼<br>å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°åŠ¨æ€æ·»åŠ æ•°æ®çš„å“åº”å¼:</p>
</blockquote>
<ul>
<li>1 Vue.set(object, key, value) - é€‚ç”¨äºæ·»åŠ å•ä¸ªå±æ€§</li>
<li>2 Object.assign() - é€‚ç”¨äºæ·»åŠ å¤šä¸ªå±æ€§</li>
</ul>
<h4 id="2-å¼‚æ­¥æ›´æ–°-DOM"><a href="#2-å¼‚æ­¥æ›´æ–°-DOM" class="headerlink" title="2.å¼‚æ­¥æ›´æ–° DOM"></a>2.å¼‚æ­¥æ›´æ–° DOM</h4><blockquote>
<p>å½“ç»‘å®šçš„æ•°æ®å‘ç”Ÿå˜åŠ¨æ—¶ï¼ŒVue å¼‚æ­¥æ‰§è¡Œ DOM æ›´æ–°ï¼Œç›‘è§†æ‰€æœ‰æ•°æ®æ”¹å˜ï¼Œä¸€æ¬¡æ€§æ›´æ–° DOMï¼›<br>è§£å†³æ–¹æ³•ï¼š</p>
</blockquote>
<ul>
<li>Vue.nextTick</li>
<li>this.$nextTick</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;!-- ç‚¹å‡»æŒ‰é’®ä¹‹å‰dataä¸­è¿˜æ²¡æœ‰ageå±æ€§ --&gt;</span><br><span class="line">    &lt;button @click=&#x27;addAge&#x27;&gt;ç»™dataæ·»åŠ age&lt;/button&gt;</span><br><span class="line">    &lt;div&gt;åå­—ï¼š&#123;&#123;stu.name&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        è¿™é‡Œä½¿ç”¨çš„è¡¨è¾¾å¼ä¸­çš„å±æ€§å¿…é¡»æ˜¯å“åº”å¼çš„</span><br><span class="line">        åªæœ‰dataä¸­çš„æ•°æ®æ‰æ˜¯å“åº”å¼çš„ï¼ŒåŠ¨æ€æ·»åŠ è¿›æ¥çš„æ•°æ®é»˜è®¤ä¸ºéå“åº”å¼</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;div&gt;å¹´é¾„ï¼š&#123;&#123;stu.age&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;æ€§åˆ«ï¼š&#123;&#123;stu.sex&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            msg: &#x27;hello vue&#x27;,</span><br><span class="line">            stu: &#123;</span><br><span class="line">                name: &#x27;jack&#x27;,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            addAge: function () &#123;</span><br><span class="line">                //å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°åŠ¨æ€æ·»åŠ æ•°æ®çš„å“åº”å¼</span><br><span class="line">                //1.æ·»åŠ å•ä¸ªå±æ€§</span><br><span class="line">                // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨ç¤ºè¦ç»™å“ªä¸ªå¯¹è±¡æ·»åŠ å“åº”å¼å±æ€§ $dataå¯ä»¥çœç•¥</span><br><span class="line">                // ç¬¬äºŒä¸ªå‚æ•°ï¼šè¡¨ç¤ºè¦æ·»åŠ çš„å±æ€§åç§°</span><br><span class="line">                // ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šè¡¨ç¤ºå±æ€§çš„å€¼</span><br><span class="line">                Vue.set(this.stu, &quot;age&quot;, 18)</span><br><span class="line">                //2.æ·»åŠ å¤šä¸ªå±æ€§</span><br><span class="line">                //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡</span><br><span class="line">                //ç¬¬äºŒä¸ªå‚æ•°ï¼šæ·»åŠ åˆ°å“ªä¸ªå¯¹è±¡</span><br><span class="line">                //ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ·»åŠ å±æ€§çš„å¯¹è±¡</span><br><span class="line">                this.stu = Object.assign(&#123;&#125;,this.stu,&#123;&quot;name&quot;:&quot;é‚“ç´«æ£‹&quot;,&quot;age&quot;:18,&quot;sex&quot;:&quot;man&quot;&#125;)</span><br><span class="line"></span><br><span class="line">                //æ­¤æ—¶æ‰“å°çš„å†…å®¹ä¸º åå­—ï¼šjack</span><br><span class="line">                //</span><br><span class="line">                //ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ Vue å¼‚æ­¥æ‰§è¡Œ DOM æ›´æ–°ï¼Œç›‘è§†æ‰€æœ‰æ•°æ®æ”¹å˜ï¼Œä¸€æ¬¡æ€§æ›´æ–°DOM</span><br><span class="line">                console.log(this.$el.children[1].innerText)</span><br><span class="line"></span><br><span class="line">                //è§£å†³æ–¹æ³• Vue.nextTick å’Œ this.$nextTick æ˜¯ç›¸åŒçš„</span><br><span class="line">                //åœ¨DOMæ›´æ–°åï¼Œå›è°ƒæ‰§è¡ŒæŸä¸ªæ“ä½œï¼ˆDOMæ“ä½œï¼‰</span><br><span class="line">                this.$nextTick(function()&#123;</span><br><span class="line">                    console.log(this.$el.children[1].innerText)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="filter-è¿‡æ»¤å™¨"><a href="#filter-è¿‡æ»¤å™¨" class="headerlink" title="filter è¿‡æ»¤å™¨"></a>filter è¿‡æ»¤å™¨</h3><ul>
<li>ä½œç”¨ï¼šæ–‡æœ¬æ•°æ®æ ¼å¼åŒ– , ä¹Ÿå°±æ˜¯: å°†æ•°æ®æŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„ä¸€ç§æ ¼å¼è¾“å‡º</li>
<li>è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š<code>&#123;&#123;&#125;&#125;</code>è¡¨è¾¾å¼ å’Œ v-bind æŒ‡ä»¤ä¸­</li>
<li>ä¸¤ç§è¿‡æ»¤å™¨ï¼š1 å…¨å±€è¿‡æ»¤å™¨ 2 å±€éƒ¨è¿‡æ»¤å™¨</li>
</ul>
<h4 id="1-å…¨å±€è¿‡æ»¤å™¨"><a href="#1-å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="1.å…¨å±€è¿‡æ»¤å™¨"></a>1.å…¨å±€è¿‡æ»¤å™¨</h4><ul>
<li>è¯´æ˜ï¼šé€šè¿‡å…¨å±€æ–¹å¼åˆ›å»ºçš„è¿‡æ»¤å™¨ï¼Œåœ¨ä»»ä½•ä¸€ä¸ª vue å®ä¾‹ä¸­éƒ½å¯ä»¥ä½¿ç”¨</li>
<li>æ³¨æ„ï¼šä½¿ç”¨å…¨å±€è¿‡æ»¤å™¨çš„æ—¶å€™ï¼Œéœ€è¦å…ˆåˆ›å»ºå…¨å±€è¿‡æ»¤å™¨ï¼Œå†åˆ›å»º Vue å®ä¾‹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&#123;&#123; dateStr | date &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123; dateStr | date(&#x27;YYYY-MM-DD hh:mm:ss&#x27;) &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  Vue.filter(&#x27;date&#x27;, function(value, format) &#123;</span><br><span class="line">    // value è¦è¿‡æ»¤çš„å­—ç¬¦ä¸²å†…å®¹ï¼Œæ¯”å¦‚ï¼šdateStr</span><br><span class="line">    // format è¿‡æ»¤å™¨çš„å‚æ•°ï¼Œæ¯”å¦‚ï¼š&#x27;YYYY-MM-DD hh:mm:ss&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">var vm = new Vue(&#123;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-å±€éƒ¨è¿‡æ»¤å™¨"><a href="#2-å±€éƒ¨è¿‡æ»¤å™¨" class="headerlink" title="2.å±€éƒ¨è¿‡æ»¤å™¨"></a>2.å±€éƒ¨è¿‡æ»¤å™¨</h4><ul>
<li>è¯´æ˜ï¼šå±€éƒ¨è¿‡æ»¤å™¨æ˜¯åœ¨æŸä¸€ä¸ª vue å®ä¾‹çš„å†…å®¹åˆ›å»ºçš„ï¼Œåªåœ¨å½“å‰å®ä¾‹ä¸­èµ·ä½œç”¨</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&#123;&#123;msg | fi(&quot;ä¹&quot;)&#125;&#125;&lt;/div&gt;</span><br><span class="line">var vm = new Vue(&#123;</span><br><span class="line">          el:&#x27;#app&#x27;,</span><br><span class="line">          data:&#123;</span><br><span class="line">              msg:&#x27;å…«ç™¾ä¸ªæ ‡å…µå¥”åŒ—å¡ï¼Œå…«ç™¾ä¸ªæ ‡å…µå¥”åŒ—å¡&#x27;</span><br><span class="line">          &#125;,</span><br><span class="line">          //2. å±€éƒ¨è¿‡æ»¤å™¨ åªæœ‰åœ¨å½“å‰Vueå®ä¾‹ä¸­æ‰èµ·ä½œç”¨</span><br><span class="line">          // é€šè¿‡ filters é…ç½®é¡¹, æ¥åˆ›å»ºè¿‡æ»¤å™¨</span><br><span class="line">          filters:&#123;</span><br><span class="line">              // contentæ˜¯å†…å®¹ï¼Œformatæ˜¯è¿‡æ»¤çš„è§„åˆ™å¯ä»¥å¤šä¸ªå‚æ•°</span><br><span class="line">              fi:function(content,format)&#123;</span><br><span class="line">                  return content.replace(/å…«/g,format);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="watch-ç›‘å¬é…ç½®é¡¹"><a href="#watch-ç›‘å¬é…ç½®é¡¹" class="headerlink" title="watch ç›‘å¬é…ç½®é¡¹"></a>watch ç›‘å¬é…ç½®é¡¹</h3><ul>
<li>æ¦‚è¿°ï¼šwatch æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé”®æ˜¯éœ€è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå€¼æ˜¯å¯¹åº”å›è°ƒå‡½æ•°</li>
<li>ä½œç”¨ï¼šå½“è¡¨è¾¾å¼çš„å€¼å‘ç”Ÿå˜åŒ–åï¼Œä¼šè°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°å®Œæˆå“åº”çš„ç›‘è§†æ“ä½œ</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&#x27;userName&#x27;&gt;</span><br><span class="line">    &lt;p v-show=&#x27;isError&#x27;&gt;è¯·è¾“å…¥4-8ä½å­—ç¬¦&lt;/p&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&#x27;stu.age&#x27;&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            userName: &#x27;&#x27;,</span><br><span class="line">            isError: false,</span><br><span class="line">            stu: &#123;</span><br><span class="line">                age: 10,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        // é€šè¿‡ watch é…ç½®é¡¹ï¼Œæ¥ç›‘è§†æ•°æ®å˜åŒ–</span><br><span class="line">        // åªèƒ½ç›‘è§† data ä¸­çš„æ•°æ®ï¼Œè¦ç›‘è§†çš„æ•°æ®ï¼Œä½œä¸ºwatchçš„å±æ€§</span><br><span class="line">        watch: &#123;</span><br><span class="line">            // ç›‘è§†userNameå€¼çš„å˜åŒ–ï¼Œæ–¹æ³•åè¦ç”¨è¦ç›‘è§†çš„å€¼çš„åå­—</span><br><span class="line">            userName:function(curVal, oldVal)&#123;</span><br><span class="line">                console.log(&#x27;å½“å‰å€¼ä¸ºï¼š&#x27;, curVal, &#x27;ä¸Šä¸€æ¬¡å€¼ä¸ºï¼š&#x27;, oldVal);</span><br><span class="line">                if(curVal.length&gt;=4 &amp;&amp; curVal.length&lt;=8)&#123;</span><br><span class="line">                    this.isError = false;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    this.isError = true;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            // ç›‘å¬å¯¹è±¡ï¼ŒåŠ ä¸Šdeep:true</span><br><span class="line">            // æ³¨æ„ï¼šå¦‚æœç›‘è§†å¯¹è±¡çš„å˜åŒ–ï¼Œé‚£ä¹ˆï¼ŒcurVal å’Œ oldVal æ˜¯ç›¸åŒçš„ï¼ŒæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</span><br><span class="line">            stu:&#123;</span><br><span class="line">                handler:function(curVal, oldVal)&#123;</span><br><span class="line">                    console.log(&#x27;å½“å‰å€¼ä¸ºï¼š&#x27;, curVal, &#x27;ä¸Šä¸€æ¬¡å€¼ä¸ºï¼š&#x27;, oldVal);</span><br><span class="line">                &#125;,</span><br><span class="line">                deep: true</span><br><span class="line">            &#125;,</span><br><span class="line">            // ä¸€èˆ¬éƒ½æ˜¯ç›‘å¬å¯¹è±¡ä¸­çš„å±æ€§</span><br><span class="line">            // åªéœ€è¦ç›‘è§†æŸä¸ªå±æ€§çš„å˜åŒ–ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå¯¹è±¡ä¸­æ‰€æœ‰çš„å±æ€§çš„å˜åŒ–</span><br><span class="line">            &#x27;stu.age&#x27;:function(curVal, oldVal)&#123;</span><br><span class="line">                console.log(&#x27;å½“å‰å€¼ä¸ºï¼š&#x27;, curVal, &#x27;ä¸Šä¸€æ¬¡å€¼ä¸ºï¼š&#x27;, oldVal);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="computed-è®¡ç®—å±æ€§é…ç½®é¡¹"><a href="#computed-è®¡ç®—å±æ€§é…ç½®é¡¹" class="headerlink" title="computed è®¡ç®—å±æ€§é…ç½®é¡¹"></a>computed è®¡ç®—å±æ€§é…ç½®é¡¹</h3><ul>
<li>è¯´æ˜ï¼šè®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„ä¾èµ–è¿›è¡Œç¼“å­˜çš„ï¼Œåªæœ‰åœ¨å®ƒçš„ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°æ±‚å€¼</li>
<li>æ³¨æ„ï¼šMustache è¯­æ³•ï¼ˆ<code>&#123;&#123;&#125;&#125;</code>ï¼‰ä¸­ä¸è¦æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ï¼Œå¦åˆ™ä¼šè®©æ¨¡æ¿è¿‡é‡ã€éš¾ä»¥ç†è§£å’Œç»´æŠ¤</li>
<li>æ³¨æ„ï¼šcomputed ä¸­çš„å±æ€§ä¸èƒ½ä¸ data ä¸­çš„å±æ€§åŒåï¼Œå¦åˆ™ä¼šæŠ¥é”™</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&#x27;num1&#x27;&gt;+</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&#x27;num2&#x27;&gt;=</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&#x27;result&#x27;&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            num1: 0,</span><br><span class="line">            num2: 0,</span><br><span class="line">            // result: 0 è®¡ç®—å±æ€§åä¸èƒ½å’Œdataä¸­çš„å±æ€§ç›¸åŒ</span><br><span class="line">        &#125;,</span><br><span class="line">        // è®¡ç®—å±æ€§ï¼Œé€šè¿‡ computed é…ç½®é¡¹æ¥æŒ‡å®š</span><br><span class="line">        // æ³¨æ„ï¼šè®¡ç®—å±æ€§ä¸èƒ½ä¸dataä¸­çš„å±æ€§ç›¸åŒï¼ï¼ï¼å¦åˆ™ä¼šæŠ¥é”™</span><br><span class="line">        // ç‰¹ç‚¹ï¼šè®¡ç®—å±æ€§ä¾èµ–çš„å±æ€§ï¼ˆæ¯”å¦‚ï¼šnum1 å’Œ num2ï¼‰å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆè®¡ç®—å±æ€§å°±ä¼šè¢«é‡æ–°è®¡ç®—</span><br><span class="line">        // ä¼˜åŠ¿ï¼šå†…éƒ¨ä½¿ç”¨ç¼“å­˜æœºåˆ¶ï¼Œå¦‚æœé¡µé¢ä¸­å¤šä¸ªåœ°æ–¹éƒ½ç”¨åˆ°äº†è®¡ç®—å±æ€§ï¼Œé‚£ä¹ˆè®¡ç®—å±æ€§åªä¼šè¢«é‡æ–°è®¡ç®—ä¸€æ¬¡ï¼ï¼ï¼</span><br><span class="line">        computed: &#123;</span><br><span class="line">            result:function()&#123;</span><br><span class="line">                return (this.num1-0)+(this.num2-0);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="äº‹ä»¶ä¿®é¥°ç¬¦"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦"></a>äº‹ä»¶ä¿®é¥°ç¬¦</h3><ul>
<li>.stop é˜»æ­¢å‘ä¸Šå†’æ³¡ ä¸ä¼šè°ƒç”¨çˆ¶çš„äº‹ä»¶</li>
<li>.prevent é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œè°ƒç”¨ event.preventDefault()</li>
<li>.capture æ•è·å†’æ³¡</li>
<li>.self åªå½“äº‹ä»¶åœ¨è¯¥å…ƒç´ æœ¬èº«è§¦å‘æ—¶ï¼Œæ‰ä¼šè§¦å‘äº‹ä»¶</li>
<li>.once äº‹ä»¶åªè§¦å‘ä¸€æ¬¡</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- .stop é˜»æ­¢å‘ä¸Šå†’æ³¡ ä¸ä¼šè°ƒç”¨çˆ¶çš„äº‹ä»¶ --&gt;</span><br><span class="line">&lt;div @click=&#x27;cathFather&#x27;&gt;æˆ‘æ˜¯çˆ¶äº‹ä»¶ä¿®é¥°ç¬¦</span><br><span class="line">    &lt;!-- .stop  é˜»æ­¢å†’æ³¡ï¼Œè°ƒç”¨ event.stopPropagation() --&gt;</span><br><span class="line">    &lt;div @click.stop=&#x27;catchSon&#x27;&gt;æˆ‘æ˜¯å­äº‹ä»¶ä¿®é¥°ç¬¦&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- .prevent é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œè°ƒç”¨ event.preventDefault() --&gt;</span><br><span class="line">&lt;a href=&quot;http://www.baidu&quot; @click.prevent=&#x27;onPrevent&#x27;&gt;æˆ‘æ˜¯preventäº‹ä»¶&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- .captureæ•è·å†’æ³¡ï¼Œ</span><br><span class="line">    å³æœ‰å†’æ³¡å‘ç”Ÿæ—¶ï¼Œæœ‰è¯¥ä¿®é¥°ç¬¦çš„domå…ƒç´ ä¼šå…ˆæ‰§è¡Œï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œä»å¤–åˆ°å†…ä¾æ¬¡æ‰§è¡Œï¼Œç„¶åå†æŒ‰è‡ªç„¶é¡ºåºæ‰§è¡Œè§¦å‘çš„äº‹ä»¶ã€‚</span><br><span class="line">--&gt;</span><br><span class="line">&lt;!-- å¦‚æœä¸ç»™çˆ·çˆ·æ·»åŠ capture ç‚¹å‡»å„¿å­è§¦å‘çš„é¡ºåºæ˜¯ å„¿å­ã€çˆ¸çˆ¸ã€çˆ·çˆ· --&gt;</span><br><span class="line">&lt;!-- ç»™çˆ·çˆ·æ·»åŠ äº†captureäº‹ä»¶å ç‚¹å‡»å„¿å­è§¦å‘çš„é¡ºåºæ˜¯ çˆ·çˆ·ã€å„¿å­ã€çˆ¸çˆ¸ --&gt;</span><br><span class="line">&lt;div @click.capture=&#x27;grandpa&#x27;&gt;æˆ‘æ˜¯çˆ·çˆ·</span><br><span class="line">    &lt;div @click=&#x27;father&#x27;&gt;æˆ‘æ˜¯çˆ¸çˆ¸</span><br><span class="line">        &lt;div @click=&#x27;son&#x27;&gt;</span><br><span class="line">                æˆ‘æ˜¯å„¿å­</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- .self åªå½“äº‹ä»¶åœ¨è¯¥å…ƒç´ æœ¬èº«è§¦å‘æ—¶ï¼Œæ‰ä¼šè§¦å‘äº‹ä»¶ --&gt;</span><br><span class="line">&lt;div @click.self=&#x27;onSelfFather&#x27;&gt;selfäº‹ä»¶çˆ¸çˆ¸</span><br><span class="line">    &lt;div @click=&#x27;onSelfSon&#x27;&gt;selfäº‹ä»¶å„¿å­&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- .once  äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ --&gt;</span><br><span class="line">&lt;div @click.once=&#x27;onOnce&#x27;&gt;å†ç‚¹æˆ‘ä¸€æ¬¡è¯•è¯•&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="é”®å€¼ä¿®é¥°ç¬¦"><a href="#é”®å€¼ä¿®é¥°ç¬¦" class="headerlink" title="é”®å€¼ä¿®é¥°ç¬¦"></a>é”®å€¼ä¿®é¥°ç¬¦</h4><ul>
<li>è¯´æ˜ï¼šåœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶ï¼ŒVue å…è®¸ä¸º v-on åœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶æ·»åŠ å…³é”®ä¿®é¥°ç¬¦</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;!-- é”®å€¼ä¿®é¥°ç¬¦ åŒ…æ‹¬é”®ç›˜ã€é¼ æ ‡ --&gt;</span><br><span class="line">    &lt;!-- 13æ˜¯Enteré”®çš„codeå€¼ --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&#x27;msg&#x27; @keyup.13=&#x27;submit&#x27;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&#x27;msg2&#x27; @keyup.enter=&#x27;submit2&#x27;&gt;&lt;br&gt;</span><br><span class="line">    &lt;!-- ä½¿ç”¨è‡ªå®šä¹‰é”®å€¼ä¿®é¥°ç¬¦ --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&#x27;msg&#x27; @keyup.f2=&#x27;submit&#x27;&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // è‡ªå®šä¹‰é”®å€¼ä¿®é¥°ç¬¦ æœ‰æ—¶å€™å†™codeå€¼æ˜¯æ•°å­—çš„æ—¶å€™å¹¶æ²¡æœ‰è¯­ä¹‰ï¼Œæ‰€æœ‰æˆ‘ä»¬ç»™å®ƒå®šä¹‰ä¸€ä¸‹</span><br><span class="line">    Vue.config.keyCodes.f2 = 113;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el:&#x27;#app&#x27;,</span><br><span class="line">        data:&#123;</span><br><span class="line">            msg:&#x27;&#x27;,</span><br><span class="line">            msg2:&#x27;&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods:&#123;</span><br><span class="line">            submit:function()&#123;</span><br><span class="line">                console.log(&#x27;æäº¤æ•°æ®=&#x27;+this.msg)</span><br><span class="line">            &#125;,</span><br><span class="line">            submit2:function()&#123;</span><br><span class="line">                console.log(&#x27;æäº¤æ•°æ®=&#x27;+this.msg2)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="vue-å£°æ˜å‘¨æœŸé’©å­å‡½æ•°"><a href="#vue-å£°æ˜å‘¨æœŸé’©å­å‡½æ•°" class="headerlink" title="vue å£°æ˜å‘¨æœŸé’©å­å‡½æ•°"></a>vue å£°æ˜å‘¨æœŸé’©å­å‡½æ•°</h3><h4 id="1-beforeCreate"><a href="#1-beforeCreate" class="headerlink" title="1. beforeCreate()"></a>1. beforeCreate()</h4><ul>
<li>è¯´æ˜ï¼šåœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹ (data observer) å’Œ event&#x2F;watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨</li>
<li>æ³¨æ„ï¼šæ­¤æ—¶ï¼Œæ— æ³•è·å– data ä¸­çš„æ•°æ®ã€methods ä¸­çš„æ–¹æ³•</li>
<li>ä½¿ç”¨åœºæ™¯ï¼šå¯ä»¥åœ¨è¿™ä¸ªé’©å­å‡½æ•°ä¸­å¼€å¯é¡µé¢åŠ è½½çš„ loading æ•ˆæœ</li>
</ul>
<h4 id="2-created"><a href="#2-created" class="headerlink" title="2. created()"></a>2. created()</h4><ul>
<li>æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥è°ƒç”¨ methods ä¸­çš„æ–¹æ³•ã€æ”¹å˜ data ä¸­çš„æ•°æ®</li>
<li>ä½¿ç”¨åœºæ™¯ï¼šå‘é€è¯·æ±‚è·å–æ•°æ®</li>
</ul>
<h4 id="3-beforeMounted"><a href="#3-beforeMounted" class="headerlink" title="3. beforeMounted()"></a>3. beforeMounted()</h4><ul>
<li>è¯´æ˜ï¼šç»„ä»¶å°†è¦æŒ‚è½½åˆ°é¡µé¢ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šç»„ä»¶çš„å†…å®¹è¿˜æ²¡æœ‰è¢«æŒ‚è½½åˆ°é¡µé¢ä¸­</li>
<li>æ³¨æ„ï¼šæ­¤æ—¶ï¼Œè·å–ä¸åˆ°é¡µé¢ä¸­ DOM å…ƒç´ </li>
</ul>
<h4 id="4-mounted"><a href="#4-mounted" class="headerlink" title="4. mounted()"></a>4. mounted()</h4><ul>
<li>è¯´æ˜ï¼šç»„ä»¶å·²ç»è¢«æŒ‚è½½åˆ°é¡µé¢ä¸­ï¼Œæ­¤æ—¶ï¼Œå¯ä»¥è¿›è¡Œ DOM æ“ä½œäº†</li>
</ul>
<h4 id="5-beforeUpdate"><a href="#5-beforeUpdate" class="headerlink" title="5. beforeUpdate()"></a>5. beforeUpdate()</h4><ul>
<li>è¯´æ˜ï¼šæ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªé’©å­ä¸­è¿›ä¸€æ­¥åœ°æ›´æ”¹çŠ¶æ€ï¼Œè¿™ä¸ä¼šè§¦å‘é™„åŠ çš„é‡æ¸²æŸ“è¿‡ç¨‹ã€‚</li>
</ul>
<h4 id="6-updated"><a href="#6-updated" class="headerlink" title="6. updated()"></a>6. updated()</h4><ul>
<li>è¯´æ˜ï¼šç»„ä»¶ DOM å·²ç»æ›´æ–°å®Œæˆï¼Œæ‰€ä»¥ä½ ç°åœ¨å¯ä»¥æ‰§è¡Œä¾èµ–äº DOM çš„æ“ä½œã€‚</li>
</ul>
<h4 id="7-beforeDestroy"><a href="#7-beforeDestroy" class="headerlink" title="7. beforeDestroy()"></a>7. beforeDestroy()</h4><ul>
<li>è¯´æ˜ï¼šå®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚</li>
<li>ä½¿ç”¨ï¼šå®ä¾‹é”€æ¯ä¹‹å‰ï¼Œæ‰§è¡Œæ¸…ç†ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼šæ¸…é™¤å®šæ—¶å™¨ç­‰</li>
</ul>
<h4 id="8-destroyed"><a href="#8-destroyed" class="headerlink" title="8. destroyed()"></a>8. destroyed()</h4><ul>
<li>è¯´æ˜ï¼šVue å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚</li>
</ul>
<h3 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤"></a>è‡ªå®šä¹‰æŒ‡ä»¤</h3><blockquote>
<p>Vue è¿™ç§ MVVM æ¨¡å¼çš„æ¡†æ¶ä¸æ¨èå¼€å‘äººå‘˜ç›´æ¥æ‰‹åŠ¨æ“ä½œ DOM æœ‰äº›æƒ…å†µ, è¿˜æ˜¯éœ€è¦æ“ä½œ DOM çš„, å¦‚æœéœ€è¦æ“ä½œ DOM, å°±é€šè¿‡ Vue ä¸­çš„è‡ªå®šä¹‰æŒ‡ä»¤æ¥æ“ä½œ!!!</p>
</blockquote>
<p>é€šè¿‡ Vue.directive()æ–¹æ³•è‡ªå®šä¹‰æŒ‡ä»¤ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°: è¡¨ç¤ºè‡ªå®šä¹‰æŒ‡ä»¤çš„åç§°ï¼›</li>
<li>ç¬¬äºŒä¸ªå‚æ•° 1.è¡¨ç¤ºè‡ªå®šä¹‰æŒ‡ä»¤è¿è¡Œçš„æ—¶å€™, éœ€è¦æ‰§è¡Œçš„é€»è¾‘æ“ä½œï¼›</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.directive(&#x27;ff1&#x27;, function (el) &#123;</span><br><span class="line">    console.log(el)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¬¬äºŒä¸ªå‚æ•° 2.è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æ˜¯æŒ‡ä»¤çš„é’©å­å‡½æ•°;</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> Vue.directive(&#x27;ff2&#x27;, &#123;</span><br><span class="line">    // bind å’Œ inserted è¿™ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œ éƒ½æ˜¯è¿›å…¥é¡µé¢å°±ç«‹å³æ‰§è¡Œçš„</span><br><span class="line">    // åŒºåˆ«ï¼šinserted èƒ½è·å–åˆ°æŒ‡ä»¤æ‰€åœ¨å…ƒç´ çš„çˆ¶å…ƒç´ ï¼Œbind è·å–ä¸åˆ°çˆ¶å…ƒç´ </span><br><span class="line">    bind(el) &#123;</span><br><span class="line">        console.log(&#x27;bind&#x27;, el.parentNode)</span><br><span class="line">    &#125;,</span><br><span class="line">    inserted(el) &#123;</span><br><span class="line">        console.log(&#x27;inserted&#x27;, el.parentNode)</span><br><span class="line">    &#125;</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>

<p>æŒ‡ä»¤å‡½æ•°çš„å…¥å‚:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ ‡è¯†æ”¾åˆ°è‡ªå®šä¹‰æŒ‡ä»¤çš„åé¢ .è¡¨ç¤ºå --&gt;</span><br><span class="line">&lt;!-- æ³¨æ„ï¼šå¦‚æœ v-color=&quot;red&quot; é‚£ä¹ˆï¼ŒredæŒ‡çš„å€¼ï¼šdataä¸­çš„redå±æ€§ --&gt;</span><br><span class="line">&lt;div v-color.back=&quot; &#x27;blue&#x27; &quot;&gt;&#123;&#123; msg &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div v-color.col=&quot; &#x27;red&#x27; &quot;&gt;&#123;&#123; msg &#125;&#125;&lt;/div&gt;</span><br><span class="line">Vue.directive(&#x27;color&#x27;, function (el, binding) &#123;</span><br><span class="line">    if (binding.modifiers.col) &#123;</span><br><span class="line">        el.style.color = binding.value</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        el.style.backgroundColor = binding.value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="å°æ¡ˆä¾‹"><a href="#å°æ¡ˆä¾‹" class="headerlink" title="å°æ¡ˆä¾‹"></a>å°æ¡ˆä¾‹</h4><blockquote>
<p>æ¡ˆä¾‹è¯·åˆ°<a target="_blank" rel="noopener" href="https://github.com/pengjunshan/WebPJS">https://github.com/pengjunshan/WebPJS</a>ä¸­æŸ¥çœ‹<br><img src="https://upload-images.jianshu.io/upload_images/3735156-799df1d167356992.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="image"></p>
</blockquote>
<h2 id="äºŒã€Vue-ç»„ä»¶"><a href="#äºŒã€Vue-ç»„ä»¶" class="headerlink" title="äºŒã€Vue ç»„ä»¶"></a>äºŒã€Vue ç»„ä»¶</h2><blockquote>
<p>ç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹,ç»„ä»¶åˆ†ä¸ºå…¨å±€ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶ã€‚å› ä¸ºç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹ï¼Œæ‰€ä»¥å®ƒä»¬ä¸ new Vue æ¥æ”¶ç›¸åŒçš„é€‰é¡¹ï¼Œä¾‹å¦‚ dataã€computedã€watchã€methods ä»¥åŠç”Ÿå‘½å‘¨æœŸé’©å­ç­‰,el æ˜¯æ ¹å®ä¾‹ç‰¹æœ‰çš„å±æ€§ï¼Œç»„ä»¶ä¸­æ²¡æœ‰ã€‚</p>
</blockquote>
<h3 id="å…¨å±€ç»„ä»¶"><a href="#å…¨å±€ç»„ä»¶" class="headerlink" title="å…¨å±€ç»„ä»¶"></a>å…¨å±€ç»„ä»¶</h3><blockquote>
<p>å…¨å±€ç»„ä»¶åœ¨æ‰€æœ‰çš„ vue å®ä¾‹ä¸­éƒ½å¯ä»¥ä½¿ç”¨,æ³¨æ„ï¼šå…ˆæ³¨å†Œç»„ä»¶ï¼Œå†åˆå§‹åŒ–æ ¹å®ä¾‹ã€‚</p>
</blockquote>
<h4 id="Vue-component-â€˜nameâ€™ï¼Œ-é…ç½®é¡¹"><a href="#Vue-component-â€˜nameâ€™ï¼Œ-é…ç½®é¡¹" class="headerlink" title="Vue.component(â€˜nameâ€™ï¼Œ{é…ç½®é¡¹})"></a>Vue.component(â€˜nameâ€™ï¼Œ{é…ç½®é¡¹})</h4><ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç»„ä»¶å</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç»„ä»¶çš„é…ç½®é¡¹ï¼Œä¸ Vue æ ¹å®ä¾‹é…ç½®é¡¹å·®ä¸å¤š</li>
<li>ç»„ä»¶ä¸­çš„ data å¿…é¡»æ˜¯ä¸ªå‡½æ•°æ•°æ®ç”¨ return è¿”å›ï¼ŒVue æ ¹å®ä¾‹ä¸­çš„ data æ˜¯ä¸ªå¯¹è±¡</li>
<li>ç»„ä»¶ä¸­ template æ¨¡æ¿æœ‰ä¸¤ç§æ–¹å¼ï¼Œâ€œå­—ç¬¦ä¸²â€ â€œhtml æ¨¡æ¿â€</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;hello&gt;&lt;/hello&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;template id=&quot;temp&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;æˆ‘æ˜¯ç»„ä»¶ï¼š&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;button @click=&#x27;fn&#x27;&gt; ç‚¹å‡»æ¶ˆç­æ–°å†  &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">        * ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç»„ä»¶å</span><br><span class="line">        * ç¬¬äºŒä¸ªå‚æ•°æ˜¯é…ç½®é¡¹ï¼Œä¸Vueå®ä¾‹çš„é…ç½®å‡ ä¹ä¸€æ ·</span><br><span class="line">        */</span><br><span class="line">        Vue.component(&#x27;hello&#x27;, &#123;</span><br><span class="line">            //templateæ˜¯ç»„ä»¶çš„æ¨¡æ¿ ä¹Ÿå°±æ˜¯è¦å±•ç¤ºçš„å†…å®¹</span><br><span class="line">            //ç»„ä»¶ä¸­templateæ¨¡æ¿æœ‰ä¸¤ç§æ–¹å¼ï¼Œâ€œå­—ç¬¦ä¸²â€ â€œhtmlæ¨¡æ¿â€</span><br><span class="line">            //æ–¹å¼ä¸€ï¼šå­—ç¬¦ä¸²</span><br><span class="line">            // template: `</span><br><span class="line">            //     &lt;div&gt;</span><br><span class="line">            //         &lt;p&gt;æˆ‘æ˜¯ç»„ä»¶ï¼š&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">            //         &lt;button @click=&#x27;fn&#x27;&gt; ç‚¹å‡»æ¶ˆç­æ–°å†  &lt;/button&gt;</span><br><span class="line">            //     &lt;/div&gt;</span><br><span class="line">            // `,</span><br><span class="line">            //æ–¹å¼äºŒï¼šhtmlæ¨¡æ¿</span><br><span class="line">            template: &#x27;#temp&#x27;,</span><br><span class="line"></span><br><span class="line">            //ç»„ä»¶ä¸­çš„dataå¿…é¡»æ˜¯ä¸ªå‡½æ•°æ•°æ®ç”¨returnè¿”å›ï¼ŒVueæ ¹å®ä¾‹ä¸­çš„dataæ˜¯ä¸ªå¯¹è±¡</span><br><span class="line">            data() &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    msg: &#x27;æ­¦æ±‰åŠ æ²¹ ä¸­å›½åŠ æ²¹&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                fn() &#123;</span><br><span class="line">                    this.msg = &#x27;æ–°å† è¢«æ¶ˆç­äº†ï¼Œä¸­å›½å¨æ­¦&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            data: &#123;&#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="å±€éƒ¨ç»„ä»¶"><a href="#å±€éƒ¨ç»„ä»¶" class="headerlink" title="å±€éƒ¨ç»„ä»¶"></a>å±€éƒ¨ç»„ä»¶</h3><blockquote>
<p>å±€éƒ¨ç»„ä»¶ï¼Œæ˜¯åœ¨æŸä¸€ä¸ªå…·ä½“çš„ vue å®ä¾‹ä¸­å®šä¹‰çš„ï¼Œåªèƒ½åœ¨è¿™ä¸ª vue å®ä¾‹ä¸­ä½¿ç”¨ï¼›åœ¨ Vue å®ä¾‹ä¸­ä½¿ç”¨ components å¯¹è±¡åˆ›å»ºç»„ä»¶ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªç»„ä»¶ï¼›</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;!-- helloç»„ä»¶ --&gt;</span><br><span class="line">        &lt;hello&gt;&lt;/hello&gt;</span><br><span class="line">        &lt;!-- loveç»„ä»¶ --&gt;</span><br><span class="line">        &lt;love&gt;&lt;/love&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;template id=&quot;temp&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;æˆ‘æ˜¯ç»„ä»¶222ï¼š&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;button @click=&#x27;fn&#x27;&gt; ç‚¹å‡»æ¶ˆç­æ–°å†  &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line"></span><br><span class="line">        //1.å±€éƒ¨ç»„ä»¶ï¼Œæ˜¯åœ¨æŸä¸€ä¸ªå…·ä½“çš„vueå®ä¾‹ä¸­å®šä¹‰çš„ï¼Œåªèƒ½åœ¨è¿™ä¸ªvueå®ä¾‹ä¸­ä½¿ç”¨</span><br><span class="line">        //2.åœ¨Vueå®ä¾‹ä¸­ä½¿ç”¨componentså¯¹è±¡åˆ›å»ºç»„ä»¶ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªç»„ä»¶</span><br><span class="line">        //3.ç»„ä»¶ä¸­templateæ¨¡æ¿æœ‰ä¸¤ç§æ–¹å¼ï¼Œâ€œå­—ç¬¦ä¸²â€ â€œhtmlæ¨¡æ¿â€</span><br><span class="line"></span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            data: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            components: &#123;</span><br><span class="line">                //hello ç»„ä»¶å</span><br><span class="line">                &#x27;hello&#x27;: &#123;</span><br><span class="line">                    //æ–¹å¼ä¸€ å­—ç¬¦ä¸²</span><br><span class="line">                    template: `</span><br><span class="line">                        &lt;div&gt;</span><br><span class="line">                            &lt;p&gt;æˆ‘æ˜¯ç»„ä»¶111ï¼š&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">                            &lt;button @click=&#x27;fn&#x27;&gt; ç‚¹å‡»æ¶ˆç­æ–°å†  &lt;/button&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    `,</span><br><span class="line">                    data() &#123;</span><br><span class="line">                        return &#123;</span><br><span class="line">                            msg: &#x27;æ­¦æ±‰åŠ æ²¹ ä¸­å›½åŠ æ²¹&#x27;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    methods: &#123;</span><br><span class="line">                        fn() &#123;</span><br><span class="line">                            this.msg = &#x27;æ–°å† è¢«æ¶ˆç­äº†ï¼Œä¸­å›½å¨æ­¦&#x27;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#x27;love&#x27;: &#123;</span><br><span class="line">                    //æ–¹å¼äºŒ å¼•ç”¨htmlä¸­çš„ä»£ç æ¨¡æ¿</span><br><span class="line">                    template: &#x27;#temp&#x27;,</span><br><span class="line">                    data() &#123;</span><br><span class="line">                        return &#123;</span><br><span class="line">                            msg: &#x27;æˆ‘ä»¬çˆ±ä¸­å›½ çˆ±æ­¦æ±‰&#x27;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    methods: &#123;</span><br><span class="line">                        fn() &#123;</span><br><span class="line">                            this.msg = &#x27;æˆ‘ä»¬çˆ±ä¸­åæ°‘æ—&#x27;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="çˆ¶ç»„ä»¶ä¼ é€’å­ç»„ä»¶æ•°æ®"><a href="#çˆ¶ç»„ä»¶ä¼ é€’å­ç»„ä»¶æ•°æ®" class="headerlink" title="çˆ¶ç»„ä»¶ä¼ é€’å­ç»„ä»¶æ•°æ®"></a>çˆ¶ç»„ä»¶ä¼ é€’å­ç»„ä»¶æ•°æ®</h3><ul>
<li>æ–¹å¼ï¼šé€šè¿‡ props å±æ€§æ¥ä¼ é€’æ•°æ®</li>
<li>æ³¨æ„ï¼šå±æ€§çš„å€¼å¿…é¡»åœ¨ç»„ä»¶ä¸­é€šè¿‡ props å±æ€§æ˜¾ç¤ºæŒ‡å®šï¼Œå¦åˆ™ï¼Œä¸ä¼šç”Ÿæ•ˆ</li>
<li>è¯´æ˜ï¼šä¼ é€’è¿‡æ¥çš„ props å±æ€§çš„ç”¨æ³•ä¸ data å±æ€§çš„ç”¨æ³•ç›¸åŒ</li>
<li>å¦‚æœä¼ é€’çš„æ•°æ®æ˜¯ data ä¸­çš„å±æ€§æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ v-bind ç»‘å®šå±æ€§æ‰å¯ä»¥ä¼ é€’è¿‡å»</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;hello mm=&#x27;ä¸­åæ°‘æ—ä¸‡å²&#x27;&gt;&lt;/hello&gt;</span><br><span class="line">        &lt;!-- å¦‚æœä¼ é€’çš„æ•°æ®æ˜¯dataä¸­çš„å±æ€§æ—¶ï¼Œå¿…é¡»ä½¿ç”¨v-bindç»‘å®šå±æ€§æ‰å¯ä»¥ä¼ é€’è¿‡å» --&gt;</span><br><span class="line">        &lt;!-- &lt;hello zz=&#x27;msg&#x27;&gt;&lt;/hello&gt; --&gt;</span><br><span class="line">        &lt;hello v-bind:zz=&#x27;msg&#x27;&gt;&lt;/hello&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line"></span><br><span class="line">        // çˆ¶ç»„ä»¶ ä¼ é€’æ•°æ®ç»™ å­ç»„ä»¶ï¼šï¼ˆçˆ¶ç»„ä»¶ï¼šVueçš„å®ä¾‹å¯¹è±¡ï¼Œå­ç»„ä»¶ï¼šhelloç»„ä»¶ï¼‰</span><br><span class="line">        // åŸç†ï¼šé€šè¿‡ props å±æ€§æ¥ä¼ é€’</span><br><span class="line">        // æ³¨æ„ï¼šä½¿ç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„å±æ€§æ–¹å¼å’Œä½¿ç”¨dataä¸­çš„å±æ€§æ–¹å¼ä¸€æ ·</span><br><span class="line">        Vue.component(&#x27;hello&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;p&gt;æˆ‘æ˜¯ç»„ä»¶ï¼š&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">                    &lt;p v-if=&#x27;mm&#x27;&gt;æˆ‘æ¥æ”¶åˆ°çˆ¶ç»„ä»¶çš„å†…å®¹ï¼š&#123;&#123;mm&#125;&#125;&lt;/P&gt;</span><br><span class="line">                    &lt;p v-if=&#x27;zz&#x27;&gt;æˆ‘æ¥æ”¶åˆ°çˆ¶ç»„ä»¶çš„å†…å®¹ï¼š&#123;&#123;zz&#125;&#125;&lt;/P&gt;</span><br><span class="line">                    &lt;button @click=&#x27;fn&#x27;&gt; ç‚¹å‡»æ¶ˆç­æ–°å†  &lt;/button&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `,</span><br><span class="line">            //æŒ‡å®špropsä¸­çš„å€¼ï¼Œæ¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼</span><br><span class="line">            props:[&#x27;mm&#x27;,&#x27;zz&#x27;],</span><br><span class="line">            data() &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    msg: &#x27;æ­¦æ±‰åŠ æ²¹ ä¸­å›½åŠ æ²¹&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                fn() &#123;</span><br><span class="line">                    this.msg=this.msg+&#x27;-----&#x27;+(this.mm===undefined? this.zz:this.mm);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            data: &#123;</span><br><span class="line">                msg:&#x27;æµ™æ±Ÿæ­å·&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="å­ç»„ä»¶ä¼ é€’çˆ¶ç»„ä»¶æ•°æ®"><a href="#å­ç»„ä»¶ä¼ é€’çˆ¶ç»„ä»¶æ•°æ®" class="headerlink" title="å­ç»„ä»¶ä¼ é€’çˆ¶ç»„ä»¶æ•°æ®"></a>å­ç»„ä»¶ä¼ é€’çˆ¶ç»„ä»¶æ•°æ®</h3><ul>
<li>æ–¹å¼ï¼šçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œç”±å­ç»„ä»¶è°ƒç”¨è¿™ä¸ªå‡½æ•°</li>
<li>è¯´æ˜ï¼šå€ŸåŠ© vue ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶ï¼ˆv-on:cunstomFn&#x3D;â€fnâ€ï¼‰</li>
<li>$emit()ï¼šè§¦å‘äº‹ä»¶</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;hello @pfn=&#x27;parentFn&#x27;&gt;&lt;/hello&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;template id=&quot;temp&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;æˆ‘æ˜¯ç»„ä»¶ï¼š&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;button @click=&#x27;sonFn&#x27;&gt; ç‚¹å‡»æ¶ˆç­æ–°å†  &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //ç»„ä»¶ä¼ é€’ å­ã€‹çˆ¶</span><br><span class="line">        //1.ç”±çˆ¶ç»„ä»¶å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œé€šè¿‡@pfnä¼ ç»™å­ç»„ä»¶</span><br><span class="line">        //2.å­ç»„ä»¶é€šè¿‡$emitæ–¹æ³•æŠŠæ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶å®šä¹‰çš„æ–¹æ³•</span><br><span class="line"></span><br><span class="line">        Vue.component(&#x27;hello&#x27;, &#123;</span><br><span class="line">            template: &#x27;#temp&#x27;,</span><br><span class="line">            data() &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    msg: &#x27;æ­¦æ±‰åŠ æ²¹ ä¸­å›½åŠ æ²¹&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                sonFn() &#123;</span><br><span class="line">                    //é€šè¿‡$emitæ–¹æ³•ä¼ é€’æ•°æ®ç»™çˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼Œå‚æ•°å¯ä»¥ä¸ºå¤šä¸ª</span><br><span class="line">                    this.$emit(&#x27;pfn&#x27;, &#x27;æ–°å† è¢«æ¶ˆç­äº†ï¼Œä¸­å›½å¨æ­¦&#x27;, &#x27;æµ‹è¯•&#x27;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            data: &#123;</span><br><span class="line">                msg: &#x27;æ ‡é¢˜&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                parentFn(data, data2) &#123;</span><br><span class="line">                    this.msg = data;</span><br><span class="line">                    console.log(data2)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="éçˆ¶å­ç»„ä»¶ä¼ é€’æ•°æ®"><a href="#éçˆ¶å­ç»„ä»¶ä¼ é€’æ•°æ®" class="headerlink" title="éçˆ¶å­ç»„ä»¶ä¼ é€’æ•°æ®"></a>éçˆ¶å­ç»„ä»¶ä¼ é€’æ•°æ®</h3><ul>
<li>å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç©ºçš„ Vue å®ä¾‹ä½œä¸ºäº‹ä»¶æ€»çº¿ bus</li>
<li>A ç»„ä»¶ä¼ é€’ B ç»„ä»¶æ•°æ® 1.B å…ˆé€šè¿‡ bus.$onç»‘å®šäº‹ä»¶ï¼Œ2.Aé€šè¿‡bus.$emit æ–¹æ³•è°ƒç”¨ B ç»‘å®šçš„äº‹ä»¶æ–¹æ³•</li>
<li>$onå’Œ$emit éƒ½æ˜¯ bus è°ƒç”¨çš„</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;aaa&gt;&lt;/aaa&gt;</span><br><span class="line">        &lt;bbb&gt;&lt;/bbb&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç©ºçš„ Vue å®ä¾‹ä½œä¸ºäº‹ä»¶æ€»çº¿</span><br><span class="line">        var bus = new Vue()</span><br><span class="line">        //Aç»„ä»¶ä¼ é€’Bç»„ä»¶æ•°æ® 1.Bå…ˆé€šè¿‡bus.$onç»‘å®šäº‹ä»¶ï¼Œ2.Aé€šè¿‡bus.$emitæ–¹æ³•è°ƒç”¨Bç»‘å®šçš„äº‹ä»¶æ–¹æ³•</span><br><span class="line">        //$onå’Œ$emitéƒ½æ˜¯busè°ƒç”¨çš„</span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            data: &#123;&#125;,</span><br><span class="line">            components: &#123;</span><br><span class="line">                aaa: &#123;</span><br><span class="line">                    template: `</span><br><span class="line">                        &lt;div&gt;</span><br><span class="line">                            &lt;h3&gt;æˆ‘æ˜¯ç»„ä»¶AA&lt;/h3&gt;</span><br><span class="line">                            &lt;button @click=&#x27;fn&#x27;&gt; ç‚¹æˆ‘ä¼ ç»™Bæ•°æ® &lt;/button&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    `,</span><br><span class="line">                    data() &#123;</span><br><span class="line">                        return &#123;</span><br><span class="line">                            msg: &#x27;Aç»„ä»¶&#x27;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    methods: &#123;</span><br><span class="line">                        fn() &#123;</span><br><span class="line">                            bus.$emit(&#x27;bfn&#x27;, &#x27;ç»„ä»¶Aè¯´ï¼šä½ å¥½ç»„ä»¶B&#x27;)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;,</span><br><span class="line">                bbb: &#123;</span><br><span class="line">                    template: `</span><br><span class="line">                        &lt;div&gt;</span><br><span class="line">                            &lt;h3&gt;æˆ‘æ˜¯ç»„ä»¶BB&lt;/h3&gt;</span><br><span class="line">                            &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    `,</span><br><span class="line">                    data() &#123;</span><br><span class="line">                        return &#123;</span><br><span class="line">                            msg: &#x27;æˆ‘åœ¨ç­‰å¾…æ•°æ®...&#x27;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    created() &#123;</span><br><span class="line">                        //ç»‘å®šäº‹ä»¶ æ¥æ”¶æ•°æ®ï¼Œå½“è¿›å…¥é¡µé¢æ—¶èµ°åˆ°è¿™ä¸ªé’©å­å‡½æ•°åå°±è‡ªåŠ¨ç»‘å®šäº‹ä»¶äº†</span><br><span class="line">                        bus.$on(&#x27;bfn&#x27;, data =&gt; &#123;</span><br><span class="line">                            this.msg = data</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ç»„ä»¶ä¸­æ’æ§½ä½¿ç”¨"><a href="#ç»„ä»¶ä¸­æ’æ§½ä½¿ç”¨" class="headerlink" title="ç»„ä»¶ä¸­æ’æ§½ä½¿ç”¨"></a>ç»„ä»¶ä¸­æ’æ§½ä½¿ç”¨</h3><blockquote>
<p>æœ‰æ—¶åœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™å¸Œæœ›å¾€ç»„ä»¶ä¸­åŠ å…¥å…¶å®ƒå†…å®¹ï¼Œåœ¨ç»„ä»¶ä¸­é€šè¿‡æ’æ§½<slot></slot>æ¥æ¥æ”¶å†…å®¹ã€‚æ’æ§½å†…å¯ä»¥åŒ…å«ä»»ä½•æ¨¡æ¿ä»£ç ï¼ŒåŒ…æ‹¬ HTMLï¼Œç”šè‡³å…¶å®ƒçš„ç»„ä»¶ï¼›</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;hello&gt;</span><br><span class="line">      &lt;p&gt;èµ¶èµ°æ–°å† &lt;/p&gt;</span><br><span class="line">    &lt;/hello&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;template id=&quot;temp&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;script&gt;</span><br><span class="line"></span><br><span class="line">    //å½“ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ï¼Œ&lt;slot&gt;&lt;/slot&gt; å°†ä¼šè¢«æ›¿æ¢ä¸º&quot;èµ¶èµ°æ–°å† &quot;ã€‚æ’æ§½å†…å¯ä»¥åŒ…å«ä»»ä½•æ¨¡æ¿ä»£ç </span><br><span class="line">    //å¯ä»¥æœ‰å¤šä¸ªæ’æ§½</span><br><span class="line">    Vue.component(&#x27;hello&#x27;,&#123;</span><br><span class="line">      template:&#x27;#temp&#x27;,</span><br><span class="line">      data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">          msg:&#x27;æ­¦æ±‰åŠ æ²¹ ä¸­å›½åŠ æ²¹&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">      el: &#x27;#app&#x27;,</span><br><span class="line">      data: &#123;</span><br><span class="line">        msg:&#x27;èµ¶èµ°æ–°å† &#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="vue-ä¸­-ref-ä½¿ç”¨"><a href="#vue-ä¸­-ref-ä½¿ç”¨" class="headerlink" title="vue ä¸­ ref ä½¿ç”¨"></a>vue ä¸­ ref ä½¿ç”¨</h3><blockquote>
<p>ä½¿ç”¨ ref æ³¨å†Œå å¯ä»¥ä½¿ç”¨ this.$refs è·å–å½“å‰ DOM å¯¹è±¡ï¼Œå¿…é¡»åœ¨ mounted()é’©å­å‡½æ•°ä¹‹åæ‰å¯ä»¥è·å– DOM å¯¹è±¡ï¼›å…ƒç´ å’Œç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨ ref æ³¨å†Œï¼›</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;!-- ä½¿ç”¨refæ³¨å†Œå  å¯ä»¥ä½¿ç”¨this.$refs.ppè·å–å½“å‰DOMå¯¹è±¡ --&gt;</span><br><span class="line">        &lt;p ref=&#x27;pp&#x27;&gt;å“ˆå–½ï¼Œå¤§å®¶å¥½&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- ç»„ä»¶ä¹Ÿå¯ä»¥ --&gt;</span><br><span class="line">        &lt;hello ref=&quot;ho&quot;&gt;&lt;/hello&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            components: &#123;</span><br><span class="line">                hello: &#123;</span><br><span class="line">                    template: `&lt;h1&gt;å¤§å®¶å¥½&lt;/h1&gt;`,</span><br><span class="line">                    data() &#123;</span><br><span class="line">                        return &#123;</span><br><span class="line">                            msg: &#x27;hello message&#x27;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    methods: &#123;</span><br><span class="line">                        fn() &#123;</span><br><span class="line">                            console.log(&quot;è§¦å‘äº†äº‹ä»¶11111&quot;)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            mounted() &#123;</span><br><span class="line">                console.log(this.$refs.pp)</span><br><span class="line">                this.$refs.pp.style.color = &#x27;red&#x27;;</span><br><span class="line"></span><br><span class="line">                console.log(this.$refs.ho.msg)</span><br><span class="line">                this.$refs.ho.fn()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€vue-router-è·¯ç”±"><a href="#ä¸‰ã€vue-router-è·¯ç”±" class="headerlink" title="ä¸‰ã€vue-router è·¯ç”±"></a>ä¸‰ã€vue-router è·¯ç”±</h2><h3 id="è·¯ç”±åŸºæœ¬ä½¿ç”¨"><a href="#è·¯ç”±åŸºæœ¬ä½¿ç”¨" class="headerlink" title="è·¯ç”±åŸºæœ¬ä½¿ç”¨"></a>è·¯ç”±åŸºæœ¬ä½¿ç”¨</h3><ul>
<li>1.åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ npm initã€npm init -y åˆå§‹åŒ– package.json</li>
<li>2.ç„¶åæ‰§è¡Œ npm i -s vueã€npm i -s vue-router å®‰è£… vue å’Œ vue-router</li>
<li>3.åœ¨ node_modules ä¸‹æ‰¾åˆ° vue å’Œ vue-router ä¸­çš„ js å¹¶å¼•å…¥åˆ°é¡¹ç›®ä¸­</li>
<li>4.åˆ›å»ºç»„ä»¶</li>
<li>5.åˆ›å»ºè·¯ç”±å¯¹è±¡ï¼Œå¹¶é…ç½®è·¯ç”±</li>
<li>6.åœ¨ Vue å®ä¾‹ä¸­å…³è” router</li>
<li>7.è·¯ç”±å…¥å£</li>
<li>8.è·¯ç”±å‡ºå£</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;!-- 6.è·¯ç”±å…¥å£ --&gt;</span><br><span class="line">        &lt;router-link to=&#x27;/home&#x27;&gt;é¦–é¡µ&lt;/router-link&gt;</span><br><span class="line">        &lt;router-link to=&#x27;/me&#x27;&gt;æˆ‘çš„&lt;/router-link&gt;</span><br><span class="line">        &lt;!-- 7.è·¯ç”±å‡ºå£ --&gt;</span><br><span class="line">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script src=&quot;./node_modules/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;./node_modules/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //é¦–å…ˆå…ˆå®‰è£…vueå’Œvue-router</span><br><span class="line">        //1.åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œnpm initã€npm init -yåˆå§‹åŒ–package.json</span><br><span class="line">        //2.ç„¶åæ‰§è¡Œnpm i -s vueã€npm i -s vue-routerå®‰è£…vueå’Œvue-router</span><br><span class="line">        //3.åœ¨node_modulesä¸‹æ‰¾åˆ°vueå’Œvue-routerä¸­çš„jså¹¶å¼•å…¥åˆ°é¡¹ç›®ä¸­</span><br><span class="line">        //4.å…ˆåˆ›å»ºä¸¤ä¸ªç»„ä»¶</span><br><span class="line">        const Home = Vue.component(&#x27;home&#x27;, &#123;</span><br><span class="line">            template: `&lt;h1&gt;æˆ‘æ˜¯Homeç»„ä»¶&lt;/h1&gt;`</span><br><span class="line">        &#125;)</span><br><span class="line">        const Me = Vue.component(&#x27;me&#x27;, &#123;</span><br><span class="line">            template: `&lt;h1&gt;æˆ‘æ˜¯Meç»„ä»¶&lt;/h1&gt;`</span><br><span class="line">        &#125;)</span><br><span class="line">        //5.åˆ›å»ºè·¯ç”±å¯¹è±¡</span><br><span class="line">        const router = new VueRouter(&#123;</span><br><span class="line">            routes: [</span><br><span class="line">                &#123; path: &#x27;/home&#x27;, component: Home &#125;,</span><br><span class="line">                &#123; path: &#x27;/me&#x27;, component: Me &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;)</span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            data: &#123;&#125;,</span><br><span class="line">            //å°†vueå’Œrouter</span><br><span class="line">            router: router</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="é‡å®šå‘ã€é«˜äº®"><a href="#é‡å®šå‘ã€é«˜äº®" class="headerlink" title="é‡å®šå‘ã€é«˜äº®"></a>é‡å®šå‘ã€é«˜äº®</h3><blockquote>
<p>å½“ç¬¬ä¸€æ¬¡æ‰“å¼€é¡µé¢æ—¶ï¼Œæƒ³è¦é»˜è®¤æ‰“å¼€ä¸€ä¸ªè·¯ç”±ï¼Œå°±å¯ä»¥ä½¿ç”¨è·¯ç”±ä¸­çš„é‡å®šå‘ï¼›æŒ‰é’®çš„é«˜äº®æ ·å¼ä¸æ˜¯æˆ‘ä»¬å–œæ¬¢çš„ï¼Œå¯ä»¥ä½¿ç”¨ linkActiveClass æ¥è‡ªå®šä¹‰é«˜äº®å…ƒç´ çš„ç±»åï¼Œç„¶åå†è®¾ç½® css æ ·å¼å°±å¯ä»¥äº†ï¼›</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> //5.åˆ›å»ºè·¯ç”±å¯¹è±¡</span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">        //å¦‚æœå½“å‰è·¯å¾„æ˜¯&#x27;/&#x27;å°±redirecté‡å®šå‘ é»˜è®¤homeç»„ä»¶</span><br><span class="line">        &#123; path: &#x27;/&#x27;, redirect: &#x27;/home&#x27; &#125;,</span><br><span class="line">        &#123; path: &#x27;/home&#x27;, component: Home &#125;,</span><br><span class="line">        &#123; path: &#x27;/me&#x27;, component: Me &#125;</span><br><span class="line">    ],</span><br><span class="line">    // ä¿®æ”¹é»˜è®¤é«˜äº®çš„aæ ‡ç­¾çš„ç±»å</span><br><span class="line">    // å¦‚æœæ˜¯é…åˆç¬¬ä¸‰æ–¹ç»„ä»¶åº“æ¥å®ç°èœå•é«˜äº®ï¼Œæ­¤æ—¶ï¼Œåªéœ€è¦å°†ç±»åè®¾ç½®ä¸º ç¬¬ä¸‰æ–¹ç»„ä»¶çš„ç±»åå³å¯</span><br><span class="line">    linkActiveClass: &#x27;now&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"> &lt;style&gt;</span><br><span class="line">    /* .router-link-exact-active, */</span><br><span class="line">    /* .router-link-active &#123; */</span><br><span class="line">    .now &#123;</span><br><span class="line">        color: hotpink;</span><br><span class="line">        font-size: 30px;</span><br><span class="line">        text-decoration: none;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±ä¼ å‚æ–¹å¼"><a href="#è·¯ç”±ä¼ å‚æ–¹å¼" class="headerlink" title="è·¯ç”±ä¼ å‚æ–¹å¼"></a>è·¯ç”±ä¼ å‚æ–¹å¼</h3><blockquote>
<p>æœ‰æ—¶å€™å¤šä¸ªè·¯ç”±éƒ½æ‰“å¼€åŒä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡ç»™ç»„ä»¶ä¼ ä¸åŒçš„å‚æ•°å±•ç¤ºä¸åŒçš„å†…å®¹å°±å¯ä»¥äº†ï¼›é€šè¿‡è·¯ç”±æ‰“å¼€ä¸åŒç»„ä»¶ä¼ å‚ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼›<br><strong>å¯¼èˆªåˆ†ä¸ºä¸¤ç§</strong></p>
</blockquote>
<ul>
<li>1.å£°æ˜å¼å¯¼èˆª(router-link)</li>
<li>2.ç¼–ç¨‹å¼å¯¼èˆª($router.push)</li>
</ul>
<h3 id="å£°æ˜å¼å¯¼èˆª-router-link"><a href="#å£°æ˜å¼å¯¼èˆª-router-link" class="headerlink" title="å£°æ˜å¼å¯¼èˆª(router-link)"></a>å£°æ˜å¼å¯¼èˆª(router-link)</h3><ul>
<li>to å­—ç¬¦ä¸²ï¼šåªèƒ½ä¼ é€’å­—ç¬¦ä¸²</li>
<li>:to å¯¹è±¡ï¼šå¯ä»¥ä¼ é€’å¯¹è±¡,å¯ä»¥é€šè¿‡ nameã€path æ–¹å¼</li>
</ul>
<h3 id="ç¼–ç¨‹å¼å¯¼èˆª-router-push"><a href="#ç¼–ç¨‹å¼å¯¼èˆª-router-push" class="headerlink" title="ç¼–ç¨‹å¼å¯¼èˆª($router.push)"></a>ç¼–ç¨‹å¼å¯¼èˆª($router.push)</h3><ul>
<li><strong>this.router.push(name,params)</strong>;é€šè¿‡ name è·³è½¬çš„çŠ¶æ€æ é‡Œçœ‹ä¸åˆ°å‚æ•°ç±»ä¼¼ post;ç»„ä»¶é€šè¿‡ route.params è·å–å‚æ•°;</li>
<li><strong>this.router.push(path,query)</strong>;é€šè¿‡ path è·³è½¬çš„çŠ¶æ€æ é‡Œå¯ä»¥çœ‹åˆ°å‚æ•°ç±»ä¼¼ get;ç»„ä»¶é€šè¿‡ route.query è·å–å‚æ•°;</li>
</ul>
<h3 id="ç›‘å¬è·¯ç”±å˜åŒ–"><a href="#ç›‘å¬è·¯ç”±å˜åŒ–" class="headerlink" title="ç›‘å¬è·¯ç”±å˜åŒ–"></a>ç›‘å¬è·¯ç”±å˜åŒ–</h3><blockquote>
<p>åœ¨ç»„ä»¶ä¸­é€šè¿‡ watch å¯¹è±¡ä¸­ç›‘å¬è·¯ç”±çš„å˜åŒ–$route(to, from) {}ï¼Œåœ¨è¿™é‡Œå¯è¿›è¡Œç›‘å¬æ•°æ®å˜åŒ– è¿›è¡Œç½‘ç»œè¯·æ±‚ç­‰ç­‰ï¼›</p>
</blockquote>
<h4 id="è¯¦ç»†ä½¿ç”¨æ–¹å¼è¯·çœ‹ä¸‹é¢ä»£ç "><a href="#è¯¦ç»†ä½¿ç”¨æ–¹å¼è¯·çœ‹ä¸‹é¢ä»£ç " class="headerlink" title="è¯¦ç»†ä½¿ç”¨æ–¹å¼è¯·çœ‹ä¸‹é¢ä»£ç "></a>è¯¦ç»†ä½¿ç”¨æ–¹å¼è¯·çœ‹ä¸‹é¢ä»£ç </h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;!-- é€šè¿‡toå­—ç¬¦ä¸² --&gt;</span><br><span class="line">        &lt;router-link to=&quot;/home/1001&quot;&gt;1001å·èµ›è½¦&lt;/router-link&gt;</span><br><span class="line">        &lt;router-link to=&quot;/home/1002&quot;&gt;1002å·èµ›è½¦&lt;/router-link&gt;</span><br><span class="line">        &lt;!-- é€šè¿‡$router.push&#123;&#125; --&gt;</span><br><span class="line">        &lt;a @click=&#x27;fn&#x27;&gt;1003å·èµ›è½¦&lt;/a&gt;</span><br><span class="line">        &lt;a @click=&#x27;fn1&#x27;&gt;1004å·èµ›è½¦&lt;/a&gt;</span><br><span class="line">        &lt;!-- é€šè¿‡:toå¯¹è±¡ --&gt;</span><br><span class="line">        &lt;router-link :to=&quot;&#123; name:&#x27;Home&#x27;,params:&#123;id:1005,title:&#x27;pjs&#x27;&#125;&#125;&quot;&gt;1005&lt;/router-link&gt;</span><br><span class="line">        &lt;router-link :to=&quot;&#123; path:&#x27;/home&#x27;,query:&#123;id:1006,title:&#x27;pjs&#x27;&#125;&#125;&quot;&gt;1006&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //å¯¼èˆªåˆ†ä¸ºä¸¤ç§ï¼š1.å£°æ˜å¼å¯¼èˆª(router-link)  2.ç¼–ç¨‹å¼å¯¼èˆª($router.push)</span><br><span class="line">        //1.é€šè¿‡toå­—ç¬¦ä¸²</span><br><span class="line">        //2.$router.push&#123;&#125;</span><br><span class="line">        //3.é€šè¿‡:toå¯¹è±¡</span><br><span class="line"></span><br><span class="line">        //é€šè¿‡nameè·³è½¬çš„çŠ¶æ€æ é‡Œçœ‹ä¸åˆ°å‚æ•°ç±»ä¼¼postï¼Œé€šè¿‡pathè·³è½¬çš„çŠ¶æ€æ é‡Œå¯ä»¥çœ‹åˆ°å‚æ•°ç±»ä¼¼get</span><br><span class="line">        //é€šè¿‡$route.paramsæˆ–$route.queryæ¥è·å–å‚æ•°</span><br><span class="line">        const Home = Vue.component(&#x27;home&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;h1 v-if=&#x27;$route.params.id&#x27;&gt;æ¬¢è¿æ¥åˆ°ä¸»é¡µé¢&#123;&#123; $route.params.id&#125;&#125;&lt;/h1&gt;</span><br><span class="line">                    &lt;h1 v-if=&#x27;$route.query.id&#x27;&gt;æ¬¢è¿æ¥åˆ°ä¸»é¡µé¢&#123;&#123; $route.query.id&#125;&#125;&lt;/h1&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `,</span><br><span class="line">            //ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œè·å–å‚æ•°è¿›è¡Œæ“ä½œ</span><br><span class="line">            watch: &#123;</span><br><span class="line">                 //åªè¦è·¯ç”±å‘ç”Ÿçš„å˜åŒ–å°±ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œto è·³è½¬çš„ç›®çš„åœ°ï¼Œ from ä»å“ªé‡Œæ¥</span><br><span class="line">                $route(to, from) &#123;</span><br><span class="line">                    //åœ¨è¿™é‡Œå¯è¿›è¡Œç›‘å¬æ•°æ®å˜åŒ– è¿›è¡Œç½‘ç»œè¯·æ±‚</span><br><span class="line">                    console.log(to)</span><br><span class="line">                    console.log(from)</span><br><span class="line">                    console.log(to.params.id)</span><br><span class="line">                    console.log(to.query.id)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        const router = new VueRouter(&#123;</span><br><span class="line">            routes: [</span><br><span class="line">                &#123; path: &#x27;/home/:id&#x27;, component: Home &#125;,</span><br><span class="line">                &#123; path: &#x27;/home&#x27;, name: &#x27;Home&#x27;, component: Home &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            router,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                fn() &#123;</span><br><span class="line">                    this.$router.push(&#123;</span><br><span class="line">                        name: &#x27;Home&#x27;,//æ‰¾åˆ°routesé‡ŒåŒ¹é…åˆ°nameä¸ºHome</span><br><span class="line">                        params: &#123;</span><br><span class="line">                            id: 1003,</span><br><span class="line">                            title: &#x27;pjs&#x27;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;,</span><br><span class="line">                fn1() &#123;</span><br><span class="line">                    this.$router.push(&#123;</span><br><span class="line">                        path: &#x27;/home&#x27;,</span><br><span class="line">                        query: &#123;</span><br><span class="line">                            id: 1004,</span><br><span class="line">                            title: &#x27;pjs&#x27;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±åµŒå¥—-å­è·¯ç”±"><a href="#è·¯ç”±åµŒå¥—-å­è·¯ç”±" class="headerlink" title="è·¯ç”±åµŒå¥—-å­è·¯ç”±"></a>è·¯ç”±åµŒå¥—-å­è·¯ç”±</h3><ul>
<li>è·¯ç”±æ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œå³ï¼šè·¯ç”±ä¸­åˆåŒ…å«å­è·¯ç”±</li>
<li>è§„åˆ™ï¼šçˆ¶ç»„ä»¶ä¸­åŒ…å« router-viewï¼Œåœ¨è·¯ç”±è§„åˆ™ä¸­ä½¿ç”¨ children é…ç½®</li>
<li>ä½¿ç”¨ children é‡Œé…ç½®å­è·¯ç”±ï¼Œå­è·¯ç”±çš„ path é‡Œä¸éœ€è¦åŠ &#x2F;ç¬¦å·äº†</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;router-link to=&#x27;/home&#x27;&gt;é¦–é¡µ&lt;/router-link&gt;</span><br><span class="line">        &lt;router-link to=&#x27;/user&#x27;&gt;æˆ‘çš„&lt;/router-link&gt;</span><br><span class="line">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line"></span><br><span class="line">        //è·¯ç”±æ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œå³ï¼šè·¯ç”±ä¸­åˆåŒ…å«å­è·¯ç”±</span><br><span class="line">        //è§„åˆ™ï¼šçˆ¶ç»„ä»¶ä¸­åŒ…å« router-viewï¼Œåœ¨è·¯ç”±è§„åˆ™ä¸­ä½¿ç”¨ children é…ç½®</span><br><span class="line">        const Home = Vue.component(&#x27;home&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;router-link to=&#x27;/home/cartA&#x27;&gt;ä¹°è½¦&lt;/router-link&gt;</span><br><span class="line">                    &lt;router-link to=&#x27;/home/cartB&#x27;&gt;å–è½¦&lt;/router-link&gt;</span><br><span class="line">                    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `</span><br><span class="line">        &#125;)</span><br><span class="line">        const CartA = &#123;</span><br><span class="line">            template: `&lt;h3&gt;ä¹°ä»€ä¹ˆæ ·çš„è½¦ï¼Ÿ&lt;/h3&gt;`</span><br><span class="line">        &#125;</span><br><span class="line">        const CartB = &#123;</span><br><span class="line">            template: `&lt;h3&gt;å–ä»€ä¹ˆæ ·çš„è½¦ï¼Ÿ&lt;/h3&gt;`</span><br><span class="line">        &#125;</span><br><span class="line">        const User = Vue.component(&#x27;user&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    è¿™é‡Œæ˜¯ä¸ªäººä¿¡æ¯</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `</span><br><span class="line">        &#125;)</span><br><span class="line">        const router = new VueRouter(&#123;</span><br><span class="line">            routes: [</span><br><span class="line">                &#123;</span><br><span class="line">                    path: &#x27;/home&#x27;, component: Home,</span><br><span class="line">                    //ä½¿ç”¨childrené‡Œé…ç½®å­è·¯ç”±ï¼Œå­è·¯ç”±çš„pathé‡Œä¸éœ€è¦åŠ /ç¬¦å·äº†</span><br><span class="line">                    children: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            path: &#x27;cartA&#x27;,</span><br><span class="line">                            component: CartA</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            path:&#x27;cartB&#x27;,</span><br><span class="line">                            component:CartB</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123; path: &#x27;/user&#x27;, component: User &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;)</span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            router</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€vuex"><a href="#å››ã€vuex" class="headerlink" title="å››ã€vuex"></a>å››ã€vuex</h2><blockquote>
<p>Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚æ„æ€å°±æ˜¯æ‰€æœ‰ç»„ä»¶å…±åŒæ“ä½œä¸€ä»½æ•°æ®ï¼Œéƒ½å¯ä»¥å¯¹å®ƒè¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">å±æ€§</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">State</td>
<td align="center">å…±äº«æ•°æ®éƒ½å­˜åœ¨è¿™é‡Œ</td>
</tr>
<tr>
<td align="center">Mutation</td>
<td align="center">æ›´æ”¹ State ä¸­æ•°æ®çš„å”¯ä¸€æ–¹æ³•ï¼ŒåŒæ­¥æ“ä½œ</td>
</tr>
<tr>
<td align="center">Action</td>
<td align="center">å¼‚æ­¥æ“ä½œ Mutation æ¥æ›´æ”¹ State ä¸­çš„æ•°æ®</td>
</tr>
<tr>
<td align="center">Getter</td>
<td align="center">åŸºäº state çš„æ´¾ç”ŸçŠ¶æ€ï¼Œå¯ç†è§£ä¸ºç»„ä»¶ä¸­çš„è®¡ç®—å±æ€§</td>
</tr>
</tbody></table>
<h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><ul>
<li>1.å®‰è£… vuex npm i -s vuex</li>
<li>2.åˆ›å»º store å¯¹è±¡</li>
<li>3.æŠŠ vue å’Œ store è¿›è¡Œå…³è”</li>
<li>4.ä½¿ç”¨$store.state ä¸­çš„æ•°æ®</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;!-- 4.ä½¿ç”¨$store.stateä¸­çš„æ•°æ® --&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123;this.$store.state.name&#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //1.å®‰è£…vuex npm i -s vuex</span><br><span class="line">        //2.åˆ›å»ºstoreå¯¹è±¡</span><br><span class="line">        let store = new Vuex.Store(&#123;</span><br><span class="line">            /**</span><br><span class="line">            *   stateä¸­å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼</span><br><span class="line">            */</span><br><span class="line">            state: &#123;</span><br><span class="line">                name: &#x27;é‚“ç´«æ£‹&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        let vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            data: &#123;&#125;,</span><br><span class="line">            //3.æŠŠvueå’Œstoreè¿›è¡Œå…³è”</span><br><span class="line">            store,</span><br><span class="line">            mounted() &#123;</span><br><span class="line">                //å¯ä»¥è·å–storeå¯¹è±¡</span><br><span class="line">                console.log(this.$store)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/3735156-7bac355c4d38d857.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/517/format/webp" alt="image"></p>
<h3 id="Mutation"><a href="#Mutation" class="headerlink" title="Mutation"></a>Mutation</h3><blockquote>
<p>mutation æ˜¯æ›´æ”¹ store ä¸­çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•,vuex ä¸­è§„å®šåªèƒ½é€šè¿‡æäº¤ mutation çš„æ–¹å¼å»æ›´æ”¹ store ä¸­çš„çŠ¶æ€,store.commit()æ–¹æ³•æ›´æ”¹æ•°æ®ã€‚</p>
</blockquote>
<ul>
<li>æ— å‚æ•°</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//è°ƒç”¨æ–¹ åªä¼ ä¸€ä¸ªæ–¹æ³•å</span><br><span class="line">this.$store.commit(&#x27;changeName&#x27;)</span><br><span class="line">//æ¥æ”¶æ–¹ é»˜è®¤ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯stateï¼Œæ— å‚æ¥æ”¶</span><br><span class="line"> changeName(state) &#123;</span><br><span class="line">    state.name = &#x27;å¼ éŸ¶æ¶µ&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>è½½è·æäº¤ï¼Œåªèƒ½æäº¤ä¸€ä¸ªå‚æ•°</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//è°ƒç”¨æ–¹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–¹æ³•åï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼šå‚æ•°</span><br><span class="line">this.$store.commit(&#x27;changeName&#x27;,this.msg)</span><br><span class="line">//æ¥æ”¶æ–¹</span><br><span class="line"> changeName(state, name) &#123;</span><br><span class="line">    state.name = name ? name : &#x27;å¼ éŸ¶æ¶µ&#x27;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>è½½è·å¯¹è±¡æäº¤</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//è°ƒç”¨æ–¹ï¼Œä¼ é€’ä¸€ä¸ªå¯¹è±¡</span><br><span class="line">this.$store.commit(&#x27;changeName&#x27;,&#123;</span><br><span class="line">   name:this.msg</span><br><span class="line">&#125;)</span><br><span class="line">//æ¥æ”¶æ–¹</span><br><span class="line">changeName(state, payload) &#123;</span><br><span class="line">    state.name = payload.name ;</span><br><span class="line">    state.sex = payload.sex//ç»™stateæ–°å¢ä¸€ä¸ªå±æ€§</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>çº¯å¯¹è±¡é£æ ¼æäº¤ type å€¼æ˜¯æ–¹æ³•å</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//æäº¤ä¸€ä¸ªçº¯å¯¹è±¡å½“åšå‚æ•°ï¼Œtypeå€¼ä¸ºæ–¹æ³•å</span><br><span class="line">this.$store.commit(&#123;</span><br><span class="line">    type: &#x27;changeName&#x27;,</span><br><span class="line">    name: this.msg,</span><br><span class="line">    sex: &#x27;ç”·&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">//æ¥æ”¶æ–¹</span><br><span class="line">changeName(state, payload) &#123;</span><br><span class="line">    state.name = payload.name ;</span><br><span class="line">    state.sex = payload.sex//ç»™stateæ–°å¢ä¸€ä¸ªå±æ€§</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¡ˆä¾‹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;!-- ç»„ä»¶AAAå’Œç»„ä»¶BBBå…±åŒæ“ä½œ$store.stateä¸­çš„æ•°æ® --&gt;</span><br><span class="line">        &lt;!-- æ¯”æˆ‘ä»¬ä¹‹å‰å­¦çš„ç»„ä»¶ä¹‹é—´é€šè®¯æ›´åŠ æ–¹ä¾¿ --&gt;</span><br><span class="line">        &lt;AAA&gt;&lt;/AAA&gt;</span><br><span class="line">        &lt;BBB&gt;&lt;/BBB&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        /**</span><br><span class="line">        *  mutationæ˜¯æ›´æ”¹storeä¸­çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•</span><br><span class="line">        *  vuexä¸­è§„å®šåªèƒ½é€šè¿‡æäº¤mutationçš„æ–¹å¼å»æ›´æ”¹storeä¸­çš„çŠ¶æ€</span><br><span class="line">        *  store.commit()æ›´æ”¹æ•°æ®</span><br><span class="line">        */</span><br><span class="line">        let store = new Vuex.Store(&#123;</span><br><span class="line">            state: &#123;</span><br><span class="line">                name: &#x27;é‚“ç´«æ£‹&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            /**</span><br><span class="line">            *   mutationså¯¹è±¡ä¸­è‡ªå®šä¹‰æ–¹æ³•æ¥æ“ä½œstateä¸­çš„æ•°æ®</span><br><span class="line">            *   å¹¶ä¸”æ¯ä¸ªæ–¹æ³•ä¼šæ¥å— state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</span><br><span class="line">            *   æ³¨æ„ï¼šStoreå¯¹è±¡ä¸­å†™mutationsï¼›Mutation å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</span><br><span class="line">            */</span><br><span class="line">            mutations: &#123;</span><br><span class="line">                //ä¸æ¥æ”¶å‚æ•°</span><br><span class="line">                changeName(state) &#123;</span><br><span class="line">                    state.name = &#x27;å¼ éŸ¶æ¶µ&#x27;</span><br><span class="line">                &#125;,</span><br><span class="line">                //åªæ¥æ”¶ä¸€ä¸ªå‚æ•°</span><br><span class="line">                changeName(state, name) &#123;</span><br><span class="line">                    state.name = name ? name : &#x27;å¼ éŸ¶æ¶µ&#x27;;</span><br><span class="line">                &#125;,</span><br><span class="line">                //æ¥æ”¶å‚æ•°å¯¹è±¡</span><br><span class="line">                changeName(state, payload) &#123;</span><br><span class="line">                    state.name = payload.name ? payload.name : &#x27;å¼ éŸ¶æ¶µ&#x27;;</span><br><span class="line">                    state.sex = payload.sex//ç»™stateæ–°å¢ä¸€ä¸ªå±æ€§</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        //åˆ›å»ºä¸¤ä¸ªç»„ä»¶</span><br><span class="line">        const AAA = Vue.component(&#x27;aaa&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;!-- 4.ä½¿ç”¨$store.stateä¸­çš„æ•°æ® --&gt;</span><br><span class="line">                    &lt;h1&gt;&#123;&#123;this.$store.state.name&#125;&#125;&lt;/h1&gt;</span><br><span class="line">                    &lt;h2&gt;&#123;&#123;this.$store.state.sex&#125;&#125;&lt;/h2&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `</span><br><span class="line">        &#125;)</span><br><span class="line">        const BBB = Vue.component(&#x27;bbb&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å§“å&quot; v-model=&#x27;msg&#x27;&gt;</span><br><span class="line">                    &lt;input type=&quot;button&quot; value=&quot;ç¡®å®š&quot; @click=&#x27;change&#x27;&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `,</span><br><span class="line">            data() &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    msg: &#x27;&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                change() &#123;</span><br><span class="line">                    //1.æ— å‚æ•°</span><br><span class="line">                    // this.$store.commit(&#x27;changeName&#x27;)</span><br><span class="line"></span><br><span class="line">                    //2.è½½è·æäº¤ï¼Œåªèƒ½æäº¤ä¸€ä¸ªå‚æ•°</span><br><span class="line">                    // this.$store.commit(&#x27;changeName&#x27;,this.msg)</span><br><span class="line"></span><br><span class="line">                    //3.è½½è·å¯¹è±¡æäº¤</span><br><span class="line">                    // this.$store.commit(&#x27;changeName&#x27;,&#123;</span><br><span class="line">                    //     name:this.msg</span><br><span class="line">                    // &#125;)</span><br><span class="line"></span><br><span class="line">                    //4.çº¯å¯¹è±¡é£æ ¼æäº¤ typeå€¼æ˜¯æ–¹æ³•å</span><br><span class="line">                    this.$store.commit(&#123;</span><br><span class="line">                        type: &#x27;changeName&#x27;,</span><br><span class="line">                        name: this.msg,</span><br><span class="line">                        sex: &#x27;ç”·&#x27;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        let vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            //æŠŠvueå’Œstoreè¿›è¡Œå…³è”</span><br><span class="line">            store</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/3735156-46e377f77e8f06bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/706/format/webp" alt="image"></p>
<h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><blockquote>
<p>mutation ä¸­è§„åˆ™ä¸Šæ˜¯ä¸å…è®¸å¼‚æ­¥æ“ä½œçš„,äºæ˜¯ vuex ä¸ºæˆ‘ä»¬æä¾›äº† actionã€‚actions å¯¹è±¡ä¸­è‡ªå®šä¹‰æ–¹æ³•æ¥æ“ä½œ mutations,å¹¶ä¸”æ¯ä¸ªæ–¹æ³•ä¼šæ¥å— context ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°,context å¯¹è±¡ä¸ store å¯¹è±¡å…·æœ‰ç›¸åŒçš„æ–¹æ³•å’Œå±æ€§;action ä¸ mutation é™¤äº†ä½¿ç”¨äº†å¼‚æ­¥æ“ä½œå’Œè°ƒç”¨ mutationï¼Œå…¶å®ƒä½¿ç”¨å¹¶æ— å·®åˆ« ;</p>
</blockquote>
<ul>
<li>å¼‚æ­¥æ›´æ–°æ•°æ®</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//actionäº‹ä»¶çš„è§¦å‘åŒæ ·å¯ä»¥ä½¿ç”¨è½½è·å’Œå¯¹è±¡ä¸¤ç§æ–¹å¼,å…¶å®ƒæ–¹å¼å°±ä¸å†™äº†å’Œmutationsæ–¹å¼ä¸€æ ·</span><br><span class="line">this.$store.dispatch(&#123;</span><br><span class="line">    type:&#x27;changeNameAsync&#x27;,//Store.actionsä¸­çš„æ–¹æ³•å</span><br><span class="line">    name: this.msg,</span><br><span class="line">    sex: &#x27;ç”·&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">actions: &#123;</span><br><span class="line">    //æ¥æ”¶æ•°æ® å»¶è¿Ÿä¸€ç§’æäº¤æ•°æ®</span><br><span class="line">    changeNameAsync(context, payload) &#123;</span><br><span class="line">    //å¼‚æ­¥æ“ä½œ</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        context.commit(&#x27;changeName&#x27;,payload)</span><br><span class="line">    &#125;, 1000)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">mutations: &#123;</span><br><span class="line">    //æ¥æ”¶å‚æ•°å¯¹è±¡</span><br><span class="line">    changeName(state, payload) &#123;</span><br><span class="line">    state.name = payload.name ;</span><br><span class="line">    state.sex = payload.sex//ç»™stateæ–°å¢ä¸€ä¸ªå±æ€§</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¡ˆä¾‹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;AAA&gt;&lt;/AAA&gt;</span><br><span class="line">        &lt;BBB&gt;&lt;/BBB&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        /**</span><br><span class="line">        *  action--å¼‚æ­¥æ›´æ”¹çŠ¶æ€</span><br><span class="line">        *  mutationä¸­è§„åˆ™ä¸Šæ˜¯ä¸å…è®¸å¼‚æ­¥æ“ä½œçš„,äºæ˜¯vuexä¸ºæˆ‘ä»¬æä¾›äº†actionã€‚</span><br><span class="line">        *  store.dispatch() æ–¹æ³•è§¦å‘</span><br><span class="line">        */</span><br><span class="line">        let store = new Vuex.Store(&#123;</span><br><span class="line">            state: &#123;</span><br><span class="line">                name: &#x27;é‚“ç´«æ£‹&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            /**</span><br><span class="line">            *   mutationsåªèƒ½åŒæ­¥æ‰§è¡Œ</span><br><span class="line">            */</span><br><span class="line">            mutations: &#123;</span><br><span class="line">                //æ¥æ”¶å‚æ•°å¯¹è±¡</span><br><span class="line">                changeName(state, payload) &#123;</span><br><span class="line">                    state.name = payload.name ? payload.name : &#x27;å¼ éŸ¶æ¶µ&#x27;;</span><br><span class="line">                    state.sex = payload.sex//ç»™stateæ–°å¢ä¸€ä¸ªå±æ€§</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            /**</span><br><span class="line">            *   actionså¯¹è±¡ä¸­è‡ªå®šä¹‰æ–¹æ³•æ¥æ“ä½œmutations,å¹¶ä¸”æ¯ä¸ªæ–¹æ³•ä¼šæ¥å— context ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°;</span><br><span class="line">            *   contextå¯¹è±¡ä¸storeå¯¹è±¡å…·æœ‰ç›¸åŒçš„æ–¹æ³•å’Œå±æ€§</span><br><span class="line">            *   action ä¸ mutation é™¤äº†ä½¿ç”¨äº†å¼‚æ­¥æ“ä½œå’Œè°ƒç”¨mutationï¼Œå…¶å®ƒä½¿ç”¨å¹¶æ— å·®åˆ«</span><br><span class="line">            */</span><br><span class="line">            actions: &#123;</span><br><span class="line">                //æ¥æ”¶æ•°æ®</span><br><span class="line">                changeNameAsync(context, payload) &#123;</span><br><span class="line">                    //å¼‚æ­¥æ“ä½œ</span><br><span class="line">                    setTimeout(() =&gt; &#123;</span><br><span class="line">                        context.commit(&#123;</span><br><span class="line">                            type: &#x27;changeName&#x27;,</span><br><span class="line">                            name: payload.name,</span><br><span class="line">                            sex: &#x27;ç”·&#x27;</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;, 1000)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        //åˆ›å»ºä¸¤ä¸ªç»„ä»¶</span><br><span class="line">        const AAA = Vue.component(&#x27;aaa&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;!-- 4.ä½¿ç”¨$store.stateä¸­çš„æ•°æ® --&gt;</span><br><span class="line">                    &lt;h1&gt;&#123;&#123;this.$store.state.name&#125;&#125;&lt;/h1&gt;</span><br><span class="line">                    &lt;h2&gt;&#123;&#123;this.$store.state.sex&#125;&#125;&lt;/h2&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `</span><br><span class="line">        &#125;)</span><br><span class="line">        const BBB = Vue.component(&#x27;bbb&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å§“å&quot; v-model=&#x27;msg&#x27;&gt;</span><br><span class="line">                    &lt;input type=&quot;button&quot; value=&quot;ç¡®å®š&quot; @click=&#x27;change&#x27;&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `,</span><br><span class="line">            data() &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    msg: &#x27;&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                change() &#123;</span><br><span class="line">                    //actionäº‹ä»¶çš„è§¦å‘åŒæ ·å¯ä»¥ä½¿ç”¨è½½è·å’Œå¯¹è±¡ä¸¤ç§æ–¹å¼,å…¶å®ƒæ–¹å¼å°±ä¸å†™äº†å’Œmutationsæ–¹å¼ä¸€æ ·</span><br><span class="line">                    this.$store.dispatch(&#123;</span><br><span class="line">                        type:&#x27;changeNameAsync&#x27;,//Store.actionsä¸­çš„æ–¹æ³•å</span><br><span class="line">                        name: this.msg</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        let vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            store</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/3735156-1bb9c077d8bc7f10.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/709/format/webp" alt="image"></p>
<h3 id="getter"><a href="#getter" class="headerlink" title="getter"></a>getter</h3><blockquote>
<p>getters ç±»ä¼¼ Vue å®ä¾‹ä¸­çš„è®¡ç®—å±æ€§ï¼Œå½“ç»‘å®šçš„å±æ€§å‘ç”Ÿå˜åŒ–åæ‰ä¼šé‡æ–°è®¡ç®—;æ¯ä¸ªæ–¹æ³•éƒ½é»˜è®¤æ¥æ”¶ state å‚æ•°ã€‚</p>
</blockquote>
<ul>
<li>getters ä½¿ç”¨</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//åœ¨gettersä¸‹åˆ›å»ºä¸€ä¸ªgetNameæ–¹æ³•ï¼Œé»˜è®¤æ¥æ”¶stateï¼Œæ­¤æ–¹æ³•å’Œè®¡ç®—å±æ€§ç”¨æ³•ä¸€æ ·ï¼Œå½“stateä¸­çš„nameå‘ç”Ÿæ”¹å˜æ—¶ä¼šé‡æ–°è®¡ç®—è¿™ä¸ªæ–¹æ³•returnç»“æœ</span><br><span class="line">getters:&#123;</span><br><span class="line">    getName(state)&#123;</span><br><span class="line">        let myName=&#x27;&#x27;;</span><br><span class="line">        if(state.name === &#x27;å½­ä¿Šå±±&#x27;)&#123;</span><br><span class="line">            myName = &#x27;ä½ æ˜¯æœ€å¸…çš„ï¼&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">        return state.name + myName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//åœ¨Aç»„ä»¶ä¸­ä½¿ç”¨gettersä¸‹çš„getNameå±æ€§ï¼Œå½“Bç»„ä»¶ä¿®æ”¹äº†stateä¸­çš„nameåAç»„ä»¶ä¸­h2æ•°æ®ä¹Ÿä¼šå˜åŒ–</span><br><span class="line">&lt;h2&gt;&#123;&#123;this.$store.getters.getName&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¡ˆä¾‹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;AAA&gt;&lt;/AAA&gt;</span><br><span class="line">        &lt;BBB&gt;&lt;/BBB&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        let store = new Vuex.Store(&#123;</span><br><span class="line">            state: &#123;</span><br><span class="line">                name: &#x27;é‚“ç´«æ£‹&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            mutations: &#123;</span><br><span class="line">                //æ¥æ”¶å‚æ•°å¯¹è±¡</span><br><span class="line">                changeName(state, payload) &#123;</span><br><span class="line">                    state.name = payload.name ? payload.name : &#x27;å¼ éŸ¶æ¶µ&#x27;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            /**</span><br><span class="line">            *   gettersç±»ä¼¼Vueå®ä¾‹ä¸­çš„è®¡ç®—å±æ€§ï¼Œå½“ç»‘å®šçš„å±æ€§å‘ç”Ÿå˜åŒ–åæ‰ä¼šé‡æ–°è®¡ç®—</span><br><span class="line">            *   æ¯ä¸ªæ–¹æ³•éƒ½é»˜è®¤æ¥æ”¶stateå‚æ•°</span><br><span class="line">            */</span><br><span class="line">            getters:&#123;</span><br><span class="line">                getName(state)&#123;</span><br><span class="line">                    let myName=&#x27;&#x27;;</span><br><span class="line">                    if(state.name === &#x27;å½­ä¿Šå±±&#x27;)&#123;</span><br><span class="line">                        myName = &#x27;ä½ æ˜¯æœ€å¸…çš„ï¼&#x27;</span><br><span class="line">                    &#125;</span><br><span class="line">                    return state.name + myName;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        //åˆ›å»ºä¸¤ä¸ªç»„ä»¶</span><br><span class="line">        const AAA = Vue.component(&#x27;aaa&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;!-- ä½¿ç”¨$store.stateä¸­çš„æ•°æ® --&gt;</span><br><span class="line">                    &lt;h1&gt;&#123;&#123;this.$store.state.name&#125;&#125;&lt;/h1&gt;</span><br><span class="line">                    &lt;!-- ä½¿ç”¨$store.gettersä¸­çš„å±æ€§ --&gt;</span><br><span class="line">                    &lt;h2&gt;&#123;&#123;this.$store.getters.getName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `</span><br><span class="line">        &#125;)</span><br><span class="line">        const BBB = Vue.component(&#x27;bbb&#x27;, &#123;</span><br><span class="line">            template: `</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å§“å&quot; v-model=&#x27;msg&#x27;&gt;</span><br><span class="line">                    &lt;input type=&quot;button&quot; value=&quot;ç¡®å®š&quot; @click=&#x27;change&#x27;&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            `,</span><br><span class="line">            data() &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    msg: &#x27;&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                change() &#123;</span><br><span class="line">                    //çº¯å¯¹è±¡é£æ ¼æäº¤ typeå€¼æ˜¯æ–¹æ³•å</span><br><span class="line">                    this.$store.commit(&#123;</span><br><span class="line">                        type: &#x27;changeName&#x27;,</span><br><span class="line">                        name: this.msg</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        let vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            store</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/3735156-ae75344b34e3a726.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/709/format/webp" alt="image"></p>
<h3 id="vuex-åˆ·æ–°é¡µé¢-store-æ•°æ®ä¸¢å¤±"><a href="#vuex-åˆ·æ–°é¡µé¢-store-æ•°æ®ä¸¢å¤±" class="headerlink" title="vuex åˆ·æ–°é¡µé¢ store æ•°æ®ä¸¢å¤±"></a>vuex åˆ·æ–°é¡µé¢ store æ•°æ®ä¸¢å¤±</h3><blockquote>
<p>å½“åˆ·æ–°é¡µé¢åï¼Œstore ä¸­çš„æ•°æ®éƒ½ä¼šä¸¢å¤±ï¼›å°† store çš„æ•°æ®å­˜å‚¨åœ¨ storage é‡Œï¼Œç”±äº vue å¤šä¸ºå•é¡µé¢åº”ç”¨ï¼Œä¸”æ¯æ¬¡é‡æ–°æ‰“å¼€é¡µé¢éœ€è¦ä¿æŒæ•°æ®ä¸ºç©º æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¸é€‰ç”¨ localStorageï¼Œç”¨ sessionStorage ä¼šè¯æœºåˆ¶;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">created() &#123;</span><br><span class="line">    //åœ¨é¡µé¢åŠ è½½æ—¶è¯»å–sessionStorageé‡Œçš„çŠ¶æ€ä¿¡æ¯</span><br><span class="line">    if (sessionStorage.getItem(&quot;store&quot;)) &#123;</span><br><span class="line">        this.$store.replaceState(Object.assign(&#123;&#125;, this.$store.state, JSON.parse(sessionStorage.getItem(&quot;store&quot;))))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //åœ¨é¡µé¢åˆ·æ–°æ—¶å°†vuexé‡Œçš„ä¿¡æ¯ä¿å­˜åˆ°sessionStorageé‡Œ</span><br><span class="line">    window.addEventListener(&quot;beforeunload&quot;, () =&gt; &#123;</span><br><span class="line">        sessionStorage.setItem(&quot;store&quot;, JSON.stringify(this.$store.state))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/Angular%E2%80%94%E2%80%94%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/Angular%E2%80%94%E2%80%94%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Angularâ€”â€”å‰ç«¯çŸ¥è¯†ç‚¹æ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:17:35 / ä¿®æ”¹æ—¶é—´ï¼š14:19:21" itemprop="dateCreated datePublished" datetime="2022-12-16T14:17:35+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯æ¡†æ¶æ€»ç»“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ä¸€ã€Angular-æ¦‚è¿°"><a href="#ä¸€ã€Angular-æ¦‚è¿°" class="headerlink" title="ä¸€ã€Angular æ¦‚è¿°"></a>ä¸€ã€Angular æ¦‚è¿°</h2><p>åŸºäºå‘½ä»¤è¡Œçš„å¼€å‘æ–¹å¼ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â‘ hot reload</span><br><span class="line">â‘¡ç¼–è¯‘å·¥ä½œ</span><br><span class="line">â‘¢é›†æˆäº†webpackæ‰“åŒ…å·¥å…·</span><br><span class="line">ã€‚ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="http://angular.cn/">http://angular.cn</a> ä¸­æ–‡</li>
<li><a target="_blank" rel="noopener" href="http://angular.io/">http://angular.io</a> æ­£å¼å®˜ç½‘</li>
<li><a target="_blank" rel="noopener" href="http://angular.cn/guide/styleguide">http://angular.cn/guide/styleguide</a> é£æ ¼æŒ‡å—</li>
</ul>
<h3 id="1ã€whatï¼Ÿ"><a href="#1ã€whatï¼Ÿ" class="headerlink" title="1ã€whatï¼Ÿ"></a>1ã€whatï¼Ÿ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">angularæ˜¯ä¸€ä¸ªGoogleæ¨å‡ºçš„jsæ¡†æ¶ï¼Œæ˜¯ä»¥æ¨¡å—ä¸ºåŸºæœ¬å•ä½ï¼Œæ¨¡å—åˆå¯ä»¥åŒ…å«ç»„ä»¶ã€æŒ‡ä»¤ã€è¿‡æ»¤å™¨ã€‚ã€‚</span><br><span class="line"></span><br><span class="line">1.1 ç‰ˆæœ¬é—®é¢˜</span><br><span class="line">    angular angular2.0ä»¥åæ‰€æœ‰çš„ç‰ˆæœ¬ç»Ÿç§°ä¸ºangular</span><br><span class="line">    (å½“å‰å­¦ä¹ ng4.0)</span><br><span class="line"></span><br><span class="line">    angular.js angular1.* ç»Ÿç§°ä¸ºangular.js</span><br><span class="line">    ï¼ˆhttp://www.runoob.com/angularjs/angularjs-tutorial.htmlï¼‰</span><br><span class="line"></span><br><span class="line">1.2 ç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ«</span><br><span class="line">    â‘ æ–°ç‰ˆæœ¬æ˜¯æœ‰ç»„ä»¶çš„æ¦‚å¿µçš„</span><br><span class="line">    â‘¡è€ç‰ˆæœ¬æ˜¯$scopeå’Œcontrollerä¸ºä¸»</span><br><span class="line">    â‘¢angularå¼•å…¥äº†rxjs</span><br><span class="line">    â‘£angularé‡‡ç”¨tsï¼ˆtypescriptæ˜¯es6çš„è¶…é›†ï¼Œæ˜¯ç”±å¾®è½¯å’Œè°·æ­Œï¼‰ tsæ˜¯ä¸€ç§å¼ºç±»å‹æ£€æŸ¥æœºåˆ¶çš„è¯­è¨€</span><br><span class="line">    â‘¤angularå¯è¯»æ€§ã€æé«˜äº†ä»£ç çš„å¤ç”¨ç‡ã€ç»´æŠ¤æˆæœ¬å˜ä½ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="2ã€where"><a href="#2ã€where" class="headerlink" title="2ã€where"></a>2ã€where</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥ä½¿ç”¨æ”¯æŒangularçš„Ionicæ¡†æ¶æ¥å®ç°ç§»åŠ¨ç«¯çš„å¼€å‘ï¼Œç›´æ¥ä½¿ç”¨angularæ¥å®ç°pcç«¯çš„å¼€å‘</span><br><span class="line"></span><br><span class="line">å®ç°æ“ä½œæ¯”è¾ƒé¢‘ç¹çš„SPA</span><br></pre></td></tr></table></figure>

<h3 id="3ã€why"><a href="#3ã€why" class="headerlink" title="3ã€why"></a>3ã€why</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â‘ éµå¾ªw3cæ‰€æ¨å‡ºçš„webComponentæ ‡å‡†ï¼ˆç»„ä»¶åŒ–ï¼‰</span><br><span class="line">â‘¡ä»£ç å…·æœ‰æ›´å¥½çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€</span><br><span class="line">â‘¢å¼•å…¥äº†æ›´å¤šçš„é«˜æ•ˆç‡çš„å·¥å…· ï¼Œæ¯”å¦‚rxjs\immutable.jsã€‚ã€‚ã€‚ï¼Œ è®©ä»£ç çš„ç¼–è¯‘ã€éƒ¨ç½²æ›´ç®€å•</span><br><span class="line">â‘£ts --ã€‹ å¥å£®</span><br></pre></td></tr></table></figure>

<h3 id="4ã€how"><a href="#4ã€how" class="headerlink" title="4ã€how"></a>4ã€how</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">angularçš„å¼€å‘æ•´ä½“æ¡†æ¶ï¼Œæ˜¯æœ‰8å¤§ç»„æˆéƒ¨åˆ†æ„æˆ</span><br><span class="line"></span><br><span class="line">æ­å»ºç¯å¢ƒçš„æ–¹å¼ï¼š</span><br><span class="line">æ–¹å¼1ï¼š</span><br><span class="line">    â‘ ä¸‹è½½quickstart-master.zipå‹ç¼©åŒ…</span><br><span class="line">    https://github.com/angular/quickstart download</span><br><span class="line">    æˆ–è€… ç›´æ¥æ‹·è´è€å¸ˆæä¾›çš„å‹ç¼©åŒ…</span><br><span class="line">    â‘¡è§£å‹ç¼© å‹ç¼©åŒ…ï¼Œè¿›å…¥å¯¹åº”çš„ç›®å½•ä¸­</span><br><span class="line">    æ‰§è¡Œnpm install å®‰è£…é¡¹ç›®æ‰€éœ€è¦ç”¨åˆ°çš„ä¾èµ–</span><br><span class="line">    â‘¢npm start å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line">æ–¹å¼2ï¼š</span><br><span class="line">    Angular CLIæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢å·¥å…·ï¼Œå®ƒå¯ä»¥åˆ›å»ºé¡¹ç›®ã€</span><br><span class="line">    æ·»åŠ æ–‡ä»¶ä»¥åŠæ‰§è¡Œä¸€å¤§å †å¼€å‘ä»»åŠ¡ï¼Œæ¯”å¦‚æµ‹è¯•ã€æ‰“åŒ…å’Œå‘å¸ƒã€‚</span><br><span class="line">    //å®‰è£…åŸºäºangularçš„å‘½ä»¤å·¥å…·</span><br><span class="line">    npm install -g @angular/cli</span><br><span class="line">    //åˆ›å»ºä¸€ä¸ªæœ‰ç€ngæ¨¡æ¿çš„é¡¹ç›®</span><br><span class="line">    ng new my-app</span><br><span class="line">    //è¿›å…¥å½“å‰ç›®å½•ä¸‹çš„my-app</span><br><span class="line">    cd my-app</span><br><span class="line">    //å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span><br><span class="line">    ng serve --open</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€Angular-æ¨¡æ¿é¡¹ç›®çš„å¯åŠ¨æµç¨‹"><a href="#äºŒã€Angular-æ¨¡æ¿é¡¹ç›®çš„å¯åŠ¨æµç¨‹" class="headerlink" title="äºŒã€Angular æ¨¡æ¿é¡¹ç›®çš„å¯åŠ¨æµç¨‹"></a>äºŒã€Angular æ¨¡æ¿é¡¹ç›®çš„å¯åŠ¨æµç¨‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">index.html</span><br><span class="line"></span><br><span class="line">main.js (main.ts)--&gt;å¯åŠ¨ä¸€ä¸ªæ¨¡å— AppModule</span><br><span class="line"></span><br><span class="line">app/app.module.ts ---&gt; å¯åŠ¨ä¸€ä¸ªç»„ä»¶ app/app.component.ts</span><br><span class="line"></span><br><span class="line">Hello Angular</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€å®Œæˆç»„ä»¶çš„åˆ›å»ºå’Œä½¿ç”¨"><a href="#ä¸‰ã€å®Œæˆç»„ä»¶çš„åˆ›å»ºå’Œä½¿ç”¨" class="headerlink" title="ä¸‰ã€å®Œæˆç»„ä»¶çš„åˆ›å»ºå’Œä½¿ç”¨"></a>ä¸‰ã€å®Œæˆç»„ä»¶çš„åˆ›å»ºå’Œä½¿ç”¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1ã€åˆ›å»ºç»„ä»¶å’Œä½¿ç”¨ç»„ä»¶</span><br><span class="line">    â‘ åˆ›å»ºæ–‡ä»¶ app/test/test.component.ts</span><br><span class="line">    â‘¡å°†ç±»è£…é¥°æˆä¸€ä¸ªç»„ä»¶ç±»</span><br><span class="line">        import &#123;Component&#125; from &#x27;@angular/core&#x27;</span><br><span class="line"></span><br><span class="line">        @Component(&#123;</span><br><span class="line">            selector:&#x27;test&#x27;,</span><br><span class="line">            template:`&lt;h1&gt;it is a test&lt;/h1&gt;`</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        export class Demo01Component&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    â‘¢ä½¿ç”¨ç»„ä»¶</span><br><span class="line">        â‘ åˆ°æ¨¡å—ä¸­å£°æ˜</span><br><span class="line">            app.module.tsä¸­ï¼Œ</span><br><span class="line">            import &#123;TestComponent&#125; from &#x27;./test/test.component&#x27;</span><br><span class="line"></span><br><span class="line">            @NgModule(&#123;</span><br><span class="line">                declarations:[TestComponent]</span><br><span class="line">            &#125;)</span><br><span class="line">        â‘¡&lt;test&gt;&lt;/test&gt;</span><br><span class="line"></span><br><span class="line">    ç»ƒä¹ ï¼šï¼ˆ16:50 - 17:00ï¼‰</span><br><span class="line">        demo02/demo02.component.ts</span><br><span class="line">        ç»„ä»¶ä¸­æ¸²æŸ“ä¸€ä¸ªæ— åºåˆ—è¡¨ï¼ˆ5ä¸ªåˆ—è¡¨ï¼‰</span><br><span class="line"></span><br><span class="line">        å°†ç»„ä»¶æ¸²æŸ“AppComponent</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€Angular-ä¸­å¸¸è§çš„æŒ‡ä»¤"><a href="#å››ã€Angular-ä¸­å¸¸è§çš„æŒ‡ä»¤" class="headerlink" title="å››ã€Angular ä¸­å¸¸è§çš„æŒ‡ä»¤"></a>å››ã€Angular ä¸­å¸¸è§çš„æŒ‡ä»¤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1ã€å¾ªç¯æŒ‡ä»¤</span><br><span class="line">Vue :  &lt;any v-for=&quot;tmp in list&quot;&gt;&lt;/any&gt;</span><br><span class="line"></span><br><span class="line">Angular:</span><br><span class="line">        è¯­æ³•ï¼š</span><br><span class="line">   &lt;any *ngFor=&quot;let tmp of list&quot;&gt;&lt;/any&gt;</span><br><span class="line">   &lt;any *ngFor=&quot;let tmp of list;let myIndex=index&quot;&gt;&lt;/any&gt;</span><br><span class="line"></span><br><span class="line">2ã€é€‰æ‹©æŒ‡ä»¤</span><br><span class="line">Vue: &lt;any v-if=&quot;è¡¨è¾¾å¼&quot;&gt;&lt;/any&gt;</span><br><span class="line">angular:</span><br><span class="line">        &lt;any *ngIf=&quot;è¡¨è¾¾å¼&quot;&gt;&lt;/any&gt;</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€å¸¸è§æŒ‡ä»¤"><a href="#äº”ã€å¸¸è§æŒ‡ä»¤" class="headerlink" title="äº”ã€å¸¸è§æŒ‡ä»¤"></a>äº”ã€å¸¸è§æŒ‡ä»¤</h2><p>æŒ‡ä»¤å’Œç»„ä»¶çš„å…³ç³»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå¸¦æœ‰æ¨¡æ¿çš„æŒ‡ä»¤ï¼ï¼ï¼</span><br></pre></td></tr></table></figure>

<h3 id="1ã€å¤šé‡åˆ†æ”¯åˆ¤æ–­"><a href="#1ã€å¤šé‡åˆ†æ”¯åˆ¤æ–­" class="headerlink" title="1ã€å¤šé‡åˆ†æ”¯åˆ¤æ–­"></a>1ã€å¤šé‡åˆ†æ”¯åˆ¤æ–­</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vue</span><br><span class="line">    v-if</span><br><span class="line">    v-else-if</span><br><span class="line">    v-else</span><br><span class="line"></span><br><span class="line">&lt;div [ngSwitch]=&quot;answer&quot;&gt;</span><br><span class="line">    &lt;p *ngSwitchCase=&quot;&#x27;a&#x27;&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p *ngSwitchDefault&gt;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2ã€å±æ€§ç»‘å®š"><a href="#2ã€å±æ€§ç»‘å®š" class="headerlink" title="2ã€å±æ€§ç»‘å®š"></a>2ã€å±æ€§ç»‘å®š</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Vue:</span><br><span class="line">    &lt;img v-bind:src=&quot;imgUrl&quot;/&gt;</span><br><span class="line">    &lt;img :src=&quot;imgUrl&quot;/&gt;</span><br><span class="line">    &lt;button :class=&quot;&#123;myHightlight:true&#125;&quot;&gt;&lt;/button&gt;</span><br><span class="line">    &lt;h1 :style=&quot;&#123;backgroundColor:myBG&#125;&quot;&gt;&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">Angular:</span><br><span class="line">    &lt;img [src]=&quot;imgUrl&quot;/&gt;</span><br><span class="line">    &lt;button [ngClass]=&quot;&#123;myHightlight:true&#125;&quot;&gt;&lt;/button&gt;</span><br><span class="line">    &lt;h1 [ngStyle]=&quot;&#123;backgroundColor:myBG&#125;&quot;&gt;</span><br><span class="line">    &lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3ã€äº‹ä»¶ç»‘å®š"><a href="#3ã€äº‹ä»¶ç»‘å®š" class="headerlink" title="3ã€äº‹ä»¶ç»‘å®š"></a>3ã€äº‹ä»¶ç»‘å®š</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Vue</span><br><span class="line">    &lt;button v-on:click=&quot;handleClick&quot;&gt;&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;handleClick&quot;&gt;&lt;/button&gt;</span><br><span class="line">Angular</span><br><span class="line">    è¯­æ³•ï¼š</span><br><span class="line">    &lt;any (eventName)=&quot;eventHandler()&quot;&gt;&lt;/any&gt;</span><br><span class="line">    ä¸¾ä¾‹ï¼š</span><br><span class="line">    &lt;button (click)=&quot;handleClick()&quot;&gt;&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4ã€åŒå‘æ•°æ®ç»‘å®š"><a href="#4ã€åŒå‘æ•°æ®ç»‘å®š" class="headerlink" title="4ã€åŒå‘æ•°æ®ç»‘å®š"></a>4ã€åŒå‘æ•°æ®ç»‘å®š</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Vue:</span><br><span class="line">    &lt;input v-model=&quot;addr&quot;/&gt;</span><br><span class="line">Angular:</span><br><span class="line">    &lt;input [(ngModel)]=&quot;addr&quot;/&gt;</span><br><span class="line"></span><br><span class="line">ä¾èµ–æ³¨å…¥ï¼š</span><br><span class="line">    å°†ä¾èµ–çš„ä¸œè¥¿æ³¨å…¥åˆ°æŒ‡å®šçš„åœ°æ–¹ï¼Œè®©ä¾èµ–å¯è¢«ä½¿ç”¨</span><br><span class="line">    ä¸¾ä¾‹ï¼šAppModuleä¾èµ–äºFormsModule,</span><br><span class="line">    åªéœ€è¦åœ¨AppModuleçš„importsæ•°ç»„å†™ä¸ŠFormsModuleåç§°</span><br><span class="line">    å°±å¯ä»¥ä½¿ç”¨FormsModuleæ‰€æä¾›çš„ä¸œè¥¿ã€‚</span><br><span class="line">    å¥½å¤„ï¼šè§£è€¦ï¼Œé™ä½äº†è€¦åˆåº¦</span><br><span class="line"></span><br><span class="line">Angularä¸­å¦‚æœæƒ³è¦ç›‘å¬åŒå‘æ•°æ®ç»‘å®šæ•°æ®çš„å˜åŒ–ï¼Œæä¾›ä¸€ä¸ªäº‹ä»¶ ngModelChange</span><br><span class="line"></span><br><span class="line">æ³¨æ„äº‹é¡¹ï¼š</span><br><span class="line">â‘ Angularä¸­å¦‚æœè¦æƒ³ä½¿ç”¨åŒå‘æ•°æ®ç»‘å®šï¼Œå°±å¿…é¡»æŒ‡å®šæ¨¡å—ä¾èµ–äºFormsModule</span><br><span class="line">â‘¡ä½¿ç”¨ngModelChangeäº‹ä»¶æ—¶ï¼Œé€šè¿‡$eventå»ä¼ é€’ç”¨æˆ·å½“å‰æ‰€è¾“å…¥çš„ä¿¡æ¯</span><br><span class="line">    ï¼ˆngModelChangeï¼‰=&quot;handleChange($event)&quot;</span><br></pre></td></tr></table></figure>

<p><strong>å†…ç½®çš„æŒ‡ä»¤ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">*ngFor</span><br><span class="line">*ngIf</span><br><span class="line">*ngSwitchCase</span><br><span class="line">*ngSwitchDefault</span><br><span class="line">ngSwitch</span><br><span class="line">[]</span><br><span class="line">()</span><br><span class="line">[(ngModel)]</span><br><span class="line">&#123;&#123;&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5ã€è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#5ã€è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="5ã€è‡ªå®šä¹‰æŒ‡ä»¤"></a>5ã€è‡ªå®šä¹‰æŒ‡ä»¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Vueä¸­è‡ªå®šä¹‰æŒ‡ä»¤ï¼š</span><br><span class="line">    Vue.directive(&#x27;change&#x27;,&#123;</span><br><span class="line">        bind:function(el,binding)&#123;&#125;,</span><br><span class="line">        update:function()&#123;&#125;,</span><br><span class="line">        unbind:function()&#123;&#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    v-change</span><br><span class="line">Angularä¸­æŒ‡ä»¤åˆ›å»ºå’Œä½¿ç”¨</span><br><span class="line"></span><br><span class="line">5.1 åˆ›å»º</span><br><span class="line">    import &#123;Directive&#125;    from &#x27;@angular/core&#x27;</span><br><span class="line"></span><br><span class="line">    @Directive(&#123;</span><br><span class="line">        selector:&#x27;[test]&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    export class TestDirective&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">5.2 ä½¿ç”¨</span><br><span class="line">    â‘ åˆ°æ¨¡å—ä¸­å£°æ˜</span><br><span class="line">        app.module.ts</span><br><span class="line">            import &#123;TestDirective&#125; from &#x27;***&#x27;</span><br><span class="line">            @NgModule(&#123;</span><br><span class="line">                declarations:[TestDirective]</span><br><span class="line">            &#125;)</span><br><span class="line">    â‘¡ä½œä¸ºæ ‡ç­¾çš„å±æ€§</span><br><span class="line">        &lt;h1 test&gt;&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">5.3 å¾—åˆ°è°ƒç”¨æŒ‡ä»¤çš„å…ƒç´ </span><br><span class="line">    â‘ import &#123;ElementRef&#125; from &#x27;@angular/core&#x27;</span><br><span class="line">    â‘¡å®ä¾‹åŒ–</span><br><span class="line">        constructor(private el:ElementRef)&#123;&#125;</span><br><span class="line">    â‘¢è¯»å–å…ƒç´ </span><br><span class="line">        this.el.nativeElement</span><br><span class="line"></span><br><span class="line">5.4 æŒ‡ä»¤è°ƒç”¨æ—¶ä¼ å‚ï¼Ÿï¼Ÿ</span><br><span class="line">    â‘ &lt;h1 test=&quot;123&quot;&gt;&lt;/h1&gt;</span><br><span class="line">    â‘¡åœ¨æŒ‡ä»¤ç±»çš„å†…éƒ¨</span><br><span class="line">        import &#123;Input&#125; from &#x27;@angular/core&#x27;</span><br><span class="line"></span><br><span class="line">        @Input() test=&quot;&quot;;</span><br><span class="line"></span><br><span class="line">        this.test</span><br><span class="line"></span><br><span class="line">è¡¥å……ï¼šä½¿ç”¨ç”Ÿå‘½å‘¨æœŸçš„å¤„ç†å‡½æ•°ï¼Ÿ</span><br><span class="line">    â‘ å¼•å…¥</span><br><span class="line">        import &#123;OnDestroy&#125; from &#x27;@angular/core&#x27;</span><br><span class="line">    â‘¡åœ¨å®šä¹‰ç±»çš„æ—¶å€™ å®ç°æ¥å£ç±»</span><br><span class="line">        export class Test implements OnDestroy&#123;</span><br><span class="line">            ngOnDestroy()&#123;&#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€ç»„ä»¶ä¹‹é—´é€šä¿¡"><a href="#å…­ã€ç»„ä»¶ä¹‹é—´é€šä¿¡" class="headerlink" title="å…­ã€ç»„ä»¶ä¹‹é—´é€šä¿¡"></a>å…­ã€ç»„ä»¶ä¹‹é—´é€šä¿¡</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Vueä¸­ç»„ä»¶é€šä¿¡çš„æ–¹å¼ï¼Ÿ</span><br><span class="line">    â‘ props down</span><br><span class="line">        æ­¥éª¤1ï¼šå‘é€</span><br><span class="line">            &lt;son myName=&quot;zhangsan&quot;&gt;&lt;/son&gt;</span><br><span class="line">        æ­¥éª¤2ï¼šæ¥æ”¶</span><br><span class="line">            Vue.component(&#x27;son&#x27;,&#123;</span><br><span class="line">                props:[&#x27;myName&#x27;]</span><br><span class="line">            &#125;)</span><br><span class="line">    â‘¡events upï¼ˆå­-ã€‹çˆ¶ï¼‰</span><br><span class="line">        æ­¥éª¤1: äº‹ä»¶çš„ç»‘å®š</span><br><span class="line">            methods:&#123;</span><br><span class="line">                rcvMsg:function(msg)&#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            &lt;son @customEvent=&quot;rcvMsg&quot;&gt;&lt;/son&gt;</span><br><span class="line">        æ­¥éª¤2ï¼šäº‹ä»¶çš„è§¦å‘ï¼ˆå„¿å­ï¼‰</span><br><span class="line">            this.$emit(&#x27;customEvent&#x27;,123);</span><br><span class="line">    â‘¢$refs $parent</span><br><span class="line">    â‘£bus</span><br><span class="line">Angularä¸­ç»„ä»¶é€šä¿¡ï¼Ÿ</span><br><span class="line">    1ã€props down</span><br><span class="line">        æ­¥éª¤1ï¼šå‘é€</span><br><span class="line">        &lt;son uName=&quot;zhangsan&quot;&gt;&lt;/son&gt;</span><br><span class="line">        æ­¥éª¤2ï¼šæ¥æ”¶</span><br><span class="line">            import &#123;Input&#125; from &#x27;@angular/core&#x27;</span><br><span class="line">            @Input() uName=&quot;&quot;;</span><br><span class="line">            this.uName</span><br><span class="line">    2ã€events up</span><br><span class="line">        æ­¥éª¤1ï¼šäº‹ä»¶å’Œå¤„ç†å‡½æ•°çš„ç»‘å®š</span><br><span class="line">            å®šä¹‰ä¸€ä¸ªæ–¹æ³•</span><br><span class="line">                rcvMsg(msg)&#123;&#125;</span><br><span class="line">            &lt;son (toFatherEvent)=&quot;rcvMsg($event)&quot;&gt;</span><br><span class="line">            &lt;/son&gt;</span><br><span class="line">        æ­¥éª¤2ï¼šè§¦å‘äº‹ä»¶</span><br><span class="line">            å­ç»„ä»¶è§¦å‘</span><br><span class="line">                import &#123;Output,EventEmitter&#125; from &#x27;@angular/core&#x27;</span><br><span class="line"></span><br><span class="line">                @Output() toFatherEvent = new EventEmitter();</span><br><span class="line"></span><br><span class="line">                this.toFatherEvent.emit(&#x27;123&#x27;);</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ˜¯è¿™æ ·å†™ Angular åº”ç”¨çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç”¨ Angular æ‰©å±•è¯­æ³•ç¼–å†™ HTML æ¨¡æ¿ï¼Œ</span><br><span class="line">ç”¨ç»„ä»¶ç±»ç®¡ç†è¿™äº›æ¨¡æ¿ï¼Œ</span><br><span class="line">ç”¨æœåŠ¡æ·»åŠ åº”ç”¨é€»è¾‘ï¼Œ</span><br><span class="line">ç”¨æ¨¡å—æ‰“åŒ…å‘å¸ƒç»„ä»¶ä¸æœåŠ¡ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€ç®¡é“ï¼ˆpipeï¼‰"><a href="#ä¸ƒã€ç®¡é“ï¼ˆpipeï¼‰" class="headerlink" title="ä¸ƒã€ç®¡é“ï¼ˆpipeï¼‰"></a>ä¸ƒã€ç®¡é“ï¼ˆpipeï¼‰</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">ç®¡é“æ˜¯ç”¨æ¥å¯¹æ•°æ®è¿›è¡Œç­›é€‰ã€è¿‡æ»¤ã€æ ¼å¼åŒ–</span><br><span class="line"></span><br><span class="line">Vueä¸­è¿‡æ»¤å™¨ï¼š</span><br><span class="line">    &lt;any&gt;&#123;&#123;expression | filter(1,2) | filter2 &#125;&#125;&lt;/any&gt;</span><br><span class="line"></span><br><span class="line">    Vue.filter(&#x27;changeSex&#x27;,function(arg,arg1,arg2)&#123;</span><br><span class="line">        return å¤„ç†åçš„ç»“æœ</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">angularä¸­ç®¡é“ï¼š</span><br><span class="line"></span><br><span class="line">è¿‡æ»¤å™¨çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæœ‰å‚æ•°æœ‰è¿”å›å€¼çš„æ–¹æ³•</span><br><span class="line"></span><br><span class="line">    è¯­æ³•:</span><br><span class="line">            &lt;any&gt;</span><br><span class="line">            &#123;&#123;expression | pipe1:&#x27;12&#x27;:34 | pipe2&#125;&#125;</span><br><span class="line">            &lt;/any&gt;</span><br><span class="line"></span><br><span class="line">    1ã€å†…ç½®ç®¡é“</span><br><span class="line"></span><br><span class="line">        å¸¸è§å†…ç½®ç®¡é“ï¼š</span><br><span class="line">            uppercase/lowercase/date/number/slice</span><br><span class="line"></span><br><span class="line">    2ã€è‡ªå®šä¹‰ç®¡é“</span><br><span class="line">        åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç®¡é“ï¼š</span><br><span class="line">            import &#123;Pipe,PipeTransform&#125; from &#x27;@angular/core&#x27;</span><br><span class="line"></span><br><span class="line">            @Pipe(&#123;</span><br><span class="line">                name:&#x27;testNG&#x27;</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            export class TestPipe implements PipeTransform &#123;</span><br><span class="line">                    //valueæ˜¯ç«–æ å‰è¡¨è¾¾å¼æ‰§è¡Œçš„ç»“æœ</span><br><span class="line">                    //argsé€šè¿‡è°ƒç”¨ç®¡é“æ—¶ï¼Œå†’å·åè¾¹è·Ÿçš„å‚æ•°</span><br><span class="line">                 transfrom(value:any,...args:[]):any&#123;</span><br><span class="line">                    return â€˜å¤„ç†åçš„ç»“æœâ€™</span><br><span class="line">                 &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        è°ƒç”¨ï¼š</span><br><span class="line">            â‘ å£°æ˜</span><br><span class="line">                åˆ°æ¨¡å—ä¸­å…ˆå¼•å…¥å†å£°æ˜</span><br><span class="line">            â‘¡è°ƒç”¨</span><br><span class="line">                å’Œå†…ç½®ç®¡é“çš„ç”¨æ³•æ˜¯ä¸€æ ·çš„,åŒæ ·æ”¯æŒä¼ å‚ã€å¤šé‡è¿‡æ»¤</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å…«ã€æœåŠ¡-ä¾èµ–æ³¨å…¥"><a href="#å…«ã€æœåŠ¡-ä¾èµ–æ³¨å…¥" class="headerlink" title="å…«ã€æœåŠ¡ (ä¾èµ–æ³¨å…¥)"></a>å…«ã€æœåŠ¡ (ä¾èµ–æ³¨å…¥)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">æœåŠ¡ service:æœåŠ¡çš„æœ¬è´¨æ˜¯ä¸€ä¸ªç±»ï¼Œåœ¨æœåŠ¡ç±»ä¸­å°è£…çš„æ˜¯ç»å¸¸ç”¨åˆ°çš„æ•°æ®å’Œæ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">å¸¸è§çš„æœåŠ¡ï¼šæ—¥å¿—ç±»æœåŠ¡ã€å¿ƒè·³æœåŠ¡ã€ç½‘ç»œè¯·æ±‚æœåŠ¡ã€‚ã€‚ã€‚</span><br><span class="line"></span><br><span class="line">1ã€æœåŠ¡çš„åˆ›å»ºå’Œä½¿ç”¨</span><br><span class="line">    åˆ›å»ºï¼š</span><br><span class="line">        import &#123;Injectable&#125; from &#x27;@angular/core&#x27;</span><br><span class="line"></span><br><span class="line">        @Injectable()</span><br><span class="line">        export class UserService &#123;</span><br><span class="line">            constructor()&#123;&#125;</span><br><span class="line"></span><br><span class="line">            checkUserLogin()&#123;return true&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    ä½¿ç”¨ï¼š</span><br><span class="line">        â‘ éœ€è¦ç»™æœåŠ¡æŒ‡å®šprovider</span><br><span class="line">            åœ¨ç»„ä»¶ä¸­æˆ–è€…æ¨¡å—ä¸­æŒ‡å®šproviders:[UserService]</span><br><span class="line">        â‘¡è°ƒç”¨</span><br><span class="line">            import &#123;UserService&#125; from &#x27;./***&#x27;</span><br><span class="line"></span><br><span class="line">            constructor(private myService:UserService)&#123;&#125;</span><br><span class="line"></span><br><span class="line">            this.myService.checkUserLogin()</span><br><span class="line"></span><br><span class="line">2ã€å¦‚ä½•å°è£…ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„æœåŠ¡</span><br><span class="line"></span><br><span class="line">    â‘ åˆ›å»ºæœåŠ¡çš„æ–‡ä»¶</span><br><span class="line">    â‘¡åœ¨æœåŠ¡ä¸­å°è£…ä¸€ä¸ªæ–¹æ³•</span><br><span class="line">        sendRequest(myUrl:string)&#123;</span><br><span class="line">            return  this.http.get(myUrl).map((response)=&gt;</span><br><span class="line">                response.json()</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    â‘¢è°ƒç”¨ä¹‹å‰ é¦–å…ˆæŒ‡å®šproviders</span><br><span class="line">    â‘£åˆ°ç»„ä»¶ä¸­ï¼Œå…ˆå¼•å…¥ï¼Œå†å®ä¾‹åŒ–ï¼Œå†è°ƒç”¨</span><br><span class="line">        this.myHS.sendRequest().subscribe((result)=&gt;&#123;</span><br><span class="line">            //resultå°±æ˜¯æœåŠ¡å™¨ç«¯è¿”å›çš„ç»“æœï¼</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    ä¸æœåŠ¡å™¨ç«¯é€šä¿¡å¦‚æœæ¶‰åŠçš„sessionï¼Œangularéœ€è¦è¿™ä¹ˆå¤„ç†ï¼š</span><br><span class="line">        å®¢æˆ·ç«¯</span><br><span class="line">            â‘ å‘èµ·è¯·æ±‚ withCredentials:true</span><br><span class="line">                this.http.get(</span><br><span class="line">        myUrl,</span><br><span class="line">        &#123;withCredentials:true&#125;</span><br><span class="line">        )</span><br><span class="line">        æœåŠ¡å™¨ç«¯ï¼š</span><br><span class="line">            â‘ è·¨åŸŸheader(&#x27;Access-Control-Allow-Origin:http://localhost:3000&#x27;);</span><br><span class="line">            â‘¡æœåŠ¡å™¨å…è®¸æ¥æ”¶å‡­è¯</span><br><span class="line">            header(&#x27;Access-Control-Allow-Credentials:true&#x27;);</span><br><span class="line"></span><br><span class="line">æœåŠ¡åˆ›å»ºå’Œä½¿ç”¨ï¼š</span><br><span class="line">    1ã€åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ test.service.ts</span><br><span class="line">    2ã€åœ¨æ–‡ä»¶ä¸­ç¼–å†™ä»£ç ï¼Œè£…é¥°ä¸€ä¸ªæœåŠ¡</span><br><span class="line">        @Injectable()</span><br><span class="line">        export class TestService&#123;</span><br><span class="line">            showAlert(msg)&#123;</span><br><span class="line">                alert(msg);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    3ã€    ç»™æ¨¡å—æˆ–è€…ç»„ä»¶,åœ¨providerså±æ€§å¯¹åº”çš„æ•°ç»„ä¸­ [TestService]</span><br><span class="line"></span><br><span class="line">    4ã€ç»„ä»¶ä¸­è¦æƒ³ä½¿ç”¨æœåŠ¡ä¸­çš„æ–¹æ³•</span><br><span class="line">        import &#123;TestService&#125; from &#x27;***&#x27;</span><br><span class="line"></span><br><span class="line">        constructor(private myService:TestService)&#123;&#125;</span><br><span class="line"></span><br><span class="line">        this.myService.showAlert()</span><br></pre></td></tr></table></figure>

<p><strong>Angular ä¸­å¼€å‘æ¨¡å¼ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘ä»¬æ˜¯è¿™æ ·å†™ Angular åº”ç”¨çš„ï¼š</span><br><span class="line">ç”¨ Angular æ‰©å±•è¯­æ³•ç¼–å†™ HTML æ¨¡æ¿ï¼Œ</span><br><span class="line">ç”¨ç»„ä»¶ç±»ç®¡ç†è¿™äº›æ¨¡æ¿ï¼Œ</span><br><span class="line">ç”¨æœåŠ¡æ·»åŠ åº”ç”¨é€»è¾‘ï¼Œ</span><br><span class="line">ç”¨æ¨¡å—æ‰“åŒ…å‘å¸ƒç»„ä»¶ä¸æœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡å¼•å¯¼æ ¹æ¨¡å—æ¥å¯åŠ¨è¯¥åº”ç”¨ã€‚</span><br><span class="line">Angular åœ¨æµè§ˆå™¨ä¸­æ¥ç®¡ã€å±•ç°åº”ç”¨çš„å†…å®¹ï¼Œå¹¶æ ¹æ®æˆ‘ä»¬æä¾›çš„æ“ä½œæŒ‡ä»¤å“åº”ç”¨æˆ·çš„äº¤äº’ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>åœ¨ Angular å¼€å‘æ—¶ï¼Œå…«å¤§ç»„æˆéƒ¨åˆ†ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1ã€æ¨¡å—</span><br><span class="line">2ã€ç»„ä»¶</span><br><span class="line">3ã€æ¨¡æ¿ è‡ªå¸¦çš„htmlæ ‡ç­¾+æŒ‡ä»¤ã€ç»‘å®šç›¸å…³çš„ngçš„è¯­æ³•</span><br><span class="line">4ã€å…ƒæ•°æ® å‘Šè¯‰ Angular å¦‚ä½•å¤„ç†ä¸€ä¸ªç±»ã€‚</span><br><span class="line">5ã€æ•°æ®ç»‘å®š</span><br><span class="line">    &#123;&#123;&#125;&#125; () [] [(ngModel)]</span><br><span class="line">6ã€æŒ‡ä»¤</span><br><span class="line">        ä¸‰å¤§ç±»ï¼šç»„ä»¶ã€ç»“æ„å‹ã€å±æ€§å‹</span><br><span class="line">7ã€æœåŠ¡</span><br><span class="line">    å°è£…ä¸€äº›æ•°æ®å’Œæ–¹æ³•</span><br><span class="line">8ã€ä¾èµ–æ³¨å…¥</span><br><span class="line">    å°±æ˜¯å°†ä¾èµ–çš„æœåŠ¡ã€æ¨¡å—æ³¨å…¥åˆ°æŒ‡å®šç»„ä»¶ã€æ¨¡å—ä¸­ä½¿ç”¨ï¼Œæä¾›äº†ä¸€ç§æ–°çš„å®ä¾‹åŒ–çš„æ–¹å¼ï¼ˆè§£è€¦ï¼‰</span><br></pre></td></tr></table></figure>

<h2 id="ä¹ã€è·¯ç”±æ¨¡å—"><a href="#ä¹ã€è·¯ç”±æ¨¡å—" class="headerlink" title="ä¹ã€è·¯ç”±æ¨¡å—"></a>ä¹ã€è·¯ç”±æ¨¡å—</h2><p>è·¯ç”±æ¨¡å—ï¼šå»ºç«‹èµ· url å’Œé¡µé¢ä¹‹é—´çš„æ˜ å°„å…³ç³»</p>
<h3 id="1ã€å®ç°-SPA-çš„åŸºæœ¬æ­¥éª¤"><a href="#1ã€å®ç°-SPA-çš„åŸºæœ¬æ­¥éª¤" class="headerlink" title="1ã€å®ç° SPA çš„åŸºæœ¬æ­¥éª¤"></a>1ã€å®ç° SPA çš„åŸºæœ¬æ­¥éª¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">Vueï¼š</span><br><span class="line">å®ç°ä¸€ä¸ªSPAåŸºæœ¬æ€è·¯ï¼š</span><br><span class="line">â‘ æŒ‡å®šä¸€ä¸ªå®¹å™¨</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">â‘¡åˆ›å»ºä»£ç ç‰‡æ®µ</span><br><span class="line">    åˆ›å»ºç»„ä»¶</span><br><span class="line">    var Login = Vue.component(&#x27;login-component&#x27;,&#123;</span><br><span class="line">        template:`&lt;h1&gt;ç™»å½•é¡µé¢&lt;/h1&gt;`</span><br><span class="line">    &#125;)</span><br><span class="line">â‘¢é…ç½®è·¯ç”±è¯å…¸</span><br><span class="line">    new Vue(&#123;</span><br><span class="line">        router:new VueRouter(&#123;</span><br><span class="line">            routes:[</span><br><span class="line">                &#123;path:&#x27;/myLogin&#x27;,component:Login&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">â‘£æµ‹è¯•</span><br><span class="line">    æµ‹è¯•è·¯ç”±è¯å…¸ä¸­ è·¯ç”±åœ°å€èƒ½å¦æŒ‰ç…§éœ€æ±‚ æ­£ç¡®åŠ è½½æ‰€éœ€è¦ç”¨åˆ°çš„é¡µé¢</span><br><span class="line"></span><br><span class="line">Angularï¼š</span><br><span class="line">â‘ æŒ‡å®šå®¹å™¨</span><br><span class="line">    &lt;router-outlet&gt;&lt;/router-outlet&gt;</span><br><span class="line">â‘¡åˆ›å»ºç»„ä»¶ ï¼ˆå£°æ˜ï¼‰</span><br><span class="line">    @Component(&#123;&#125;) export class **</span><br><span class="line">â‘¢é…ç½®è·¯ç”±è¯å…¸</span><br><span class="line">    //a-module-routing</span><br><span class="line">    import &#123;Routes,RouterModule&#125; from &#x27;@angular/router&#x27;</span><br><span class="line">    import &#123;LoginComponent&#125; from &#x27;./demo15_spa/login.component&#x27;</span><br><span class="line"></span><br><span class="line">    const routes:Routes = [</span><br><span class="line">        &#123;path:&#x27;&#x27;,component:LoginComponent&#125;</span><br><span class="line">        .....</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    @NgModule(&#123;</span><br><span class="line">        import:[RouterModule.forRoot(routes)],</span><br><span class="line">        exports:[RouterModule]</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    export class AppRoutingModule&#123;&#125;</span><br><span class="line"></span><br><span class="line">    æ‰¾åˆ°æ ¹æ¨¡å—ï¼š</span><br><span class="line">        import &#123;AppRoutingModule&#125; from &#x27;./app.router&#x27;</span><br><span class="line"></span><br><span class="line">        @NgModule(&#123;</span><br><span class="line">            imports:[AppRoutingModule]</span><br><span class="line">        &#125;)</span><br><span class="line">â‘£æµ‹è¯•</span><br></pre></td></tr></table></figure>

<h3 id="2ã€åœ¨-Angular-å®ç°ç»„ä»¶é—´çš„å¯¼èˆªçš„æ–¹å¼"><a href="#2ã€åœ¨-Angular-å®ç°ç»„ä»¶é—´çš„å¯¼èˆªçš„æ–¹å¼" class="headerlink" title="2ã€åœ¨ Angular å®ç°ç»„ä»¶é—´çš„å¯¼èˆªçš„æ–¹å¼"></a>2ã€åœ¨ Angular å®ç°ç»„ä»¶é—´çš„å¯¼èˆªçš„æ–¹å¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Vueå†™æ³•ï¼š</span><br><span class="line">        â‘ å¯ä»¥ç›´æ¥ä¿®æ”¹åœ°å€æ ï¼ˆå†…éƒ¨æµ‹è¯•ï¼‰</span><br><span class="line">        â‘¡å¯ä»¥é€šè¿‡js</span><br><span class="line">         this.$router.push(&#x27;ç›®çš„åœ°çš„è·¯ç”±åœ°å€&#x27;)</span><br><span class="line">        â‘¢routerLink</span><br><span class="line">         &lt;router-link to=&quot;ç›®çš„åœ°çš„è·¯ç”±åœ°å€&quot;&gt;&lt;/router-link&gt;</span><br><span class="line">Angularï¼š</span><br><span class="line">â‘ ç›´æ¥ä¿®æ”¹åœ°å€æ </span><br><span class="line">â‘¡js</span><br><span class="line">    import &#123;Router&#125; from &#x27;@angular/router&#x27;</span><br><span class="line">    constructor(private myRouter:Router)&#123;&#125;</span><br><span class="line">    this.myRouter.navigateByUrl(&#x27;url&#x27;);</span><br><span class="line">â‘¢ &lt;a routerLink=&quot;åœ°å€&quot;&gt;&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">è¡¥å……ï¼šå®ç°å‰è¿›å’Œåé€€</span><br><span class="line">    import &#123;Location&#125; from &#x27;@angular/common&#x27;</span><br><span class="line"></span><br><span class="line">    constructor(private myLocation:Location)&#123;&#125;</span><br><span class="line"></span><br><span class="line">    this.myLocation.back();                this.myLocation.forward();</span><br></pre></td></tr></table></figure>

<h3 id="3ã€å‚æ•°çš„ä¼ é€’"><a href="#3ã€å‚æ•°çš„ä¼ é€’" class="headerlink" title="3ã€å‚æ•°çš„ä¼ é€’"></a>3ã€å‚æ•°çš„ä¼ é€’</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Angular:</span><br><span class="line">    3.1 å‘é€</span><br><span class="line">        this.myRouter.navigateByUrl(&#x27;myOC/123&#x27;);</span><br><span class="line"></span><br><span class="line">    3.2 æ¥æ”¶</span><br><span class="line">        â‘  é…ç½®æ¥æ”¶æ–¹çš„è·¯ç”±åœ°å€</span><br><span class="line">            &#123;path:&#x27;myOC&#x27;&#125; ==&gt; &#123;path:&#x27;myOC/:price&#x27;&#125;</span><br><span class="line">        â‘¡ æ¥æ”¶å‚æ•°</span><br><span class="line">                import &#123;ActivatedRoute&#125; from &#x27;@angular/router&#x27;</span><br><span class="line"></span><br><span class="line">                constructor(private myAR:ActivatedRoute)&#123;&#125;</span><br><span class="line"></span><br><span class="line">                this.myAR.params.subscribe((result)=&gt;&#123;</span><br><span class="line">                    //result.price</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">    åœ¨Angularä¸­ å®ç°æ•°æ®ä¼ è¾“çš„æ–¹å¼ï¼š</span><br><span class="line">        â‘ ç»„ä»¶é—´é€šä¿¡</span><br><span class="line">        â‘¡è·³è½¬æ—¶æŒ‡å®šå‚æ•°</span><br><span class="line">        â‘¢ä¸è¿œç¨‹æœåŠ¡å™¨ç«¯é€šä¿¡</span><br></pre></td></tr></table></figure>

<h3 id="4ã€è·¯ç”±åµŒå¥—"><a href="#4ã€è·¯ç”±åµŒå¥—" class="headerlink" title="4ã€è·¯ç”±åµŒå¥—"></a>4ã€è·¯ç”±åµŒå¥—</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥åœ¨SPAä¸­æŸä¸ªç»„ä»¶ä¸­ï¼Œæ ¹æ®urlåµŒå¥—å…¶å®ƒçš„ç»„ä»¶</span><br><span class="line">    Vueä¸­å®ç°æ–¹å¼ï¼š</span><br><span class="line">        â‘ åœ¨å‡†å¤‡åµŒå¥—å…¶å®ƒç»„ä»¶çš„ï¼ŒæŒ‡å®šä¸€ä¸ªå®¹å™¨ &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        â‘¡é…ç½®è·¯ç”±è¯å…¸</span><br><span class="line">            &#123;</span><br><span class="line">                path:&#x27;&#x27;,</span><br><span class="line">                component:MailComponent,</span><br><span class="line">                children:[</span><br><span class="line">                    &#123;path:&#x27;inbox&#x27;,component:***&#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">    Angularä¸­å®ç°æ–¹å¼ï¼š</span><br><span class="line">        â‘ æŒ‡å®šå®¹å™¨</span><br><span class="line">            router-outlet</span><br><span class="line">        â‘¡é…ç½®å­è·¯ç”±</span><br><span class="line">            &#123;</span><br><span class="line">                path:&#x27;mail&#x27;,</span><br><span class="line">                children:[</span><br><span class="line">                    ...</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        æ€»ç»“ï¼šåœ¨Angularä¸­å®ç°ä¸€ä¸ªæ”¯æŒè·¯ç”±åµŒå¥—çš„SPAï¼Œ</span><br><span class="line">        å¯¼èˆªåˆ°å¯¹åº”çš„å­è·¯ç”±å¯¹åº”çš„é¡µé¢æ—¶ï¼Œå¿…é¡»åœ¨æºå¸¦çˆ¶ç»„ä»¶çš„åœ°å€</span><br><span class="line">            localhost:3000/mail/outbox</span><br><span class="line">            localhost:3000/mail/inbox</span><br><span class="line"></span><br><span class="line">        demo18_embed</span><br><span class="line">            mylogin.component.ts  MyLoginComponent</span><br><span class="line">            mail.component.ts MailComponent</span><br><span class="line">            inbox.component.ts InboxComponent</span><br><span class="line">            outbox.component.ts OutboxComponent</span><br><span class="line">        â‘ å®Œæˆç»„ä»¶çš„åˆ›å»ºå’Œå£°æ˜</span><br><span class="line"></span><br><span class="line">        â‘¡è·¯ç”±æ¨¡å—</span><br></pre></td></tr></table></figure>

<h3 id="5ã€è·¯ç”±å®ˆå«"><a href="#5ã€è·¯ç”±å®ˆå«" class="headerlink" title="5ã€è·¯ç”±å®ˆå«"></a>5ã€è·¯ç”±å®ˆå«</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">è·¯ç”±å®ˆå« RouteGuardï¼Œæ§åˆ¶æ˜¯å¦èƒ½å¤Ÿè®¿é—®æŸä¸€ä¸ªurlä¸­æ‰€å¯¹åº”çš„ç»„ä»¶ï¼</span><br><span class="line">    é‰´æƒçš„ç»„ä»¶</span><br><span class="line">    ç”¨æˆ·ç™»å½•çš„é¡µé¢</span><br><span class="line">    ã€‚ã€‚ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚ä½•ä½¿ç”¨è·¯ç”±å®ˆå«ï¼š</span><br><span class="line">    â‘ åˆ›å»ºä¸€ä¸ªæœåŠ¡</span><br><span class="line">        import &#123;Injectable&#125; from &#x27;@angular/core&#x27;</span><br><span class="line">        import &#123;CanActivate&#125; from &#x27;@angular/router&#x27;</span><br><span class="line"></span><br><span class="line">        @Injectable()</span><br><span class="line">        export class MailGuard implments CanActivate&#123;</span><br><span class="line"></span><br><span class="line">            canActivate()&#123;</span><br><span class="line">                return true/false</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    â‘¡ç»™æœåŠ¡æŒ‡å®šæä¾›å•†</span><br><span class="line">         providers:[MailGuard]</span><br><span class="line">    â‘¢ç»™è·¯ç”±è¯å…¸ä¸­æƒ³è¦ä¿æŠ¤çš„è·¯ç”±æŒ‡å®šcanActivate</span><br><span class="line">            &#123;</span><br><span class="line">                path:&#x27;mail&#x27;,</span><br><span class="line">                canActivate:[MailGuard]</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">    Vueä¸­å¦‚æœä¹Ÿæƒ³å®ç°è·¯ç”±å®ˆå«ï¼š</span><br><span class="line">        const router = new VueRouter(&#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">        router.beforeEach((to, from, next) =&gt; &#123;</span><br><span class="line">            // ...</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        https://router.vuejs.org/zh-cn/advanced/navigation-guards.html</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/React%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86Redux%E3%80%81Redux-Thunk%E3%80%81Redux-Sagas%E3%80%81React-Redux%E5%B0%8F%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/React%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86Redux%E3%80%81Redux-Thunk%E3%80%81Redux-Sagas%E3%80%81React-Redux%E5%B0%8F%E7%BB%93/" class="post-title-link" itemprop="url">ReactçŠ¶æ€ç®¡ç†Reduxã€Redux-Thunkã€Redux-Sagasã€React-Reduxå°ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:17:28 / ä¿®æ”¹æ—¶é—´ï¼š14:22:35" itemprop="dateCreated datePublished" datetime="2022-12-16T14:17:28+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯æ¡†æ¶æ€»ç»“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ä¸€ã€React-ç¯å¢ƒé…ç½®"><a href="#ä¸€ã€React-ç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€ã€React ç¯å¢ƒé…ç½®"></a>ä¸€ã€React ç¯å¢ƒé…ç½®</h1><p><strong>å®‰è£…è„šæ‰‹æ¶å·¥å…·</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g create-react-app</span><br></pre></td></tr></table></figure>

<p><strong>åˆ›å»ºé¡¹ç›®å·¥ç¨‹</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// demoæ˜¯é¡¹ç›®åç§°ï¼Œä¸èƒ½æœ‰å¤§å†™å­—æ¯</span><br><span class="line">$ create-react-app demo</span><br></pre></td></tr></table></figure>

<p><strong>å®‰è£…æµè§ˆå™¨è°ƒè¯•å·¥å…·</strong></p>
<ul>
<li>åœ¨ FireFox ä¸­å®‰è£… React Developer Tools å’Œ Redux DevTools</li>
<li>React Developer Tools èƒ½å¤Ÿåœ¨å·¥å…·æ ä¸­å¾ˆæ–¹ä¾¿çš„çœ‹åˆ°é¡µé¢çš„å¸ƒå±€</li>
<li>Redux DevTools èƒ½å¤Ÿè¿½è¸ªé¡µé¢ stateã€action ç­‰çš„å˜åŒ–</li>
</ul>
<h1 id="äºŒã€Redux"><a href="#äºŒã€Redux" class="headerlink" title="äºŒã€Redux"></a>äºŒã€Redux</h1><h2 id="Redux-ä½œç”¨"><a href="#Redux-ä½œç”¨" class="headerlink" title="Redux ä½œç”¨"></a>Redux ä½œç”¨</h2><p>å½“é¡¹ç›®è¶Šæ¥è¶Šå¤æ‚æ—¶ï¼Œç»„ä»¶è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œç»„ä»¶ä¹‹é—´æ•°æ®çš„å…±äº«å°±æˆä¸ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆ Redux å°±æ˜¯ç”¨æ¥è§£å†³å„ä¸ªç»„ä»¶ä¹‹é—´æ•°æ®å…±äº«çš„é—®é¢˜çš„ã€‚</p>
<h2 id="åœ¨é¡¹ç›®ä¸­å®‰è£…-Redux"><a href="#åœ¨é¡¹ç›®ä¸­å®‰è£…-Redux" class="headerlink" title="åœ¨é¡¹ç›®ä¸­å®‰è£… Redux"></a>åœ¨é¡¹ç›®ä¸­å®‰è£… Redux</h2><p>redux çš„ GitHub åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/reduxjs/redux">https://github.com/reduxjs/redux</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// ä¸¤ç§å®‰è£…æ–¹æ³•</span><br><span class="line">$ npm install --save redux</span><br><span class="line">$ yarn add redux</span><br></pre></td></tr></table></figure>

<h2 id="ç†è§£-Redux-å·¥ä½œæµç¨‹"><a href="#ç†è§£-Redux-å·¥ä½œæµç¨‹" class="headerlink" title="ç†è§£ Redux å·¥ä½œæµç¨‹"></a>ç†è§£ Redux å·¥ä½œæµç¨‹</h2><p><img src="https://img-blog.csdnimg.cn/20190725211305715.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MzY5NA==,size_16,color_FFFFFF,t_70" alt="image"></p>
<ol>
<li>Store å°±æ˜¯é¡¹ç›®ä¸­çš„æ•°æ®ä»“åº“ï¼Œä½†æ˜¯æ•°æ®æ˜¯äº¤ç»™ Reducer ç®¡ç†çš„</li>
<li>Store å‘ç»„ä»¶æä¾›æ•°æ®ï¼Œç»„ä»¶è®¢é˜…æ•°æ®åï¼Œä¼šæ ¹æ®çŠ¶æ€çš„å˜åŒ–è‡ªåŠ¨æ›´æ–°æ•°æ®</li>
<li>ç»„ä»¶è¦ä¿®æ”¹ Store ä¸­çš„æ•°æ®ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª action åˆ©ç”¨ dispatch å‡½æ•°é€šçŸ¥ Store</li>
<li>Store æŠŠ action å’Œæ•°æ®äº¤ç»™ Reducerï¼ŒReducer æ ¹æ® action çš„ç±»å‹æ¥å¤„ç†æ•°æ®</li>
<li>Reducer æŠŠå¤„ç†å¥½çš„æ•°æ®è¿”å›ç»™ Store</li>
</ol>
<h2 id="ä»-Store-ä¸­è¯»å–æ•°æ®ï¼šæ´¾å‘-action-æ”¹å˜-Store-ä¸­çš„æ•°æ®"><a href="#ä»-Store-ä¸­è¯»å–æ•°æ®ï¼šæ´¾å‘-action-æ”¹å˜-Store-ä¸­çš„æ•°æ®" class="headerlink" title="ä» Store ä¸­è¯»å–æ•°æ®ï¼šæ´¾å‘ action æ”¹å˜ Store ä¸­çš„æ•°æ®"></a>ä» Store ä¸­è¯»å–æ•°æ®ï¼šæ´¾å‘ action æ”¹å˜ Store ä¸­çš„æ•°æ®</h2><p>action æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨ App ç»„ä»¶ã€reducer æ–‡ä»¶ä¸­éƒ½ä½¿ç”¨äº†ï¼Œå®¹æ˜“å¼•èµ·éš¾ä»¥è°ƒè¯•çš„ Bugï¼Œä¹Ÿä¸åˆ©äºåæœŸç»´æŠ¤ã€‚<br>æ‰€ä»¥ä½¿ç”¨ä¸€ä¸ª actionType å’Œ actionCreator æ¥ç®¡ç† action çš„ç±»å‹å’Œ action çš„åˆ›å»ºã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">// Appç»„ä»¶</span><br><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import store from &#x27;./store&#x27;;</span><br><span class="line">import &#123; changeInputValue &#125; from &#x27;./store/actionCreators&#x27;;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.state = store.getState();</span><br><span class="line">        this.handleChangeInput = this.handleChangeInput.bind(this);</span><br><span class="line">        this.handleStoreChange = this.handleStoreChange.bind(this);</span><br><span class="line">        store.subscribe(this.handleStoreChange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;input</span><br><span class="line">                    placeholder=&quot;è¯·è¾“å…¥ä¿¡æ¯&quot;</span><br><span class="line">                    style=&#123;&#123;width: &quot;200px&quot;, height: &#x27;40px&#x27;, border: &#x27;1px solid red&#x27;&#125;&#125;</span><br><span class="line">                    value=&#123;this.state.inputValue&#125;</span><br><span class="line">                    onChange=&#123;this.handleChangeInput&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleChangeInput (e) &#123;</span><br><span class="line">        store.dispatch(changeInputValue(e.target.value));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleStoreChange () &#123;</span><br><span class="line">        this.setState(store.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line">// actionTypes.js ç®¡ç†actionç±»å‹</span><br><span class="line">export const CHANGE_INPUT_VALUE = &#x27;change_input_value&#x27;;</span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line">// actionCreators.js ç®¡ç†actionçš„åˆ›å»º</span><br><span class="line"></span><br><span class="line">import &#123; CHANGE_INPUT_VALUE &#125; from &#x27;./actionTypes&#x27;;</span><br><span class="line"></span><br><span class="line">export const changeInputValue = (value) =&gt; (&#123;</span><br><span class="line">    type: CHANGE_INPUT_VALUE,</span><br><span class="line">    value: value</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line">// reducer.js</span><br><span class="line"></span><br><span class="line">import &#123; CHANGE_INPUT_VALUE &#125; from &#x27;./actionTypes&#x27;;</span><br><span class="line"></span><br><span class="line">const defaultState = &#123;</span><br><span class="line">    inputValue: &#x27;zhangsan&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default (state = defaultState, action) =&gt; &#123;</span><br><span class="line">    if (action.type === CHANGE_INPUT_VALUE) &#123;</span><br><span class="line">        const newState = JSON.parse(JSON.stringify(state));</span><br><span class="line">        newState.inputValue = action.value;</span><br><span class="line">        return newState;</span><br><span class="line">    &#125;</span><br><span class="line">    return state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line">// store/index.js</span><br><span class="line"></span><br><span class="line">import &#123; createStore &#125; from &#x27;redux&#x27;;</span><br><span class="line">import reducer from &#x27;./reducer&#x27;;</span><br><span class="line"></span><br><span class="line">const store = createStore(</span><br><span class="line">    reducer,</span><br><span class="line">    window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">export default store;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="ä¸‰ã€Redux-Thunk"><a href="#ä¸‰ã€Redux-Thunk" class="headerlink" title="ä¸‰ã€Redux-Thunk"></a>ä¸‰ã€Redux-Thunk</h1><h2 id="Redux-Thunk-çš„ä½œç”¨"><a href="#Redux-Thunk-çš„ä½œç”¨" class="headerlink" title="Redux-Thunk çš„ä½œç”¨"></a>Redux-Thunk çš„ä½œç”¨</h2><p>Redux-Thunk<strong>æ˜¯ Redux</strong>çš„ä¸­é—´ä»¶(<strong>å¹¶ä¸æ˜¯ React çš„ä¸­é—´ä»¶</strong>)ï¼Œç”¨æ¥å°†ç»„ä»¶å¼‚æ­¥è·å–æ•°æ®çš„æ“ä½œå°è£…åˆ° action ä¸­å»ï¼Œä»¥æ­¤æ¥å‡å°‘ç»„ä»¶ä¸­å¤æ‚çš„å¼‚æ­¥æ“ä½œã€‚<br>ä½¿ç”¨ Redux-Thunk ä¹‹å action å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°(Redux çš„ action é»˜è®¤åªèƒ½è¿”å›å¯¹è±¡)ã€‚</p>
<h2 id="å®‰è£…ä»¥åŠé…ç½®"><a href="#å®‰è£…ä»¥åŠé…ç½®" class="headerlink" title="å®‰è£…ä»¥åŠé…ç½®"></a>å®‰è£…ä»¥åŠé…ç½®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add redux-thunk</span><br><span class="line">$ npm install --save redux-thunk</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨-Redux-Thunk-ä¹‹åçš„æ•°æ®æµç¨‹"><a href="#ä½¿ç”¨-Redux-Thunk-ä¹‹åçš„æ•°æ®æµç¨‹" class="headerlink" title="ä½¿ç”¨ Redux-Thunk ä¹‹åçš„æ•°æ®æµç¨‹"></a>ä½¿ç”¨ Redux-Thunk ä¹‹åçš„æ•°æ®æµç¨‹</h2><p><img src="https://img-blog.csdnimg.cn/20190725212421249.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MzY5NA==,size_16,color_FFFFFF,t_70" alt="image"></p>
<p>å®é™…ä¸Šå˜åŒ–å°±åœ¨ Dispatch ä¸­ï¼Œä½¿ç”¨ Redux-Thunk ä¹‹å action ä¸ä»…å¯ä»¥è¿”å›å¯¹è±¡ï¼Œè¿˜å¯ä»¥è¿”å›å‡½æ•°ï¼Œç„¶åå°†å¼‚æ­¥æ“ä½œä»£ç æ”¾åœ¨ action ä¸­äº†ã€‚</p>
<h2 id="ä»£ç æ¼”ç¤º"><a href="#ä»£ç æ¼”ç¤º" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h2><p>è¿™é‡Œé‡‡ç”¨ä»æœåŠ¡ç«¯è·å–æ•°æ®å±•ç¤ºä¸€ä¸ª ul åˆ—è¡¨</p>
<p>ä½¿ç”¨ Redux-Thunk ä¹‹åçš„ä»£ç ä»¥åŠé…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import store from &#x27;./store&#x27;;</span><br><span class="line">import &#123; getListDataAction &#125; from &#x27;./store/actionCreators&#x27;;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line"></span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.state = store.getState();</span><br><span class="line">        this.handleStoreChange = this.handleStoreChange.bind(this);</span><br><span class="line">        store.subscribe(this.handleStoreChange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &#123;this.state.list.map((item, index) =&gt; &#123;</span><br><span class="line">                        return &lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt;</span><br><span class="line">                    &#125;)&#125;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        // ç€é‡å˜åŒ–çš„ä»£ç </span><br><span class="line">        store.dispatch(getListDataAction())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleStoreChange () &#123;</span><br><span class="line">        this.setState(store.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br><span class="line">-----------------------</span><br><span class="line"></span><br><span class="line">// actionCreators.js</span><br><span class="line">import &#123; GET_LIST_DATA &#125; from &#x27;./actionTypes&#x27;;</span><br><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line"></span><br><span class="line">export const getListData = (data) =&gt; (&#123;</span><br><span class="line">    type: GET_LIST_DATA,</span><br><span class="line">    value: data</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// action è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¼‚æ­¥æ“ä½œåœ¨è¿™é‡Œè¿›è¡Œ</span><br><span class="line">export const getListDataAction = () =&gt; &#123;</span><br><span class="line">    return (dispatch) =&gt; &#123;</span><br><span class="line">        axios.get(&#x27;/list.json&#x27;).then((res) =&gt; &#123;</span><br><span class="line">            if (res.data) &#123;</span><br><span class="line">                dispatch(getListData(res.data));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).catch((e) =&gt; &#123;</span><br><span class="line">            console.log(e);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-----------------------</span><br><span class="line"></span><br><span class="line">// store.js</span><br><span class="line">import &#123; createStore, applyMiddleware, compose &#125; from &#x27;redux&#x27;;</span><br><span class="line">import thunk from &#x27;redux-thunk&#x27;;</span><br><span class="line">import reducer from &#x27;./reducer&#x27;;</span><br><span class="line"></span><br><span class="line">const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;) : compose;</span><br><span class="line"></span><br><span class="line">const enhancer = composeEnhancers(</span><br><span class="line">    applyMiddleware(thunk)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">const store = createStore(</span><br><span class="line">    reducer,</span><br><span class="line">    enhancer</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">export default store;</span><br><span class="line"></span><br><span class="line">-----------------------</span><br><span class="line"></span><br><span class="line">// reducer.jsæ— å˜åŒ–</span><br><span class="line">import &#123; GET_LIST_DATA &#125; from &#x27;./actionTypes&#x27;;</span><br><span class="line">const defaultState = &#123;</span><br><span class="line">    list: []</span><br><span class="line">&#125;</span><br><span class="line">export default (state = defaultState, action) =&gt; &#123;</span><br><span class="line">    if (action.type === GET_LIST_DATA) &#123;</span><br><span class="line">        const newState = JSON.parse(JSON.stringify(state));</span><br><span class="line">        newState.list = action.value;</span><br><span class="line">        console.log(action);</span><br><span class="line">        return newState;</span><br><span class="line">    &#125;</span><br><span class="line">    return state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20190725213027838.png" alt="image"></p>
<h1 id="å››ã€Redux-saga"><a href="#å››ã€Redux-saga" class="headerlink" title="å››ã€Redux-saga"></a>å››ã€Redux-saga</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>redux-saga åŒæ ·æ˜¯ç”¨æ¥æ‹†åˆ†ç»„ä»¶å¼‚æ­¥ä»£ç çš„ä¸­é—´ä»¶ï¼Œå®ƒå’Œ Redux-Thunk çš„åŒºåˆ«å°±æ˜¯å°†å¼‚æ­¥ä»£ç çš„æ“ä½œæ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­å»ç®¡ç†ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save redux-saga</span><br><span class="line">$ yarn add redux-saga</span><br></pre></td></tr></table></figure>

<h2 id="ä»£ç æ¼”ç¤º-1"><a href="#ä»£ç æ¼”ç¤º-1" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h2><p>è¿™é‡Œé‡‡ç”¨ä¸Šé¢çš„ä¾‹å­ï¼ŒåŒæ ·ä»æœåŠ¡å™¨è·å–æ•°æ®å±•ç¤ºåœ¨ ul åˆ—è¡¨ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import store from &#x27;./store&#x27;;</span><br><span class="line">import &#123; getListDataSagas &#125; from &#x27;./store/actionCreators&#x27;;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line"></span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.state = store.getState();</span><br><span class="line">        this.handleStoreChange = this.handleStoreChange.bind(this);</span><br><span class="line">        store.subscribe(this.handleStoreChange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &#123;this.state.list.map((item, index) =&gt; &#123;</span><br><span class="line">                        return &lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt;</span><br><span class="line">                    &#125;)&#125;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        store.dispatch(getListDataSagas());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleStoreChange () &#123;</span><br><span class="line">        this.setState(store.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br><span class="line">------------------------</span><br><span class="line"></span><br><span class="line">// actionTypes.js</span><br><span class="line">export const GET_LIST_DATA = &#x27;get_list_data&#x27;;</span><br><span class="line">export const GET_LIST_DATA_SAGAS = &#x27;get_list_data_sagas&#x27;;</span><br><span class="line"></span><br><span class="line">------------------------</span><br><span class="line"></span><br><span class="line">// actionCreators.js</span><br><span class="line">import &#123; GET_LIST_DATA, GET_LIST_DATA_SAGAS &#125; from &#x27;./actionTypes&#x27;;</span><br><span class="line"></span><br><span class="line">export const getListData = (data) =&gt; (&#123;</span><br><span class="line">    type: GET_LIST_DATA,</span><br><span class="line">    value: data</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªsagasä¸­éœ€è¦çš„action</span><br><span class="line">export const getListDataSagas = () =&gt; (&#123;</span><br><span class="line">    type: GET_LIST_DATA_SAGAS,</span><br><span class="line">&#125;)</span><br><span class="line">------------------------</span><br><span class="line"></span><br><span class="line">// reducer.js</span><br><span class="line">import &#123; GET_LIST_DATA &#125; from &#x27;./actionTypes&#x27;;</span><br><span class="line"></span><br><span class="line">const defaultState = &#123;</span><br><span class="line">    list: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default (state = defaultState, action) =&gt; &#123;</span><br><span class="line">    if (action.type === GET_LIST_DATA) &#123;</span><br><span class="line">        const newState = JSON.parse(JSON.stringify(state));</span><br><span class="line">        newState.list = action.value;</span><br><span class="line">        console.log(action);</span><br><span class="line">        return newState;</span><br><span class="line">    &#125;</span><br><span class="line">    return state;</span><br><span class="line">&#125;</span><br><span class="line">------------------------</span><br><span class="line"></span><br><span class="line">// store.js</span><br><span class="line">import &#123; createStore, applyMiddleware, compose &#125; from &#x27;redux&#x27;;</span><br><span class="line">import reducer from &#x27;./reducer&#x27;;</span><br><span class="line">import createSagaMiddleware from &#x27;redux-saga&#x27;;</span><br><span class="line">// æ–°åˆ›å»ºçš„sagas.jsæ–‡ä»¶ç”¨æ¥ç®¡ç†å¼‚æ­¥æ“ä½œçš„ä»£ç </span><br><span class="line">import sagas from &#x27;./sagas&#x27;;</span><br><span class="line"></span><br><span class="line">const sagaMiddleware = createSagaMiddleware();</span><br><span class="line">const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;) : compose;</span><br><span class="line">const enhancer = composeEnhancers(</span><br><span class="line">    applyMiddleware(sagaMiddleware)</span><br><span class="line">);</span><br><span class="line">const store = createStore(</span><br><span class="line">    reducer,</span><br><span class="line">    enhancer</span><br><span class="line">);</span><br><span class="line">sagaMiddleware.run(sagas);</span><br><span class="line">export default store;</span><br><span class="line"></span><br><span class="line">------------------------</span><br><span class="line">// sagas.js  å•ç‹¬ç®¡ç†å¼‚æ­¥æ“ä½œçš„æ–‡ä»¶</span><br><span class="line">import &#123; put, takeEvery &#125; from &#x27;redux-saga/effects&#x27;;</span><br><span class="line">import &#123; GET_LIST_DATA_SAGAS &#125; from &#x27;./actionTypes&#x27;;</span><br><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line">import &#123; getListData &#125; from  &#x27;./actionCreators&#x27;;</span><br><span class="line"></span><br><span class="line">function* mySaga() &#123;</span><br><span class="line">    // è¿™å¥ä»£ç æ„æ€æ˜¯ï¼šå½“æ¥æ”¶åˆ°ä¸€ä¸ªåå«GET_LIST_DATA_SAGASçš„actionçš„æ—¶å€™</span><br><span class="line">    //ä¼šå»è°ƒç”¨getDataFromServeræ–¹æ³•</span><br><span class="line">    yield takeEvery(GET_LIST_DATA_SAGAS, getDataFromServer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è·å–æ•°æ®çš„å¼‚æ­¥æ“ä½œ</span><br><span class="line">function* getDataFromServer() &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        const res = yield axios.get(&#x27;/list.json&#x27;);</span><br><span class="line">        yield put(getListData(res.data));</span><br><span class="line">    &#125; catch (e) &#123;</span><br><span class="line">        console.log(&#x27;è¯·æ±‚é”™è¯¯&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default mySaga;</span><br></pre></td></tr></table></figure>

<h1 id="äº”ã€React-Redux"><a href="#äº”ã€React-Redux" class="headerlink" title="äº”ã€React-Redux"></a>äº”ã€React-Redux</h1><h2 id="ä½œç”¨-1"><a href="#ä½œç”¨-1" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>React-Redux çš„ä½œç”¨æ˜¯ä¸ºäº†åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Redux æ›´åŠ æ–¹ä¾¿ã€‚</p>
<h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save react-redux</span><br><span class="line">$ yarn add react-redux</span><br></pre></td></tr></table></figure>

<h2 id="ä»£ç æ¼”ç¤º-2"><a href="#ä»£ç æ¼”ç¤º-2" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h2><p>ä»£ç æ¼”ç¤ºçš„ä¾‹å­æ˜¯æ”¹å˜ input è¾“å…¥æ¡†ä¸­çš„å†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">// index.js é¡¹ç›®çš„å…¥å£æ–‡ä»¶</span><br><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import App from &#x27;./App&#x27;;</span><br><span class="line">import &#123; Provider &#125; from  &#x27;react-redux&#x27;;</span><br><span class="line">import store from  &#x27;./store&#x27;;</span><br><span class="line"></span><br><span class="line">const AppRoot = (</span><br><span class="line">    // é‡ç‚¹æŠŠstoreæä¾›ç»™æ¯ä¸€ä¸ªç»„ä»¶</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">      &lt;App&gt;&lt;/App&gt;</span><br><span class="line">  &lt;/Provider&gt;</span><br><span class="line">);</span><br><span class="line">ReactDOM.render(AppRoot, document.getElementById(&#x27;root&#x27;));</span><br><span class="line"></span><br><span class="line">------------------------</span><br><span class="line">// actionTypes.js</span><br><span class="line">export const INPUT_CHANGE = &#x27;input_change&#x27;;</span><br><span class="line"></span><br><span class="line">------------------------</span><br><span class="line">// actionCreators.js</span><br><span class="line">import &#123; INPUT_CHANGE &#125; from &#x27;./actionTypes&#x27;;</span><br><span class="line"></span><br><span class="line">export const inputChange = (data) =&gt; (&#123;</span><br><span class="line">    type: INPUT_CHANGE,</span><br><span class="line">    value: data</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">------------------------</span><br><span class="line">// reducer.js</span><br><span class="line">import &#123; INPUT_CHANGE &#125; from &#x27;./actionTypes&#x27;;</span><br><span class="line">const defaultState = &#123;</span><br><span class="line">    inputValue: &#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">export default (state = defaultState, action) =&gt; &#123;</span><br><span class="line">    if (action.type === INPUT_CHANGE) &#123;</span><br><span class="line">        const newState = JSON.parse(JSON.stringify(state));</span><br><span class="line">        newState.inputValue = action.value;</span><br><span class="line">        return newState;</span><br><span class="line">    &#125;</span><br><span class="line">    return state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">------------------------</span><br><span class="line">// App.js</span><br><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import &#123; inputChange &#125; from &#x27;./store/actionCreators&#x27;;</span><br><span class="line">import &#123; connect &#125; from &#x27;react-redux&#x27;;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;input</span><br><span class="line">                    placeholder=&quot;è¯·è¾“å…¥ä¿¡æ¯&quot;</span><br><span class="line">                    style=&#123;&#123;width: &quot;200px&quot;, height: &#x27;40px&#x27;, border: &#x27;1px solid red&#x27;&#125;&#125;</span><br><span class="line">                    value=&#123;this.props.inputValue&#125;</span><br><span class="line">                    onChange=&#123;this.props.handleChangeInput&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å°†storeä¸­å­˜å‚¨çš„æ•°æ®æ˜ å°„åˆ°å½“å‰ç»„ä»¶çš„propsä¸­</span><br><span class="line">const mapStateToProps = (state) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        inputValue: state.inputValue</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const mapDispatchToProps = (dispatch) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        handleChangeInput (e) &#123;</span><br><span class="line">            dispatch(inputChange(e.target.value));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// åˆ©ç”¨connectå°†ç»„ä»¶å’Œstoreè¿æ¥(è¿æ¥è§„åˆ™mapStateToPropsã€mapDispatchToProps)</span><br><span class="line">export default connect(mapStateToProps, mapDispatchToProps)(App);</span><br></pre></td></tr></table></figure>

<h2 id="react-æ¨å´‡çš„æ˜¯ç»„ä»¶åŒ–å¼€å‘"><a href="#react-æ¨å´‡çš„æ˜¯ç»„ä»¶åŒ–å¼€å‘" class="headerlink" title="react æ¨å´‡çš„æ˜¯ç»„ä»¶åŒ–å¼€å‘"></a>react æ¨å´‡çš„æ˜¯ç»„ä»¶åŒ–å¼€å‘</h2><p>ä¸‹é¢å°±æ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªç»„ä»¶çš„ demo æ¼”ç¤ºåŸºæœ¬éª¨æ¶çš„æ­å»ºã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20190725213849116.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MzY5NA==,size_16,color_FFFFFF,t_70" alt="image"></p>
<h1 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h1><ul>
<li>Redux: å°±æ˜¯ç”¨æ¥ç®¡ç†é¡¹ç›®ä¸­çŠ¶æ€æˆ–è€…æ•°æ®çš„</li>
<li>Redux-Thunk: Redux çš„ä¸­é—´ä»¶ï¼Œç”¨æ¥å°†å¼‚æ­¥æ“ä½œçš„ä»£ç æ‹†åˆ†åˆ° action ä¸­å»çš„</li>
<li>Redux-Sagas: Redux çš„ä¸­é—´ä»¶ï¼Œç”¨æ¥å°†å¼‚æ­¥æ“ä½œçš„ä»£ç æ‹†åˆ†åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ç®¡ç†</li>
<li>React-Redux: æ›´èƒ½æ–¹ä¾¿çš„ç®¡ç†å’Œä½¿ç”¨ Redux</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/React16%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/React16%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7/" class="post-title-link" itemprop="url">React16çš„æ–°ç‰¹æ€§</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-16 14:17:19 / ä¿®æ”¹æ—¶é—´ï¼š14:22:18" itemprop="dateCreated datePublished" datetime="2022-12-16T14:17:19+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯æ¡†æ¶æ€»ç»“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ä¸€ã€æ–°çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­"><a href="#ä¸€ã€æ–°çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­" class="headerlink" title="ä¸€ã€æ–°çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­"></a>ä¸€ã€æ–°çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­</h1><p><img src="https://upload-images.jianshu.io/upload_images/12185313-85b3010f0b8b7d16.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="image"></p>
<p>React çš„ç”Ÿå‘½å‘¨æœŸé’©å­å…è®¸å¼€å‘è€…åœ¨ç»„ä»¶å®ä¾‹åŒ–ã€å®Œæˆæ¸²æŸ“ã€å±æ€§ã€æ›´æ–°ã€é”€æ¯ç­‰ä¸åŒé˜¶æ®µæ“ä½œç»„ä»¶ã€‚è¿™ç»™æˆ‘ä»¬çš„å¼€å‘å¸¦æ¥æ›´å¤šçš„çµæ´»æ€§ï¼›</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœå¼€å‘è€…å¯¹å„ä¸ªç”Ÿå‘½å‘¨æœŸçš„ç†è§£é”™è¯¯ï¼Œå¾ˆå®¹æ˜“é€ æˆå¯¹å®ƒçš„æ»¥ç”¨ï¼Œå°±ä¼šé€ æˆæ€§èƒ½ä¸Šçš„æµªè´¹ç­‰é—®é¢˜ã€‚</p>
<p>æ¯”å¦‚ï¼šcomponentWillMount å¯¹ç»„ä»¶è¿›è¡Œ setStateã€dom æ“ä½œã€æ·»åŠ äº‹ä»¶ç›‘å¬ã€è·å–æ•°æ®ç­‰ã€‚è¿™äº›éƒ½æ˜¯ä¸å®‰å…¨çš„æ“ä½œã€‚</p>
<p>react16 å¯¹ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåšäº†ä¼˜åŒ–ï¼Œâ€ç§»é™¤â€å®¹æ˜“è¢«å¤§å®¶è¯¯è§£çš„é’©å­ï¼Œæ·»åŠ æ›´åŠ å®¹æ˜“ç†è§£ã€å®‰å…¨çš„é’©å­ã€‚</p>
<p>â€œåˆ é™¤â€äº†ä»¥ä¸‹é’©å­ï¼ˆ17 ç‰ˆæœ¬ä¸­å°†çœŸçš„åˆ é™¤ï¼‰ï¼š</p>
<p><code>componentWillMount()</code></p>
<p><code>componentWillReceiveProps(nextProps, nextState)</code></p>
<p><code>componentWillUpdate()</code></p>
<p>æ–°å¢äº†ä»¥ä¸‹é’©å­ï¼š</p>
<p><code>static getDerivedStateFromProps(nextProps, prevState)</code></p>
<p><code>getSnapshotBeforeUpdate(prevProps, prevState)</code></p>
<p><code>componentDidCatch(error, info)</code></p>
<h2 id="a-å¦‚ä½•ç†è§£-static-getDerivedStateFromProps-nextProps-prevState-ï¼Ÿ"><a href="#a-å¦‚ä½•ç†è§£-static-getDerivedStateFromProps-nextProps-prevState-ï¼Ÿ" class="headerlink" title="a. å¦‚ä½•ç†è§£ static getDerivedStateFromProps(nextProps, prevState)ï¼Ÿ"></a>a. å¦‚ä½•ç†è§£ static getDerivedStateFromProps(nextProps, prevState)ï¼Ÿ</h2><blockquote>
<p>é¦–å…ˆï¼Œéœ€è¦å¯¹é™æ€æ–¹æ³•åšä¸€ä¸ªç†è§£ã€‚static é™æ€æ–¹æ³•ï¼Œåœ¨ es5 ä¸­æ€ä¹ˆå®ç°å‘¢ï¼Ÿ<br>function Person() {}<br>Person.getCount &#x3D; function () {}<br>ä»¥ä¸Šå°±æ˜¯ static é™æ€æ–¹æ³•çš„åŸç†ã€‚ç”±äºâ€œthisâ€åªèƒ½è·å–å±æ€§æ˜¯æ ¹æ®åŸå‹é“¾ï¼Œè€Œé™æ€æ–¹æ³•ä¸åœ¨åŸå‹é“¾ä¸Šï¼Œæ‰€ä»¥ï¼Œåœ¨ç»„ä»¶å®ä¾‹å†…æ— æ³•é€šè¿‡ this è°ƒç”¨ static æ–¹æ³•ï¼Œstatic æ–¹æ³•ä¹Ÿæ— æ³•æ ¹æ®â€thisâ€è°ƒç”¨å®ä¾‹çš„å…¶ä»–æ–¹æ³•ã€‚<br>å°±é˜²æ­¢åœ¨ getDerivedStateFromProps å¯¹ç»„ä»¶å®ä¾‹çš„é”™è¯¯æ“ä½œã€‚<br>å†æ¬¡ï¼ŒgetDerivedStateFromProps ç”¨æ¥åšä»€ä¹ˆç”¨å‘¢ï¼Ÿ<br>å½“ç»„ä»¶å®ä¾‹åŒ–ã€æ¥æ”¶åˆ°æ–°çš„ props æ—¶ï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šè¢«æ›´æ–°åˆ°ç»„ä»¶çš„ state ä¸Šã€‚å¦‚æœè¿”å›ç©ºï¼Œé‚£ä¹ˆä¸å¯¹ state åšæ›´æ–°ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// ä»¥ä¸‹ä»£ç å®ç°ï¼Œæ›´æ–°nameå±æ€§åˆ°stateä¸Šï¼›</span><br><span class="line">static getDerivedStateFromProps (nextProps, prevState) &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        name: nextProps.name</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä¸Šé¢çš„ä»£ç åœ¨ä»¥å‰ç‰ˆæœ¬ä¸­</span><br><span class="line">// ä½ å¯èƒ½ä¼šç”¨ä»¥ä¸‹è¿™æ ·åšï¼Œè™½ç„¶è¿™æ ·åšçœ‹èµ·æ¥ä¹Ÿæ²¡é—®é¢˜ï¼Œç”¨ä¸Šé¢çš„æ–¹æ³•æ›´åŠ å®‰å…¨ï¼Œä¸ä¼šå¯¹thisåšè¯¯æ“ä½œ</span><br><span class="line">componentWillReceiveProps (nextProps) &#123;</span><br><span class="line">    if (this.state.name !== nextProps.name) &#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            name: nextProps.name</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ä¸ºäº†æ›¿ä»£ componentWillReceiveProps å­˜åœ¨çš„ï¼Œæ‰€ä»¥åœ¨ä½ éœ€è¦ä½¿ç”¨ componentWillReceiveProps çš„æ—¶å€™ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ getDerivedStateFromProps æ¥è¿›è¡Œæ›¿ä»£äº†ã€‚</p>
<p>ä¸¤è€…çš„å‚æ•°æ˜¯ä¸ç›¸åŒçš„ï¼Œè€Œ getDerivedStateFromProps æ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå‡½æ•°ä¸èƒ½é€šè¿‡ this è®¿é—®åˆ° class çš„å±æ€§ï¼Œä¹Ÿå¹¶ä¸æ¨èç›´æ¥è®¿é—®å±æ€§ã€‚è€Œæ˜¯åº”è¯¥é€šè¿‡å‚æ•°æä¾›çš„ nextProps ä»¥åŠ prevState æ¥è¿›è¡Œåˆ¤æ–­ï¼Œæ ¹æ®æ–°ä¼ å…¥çš„ props æ¥æ˜ å°„åˆ° stateã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ props ä¼ å…¥çš„å†…å®¹ä¸éœ€è¦å½±å“åˆ°ä½ çš„ stateï¼Œé‚£ä¹ˆå°±éœ€è¦è¿”å›ä¸€ä¸ª nullï¼Œè¿™ä¸ªè¿”å›å€¼æ˜¯å¿…é¡»çš„ï¼Œæ‰€ä»¥å°½é‡å°†å…¶å†™åˆ°å‡½æ•°çš„æœ«å°¾ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">static getDerivedStateFromProps(nextProps, prevState) &#123;</span><br><span class="line">    const &#123;type&#125; = nextProps;</span><br><span class="line">    // å½“ä¼ å…¥çš„typeå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ›´æ–°state</span><br><span class="line">    if (type !== prevState.type) &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            type,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    // å¦åˆ™ï¼Œå¯¹äºstateä¸è¿›è¡Œä»»ä½•æ“ä½œ</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="b-å¦‚ä½•ç†è§£-getSnapshotBeforeUpdate-prevProps-prevState-ï¼Ÿ"><a href="#b-å¦‚ä½•ç†è§£-getSnapshotBeforeUpdate-prevProps-prevState-ï¼Ÿ" class="headerlink" title="b. å¦‚ä½•ç†è§£ getSnapshotBeforeUpdate(prevProps, prevState)ï¼Ÿ"></a>b. å¦‚ä½•ç†è§£ getSnapshotBeforeUpdate(prevProps, prevState)ï¼Ÿ</h2><blockquote>
<p>é¦–å…ˆï¼Œä»å­—é¢æ¥ç†è§£â€œsnapshotâ€æ˜¯å¿«ç…§çš„æ„æ€ã€‚åœ¨ dom æ›´æ–°ä¹‹å‰è°ƒç”¨ã€‚è¿”å›çš„å€¼å°†è¢«ä¼ ç»™ componentDidUpdate(prevProps, prevState, snaphot)ã€‚<br>è¿™ä¸ªä¼šæ¯”è¾ƒå°‘ç”¨åˆ°ï¼Œä½†å¯¹äºå¤„ç†æ¯”å¦‚æ•°æ®æ›´æ–°åçš„æ»šåŠ¨æ¡çš„å·®å¼‚æ»šåŠ¨ï¼Œå¯¹ç”¨æˆ·ä½“éªŒï¼Œå¾ˆæœ‰å¸®åŠ©ã€‚</p>
</blockquote>
<h2 id="c-å¦‚ä½•ç†è§£-componentDidCatch-error-info-ï¼Ÿ"><a href="#c-å¦‚ä½•ç†è§£-componentDidCatch-error-info-ï¼Ÿ" class="headerlink" title="c. å¦‚ä½•ç†è§£ componentDidCatch(error, info)ï¼Ÿ"></a>c. å¦‚ä½•ç†è§£ componentDidCatch(error, info)ï¼Ÿ</h2><blockquote>
<p>ä»¥å¾€ï¼Œå½“ç»„ä»¶å‘ç”Ÿé”™è¯¯ï¼ˆå¯ä»¥ç”¨ throw new Error æ¨¡æ‹Ÿï¼‰æ—¶ï¼Œä¼šå¯¼è‡´æ•´ä¸ª react ç¨‹åºæ­»æ‰ï¼Œè¿™å¯¹äºç¨‹åºçš„ç¨³å®šæ€§æ¥è¯´éå¸¸ä¸å¥½ã€‚<br>componentDidCatch å¯ä»¥æ•è·å­ç»„ä»¶ä¸­ä»»ä½•ä¸€ä¸ªé”™è¯¯ï¼Œæ•è·åˆ°é”™è¯¯åå¯ä»¥å¯¹é”™è¯¯è¿›è¡Œå¤„ç†ã€‚<br>å¦‚æœå‘ç”Ÿé”™è¯¯çš„ç»„ä»¶çš„çˆ¶ç»„ä»¶æ²¡æœ‰è®¾ç½® componentDidCatch é”™è¯¯æ•è·ï¼Œå°†ç»§ç»­é€’å½’çˆ¶ç»„ä»¶çš„çˆ¶ç»„ä»¶ä¸­çš„ componentDidCatchï¼Œæ‰¾åˆ°åˆ™åœæ­¢ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// ç®€å•çš„é”™è¯¯æ•è·</span><br><span class="line">componentDidCatch (error, info) &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">        error: true</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render () &#123;</span><br><span class="line">    if (this.state.error) &#123;</span><br><span class="line">        return &lt;div&gt;å­ç»„ä»¶å‘ç”Ÿå¼‚å¸¸äº†&lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å…¶ä»–ä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="äºŒã€ä¼˜åŒ–äº†å“ªäº›è¯­æ³•"><a href="#äºŒã€ä¼˜åŒ–äº†å“ªäº›è¯­æ³•" class="headerlink" title="äºŒã€ä¼˜åŒ–äº†å“ªäº›è¯­æ³•"></a>äºŒã€ä¼˜åŒ–äº†å“ªäº›è¯­æ³•</h1><h2 id="1-ref-ä¼˜åŒ–"><a href="#1-ref-ä¼˜åŒ–" class="headerlink" title="1. ref ä¼˜åŒ–"></a>1. ref ä¼˜åŒ–</h2><p>ref æœ‰å¾ˆå¤šä½œç”¨ï¼Œé€šè¿‡ ref çˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨å­ç»„ä»¶å†…çš„æ–¹æ³•ï¼Œé…åˆ<code>ReactDOM.findDOMNode(ref)</code> å¯ä»¥è·å–åˆ°ç»„ä»¶å¯¹åº”çš„ domã€‚ref ä¸ key ä¸€æ ·æ— æ³•é€šè¿‡ this.props.ref è·å–ï¼›</p>
<p>ä»¥å‰ç‰ˆæœ¬çš„ reactï¼Œç»™å­ç»„ä»¶æ·»åŠ  ref&#x3D;â€œinputNameâ€ï¼Œå°±å¯ä»¥é€šè¿‡ this.refs[â€˜inputNameâ€™]è·å–å­ç»„ä»¶å®ä¾‹ã€‚ç„¶åå¯ä»¥è¿›è¡Œä¸€äº›æ“ä½œã€‚</p>
<p>React16 ä¸­æœ‰ä¸¤ç§åˆ›å»º Ref çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">constructor () &#123;</span><br><span class="line">    this.inputNameRef = React.createRef();</span><br><span class="line">    this.switchRef = React.createRef();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render () &#123;</span><br><span class="line">    // é€šè¿‡this.inputNameRef.current å¯ä»¥è·å–åˆ°inputå®ä¾‹</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">             &lt;input ref=&#123;this.inputNameRef&#125; /&gt;</span><br><span class="line">             &lt;Switch ref=&#123;this.switchRef&#125; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">    // é€šè¿‡å›è°ƒrefçš„æ–¹å¼å®ç°</span><br><span class="line">    // é€šè¿‡this.inputNameRef å¯ä»¥è·å–åˆ°inputå®ä¾‹</span><br><span class="line">    // this.switchRefå¯ä»¥è·å–Switchçš„å®ä¾‹</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">             &lt;input ref=&#123;(ref) =&gt; this.inputNameRef = ref&#125; /&gt;</span><br><span class="line">             &lt;Switch ref=&#123;(ref) =&gt; this.switchRef = ref&#125; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆï¼Œæ—¢ç„¶ ref å’Œ key å¯ä»¥ä¸€æ ·ä¸èƒ½ç”¨ this.props è·å–ï¼Œæœ‰æ²¡æœ‰åŠæ³•ä¼ ç»™å­ç»„ä»¶å‘¢ï¼Ÿè¿™æ ·å°±å¯ä»¥å®ç°åœ¨ç»„ä»¶ä¸­è°ƒç”¨å­å­ç»„ä»¶ï¼ˆæ¯”å¦‚å­ç»„ä»¶ä¸­çš„ inputï¼‰äº†ã€‚</p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p>
<p>ä¹Ÿæœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">    // å‡è®¾this.switchRefå·²ç»åœ¨constructoré‡Œåˆ›å»ºäº†ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å…¶ä»–å±æ€§ä¼ é€’ã€‚</span><br><span class="line">    // åœ¨å­ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡this.props.forRefã€‚</span><br><span class="line">    // æ³¨ï¼šforRef ä¸ºéšä¾¿ååªè¦ä¸æ˜¯reactå†…ç½®çš„åç§°å°±è¡Œ</span><br><span class="line">    return (</span><br><span class="line">        &lt;Switch forRef=&#123;this.switchRef&#125; /&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// é€šè¿‡React.forwardRef ä¼ é€’</span><br><span class="line">export default React.forwardRef((props, ref) =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;OtherChild /&gt;</span><br><span class="line">            &lt;Switch ref=&#123;ref&#125; /&gt;</span><br><span class="line">            &lt;OtherChild2 /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="2-å°†ç»„ä»¶å®ä¾‹åŒ–åˆ°å…¶ä»–-dom-ä¸‹ï¼Œå¯ä»¥ä¼˜åŒ–å—ï¼Ÿ"><a href="#2-å°†ç»„ä»¶å®ä¾‹åŒ–åˆ°å…¶ä»–-dom-ä¸‹ï¼Œå¯ä»¥ä¼˜åŒ–å—ï¼Ÿ" class="headerlink" title="2. å°†ç»„ä»¶å®ä¾‹åŒ–åˆ°å…¶ä»– dom ä¸‹ï¼Œå¯ä»¥ä¼˜åŒ–å—ï¼Ÿ"></a>2. å°†ç»„ä»¶å®ä¾‹åŒ–åˆ°å…¶ä»– dom ä¸‹ï¼Œå¯ä»¥ä¼˜åŒ–å—ï¼Ÿ</h2><p>React æ¸²æŸ“æ—¶ï¼Œé»˜è®¤æ˜¯å°†èŠ‚ç‚¹æ¸²æŸ“åˆ°çˆ¶ç»„ä»¶ä¸­ï¼Œè¿™æ ·èƒ½æ»¡è¶³æˆ‘ä»¬å¤§éƒ¨åˆ†çš„éœ€æ±‚ï¼Œbutï¼Œæœ‰è¿™æ ·çš„ç»„ä»¶ï¼Œæ¯”å¦‚ Dialogï¼Œåœ¨ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œéœ€è¦èƒ½å®šä¹‰ç»„ä»¶å¼¹å‡ºçš„ dom ä½ç½®ï¼Œå¦‚ Dialog ä¸­çš„ appendToBody ä¸º true æ—¶ï¼Œæ¸²æŸ“åˆ° body èŠ‚ç‚¹ä¸‹ã€‚</p>
<p>ä»¥å‰æˆ‘ä»¬çš„åšæ³•æ˜¯ï¼Œé€šè¿‡ ref å’Œ ReactDOM.findDomNode è·å– dom åœ¨ dialog open æ—¶é€šè¿‡ document.body.appendChild(dom)ï¼Œå°† append åˆ° body ä¸‹ï¼Œåœ¨ componentWillUnmount æ—¶ï¼Œdocument.body.removeChild(dom)ï¼Œç§»é™¤æ²¡ç”¨çš„ domã€‚</p>
<p>è¿™æ ·æ¥åšå°±æœ‰ç‚¹éº»çƒ¦ï¼Œéœ€è¦ refã€ReactDOM ç­‰ã€‚</p>
<p>React16 æä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹å¼ createPortalï¼ŒPortals æä¾›äº†ä¸€ç§å¾ˆå¥½çš„å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°çˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„æ–¹å¼ã€‚</p>
<p>createPortalï¼Œæ¸²æŸ“å­èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œå¹¶è¿”å›å…ƒç´ ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ ReactDOM.render ä¹Ÿå¯ä»¥å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼ŒåŒºåˆ«æ˜¯ ReactDOM.render å¹¶æ²¡æœ‰å…ƒç´ ï¼Œå› æ­¤ä¸ä½œä¸º render æ–¹æ³•çš„ return</p>
<p>æˆ‘ç›´æ¥è´´ react çš„ Demoã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const modalRoot = document.body;</span><br><span class="line"></span><br><span class="line">class Modal extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.el = document.createElement(&#x27;div&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        modalRoot.appendChild(this.el);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillUnmount() &#123;</span><br><span class="line">        modalRoot.removeChild(this.el);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        return ReactDOM.createPortal(</span><br><span class="line">            this.props.children,</span><br><span class="line">            this.el,</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-éœ€è¦ä¼ é€’çš„å¤šå±‚çš„-propsï¼Œå¯ä»¥ä¼˜åŒ–å—ï¼Ÿ"><a href="#3-éœ€è¦ä¼ é€’çš„å¤šå±‚çš„-propsï¼Œå¯ä»¥ä¼˜åŒ–å—ï¼Ÿ" class="headerlink" title="3. éœ€è¦ä¼ é€’çš„å¤šå±‚çš„ propsï¼Œå¯ä»¥ä¼˜åŒ–å—ï¼Ÿ"></a>3. éœ€è¦ä¼ é€’çš„å¤šå±‚çš„ propsï¼Œå¯ä»¥ä¼˜åŒ–å—ï¼Ÿ</h2><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°ï¼Œä¸€ä¸ªå€¼éœ€è¦è¢«ä¼ é€’åˆ°å¤šå±‚çš„å­ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¸å¾—ä¸é€šè¿‡ props ä¸€å±‚ä¸€å±‚çš„ä¼ é€’ã€‚</p>
<p>react16 åŒæ ·æä¾›äº†ä¼˜é›…çš„æ–¹å¼ã€‚</p>
<p>React.createContext</p>
<h1 id="ä¸‰ã€æ€§èƒ½æ–¹é¢çš„ä¼˜åŒ–"><a href="#ä¸‰ã€æ€§èƒ½æ–¹é¢çš„ä¼˜åŒ–" class="headerlink" title="ä¸‰ã€æ€§èƒ½æ–¹é¢çš„ä¼˜åŒ–"></a>ä¸‰ã€æ€§èƒ½æ–¹é¢çš„ä¼˜åŒ–</h1><h2 id="1-React-Fragment"><a href="#1-React-Fragment" class="headerlink" title="1. React.Fragment"></a>1. React.Fragment</h2><p>React æ¸²æŸ“æ—¶ï¼Œè¦æ±‚ JSX å…ƒç´ æ˜¯ tree ç»“æ„ï¼Œå› ä¸º JSX åŸç†è¿˜æ˜¯è°ƒç”¨ <code>React.createElement(Component, attrs, [...children])</code>ï¼Œè¿™æ ·å¥½ç†è§£ã€‚ä½†è¿™æ ·åœ¨ç»„ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå°±æœ‰æ‰€é™åˆ¶ï¼Œæ¯”å¦‚ï¼šTable Tr ç»„ä»¶ï¼Œéœ€è¦æ¸²æŸ“åŒæ—¶å¤šä¸ª Trï¼Œåœ¨ä»¥å‰æˆ‘ä»¬å°±éœ€è¦åŒ…ä¸€å±‚<code>&lt;div&gt;</code>ï¼Œé€ æˆäº†æµªè´¹ã€‚</p>
<p>react16 æä¾›äº†<code>Fragment</code>ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ¸²æŸ“ä¸€ä¸ªå­å…ƒç´ åˆ—è¡¨ï¼Œå¹¶ä¸”ä¸åœ¨ DOM ä¸­å¢åŠ é¢å¤–èŠ‚ç‚¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;&gt;   // ä¹Ÿå¯ä»¥ç”¨ &lt;React.Fragment&gt;</span><br><span class="line">            &lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">        &lt;/&gt;   // ä¹Ÿå¯ä»¥ç”¨ &lt;/React.Fragment&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-React-memo"><a href="#2-React-memo" class="headerlink" title="2. React.memo"></a>2. React.memo</h2><p>ç”¨åœ¨å‡½æ•°ç»„ä»¶çš„æ€§èƒ½ä¼˜åŒ–ä¸Šï¼Œä¼šå¯¹å‡½æ•°ç»„ä»¶å®ç°å’Œ PureComponent ä¸€æ ·çš„åŠŸèƒ½ï¼Œå¯¹ props å’Œ prevProps åšä¸€æ¬¡ shallowEqual æµ…æ¯”è¾ƒã€‚</p>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">React.memo((props) =&gt; &#123;</span><br><span class="line">   // codes</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="3-React-lazy-amp-React-Suspense"><a href="#3-React-lazy-amp-React-Suspense" class="headerlink" title="3.React.lazy &amp; React.Suspense"></a>3.React.lazy &amp; React.Suspense</h2><p>å®ç° React çš„ Code Spliting å¯¹ React ä»£ç è¿›è¡Œæ‹†åŒ…ï¼Œæœ‰æ•ˆçš„å‡å°‘ä¸€æ¬¡æ€§åŠ è½½å¤ªå¤šä»£ç çš„é—®é¢˜ã€‚</p>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const IconDemo = lazy(() =&gt; import(&#x27;./icon&#x27;));</span><br><span class="line"></span><br><span class="line">&lt;Suspense fallback=&#123;&lt;div className=&quot;loading&quot;&gt;Loading...&lt;/div&gt;&#125;&gt;</span><br><span class="line">    &lt;Route path=&quot;/&quot; component=&#123;Home&#125; exact /&gt;</span><br><span class="line">    &lt;Route path=&quot;/icon&quot; component=&#123;IconDemo&#125; /&gt;</span><br><span class="line">&lt;/Suspense&gt;</span><br></pre></td></tr></table></figure>

<h1 id="å››ã€hooks"><a href="#å››ã€hooks" class="headerlink" title="å››ã€hooks"></a>å››ã€hooks</h1><p><img src="https://pic1.zhimg.com/80/v2-1a9c7f5ce089376d9371238930a0173c_720w.jpg" alt="image"></p>
<p>æˆ‘ä»¬çŸ¥é“ï¼ŒReact åˆ›å»ºç»„ä»¶æœ‰ 3 ä¸­æ–¹å¼ã€extends React.Component &#x2F; PureComponentã€‘ã€ã€React.createClassã€‘ï¼Œçº¯å‡½æ•°(æ— å‰¯ä½œç”¨ï¼Œåªæ¥å—å‚æ•°ï¼Œä¸å¯¹å‚æ•°åšä»»ä½•å¤„ç†)ã€‚</p>
<p>extends React.Componentã€React.createClass åˆ›å»ºçš„ç»„ä»¶ï¼Œæ‹¥æœ‰å®Œæˆ react å£°æ˜å‘¨æœŸã€çŠ¶æ€ï¼Œå¯ä»¥å¼€å‘è¾ƒä¸ºå¤æ‚çš„ç»„ä»¶ã€‚</p>
<p>è€Œï¼Œçº¯å‡½æ•°ç»„ä»¶ï¼Œåªèƒ½åšæ¸²æŸ“ï¼Œç»‘å®šçš„å±æ€§éƒ½æ˜¯é€šè¿‡ props å†³å®šçš„ã€‚æ²¡æœ‰å£°æ˜å‘¨æœŸã€çŠ¶æ€çš„æ¦‚å¿µã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function UserInfo (props) &#123;</span><br><span class="line">   // è¿™é‡Œå¯ä»¥å†™ä¸€äº›æ“ä½œ</span><br><span class="line">   return (</span><br><span class="line">       &lt;div&gt;&#123;this.props.name&#125;&lt;/div&gt;</span><br><span class="line">   )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>React v16.7.0-alpha å¯¹å‡½æ•°ç»„ä»¶åšäº†ä»¥ä¸‹æ‰©å±•ã€‚</p>
<h2 id="a-é’ˆå¯¹æ²¡æœ‰-state-åšçš„æ‰©å±•"><a href="#a-é’ˆå¯¹æ²¡æœ‰-state-åšçš„æ‰©å±•" class="headerlink" title="a. é’ˆå¯¹æ²¡æœ‰ state åšçš„æ‰©å±•"></a>a. é’ˆå¯¹æ²¡æœ‰ state åšçš„æ‰©å±•</h2><p>useStateï¼Œå¯ä»¥å°† state æ·»åŠ åˆ°å‡½æ•°ç»„ä»¶ä¸­ï¼Œå…è®¸å‡½æ•°ç»„ä»¶æ“ä½œ stateã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123;useState&#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">function UserInfo(props) &#123;</span><br><span class="line">    // useState æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼ˆå½“åšåˆå§‹çš„state)</span><br><span class="line">    // è¿”å›ä¸€ä¸ªåˆå§‹stateå€¼ï¼Œå’Œä¿®æ”¹stateçš„æ–¹æ³•</span><br><span class="line">    // å…è®¸å¤šæ¬¡ä½¿ç”¨ï¼Œå› æ­¤ä¼ ç»™useStateçš„å‚æ•°åº”è¯¥å°½å¯èƒ½æ˜¯ç®€å•çš„æ•°å­—ã€å­—ç¬¦ä¸²ç­‰ã€‚</span><br><span class="line">    let [count, setCount] = useState(0);</span><br><span class="line">    let [checked, setChecked] = useState(props.checked || false);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;Clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class="line">            &lt;Switch onClick=&#123;() =&gt; setChecked(!checked)&#125;&gt;&#123; checked ?  &#x27;å¼€&#x27; : &#x27;å…³&#x27; &#125;&lt;/Switch&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="b-é’ˆå¯¹æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­çš„æ‰©å±•"><a href="#b-é’ˆå¯¹æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­çš„æ‰©å±•" class="headerlink" title="b. é’ˆå¯¹æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­çš„æ‰©å±•"></a>b. é’ˆå¯¹æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­çš„æ‰©å±•</h2><p>useEffectï¼Œå¯ä»¥å°† componentDidMountã€componentDidUpdateã€componentWillUnmount é’©å­æ·»åŠ åˆ°å‡½æ•°ç»„ä»¶ä¸­ã€‚</p>
<p>æ³¨æ„ï¼šåŒºåˆ†æœ‰è¿”å›å€¼ï¼Œå’Œæ²¡æœ‰è¿”å›å€¼çš„æƒ…å†µ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">import &#123;useState, useEffect&#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">function UserInfo(props) &#123;</span><br><span class="line">    let [count, setCount] = useState(0);</span><br><span class="line">    let [checked, setChecked] = useState(props.checked || false);</span><br><span class="line"></span><br><span class="line">    function handleStatusChange(checked) &#123;</span><br><span class="line">        setChecked(checked);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è¿”å›å€¼çš„æƒ…å†µ</span><br><span class="line">    useEffect(() =&gt; &#123;</span><br><span class="line">        // ç»„ä»¶Mountæ˜¯æ·»åŠ ç›‘å¬ï¼ŒcomponentDidMount</span><br><span class="line">        // subscribeåŸç†æ˜¯ï¼Œcallbacks.push(handleStatusChange)</span><br><span class="line">        // å½“å€¼statuså€¼å˜åŒ–æ˜¯ï¼Œå¯¹éå†callbacksæ•°ç»„ï¼Œè°ƒç”¨å†…æ–¹æ³•</span><br><span class="line">        // callbacks.map((fn) =&gt; &#123; fn(status) &#125;);</span><br><span class="line">        ChatAPI.subscribeToFriendStatus(props.id, handleStatusChange);</span><br><span class="line"></span><br><span class="line">        // ç»„ä»¶é”€æ¯æ˜¯ç§»é™¤ç›‘å¬(componentWillUnmountï¼Œæ—¶æ‰§è¡Œreturnçš„å†…æ–¹æ³•)</span><br><span class="line">        // unsubscribeçš„åŸç†æ˜¯</span><br><span class="line">        // let index = callbacks.indexOf(fn);</span><br><span class="line">        // callbacks.splice(index, 1);</span><br><span class="line">        return function cleanup() &#123;</span><br><span class="line">            ChatAPI.unsubscribeFromFriendStatus(props.id, handleStatusChange);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // æ²¡æœ‰è¿”å›å€¼çš„æƒ…å†µ</span><br><span class="line">    useEffect(() =&gt; &#123;</span><br><span class="line">        // ç»„ä»¶Mountæ˜¯è°ƒç”¨ï¼ŒcomponentDidMountã€componentDidUpdate1</span><br><span class="line">        document.title = `Clicked $&#123;count&#125;`;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;Clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class="line">            &lt;Switch onClick=&#123;() =&gt; setChecked(!checked)&#125;&gt;&#123; checked ?  &#x27;å¼€&#x27; : &#x27;å…³&#x27; &#125;&lt;/Switch&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="c-one-more-thing"><a href="#c-one-more-thing" class="headerlink" title="c. one more thing"></a>c. one more thing</h2><p>å‡ºäºä¸è‡³äºæ»¥ç”¨çš„ç›®çš„ï¼Œreact æŒ‡å®šäº†ä¸€äº› hooks çš„ä½¿ç”¨è§„åˆ™ã€‚å¦‚å‘½åã€ä»£ç ä½ç½®ç­‰ã€‚å½“ç„¶è¿˜å¾ˆå‹å¥½çš„é™¤äº†ä»£ç æ£€æµ‹ eslint æ’ä»¶ï¼ˆ<a href="https://link.zhihu.com/?target=https://www.npmjs.com/package/eslint-plugin-react-hooks">eslint-plugin-react-hooks</a>ï¼‰ï¼Œå¯ä»¥æ£€æµ‹å¼€å‘è€…å†™çš„ hooks æ˜¯å¦åˆæ³•ã€‚</p>
<p>è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>åœ¨å‡½æ•°ç»„ä»¶çš„é¡¶å±‚ä½¿ç”¨ hooksï¼Œä¸è¦åœ¨å‡½æ•°ç»„ä»¶å†…çš„ forã€ifã€åŒ¿åå‡½æ•°å†…ä½¿ç”¨ useStateã€useEffectï¼Œè¿™å°†ä¼šæŠ¥é”™ã€‚</li>
<li>å…³äº hooks ç»„ä»¶çš„ä½¿ç”¨ï¼Œä½ å¯ä»¥åœ¨ react ç»„ä»¶å†…ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ custom Hooks å†…ä½¿ç”¨ã€‚<br>ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ hookï¼ˆcustom Hooksï¼‰å‘¢ï¼Ÿå°±æ˜¯å¯¹ hook çš„ä¸€ä¸ªå°è£…ï¼Œæˆ‘ä»¬å¯ä»¥å°è£…ç‰¹å®šåŠŸèƒ½çš„ hookï¼Œæ¯”å¦‚ï¼šç”¨æˆ·çŠ¶æ€çš„ hookã€åœ¨çº¿äººæ•°çš„ hookï¼Œè¿™æ ·åœ¨å…¶ä»–åœ°æ–¹ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚å»ºè®®ä»¥ useXxxxx çš„è§„èŒƒå‘½åã€‚</li>
</ul>
<p>å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">function useSetState (initial) &#123;</span><br><span class="line">    const [state, set] = useState(initial);</span><br><span class="line">    const setState = (patch) =&gt; &#123;</span><br><span class="line">        if (patch instanceof Function) &#123;</span><br><span class="line">            set((prevState) =&gt; &#123;</span><br><span class="line">                return Object.assign(state, patch(prevState));</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            Object.assign(state, patch);</span><br><span class="line">            set(state);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return [state, setState];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è°ƒç”¨</span><br><span class="line">const Demo = () =&gt; &#123;</span><br><span class="line">    const [state, setState] = useSetState(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;div&gt;&#123; JSON.stringify(state, null, 2) &#125;&lt;/div&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setState(&#123;foo: &#x27;bar&#x27;&#125;)&#125;&gt;foo&lt;/button&gt;</span><br><span class="line">            &lt;button</span><br><span class="line">                onClick=&#123;() =&gt; &#123;</span><br><span class="line">                    setState((prevState) =&gt; (&#123;</span><br><span class="line">                        count: (prevState.count || 0) + 1,</span><br><span class="line">                    &#125;));</span><br><span class="line">                &#125;&#125;</span><br><span class="line">            &gt;</span><br><span class="line">                count</span><br><span class="line">            &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Bruce Chen"
      src="/images/portal.jpg">
  <p class="site-author-name" itemprop="name">Bruce Chen</p>
  <div class="site-description" itemprop="description">It's better to burn out than to fade away.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">83</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1440429303&auto=1&height=66"></iframe>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jschentt" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;jschentt" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jschentt@gmail.com" title="E-Mail â†’ mailto:jschentt@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/BruceCh56742806" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;BruceCh56742806" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/jinsheng.chen.5439" title="Facebook â†’ https:&#x2F;&#x2F;www.facebook.com&#x2F;jinsheng.chen.5439" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>Facebook</a>
      </span>
  </div>





      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bruce Chen</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
