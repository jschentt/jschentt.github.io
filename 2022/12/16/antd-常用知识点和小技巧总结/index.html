<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="1 form 表单中 FormItem 的布局使用 getFieldDecorator 包裹的输入框或者 Select，必须是在最外层，也就是只有一层，否则，检验会一直不通过，所以，需要重新布局应该在 getFieldDecorator 的外层添加父节点，而不应该在里面。 例： 12345678910111213141516171819202122232425262728&lt;FormItem">
<meta property="og:type" content="article">
<meta property="og:title" content="antd 常用知识点和小技巧总结">
<meta property="og:url" content="http://example.com/2022/12/16/antd-%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%E7%82%B9%E5%92%8C%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="Bruce Chen&#39;s Blog">
<meta property="og:description" content="1 form 表单中 FormItem 的布局使用 getFieldDecorator 包裹的输入框或者 Select，必须是在最外层，也就是只有一层，否则，检验会一直不通过，所以，需要重新布局应该在 getFieldDecorator 的外层添加父节点，而不应该在里面。 例： 12345678910111213141516171819202122232425262728&lt;FormItem">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTNlNmVjMDRjNDg1YTA1MWMucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMTAyNS9mb3JtYXQvd2VicA?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTUyYzkwZGFlODk1ZmQ1NzYucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNTczL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWVlNmQ2YjBlMDU1NTIyNTgucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNTg4L2Zvcm1hdC93ZWJw?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWMwNjAwNDJmZWQ3OWE3MmMucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMTIwMC9mb3JtYXQvd2VicA?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWE5OTcyZWQxNjhkY2MwYTQucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNzU3L2Zvcm1hdC93ZWJw?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTc4YmY4NDZlOGZjNTFjOWIucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMTIwMC9mb3JtYXQvd2VicA?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTVhZDlkYTIxNGY3YWZmZTEucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMzQ1L2Zvcm1hdC93ZWJw?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWRhOTIwYzUzMzk4N2FkZDIucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMzQyL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWEzZDhhNDljYzdlMGY0ZWIucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNjgwL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTFiZWYyNjBiMzY0NTkwYjQucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNTgxL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png">
<meta property="article:published_time" content="2022-12-16T06:45:48.000Z">
<meta property="article:modified_time" content="2022-12-16T06:48:44.167Z">
<meta property="article:author" content="Bruce Chen">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTNlNmVjMDRjNDg1YTA1MWMucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMTAyNS9mb3JtYXQvd2VicA?x-oss-process=image/format,png">

<link rel="canonical" href="http://example.com/2022/12/16/antd-%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%E7%82%B9%E5%92%8C%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>antd 常用知识点和小技巧总结 | Bruce Chen's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband">
    <a target="_blank" rel="noopener" href="https://github.com/jschentt" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    </div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Bruce Chen's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">quick notes</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">7</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">83</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/antd-%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%E7%82%B9%E5%92%8C%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          antd 常用知识点和小技巧总结
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 14:45:48 / 修改时间：14:48:44" itemprop="dateCreated datePublished" datetime="2022-12-16T14:45:48+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AFUI%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">前端UI框架</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="1-form-表单中-FormItem-的布局"><a href="#1-form-表单中-FormItem-的布局" class="headerlink" title="1 form 表单中 FormItem 的布局"></a>1 form 表单中 FormItem 的布局</h2><p>使用 getFieldDecorator 包裹的输入框或者 Select，必须是在最外层，也就是只有一层，否则，检验会一直不通过，所以，需要重新布局应该在 getFieldDecorator 的外层添加父节点，而不应该在里面。</p>
<p><strong>例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;FormItem</span><br><span class="line">  &#123;...formItemLayout&#125;</span><br><span class="line">  label=&quot;所属应用&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;getFieldDecorator(&#x27;apiwgAppName&#x27;, &#123;</span><br><span class="line">      rules: [&#123; required: false, message: &#x27;请选择&#x27; &#125;],</span><br><span class="line">    initialValue: apiwgAppName || &quot;&quot;</span><br><span class="line">    &#125;)(</span><br><span class="line">      &lt;Input disabled=&#123;this.store.data.apiId ? true : false&#125;</span><br><span class="line">        className=&quot;control-special&quot; readOnly style=&#123;&#123; width: &quot;70%&quot; &#125;&#125;</span><br><span class="line">        onClick=&#123;this.showModal.bind(this, &quot;apiwgApp&quot;)&#125; /&gt;</span><br><span class="line">    )&#125;</span><br><span class="line">    &lt;Button className=&quot;btn-modal&quot; type=&quot;primary&quot; onClick=&#123;this.showModal.bind(this, &quot;apiwgApp&quot;)&#125;</span><br><span class="line">      disabled=&#123;this.store.data.apiId ? true : false&#125;</span><br><span class="line">    &gt;选择所属应用</span><br><span class="line">    &lt;/Button&gt;</span><br><span class="line">    &lt;a</span><br><span class="line">      style=&#123;&#123; marginLeft: &#x27;8px&#x27; &#125;&#125;</span><br><span class="line">      onClick=&#123;this.openNewAppDlg.bind(this)&#125;</span><br><span class="line">      className=&#123;`api-add $&#123;</span><br><span class="line">        this.store.data.apiId ? &#x27;disabled&#x27; : &#x27;&#x27;</span><br><span class="line">        &#125;`&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      +新增应用</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/FormItem&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-form-表单，FormItem-的-rules-中新增-validator，实时请求校验"><a href="#2-form-表单，FormItem-的-rules-中新增-validator，实时请求校验" class="headerlink" title="2 form 表单，FormItem 的 rules 中新增 validator，实时请求校验"></a>2 form 表单，FormItem 的 rules 中新增 validator，实时请求校验</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;FormItem</span><br><span class="line">  labelCol=&#123;&#123; span: 8 &#125;&#125;</span><br><span class="line">  wrapperCol=&#123;&#123; span: 15 &#125;&#125;</span><br><span class="line">  label=&quot;菜单名称&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;form.getFieldDecorator(&#x27;menuName&#x27;, &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; required: true, message: &#x27;菜单名称不能为空&#x27; &#125;,</span><br><span class="line">      &#123; type: &#x27;string&#x27;, max: 30, message: &#x27;菜单名称过长&#x27; &#125;,</span><br><span class="line">      &#123; validator: this.handleCheckName &#125;,</span><br><span class="line">      &#123; whitespace: true, message: &#x27;请输入非空白内容&#x27; &#125;</span><br><span class="line">    ],</span><br><span class="line">    initialValue: this.props.menuSysData.menuName,</span><br><span class="line">  &#125;)(</span><br><span class="line">    &lt;Input</span><br><span class="line">      // placeholder=&quot;请输入菜单名称&quot;</span><br><span class="line">      disabled=&#123;disableFlag&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/FormItem&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 实时校验</span><br><span class="line">  handleCheckName = (rule, value, callback) =&gt; &#123;</span><br><span class="line">    const &#123; checkName, actionType &#125; = this.state;</span><br><span class="line">    if (!this.trim(value) || (checkName &amp;&amp; actionType === &#x27;M&#x27; &amp;&amp; this.trim(value) === checkName)) &#123;</span><br><span class="line">      callback();</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">    let params = &#123;</span><br><span class="line">      menuName: value,</span><br><span class="line">      state: &quot;00A&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">    MenuSysService.checkMenuName(params).then(result =&gt; &#123;</span><br><span class="line">      if (!result || !result.resultObject) &#123;</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      let code = result.resultObject.code;</span><br><span class="line">      if (code &amp;&amp; code &gt; 0) &#123;</span><br><span class="line">        callback(&#x27;系统名称已存在！&#x27;);</span><br><span class="line">      &#125;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-利用-validator-和正则，验证中文"><a href="#3-利用-validator-和正则，验证中文" class="headerlink" title="3 利用 validator 和正则，验证中文"></a>3 利用 validator 和正则，验证中文</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;FormItem</span><br><span class="line">        hasFeedback=&#123;!disableFlag&#125;</span><br><span class="line">        labelCol=&#123;&#123; span: 6 &#125;&#125;</span><br><span class="line">        wrapperCol=&#123;&#123; span: 15 &#125;&#125;</span><br><span class="line">        label=&quot;账号&quot; &gt;</span><br><span class="line">        &#123;form.getFieldDecorator(&#x27;userCode&#x27;, &#123;</span><br><span class="line">          initialValue: &#x27;&#x27;,</span><br><span class="line">          rules: [</span><br><span class="line">            &#123; required: !disableFlag, validator: this.usercodeValidator &#125;,</span><br><span class="line">            &#123; type: &#x27;string&#x27;, max: 30, message: &#x27;账号过长&#x27; &#125;,</span><br><span class="line">            &#123; whitespace: true, message: &#x27;内容不能为空&#x27; &#125;</span><br><span class="line">          ],</span><br><span class="line">        &#125;)(</span><br><span class="line">          &lt;Input placeholder=&quot;请输入账号&quot; disabled=&#123;account&#125; maxLength=&quot;30&quot; autoComplete=&quot;false&quot; /&gt;)&#125;</span><br><span class="line">&lt;/FormItem&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">usercodeValidator = (rule, value, callback) =&gt; &#123;</span><br><span class="line">    const &#123; userData &#125; = this.props;</span><br><span class="line">    if (!value) &#123;</span><br><span class="line">      callback(&#x27;内容不能为空&#x27;);</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  // ！！！中文验证</span><br><span class="line">    const reg = /[\u4E00-\u9FA5]&#123;1,4&#125;/;   /*定义验证表达式*/</span><br><span class="line">    if (reg.test(value)) &#123; /*进行验证*/</span><br><span class="line">      callback(&#x27;账号不能为中文&#x27;);</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    if (userData.userCode === value) &#123;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">      let params = &#123;</span><br><span class="line">        userCode: value + &quot;&quot;,  // 查一下有没有这个编码</span><br><span class="line">        useState: &#x27;10301&#x27;</span><br><span class="line">      &#125;;</span><br><span class="line">      SysUserMgService.checkUserCode(params).then(result =&gt; &#123;</span><br><span class="line">        if (!result || result.code !== &#x27;0&#x27;) &#123;</span><br><span class="line">          callback(result.message);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        if (result.resultObject &amp;&amp; result.resultObject.num !== 0) &#123;</span><br><span class="line">          callback(&#x27;该账号已存在&#x27;);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-form-validateFields-直接获取表单的值"><a href="#4-form-validateFields-直接获取表单的值" class="headerlink" title="4 form.validateFields 直接获取表单的值"></a>4 form.validateFields 直接获取表单的值</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">this.props.form.validateFields((err, fieldsValue) =&gt; &#123;</span><br><span class="line">     if (err) return;</span><br><span class="line">     this.handleSubmit(fieldsValue);</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="5-form-表单提交-htmlType，改为-onClick"><a href="#5-form-表单提交-htmlType，改为-onClick" class="headerlink" title="5 form 表单提交 htmlType，改为 onClick"></a>5 form 表单提交 htmlType，改为 onClick</h2><p>说明：因为之前遇到过使用 htmlType 提交表单会有问题，但是改为 onClick 后，就没问题了，所以，也记录一下。<br>htmlType 是官网使用的方式，具体问题本人当时忘记截个图了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;Form layout=&quot;inline&quot; onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">        &lt;FormItem</span><br><span class="line">          validateStatus=&#123;userNameError ? &#x27;error&#x27; : &#x27;&#x27;&#125;</span><br><span class="line">          help=&#123;userNameError || &#x27;&#x27;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;getFieldDecorator(&#x27;userName&#x27;, &#123;</span><br><span class="line">            rules: [&#123; required: true, message: &#x27;Please input your username!&#x27; &#125;],</span><br><span class="line">          &#125;)(</span><br><span class="line">            &lt;Input prefix=&#123;&lt;Icon type=&quot;user&quot; style=&#123;&#123; color: &#x27;rgba(0,0,0,.25)&#x27; &#125;&#125; /&gt;&#125; placeholder=&quot;Username&quot; /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;/FormItem&gt;</span><br><span class="line">        &lt;FormItem</span><br><span class="line">          validateStatus=&#123;passwordError ? &#x27;error&#x27; : &#x27;&#x27;&#125;</span><br><span class="line">          help=&#123;passwordError || &#x27;&#x27;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;getFieldDecorator(&#x27;password&#x27;, &#123;</span><br><span class="line">            rules: [&#123; required: true, message: &#x27;Please input your Password!&#x27; &#125;],</span><br><span class="line">          &#125;)(</span><br><span class="line">            &lt;Input prefix=&#123;&lt;Icon type=&quot;lock&quot; style=&#123;&#123; color: &#x27;rgba(0,0,0,.25)&#x27; &#125;&#125; /&gt;&#125; type=&quot;password&quot; placeholder=&quot;Password&quot; /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;/FormItem&gt;</span><br><span class="line">        &lt;FormItem&gt;</span><br><span class="line">          &lt;Button</span><br><span class="line">            type=&quot;primary&quot;</span><br><span class="line">            htmlType=&quot;submit&quot;</span><br><span class="line">            disabled=&#123;hasErrors(getFieldsError())&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            Log in</span><br><span class="line">          &lt;/Button&gt;</span><br><span class="line">        &lt;/FormItem&gt;</span><br><span class="line">      &lt;/Form&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 改变后：</span><br><span class="line">&lt;Form layout=&quot;inline&quot; &gt;</span><br><span class="line">        &lt;FormItem</span><br><span class="line">          validateStatus=&#123;userNameError ? &#x27;error&#x27; : &#x27;&#x27;&#125;</span><br><span class="line">          help=&#123;userNameError || &#x27;&#x27;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;getFieldDecorator(&#x27;userName&#x27;, &#123;</span><br><span class="line">            rules: [&#123; required: true, message: &#x27;Please input your username!&#x27; &#125;],</span><br><span class="line">          &#125;)(</span><br><span class="line">            &lt;Input prefix=&#123;&lt;Icon type=&quot;user&quot; style=&#123;&#123; color: &#x27;rgba(0,0,0,.25)&#x27; &#125;&#125; /&gt;&#125; placeholder=&quot;Username&quot; /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;/FormItem&gt;</span><br><span class="line">        &lt;FormItem</span><br><span class="line">          validateStatus=&#123;passwordError ? &#x27;error&#x27; : &#x27;&#x27;&#125;</span><br><span class="line">          help=&#123;passwordError || &#x27;&#x27;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;getFieldDecorator(&#x27;password&#x27;, &#123;</span><br><span class="line">            rules: [&#123; required: true, message: &#x27;Please input your Password!&#x27; &#125;],</span><br><span class="line">          &#125;)(</span><br><span class="line">            &lt;Input prefix=&#123;&lt;Icon type=&quot;lock&quot; style=&#123;&#123; color: &#x27;rgba(0,0,0,.25)&#x27; &#125;&#125; /&gt;&#125; type=&quot;password&quot; placeholder=&quot;Password&quot; /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;/FormItem&gt;</span><br><span class="line">        &lt;FormItem&gt;</span><br><span class="line">          &lt;Button</span><br><span class="line">            type=&quot;primary&quot;</span><br><span class="line">            disabled=&#123;hasErrors(getFieldsError())&#125;</span><br><span class="line">            onClick=&#123;() =&gt; this.handleSubmit()&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            Log in</span><br><span class="line">          &lt;/Button&gt;</span><br><span class="line">        &lt;/FormItem&gt;</span><br><span class="line">      &lt;/Form&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-Input-组件，利用-maxLength-属性，限制最大输入内容长度"><a href="#6-Input-组件，利用-maxLength-属性，限制最大输入内容长度" class="headerlink" title="6 Input 组件，利用 maxLength 属性，限制最大输入内容长度"></a>6 Input 组件，利用 maxLength 属性，限制最大输入内容长度</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Input</span><br><span class="line">  placeholder=&quot;请输入账号&quot;</span><br><span class="line">  disabled=&#123;account&#125;</span><br><span class="line">  maxLength=&quot;30&quot;</span><br><span class="line">  autoComplete=&quot;off&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<h2 id="7-InputNumber-只能输入数字："><a href="#7-InputNumber-只能输入数字：" class="headerlink" title="7 InputNumber 只能输入数字："></a>7 InputNumber 只能输入数字：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;InputNumber</span><br><span class="line">     formatter=&#123;value =&gt; value&#125;</span><br><span class="line">     parser=&#123;value =&gt; parseInt(value) || &#x27;&#x27;&#125;</span><br><span class="line">     style=&#123;&#123; width: &#x27;100%&#x27; &#125;&#125;</span><br><span class="line">     step=&#123;1&#125;</span><br><span class="line">     onChange=&#123;(val) =&gt; this.onChangeIpt(1, val)&#125;</span><br><span class="line"> /&gt;</span><br></pre></td></tr></table></figure>

<h2 id="8-menu-实现回缩效果注意点"><a href="#8-menu-实现回缩效果注意点" class="headerlink" title="8 menu 实现回缩效果注意点"></a>8 menu 实现回缩效果注意点</h2><p>说明：menu 必须放在 Sider 中，才能实现缩回去的，这个有特定的布局。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sider</span><br><span class="line">  style=&#123;&#123; background: &#x27;#1D2023&#x27;, height: &#x27;100%&#x27; &#125;&#125;</span><br><span class="line">  trigger=&#123;null&#125;</span><br><span class="line">  collapsible</span><br><span class="line">  collapsed=&#123;this.state.collapsed&#125;</span><br><span class="line">  width=&#123;140&#125;</span><br><span class="line">  collapsedWidth=&#123;40&#125;</span><br><span class="line">&gt;</span><br><span class="line">    &lt;BaseMenu</span><br><span class="line">       toggle=&#123;this.toggle&#125;</span><br><span class="line">       collapsed=&#123;this.state.collapsed&#125;</span><br><span class="line">       history=&#123;history&#125;</span><br><span class="line">       location=&#123;location&#125;</span><br><span class="line">     /&gt;</span><br><span class="line">&lt;/Sider&gt;</span><br></pre></td></tr></table></figure>

<h2 id="9-左侧菜单调整宽度设置"><a href="#9-左侧菜单调整宽度设置" class="headerlink" title="9 左侧菜单调整宽度设置"></a>9 左侧菜单调整宽度设置</h2><p>说明：通过在 Sider 组件，设置 width，调整菜单的宽度，通过设置 collapsedWidth，调整缩进的宽度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sider</span><br><span class="line">  style=&#123;&#123; background: &#x27;#1D2023&#x27;, height: &#x27;100%&#x27; &#125;&#125;</span><br><span class="line">  trigger=&#123;null&#125;</span><br><span class="line">  collapsible</span><br><span class="line">  collapsed=&#123;this.state.collapsed&#125;</span><br><span class="line">  width=&#123;140&#125;</span><br><span class="line">  collapsedWidth=&#123;40&#125;</span><br><span class="line">&gt;</span><br><span class="line">    &lt;BaseMenu</span><br><span class="line">       toggle=&#123;this.toggle&#125;</span><br><span class="line">       collapsed=&#123;this.state.collapsed&#125;</span><br><span class="line">       history=&#123;history&#125;</span><br><span class="line">       location=&#123;location&#125;</span><br><span class="line">     /&gt;</span><br><span class="line">&lt;/Sider&gt;</span><br></pre></td></tr></table></figure>

<h2 id="10-表格-Columns-字段-id-页面不展示情况"><a href="#10-表格-Columns-字段-id-页面不展示情况" class="headerlink" title="10 表格 Columns 字段 id 页面不展示情况"></a>10 表格 Columns 字段 id 页面不展示情况</h2><p>说明：一般而言，表格 Columns 字段 id 是在界面不展示的，但是，对于有些逻辑的处理，又是需要的，可以使用相应样式隐藏的处理方式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">常规展示的情况：</span><br><span class="line">&#123;</span><br><span class="line">  title: &#x27;序号&#x27;,</span><br><span class="line">  dataIndex: &#x27;algoId&#x27;,</span><br><span class="line">  key: &#x27;algoId&#x27;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">不展示id字段：</span><br><span class="line">&#123;</span><br><span class="line">  title: &#x27;&#x27;,</span><br><span class="line">  dataIndex: &#x27;algoId&#x27;,</span><br><span class="line">  key: &#x27;algoId&#x27;,</span><br><span class="line">  width: 0,</span><br><span class="line">  render: item =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;span style=&#123;&#123; display: &#x27;none&#x27; &#125;&#125; title=&#123;item&#125;&gt;</span><br><span class="line">        &#123;item&#125;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="11-自定义-Modal"><a href="#11-自定义-Modal" class="headerlink" title="11 自定义 Modal"></a>11 自定义 Modal</h2><p>查看元素可知，Modal 是在界面构建完成之后，由 js 控制，动态的添加，所以想事先获取 ant-modal-body 中 DOM 元素的节点是不可能的，但是一般情况也不会去获取它。<br>自定义 Modal，解决上述的问题。</p>
<p><strong>关键代码</strong>：</p>
<p>说明：</p>
<p>1：因为我们使用的是 antd，所以，下面的样式是不需要引入的。这个跟 antd 的 Modal 样式重复。</p>
<p>2：Modal 的隐藏和显示，是通过控制 class 为 ant-modal-mask 和 ant-modal-wrap 两个 div 的显示和隐藏。</p>
<ul>
<li>通过给 ant-modal-mask 的 div，添加另外一个 className：ant-modal-mask-hidden，来控制其隐藏，也可以通过 display 来控制。</li>
<li>通过给 ant-modal-wrap 设置行内样式 display: none，来控制其隐藏。不过，也可以使用 className，随便都可以。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">界面布局：</span><br><span class="line"></span><br><span class="line">&lt;div className=&quot;ant-modal-mask&quot; &gt;&lt;/div&gt;</span><br><span class="line">&lt;div tabIndex=&quot;-1&quot; className=&quot;ant-modal-wrap &quot; role=&quot;dialog&quot; aria-labelledby=&quot;rcDialogTitle0&quot; style=&#123;&#123;&#125;&#125;&gt;</span><br><span class="line">  &lt;div role=&quot;document&quot; className=&quot;ant-modal&quot; style=&#123;&#123; width: &#x27;920px&#x27; &#125;&#125;&gt;</span><br><span class="line">    &lt;div className=&quot;ant-modal-content&quot;&gt;</span><br><span class="line">      &lt;div className=&quot;ant-modal-header&quot;&gt;</span><br><span class="line">       ...</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div className=&quot;ant-modal-body&quot; style=&#123;&#123; background: &#x27;rgb(16, 16, 17)&#x27; &#125;&#125;&gt;</span><br><span class="line">        ...</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div tabIndex=&quot;0&quot; style=&#123;&#123; width: &#x27;0px&#x27;, height: &#x27;0px&#x27;, overflow: &#x27;hidden&#x27; &#125;&#125;&gt;</span><br><span class="line">    sentinel</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">样式：</span><br><span class="line">.ant-modal-mask &#123; // 遮罩层</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  background-color: rgba(0, 0, 0, 0.65);</span><br><span class="line">  height: 100%;</span><br><span class="line">  z-index: 1000;</span><br><span class="line">  filter: alpha(opacity=50);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-modal-wrap &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  overflow: auto;</span><br><span class="line">  top: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  z-index: 1000;</span><br><span class="line">  -webkit-overflow-scrolling: touch;</span><br><span class="line">  outline: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-modal &#123;</span><br><span class="line">  font-family: &quot;Chinese Quote&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">  font-variant: tabular-nums;</span><br><span class="line">  line-height: 1.5;</span><br><span class="line">  color: rgba(0, 0, 0, 0.65);</span><br><span class="line">  -webkit-box-sizing: border-box;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  margin: 0;</span><br><span class="line">  padding: 0;</span><br><span class="line">  list-style: none;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 920px;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  top: 100px;</span><br><span class="line">  padding-bottom: 24px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-Select-组件清除选框内容"><a href="#12-Select-组件清除选框内容" class="headerlink" title="12 Select 组件清除选框内容"></a>12 Select 组件清除选框内容</h2><p>通过给 Select 组件新增 allowClear 属性。注意：allowClear 也会触发 onChange 方法，所以，也要单独处理一下，因为 value 和 element 为 undefined。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Select &#123;...this.props&#125; placeholder=&quot;请选择&quot; allowClear=&#123;true&#125; &gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/Select&gt;</span><br></pre></td></tr></table></figure>

<h2 id="13-antd、mobx-注入的顺序"><a href="#13-antd、mobx-注入的顺序" class="headerlink" title="13 antd、mobx @注入的顺序"></a>13 antd、mobx @注入的顺序</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTNlNmVjMDRjNDg1YTA1MWMucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMTAyNS9mb3JtYXQvd2VicA?x-oss-process=image/format,png" alt="image"></p>
<p>顺序</p>
<h2 id="14-解决-table-组件，-key-警告"><a href="#14-解决-table-组件，-key-警告" class="headerlink" title="14 解决 table 组件， key 警告"></a>14 解决 table 组件， key 警告</h2><p>一般都是使用 rowkey 方法一解决（后台数据要保证没有重复）；</p>
<h3 id="14-1-方法一：一般都是使用-rowkey-解决（后台数据要保证没有重复）；"><a href="#14-1-方法一：一般都是使用-rowkey-解决（后台数据要保证没有重复）；" class="headerlink" title="14.1 方法一：一般都是使用 rowkey 解决（后台数据要保证没有重复）；"></a>14.1 方法一：一般都是使用 rowkey 解决（后台数据要保证没有重复）；</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTUyYzkwZGFlODk1ZmQ1NzYucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNTczL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png" alt="image"></p>
<p>使用 rowKey</p>
<h3 id="14-2-方法二：dataSource-数据新增-key"><a href="#14-2-方法二：dataSource-数据新增-key" class="headerlink" title="14.2 方法二：dataSource 数据新增 key"></a>14.2 方法二：dataSource 数据新增 key</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWVlNmQ2YjBlMDU1NTIyNTgucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNTg4L2Zvcm1hdC93ZWJw?x-oss-process=image/format,png" alt="image"></p>
<p>dataSource 数据新增 key</p>
<h2 id="15-Form-create-方式"><a href="#15-Form-create-方式" class="headerlink" title="15 Form.create 方式"></a>15 Form.create 方式</h2><h3 id="15-1-方式一：-注解"><a href="#15-1-方式一：-注解" class="headerlink" title="15.1 方式一：@注解"></a>15.1 方式一：@注解</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Form.create(&#123;&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="15-2-方式二：高阶写法"><a href="#15-2-方式二：高阶写法" class="headerlink" title="15.2 方式二：高阶写法"></a>15.2 方式二：高阶写法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export default (Form.create(&#123;&#125;)(APP));</span><br></pre></td></tr></table></figure>

<h2 id="16-Form-initialValue-值编辑后，表单的值不改变问题"><a href="#16-Form-initialValue-值编辑后，表单的值不改变问题" class="headerlink" title="16 Form initialValue 值编辑后，表单的值不改变问题"></a>16 Form initialValue 值编辑后，表单的值不改变问题</h2><h3 id="16-1-方法一"><a href="#16-1-方法一" class="headerlink" title="16.1 方法一"></a>16.1 方法一</h3><p>其实，只要编辑成功后，回调调用 form.resetFields()，就可以了，如果<br>是使用 modal 框弹出的表单，就可以直接使用 destroyOnClose &#x3D; {true} 属性。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import &#123; Input, Modal, Form &#125; from &#x27;antd&#x27;;</span><br><span class="line">import styles from &#x27;./UserModal.less&#x27;;</span><br><span class="line"></span><br><span class="line">const FormItem = Form.Item;</span><br><span class="line"></span><br><span class="line">const UserModal = (&#123; currentItem, dispatch, form, visible &#125;) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  function handleOk() &#123;</span><br><span class="line">    form.validateFields((err, fieldsValue) =&gt; &#123;</span><br><span class="line">      if (err) return;</span><br><span class="line">      dispatch(&#123;</span><br><span class="line">        type: &#x27;demo/update&#x27;,</span><br><span class="line">        payload: &#123;</span><br><span class="line">          currentItem: fieldsValue</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function handleCancel() &#123;</span><br><span class="line">    dispatch(&#123;</span><br><span class="line">      type: &#x27;demo/hideModal&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const formItemLayout = &#123;</span><br><span class="line">    labelCol: &#123;</span><br><span class="line">      xs: &#123; span: 24 &#125;,</span><br><span class="line">      sm: &#123; span: 4 &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    wrapperCol: &#123;</span><br><span class="line">      xs: &#123; span: 24 &#125;,</span><br><span class="line">      sm: &#123; span: 20 &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const &#123; getFieldDecorator &#125; = form;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&#123;styles.root&#125;&gt;</span><br><span class="line">      &lt;Modal</span><br><span class="line">        title=&quot;编辑&quot;</span><br><span class="line">        visible=&#123;visible&#125;</span><br><span class="line">        onOk=&#123;() =&gt; handleOk()&#125;</span><br><span class="line">        onCancel=&#123;() =&gt; handleCancel()&#125;</span><br><span class="line">        destroyOnClose=&#123;true&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;Form&gt;</span><br><span class="line">          &lt;FormItem</span><br><span class="line">            &#123;...formItemLayout&#125;</span><br><span class="line">            label=&quot;用户名&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;getFieldDecorator(&#x27;name&#x27;, &#123;</span><br><span class="line">              initialValue: currentItem.name,</span><br><span class="line">              rules: [&#123;</span><br><span class="line">                required: true, message: &#x27;Please input your name!&#x27;,</span><br><span class="line">              &#125;],</span><br><span class="line">            &#125;)(</span><br><span class="line">              &lt;Input placeholder=&quot;请输入用户名&quot; /&gt;</span><br><span class="line">            )&#125;</span><br><span class="line">          &lt;/FormItem&gt;</span><br><span class="line">          &lt;FormItem</span><br><span class="line">            &#123;...formItemLayout&#125;</span><br><span class="line">            label=&quot;年龄&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;getFieldDecorator(&#x27;age&#x27;, &#123;</span><br><span class="line">              initialValue: currentItem.age,</span><br><span class="line">              rules: [&#123;</span><br><span class="line">                required: true, message: &#x27;Please input your age!&#x27;,</span><br><span class="line">              &#125;],</span><br><span class="line">            &#125;)(</span><br><span class="line">              &lt;Input placeholder=&quot;请输入年龄&quot; /&gt;</span><br><span class="line">            )&#125;</span><br><span class="line">          &lt;/FormItem&gt;</span><br><span class="line">          &lt;FormItem</span><br><span class="line">            &#123;...formItemLayout&#125;</span><br><span class="line">            label=&quot;地址&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;getFieldDecorator(&#x27;address&#x27;, &#123;</span><br><span class="line">              initialValue: currentItem.address,</span><br><span class="line">              rules: [&#123;</span><br><span class="line">                required: true, message: &#x27;Please input your address!&#x27;,</span><br><span class="line">              &#125;],</span><br><span class="line">            &#125;)(</span><br><span class="line">              &lt;Input placeholder=&quot;请输入地址&quot; /&gt;</span><br><span class="line">            )&#125;</span><br><span class="line">          &lt;/FormItem&gt;</span><br><span class="line">        &lt;/Form&gt;</span><br><span class="line">      &lt;/Modal&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default (Form.create(&#123;&#125;)(UserModal));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">主要代码：destroyOnClose=&#123;true&#125;</span><br><span class="line">&lt;Modal</span><br><span class="line">        title=&quot;编辑&quot;</span><br><span class="line">        visible=&#123;visible&#125;</span><br><span class="line">        onOk=&#123;() =&gt; handleOk()&#125;</span><br><span class="line">        onCancel=&#123;() =&gt; handleCancel()&#125;</span><br><span class="line">        destroyOnClose=&#123;true&#125;</span><br><span class="line">      &gt;</span><br><span class="line">...</span><br><span class="line">&lt;/Modal&gt;</span><br></pre></td></tr></table></figure>

<h3 id="16-2-方法二"><a href="#16-2-方法二" class="headerlink" title="16.2 方法二"></a>16.2 方法二</h3><p>如果是 class 类，可以使用钩子。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">componentDidUpdate = (prevProps, prevState) =&gt; &#123;</span><br><span class="line">  if (!prevProps.visible) &#123;</span><br><span class="line">    prevProps.form.resetFields();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>代码参考：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import &#123; Input, Modal, Form &#125; from &#x27;antd&#x27;;</span><br><span class="line">import styles from &#x27;./UserModal.less&#x27;;</span><br><span class="line"></span><br><span class="line">const FormItem = Form.Item;</span><br><span class="line"></span><br><span class="line">@Form.create(&#123;&#125;)</span><br><span class="line">class UserModal extends React.PureComponent &#123;</span><br><span class="line"></span><br><span class="line">  componentDidUpdate = (prevProps, prevState) =&gt; &#123;</span><br><span class="line">    if (!prevProps.visible) &#123;</span><br><span class="line">      prevProps.form.resetFields();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleOk = () =&gt; &#123;</span><br><span class="line">    const &#123; dispatch, form &#125; = this.props;</span><br><span class="line">    form.validateFields((err, fieldsValue) =&gt; &#123;</span><br><span class="line">      if (err) return;</span><br><span class="line">      dispatch(&#123;</span><br><span class="line">        type: &#x27;demo/update&#x27;,</span><br><span class="line">        payload: &#123;</span><br><span class="line">          currentItem: fieldsValue</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleCancel = () =&gt; &#123;</span><br><span class="line">    const &#123; dispatch &#125; = this.props;</span><br><span class="line">    dispatch(&#123;</span><br><span class="line">      type: &#x27;demo/hideModal&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; currentItem, form, visible &#125; = this.props;</span><br><span class="line">    const formItemLayout = &#123;</span><br><span class="line">      labelCol: &#123;</span><br><span class="line">        xs: &#123; span: 24 &#125;,</span><br><span class="line">        sm: &#123; span: 4 &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      wrapperCol: &#123;</span><br><span class="line">        xs: &#123; span: 24 &#125;,</span><br><span class="line">        sm: &#123; span: 20 &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    const &#123; getFieldDecorator &#125; = form;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&#123;styles.root&#125;&gt;</span><br><span class="line">        &lt;Modal</span><br><span class="line">          title=&quot;编辑&quot;</span><br><span class="line">          visible=&#123;visible&#125;</span><br><span class="line">          onOk=&#123;() =&gt; this.handleOk()&#125;</span><br><span class="line">          onCancel=&#123;() =&gt; this.handleCancel()&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Form&gt;</span><br><span class="line">            &lt;FormItem</span><br><span class="line">              &#123;...formItemLayout&#125;</span><br><span class="line">              label=&quot;用户名&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              &#123;getFieldDecorator(&#x27;name&#x27;, &#123;</span><br><span class="line">                initialValue: currentItem.name,</span><br><span class="line">                rules: [&#123;</span><br><span class="line">                  required: true, message: &#x27;Please input your name!&#x27;,</span><br><span class="line">                &#125;],</span><br><span class="line">              &#125;)(</span><br><span class="line">                &lt;Input placeholder=&quot;请输入用户名&quot; /&gt;</span><br><span class="line">              )&#125;</span><br><span class="line">            &lt;/FormItem&gt;</span><br><span class="line">            &lt;FormItem</span><br><span class="line">              &#123;...formItemLayout&#125;</span><br><span class="line">              label=&quot;年龄&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              &#123;getFieldDecorator(&#x27;age&#x27;, &#123;</span><br><span class="line">                initialValue: currentItem.age,</span><br><span class="line">                rules: [&#123;</span><br><span class="line">                  required: true, message: &#x27;Please input your age!&#x27;,</span><br><span class="line">                &#125;],</span><br><span class="line">              &#125;)(</span><br><span class="line">                &lt;Input placeholder=&quot;请输入年龄&quot; /&gt;</span><br><span class="line">              )&#125;</span><br><span class="line">            &lt;/FormItem&gt;</span><br><span class="line">            &lt;FormItem</span><br><span class="line">              &#123;...formItemLayout&#125;</span><br><span class="line">              label=&quot;地址&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              &#123;getFieldDecorator(&#x27;address&#x27;, &#123;</span><br><span class="line">                initialValue: currentItem.address,</span><br><span class="line">                rules: [&#123;</span><br><span class="line">                  required: true, message: &#x27;Please input your address!&#x27;,</span><br><span class="line">                &#125;],</span><br><span class="line">              &#125;)(</span><br><span class="line">                &lt;Input placeholder=&quot;请输入地址&quot; /&gt;</span><br><span class="line">              )&#125;</span><br><span class="line">            &lt;/FormItem&gt;</span><br><span class="line">          &lt;/Form&gt;</span><br><span class="line">        &lt;/Modal&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default UserModal;</span><br><span class="line">// export default (Form.create(&#123;&#125;)(UserModal));</span><br></pre></td></tr></table></figure>

<h2 id="17-Modal-是否显示-footer-底部按钮"><a href="#17-Modal-是否显示-footer-底部按钮" class="headerlink" title="17 Modal 是否显示 footer 底部按钮"></a>17 Modal 是否显示 footer 底部按钮</h2><p>一般应用场景，详情不需要底部按钮，新增和修改需要。<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWMwNjAwNDJmZWQ3OWE3MmMucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMTIwMC9mb3JtYXQvd2VicA?x-oss-process=image/format,png" alt="image"></p>
<p>api</p>
<p><strong>解决：</strong></p>
<p>通过父组件传递一个空的字符串或者 {footer: null} 给 Modal 组件进行属性解构。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWE5OTcyZWQxNjhkY2MwYTQucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNzU3L2Zvcm1hdC93ZWJw?x-oss-process=image/format,png" alt="image"></p>
<p>父组件需要传入的值</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTc4YmY4NDZlOGZjNTFjOWIucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMTIwMC9mb3JtYXQvd2VicA?x-oss-process=image/format,png" alt="image"></p>
<p>子组件 Modal</p>
<h2 id="18-有-connect-和-Form-表单"><a href="#18-有-connect-和-Form-表单" class="headerlink" title="18 有 connect 和 Form 表单"></a>18 有 connect 和 Form 表单</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function mapStateToProps(&#123; onlineCamera &#125;) &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    favorites: onlineCamera.favorites,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default connect(mapStateToProps)(Form.create()(TreeModal));</span><br></pre></td></tr></table></figure>

<h2 id="19-Tree-树组件增加右键菜单"><a href="#19-Tree-树组件增加右键菜单" class="headerlink" title="19 Tree 树组件增加右键菜单"></a>19 Tree 树组件增加右键菜单</h2><p>参考：<br><a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/issues/5151">https://github.com/ant-design/ant-design/issues/5151</a></p>
<p>关键代码：</p>
<blockquote>
<Tree onRightClick={this.treeNodeonRightClick} >
</blockquote>
<p>&#x2F;&#x2F; 实现这个方法 treeNodeonRightClick</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">treeNodeonRightClick(e) &#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            rightClickNodeTreeItem: &#123;</span><br><span class="line">                pageX: e.event.pageX,</span><br><span class="line">                pageY: e.event.pageY,</span><br><span class="line">                id: e.node.props[&#x27;data-key&#x27;],</span><br><span class="line">                categoryName: e.node.props[&#x27;data-title&#x27;]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; id 和 categoryName 是生成时绑上去的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;TreeNode</span><br><span class="line">                        key=&#123;item.id&#125;</span><br><span class="line">                        title=&#123;title&#125;</span><br><span class="line">                        data-key=&#123;item.id&#125;</span><br><span class="line">                        data-title=&#123;item.categoryName&#125;</span><br><span class="line">                    /&gt;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; 最后绑个菜单就可以实现了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">getNodeTreeRightClickMenu() &#123;</span><br><span class="line">        const &#123;pageX, pageY&#125; = &#123;...this.state.rightClickNodeTreeItem&#125;;</span><br><span class="line">        const tmpStyle = &#123;</span><br><span class="line">            position: &#x27;absolute&#x27;,</span><br><span class="line">            left: `$&#123;pageX - 220&#125;px`,</span><br><span class="line">            top: `$&#123;pageY - 70&#125;px`</span><br><span class="line">        &#125;;</span><br><span class="line">        const menu = (</span><br><span class="line">            &lt;Menu</span><br><span class="line">                onClick=&#123;this.handleMenuClick&#125;</span><br><span class="line">                style=&#123;tmpStyle&#125;</span><br><span class="line">                className=&#123;style.categs_tree_rightmenu&#125;</span><br><span class="line">            &gt;</span><br><span class="line">                &lt;Menu.Item key=&#x27;1&#x27;&gt;&lt;Icon type=&#x27;plus-circle&#x27;/&gt;&#123;&#x27;加同级&#x27;&#125;&lt;/Menu.Item&gt;</span><br><span class="line">                &lt;Menu.Item key=&#x27;2&#x27;&gt;&lt;Icon type=&#x27;plus-circle-o&#x27;/&gt;&#123;&#x27;加下级&#x27;&#125;&lt;/Menu.Item&gt;</span><br><span class="line">                &lt;Menu.Item key=&#x27;4&#x27;&gt;&lt;Icon type=&#x27;edit&#x27;/&gt;&#123;&#x27;修改&#x27;&#125;&lt;/Menu.Item&gt;</span><br><span class="line">                &lt;Menu.Item key=&#x27;3&#x27;&gt;&lt;Icon type=&#x27;minus-circle-o&#x27;/&gt;&#123;&#x27;删除目录&#x27;&#125;&lt;/Menu.Item&gt;</span><br><span class="line">            &lt;/Menu&gt;</span><br><span class="line">        );</span><br><span class="line">        return (this.state.rightClickNodeTreeItem == null) ? &#x27;&#x27; : menu;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>getNodeTreeRightClickMenu 方法放在 render 中：</p>
<p>getNodeTreeRightClickMenu 方法是放在生成主界面的方法里（ render ），因为每一次 state 的变化后，render 方法都会执行，所以变一下任意的 this.state 里面的状态，就会执行 render 方法 ，这样 getNodeTreeRightClickMenu 方法放在 render 方法里来生成界面的一部分。就可以了</p>
<p><strong>项目中实现关键代码：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * @Author: lin.zehong</span><br><span class="line"> * @Date: 2018-12-02 22:13:59</span><br><span class="line"> * @Last Modified by: lin.zehong</span><br><span class="line"> * @Last Modified time: 2018-12-19 16:36:27</span><br><span class="line"> * @Desc: 收藏夹--树</span><br><span class="line"> */</span><br><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import &#123; connect &#125; from &#x27;dva&#x27;;</span><br><span class="line">import &#123; Tree, Menu &#125; from &#x27;antd&#x27;;</span><br><span class="line">import Zcon from &#x27;zteui-icon&#x27;;</span><br><span class="line">import styles from &#x27;./TreeCollect.less&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; TreeNode &#125; = Tree;</span><br><span class="line"></span><br><span class="line">class TreeCollect extends React.Component &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    expandedKeys: [&#x27;-1&#x27;],</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 树节点右键事件</span><br><span class="line">  treeNodeonRightClick = (&#123; event, node &#125;) =&gt; &#123;</span><br><span class="line">    event.persist();</span><br><span class="line">    const &#123; offsetLeft, _isCollapsed &#125; = this.props;</span><br><span class="line">    const menuWidth = _isCollapsed ? 80 : 200;</span><br><span class="line">    const &#123; favorites, favoritesDetail &#125; = node.props;</span><br><span class="line">    this.changefavorites(favorites);</span><br><span class="line">    const hasChild = !!(favorites &amp;&amp; favorites.scjId); // 收藏夹</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      rightClickNodeTreeItem: &#123;</span><br><span class="line">        pageX: event.pageX - offsetLeft - 16 - menuWidth,</span><br><span class="line">        pageY: event.target.offsetTop + 28,</span><br><span class="line">        key: node.props.eventKey,</span><br><span class="line">        id: node.props.eventKey,</span><br><span class="line">        title: node.props.title,</span><br><span class="line">        favorites,</span><br><span class="line">        favoritesDetail,</span><br><span class="line">        hasChild,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 右键节点页面展示</span><br><span class="line">  getNodeTreeRightClickMenu = () =&gt; &#123;</span><br><span class="line">    const &#123; rightClickNodeTreeItem &#125; = this.state;</span><br><span class="line">    const &#123; pageX, pageY, hasChild, key &#125; = &#123; ...rightClickNodeTreeItem &#125;;</span><br><span class="line">    const tmpStyle = &#123;</span><br><span class="line">      position: &#x27;absolute&#x27;,</span><br><span class="line">      left: `$&#123;pageX&#125;px`,</span><br><span class="line">      top: `$&#123;pageY&#125;px`,</span><br><span class="line">      boxShadow: &#x27;2px 2px 10px #333333&#x27;,</span><br><span class="line">    &#125;;</span><br><span class="line">    const menuHasNode = (</span><br><span class="line">      &lt;Menu</span><br><span class="line">        onClick=&#123;this.handleMenuClick&#125;</span><br><span class="line">        style=&#123;tmpStyle&#125;</span><br><span class="line">        className=&#123;styles.categs_tree_rightmenu&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;Menu.Item key=&#x27;1&#x27;&gt;自动巡查&lt;/Menu.Item&gt;</span><br><span class="line">        &lt;Menu.Item key=&#x27;2&#x27;&gt;重命名&lt;/Menu.Item&gt;</span><br><span class="line">        &lt;Menu.Item key=&#x27;3&#x27;&gt;添加同级目录&lt;/Menu.Item&gt;</span><br><span class="line">        &lt;Menu.Item key=&#x27;4&#x27;&gt;添加子目录&lt;/Menu.Item&gt;</span><br><span class="line">        &lt;Menu.Item key=&#x27;5&#x27;&gt;删除&lt;/Menu.Item&gt;</span><br><span class="line">      &lt;/Menu&gt;</span><br><span class="line">    );</span><br><span class="line">    const menuRoot = (</span><br><span class="line">      &lt;Menu</span><br><span class="line">        onClick=&#123;this.handleMenuClick&#125;</span><br><span class="line">        style=&#123;tmpStyle&#125;</span><br><span class="line">        className=&#123;styles.categs_tree_rightmenu&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;Menu.Item key=&#x27;1&#x27;&gt;自动巡查&lt;/Menu.Item&gt;</span><br><span class="line">        &lt;Menu.Item key=&#x27;2&#x27;&gt;重命名&lt;/Menu.Item&gt;</span><br><span class="line">        &lt;Menu.Item key=&#x27;4&#x27;&gt;添加子目录&lt;/Menu.Item&gt;</span><br><span class="line">      &lt;/Menu&gt;</span><br><span class="line">    );</span><br><span class="line">    const menuNoNode = (</span><br><span class="line">      &lt;Menu</span><br><span class="line">        onClick=&#123;this.handleMenuClick&#125;</span><br><span class="line">        style=&#123;tmpStyle&#125;</span><br><span class="line">        className=&#123;styles.categs_tree_rightmenu&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;Menu.Item key=&#x27;6&#x27;&gt;取消收藏&lt;/Menu.Item&gt;</span><br><span class="line">      &lt;/Menu&gt;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const menu = hasChild ? (key === &quot;-1&quot; ? menuRoot : menuHasNode) : menuNoNode;</span><br><span class="line"></span><br><span class="line">    return (rightClickNodeTreeItem == null) ? &#x27;&#x27; : menu;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 隐藏右键菜单</span><br><span class="line">  hideTreeRight = () =&gt; &#123;</span><br><span class="line">    this.setState(&#123; rightClickNodeTreeItem: null &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; expandedKeys, selectedKeys &#125; = this.state;</span><br><span class="line">    const &#123; isExpand, gData &#125; = this.props;</span><br><span class="line">    const loop = data =&gt; data.map((item) =&gt; &#123;</span><br><span class="line">      if (item.children &amp;&amp; item.favorites) &#123;</span><br><span class="line">        return &lt;TreeNode key=&#123;item.key&#125; icon=&#123;&lt;Zcon type=&quot;thing&quot; /&gt;&#125; title=&#123;item.title&#125; favorites=&#123;item.favorites&#125;&gt;&#123;loop(item.children)&#125;&lt;/TreeNode&gt;;</span><br><span class="line">      &#125;</span><br><span class="line">      return &lt;TreeNode key=&#123;item.favoritesDetail.sxtxxId&#125; title=&#123;item.title&#125; favoritesDetail=&#123;item.favoritesDetail&#125; /&gt;;</span><br><span class="line">    &#125;);</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&#123;`$&#123;styles.root&#125; $&#123;isExpand ? &#x27;&#x27; : styles.hideTree&#125;`&#125; onClick=&#123;() =&gt; this.hideTreeRight()&#125;&gt;</span><br><span class="line">        &lt;Tree</span><br><span class="line">          showIcon</span><br><span class="line">          className=&quot;draggable-tree&quot;</span><br><span class="line">          defaultExpandedKeys=&#123;expandedKeys&#125;</span><br><span class="line">          selectedKeys=&#123;selectedKeys&#125;</span><br><span class="line">          onRightClick=&#123;this.treeNodeonRightClick&#125;</span><br><span class="line">          onSelect=&#123;this.onSelect&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;loop(gData)&#125;</span><br><span class="line">        &lt;/Tree&gt;</span><br><span class="line">        &#123;this.getNodeTreeRightClickMenu()&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function mapStateToProps(&#123; onlineCamera, publicModel &#125;) &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    gData: onlineCamera.collectTree,</span><br><span class="line">    cameraNum: onlineCamera.cameraNum,</span><br><span class="line">    inspectionCamera: onlineCamera.inspectionCamera,</span><br><span class="line">    _isCollapsed: publicModel._isCollapsed,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default connect(mapStateToProps)(TreeCollect);</span><br></pre></td></tr></table></figure>

<h2 id="20-直接使用-rc-form-库-createForm，与-antd-Form-的-Form-create-设置样式不同"><a href="#20-直接使用-rc-form-库-createForm，与-antd-Form-的-Form-create-设置样式不同" class="headerlink" title="20 直接使用 rc-form 库 createForm，与 antd Form 的 Form.create() 设置样式不同"></a>20 直接使用 rc-form 库 createForm，与 antd Form 的 Form.create() 设置样式不同</h2><ul>
<li>使用 antd Form 的 Form.create()</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import PropTypes from &#x27;prop-types&#x27;</span><br><span class="line">import &#123; Form, Button &#125; from &#x27;antd&#x27;</span><br><span class="line"></span><br><span class="line">class BalloonContent extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; form &#125; = this.props;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Form</span><br><span class="line">          size=&#x27;medium&#x27;</span><br><span class="line">          className=&#123;Styles.wrapForm&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Form.Item</span><br><span class="line">            label=&quot;算子输出&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;form.getFieldDecorator(&#x27;stdioOutput&#x27;, &#123;</span><br><span class="line">              rules: [</span><br><span class="line">                &#123;</span><br><span class="line">                  required: true,</span><br><span class="line">                  message: &#x27;输出不能为空&#x27;,</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            &#125;)(&lt;Input /&gt;)&#125;</span><br><span class="line">          &lt;/Form.Item&gt;</span><br><span class="line">        &lt;/Form&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Form.create()(BalloonContent) // !!!</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTVhZDlkYTIxNGY3YWZmZTEucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMzQ1L2Zvcm1hdC93ZWJw?x-oss-process=image/format,png" alt="image"></p>
<p>结果样式</p>
<ul>
<li>直接使用 rc-form 库 createForm</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import PropTypes from &#x27;prop-types&#x27;</span><br><span class="line">import &#123; Form, Button &#125; from &#x27;antd&#x27;</span><br><span class="line">import &#123; createForm &#125; from &#x27;rc-form&#x27;</span><br><span class="line"></span><br><span class="line">class BalloonContent extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; form &#125; = this.props;</span><br><span class="line">    const &#123; getFieldDecorator, getFieldError &#125; = form ;</span><br><span class="line">    const stdioOutputError = getFieldError(&#x27;stdioOutput&#x27;); // !!!</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Form</span><br><span class="line">          size=&#x27;medium&#x27;</span><br><span class="line">          className=&#123;Styles.wrapForm&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Form.Item</span><br><span class="line">            label=&quot;算子输出&quot;</span><br><span class="line">            required // !!!</span><br><span class="line">            validateState=&#123;stdioOutputError ? &#x27;error&#x27; : &#x27;success&#x27;&#125; // !!!</span><br><span class="line">            help=&#123;stdioOutputError&#125; // !!!</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;form.getFieldDecorator(&#x27;stdioOutput&#x27;, &#123;</span><br><span class="line">              rules: [</span><br><span class="line">                &#123;</span><br><span class="line">                  required: true,</span><br><span class="line">                  message: &#x27;输出不能为空&#x27;,</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            &#125;)(&lt;Input /&gt;)&#125;</span><br><span class="line">          &lt;/Form.Item&gt;</span><br><span class="line">        &lt;/Form&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default createForm ()(BalloonContent) // !!!</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWRhOTIwYzUzMzk4N2FkZDIucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvMzQyL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png" alt="image"></p>
<p>结果</p>
<h2 id="21-Form-表单实时校验-debounce-应用，和不同字段相互校验影响"><a href="#21-Form-表单实时校验-debounce-应用，和不同字段相互校验影响" class="headerlink" title="21 Form 表单实时校验 _.debounce 应用，和不同字段相互校验影响"></a>21 Form 表单实时校验 _.debounce 应用，和不同字段相互校验影响</h2><p>例如：表单字段，密码和确认密码，改变 Password，如果与 Confirm Password 不一致，也会在 Confirm Password 做提示：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LWEzZDhhNDljYzdlMGY0ZWIucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNjgwL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png" alt="image"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">官网示例：注册新用户，主要代码</span><br><span class="line"></span><br><span class="line">compareToFirstPassword = (rule, value, callback) =&gt; &#123;</span><br><span class="line">  const &#123; form &#125; = this.props;</span><br><span class="line">  if (value &amp;&amp; value !== form.getFieldValue(&#x27;password&#x27;)) &#123;</span><br><span class="line">    callback(&#x27;Two passwords that you enter is inconsistent!&#x27;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">validateToNextPassword = (rule, value, callback) =&gt; &#123;</span><br><span class="line">  const &#123; form &#125; = this.props;</span><br><span class="line">  if (value &amp;&amp; this.state.confirmDirty) &#123;</span><br><span class="line">    form.validateFields([&#x27;confirm&#x27;], &#123; force: true &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  callback();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;Form.Item label=&quot;Password&quot; hasFeedback&gt;</span><br><span class="line">  &#123;getFieldDecorator(&#x27;password&#x27;, &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        required: true,</span><br><span class="line">        message: &#x27;Please input your password!&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        validator: this.validateToNextPassword,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)(&lt;Input.Password /&gt;)&#125;</span><br><span class="line">&lt;/Form.Item&gt;</span><br><span class="line"></span><br><span class="line">&lt;Form.Item label=&quot;Confirm Password&quot; hasFeedback&gt;</span><br><span class="line">  &#123;getFieldDecorator(&#x27;confirm&#x27;, &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        required: true,</span><br><span class="line">        message: &#x27;Please confirm your password!&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        validator: this.compareToFirstPassword,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)(&lt;Input.Password onBlur=&#123;this.handleConfirmBlur&#125; /&gt;)&#125;</span><br><span class="line">&lt;/Form.Item&gt;</span><br></pre></td></tr></table></figure>

<p>实际项目例子，选择所属数据库，校验表名：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy82NjMwMjY1LTFiZWYyNjBiMzY0NTkwYjQucG5nP2ltYWdlTW9ncjIvYXV0by1vcmllbnQvc3RyaXB8aW1hZ2VWaWV3Mi8yL3cvNTgxL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png" alt="image"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">主要代码：</span><br><span class="line"></span><br><span class="line">import _ from &quot;lodash&quot;;</span><br><span class="line"></span><br><span class="line">// 写入新表，选择数据库，需要校验已有的表名</span><br><span class="line">validateToTableName = (rule, value, callback) =&gt; &#123;</span><br><span class="line">  const &#123; form: &#123; getFieldValue, validateFields &#125;&#125; = this.props;</span><br><span class="line">  const targetTableCode = getFieldValue(&quot;targetTableCode&quot;);</span><br><span class="line">  if (targetTableCode) &#123;</span><br><span class="line">    validateFields([&#x27;targetTableCode&#x27;], &#123; force: true &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  callback();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 写入新表，校验表名</span><br><span class="line">// eslint-disable-next-line</span><br><span class="line">validateTableExist = _.debounce((rule, value, callback) =&gt; &#123;</span><br><span class="line">  const &#123; form: &#123; getFieldValue &#125;, dispatch &#125; = this.props;</span><br><span class="line">  const targetDataSource = getFieldValue(&quot;targetDataSource&quot;);</span><br><span class="line">  const targetTableCode = getFieldValue(&quot;targetTableCode&quot;);</span><br><span class="line">  dispatch(&#123;</span><br><span class="line">    type: &quot;applyDetail/tableExist&quot;,</span><br><span class="line">    payload: &#123;</span><br><span class="line">      dataSourceCode: targetDataSource,</span><br><span class="line">      table: targetTableCode,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;).then(result =&gt; &#123;</span><br><span class="line">    if (result) &#123;</span><br><span class="line">      callback(&quot;该表名已存在&quot;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, 500);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;Form.Item label=&quot;所属数据库&quot;&gt;</span><br><span class="line">  &#123;getFieldDecorator(&quot;targetDataSource&quot;, &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        required: true,</span><br><span class="line">        message: &quot;请选择所属数据库&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        validator: this.validateToTableName, // ！！！</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    initialValue:</span><br><span class="line">      exchangeFormat.targetDataSource ||</span><br><span class="line">      (dataSourceList.length &gt; 0</span><br><span class="line">        ? dataSourceList[0].code</span><br><span class="line">        : undefined),</span><br><span class="line">  &#125;)(dataBaseComponent(&#123; className: styles.formInput &#125;))&#125;</span><br><span class="line">&lt;/Form.Item&gt;</span><br><span class="line"></span><br><span class="line">&lt;Form.Item label=&quot;表名&quot;&gt;</span><br><span class="line">  &#123;getFieldDecorator(&quot;targetTableCode&quot;, &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        required: true,</span><br><span class="line">        message: &quot;请输入新表表名&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        pattern: checkBackEndTableName,</span><br><span class="line">        message: &quot;只支持英文字母、数字、英文格式、下划线&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        validator: this.validateTableExist, // ！！！</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    initialValue:</span><br><span class="line">      (exchangeFormat.formatType === WRITE_IN_NEW_TABLE</span><br><span class="line">        ? exchangeFormat.targetTableCode</span><br><span class="line">        : undefined) || undefined,</span><br><span class="line">  &#125;)(</span><br><span class="line">    &lt;Input</span><br><span class="line">      className=&#123;styles.formInput&#125;</span><br><span class="line">      disabled=&#123;disabled&#125;</span><br><span class="line">      placeholder=&quot;请输入&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/Form.Item&gt;</span><br></pre></td></tr></table></figure>

<h2 id="22-Form-组件方法-getFieldsValue-获取自定义组件的值"><a href="#22-Form-组件方法-getFieldsValue-获取自定义组件的值" class="headerlink" title="22 Form 组件方法 getFieldsValue 获取自定义组件的值"></a>22 Form 组件方法 getFieldsValue 获取自定义组件的值</h2><p>项目实例：对 antd RangePicker 抽取完独立组件后，form 表单获取不到值</p>
<p>自定义组件被 getFieldsValue 包裹，会获得以下属性：</p>
<p>onChange 方法, 子组件调用此方法，可将值传给父组件，从而 Form 可拿到自定义组件的值 value 属性，获得初始值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Form.Item label=&quot;发送时间&quot;&gt;</span><br><span class="line">  &#123;getFieldDecorator(&#x27;range-time-picker&#x27;, &#123;</span><br><span class="line">    rules: [&#123; required: false, message: &#x27;请输入开始时间-结束时间&#x27; &#125;],</span><br><span class="line">  &#125;)(</span><br><span class="line">    &lt;RangePickerPage /&gt;</span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/Form.Item&gt;</span><br></pre></td></tr></table></figure>

<p>下面是对 antd RangePicker 进行封装，通过组件 RangePicker 本身的 onChange 方法，调用 this.props.onChange（子组件不用传 onChange 方法，自定义组件被 getFieldsValue 包裹，会自动获取 onChage 属性），则通过 form.validateFields 可以获取到值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Author: lin.zehong</span><br><span class="line"> * Date: 2019-10-04 09:14:52</span><br><span class="line"> * Last Modified by:   lin.zehong</span><br><span class="line"> * Last Modified time: 2019-10-04 09:14:52</span><br><span class="line"> * Desc: 对 antd RangePicker 进行封装</span><br><span class="line"> */</span><br><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import moment from &quot;moment&quot;;</span><br><span class="line">import &#123; DatePicker &#125; from &quot;antd&quot;;</span><br><span class="line"></span><br><span class="line">const &#123; RangePicker &#125; = DatePicker;</span><br><span class="line"></span><br><span class="line">class RangePickerPage extends React.Component &#123;</span><br><span class="line"></span><br><span class="line">  range = (start, end) =&gt; &#123;</span><br><span class="line">    const result = [];</span><br><span class="line">    for (let i = start; i &lt; end; i += 1) &#123;</span><br><span class="line">      result.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  disabledDate = (current) =&gt; &#123;</span><br><span class="line">    // Can not select days before today and today</span><br><span class="line">    return current &amp;&amp; current &lt; moment().endOf(&#x27;day&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  disabledRangeTime = (_, type) =&gt; &#123;</span><br><span class="line">    if (type === &#x27;start&#x27;) &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        disabledHours: () =&gt; this.range(0, 60).splice(4, 20),</span><br><span class="line">        disabledMinutes: () =&gt; this.range(30, 60),</span><br><span class="line">        disabledSeconds: () =&gt; [55, 56],</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      disabledHours: () =&gt; this.range(0, 60).splice(20, 4),</span><br><span class="line">      disabledMinutes: () =&gt; this.range(0, 31),</span><br><span class="line">      disabledSeconds: () =&gt; [55, 56],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onChange = (dates, dateStrings) =&gt; &#123;</span><br><span class="line">    const &#123; onChange &#125; = this.props;  // ！！！</span><br><span class="line">    onChange(dateStrings);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;RangePicker</span><br><span class="line">        allowClear</span><br><span class="line">        disabledDate=&#123;this.disabledDate&#125;</span><br><span class="line">        disabledTime=&#123;this.disabledRangeTime&#125;</span><br><span class="line">        showTime=&#123;&#123;</span><br><span class="line">          hideDisabledOptions: true,</span><br><span class="line">          defaultValue: [moment(&#x27;00:00:00&#x27;, &#x27;HH:mm:ss&#x27;), moment(&#x27;11:59:59&#x27;, &#x27;HH:mm:ss&#x27;)],</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        format=&quot;YYYY-MM-DD HH:mm:ss&quot;</span><br><span class="line">        onChange=&#123;this.onChange&#125; // ！！！</span><br><span class="line">      /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default RangePickerPage;</span><br></pre></td></tr></table></figure>

<p>参考：<a target="_blank" rel="noopener" href="https://juejin.im/post/5c9c6c08e51d4503e514eaac">https://juejin.im/post/5c9c6c08e51d4503e514eaac</a></p>
<h2 id="23-Form-表单清空和重置的区别以及方法"><a href="#23-Form-表单清空和重置的区别以及方法" class="headerlink" title="23 Form 表单清空和重置的区别以及方法"></a>23 Form 表单清空和重置的区别以及方法</h2><p>这里首先需要明确，清空和重置是不同的概念，清空是把内容都清空掉，而重置是恢复 form 表单初始值。</p>
<p>例如：新增功能，清空和重置就是一样的效果，而对于编辑，清空就是把初始值都清空掉，重置就是恢复刚开始的初始值。</p>
<ul>
<li>清空</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">form.setFieldsValue(&#123;&quot;fieldName&quot;: &quot;&quot;&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>重置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">form.resetFields();</span><br></pre></td></tr></table></figure>

<h2 id="24-DatePicker-组件，部分日期-x2F-时间为可选"><a href="#24-DatePicker-组件，部分日期-x2F-时间为可选" class="headerlink" title="24 DatePicker 组件，部分日期&#x2F;时间为可选"></a>24 DatePicker 组件，部分日期&#x2F;时间为可选</h2><h3 id="24-1-不能选择今天之前的日期，包括今天的日期也不可以选择"><a href="#24-1-不能选择今天之前的日期，包括今天的日期也不可以选择" class="headerlink" title="24.1 不能选择今天之前的日期，包括今天的日期也不可以选择"></a>24.1 不能选择今天之前的日期，包括今天的日期也不可以选择</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const disabledDate = (current) =&gt; &#123;</span><br><span class="line">  return current &amp;&amp; current &lt; moment().endOf(&#x27;day&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="24-2-不能选择今天之前的日期，今天日期可以选择"><a href="#24-2-不能选择今天之前的日期，今天日期可以选择" class="headerlink" title="24.2 不能选择今天之前的日期，今天日期可以选择"></a>24.2 不能选择今天之前的日期，今天日期可以选择</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const disabledDate = (current) =&gt; &#123;</span><br><span class="line">  return current &amp;&amp; current &lt; moment().subtract(1, &#x27;day&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="24-3-当前时间之后的时间点，精确到小时"><a href="#24-3-当前时间之后的时间点，精确到小时" class="headerlink" title="24.3 当前时间之后的时间点，精确到小时"></a>24.3 当前时间之后的时间点，精确到小时</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">const [upgradeTime, setUpgradeTime] = useState(moment(&#x27;00:00:00&#x27;, &#x27;HH:mm:ss&#x27;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const disabledDate = (current) =&gt; &#123;</span><br><span class="line">  return current &amp;&amp; current &lt; moment().subtract(1, &#x27;day&#x27;); // 今天可以选择</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const disabledDateTime = () =&gt; &#123;</span><br><span class="line">  const hours = moment().hours(); // 0~23</span><br><span class="line">  // 当日只能选择当前时间之后的时间点</span><br><span class="line">  if (upgradeTime.date() === moment().date()) &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      disabledHours: () =&gt; range(0, hours + 1),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;Form.Item label=&quot;发送时间&quot;&gt;</span><br><span class="line">  &#123;getFieldDecorator(&#x27;pushTime&#x27;, &#123;</span><br><span class="line">    rules: [&#123; required: false, message: &#x27;请输入发送时间&#x27; &#125;],</span><br><span class="line">    initialValue: record.pushType === 0 ? null :</span><br><span class="line">      (record.pushTime ? moment(record.pushTime, &#x27;YYYY-MM-DD HH:mm:ss&#x27;) : null), // 定时发送才显示时间</span><br><span class="line">  &#125;)(</span><br><span class="line">    &lt;DatePicker</span><br><span class="line">      format=&quot;YYYY-MM-DD HH:mm:ss&quot;</span><br><span class="line">      disabledDate=&#123;disabledDate&#125;</span><br><span class="line">      disabledTime=&#123;disabledDateTime&#125;</span><br><span class="line">      style=&#123;&#123; width: &quot;100%&quot; &#125;&#125;</span><br><span class="line"></span><br><span class="line">      onChange=&#123;(timer) =&gt; setUpgradeTime(timer)&#125; // ！！！</span><br><span class="line">      showTime=&#123;&#123; defaultValue: moment(upgradeTime) &#125;&#125; // ！！！</span><br><span class="line">    /&gt;,</span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/Form.Item&gt;</span><br></pre></td></tr></table></figure>

<h3 id="24-4-当前时间之后的时间点，精确到分"><a href="#24-4-当前时间之后的时间点，精确到分" class="headerlink" title="24.4 当前时间之后的时间点，精确到分"></a>24.4 当前时间之后的时间点，精确到分</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">const [upgradeTime, setUpgradeTime] = useState(moment(&#x27;00:00:00&#x27;, &#x27;HH:mm:ss&#x27;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const disabledDate = (current) =&gt; &#123;</span><br><span class="line">  return current &amp;&amp; current &lt; moment().subtract(1, &#x27;day&#x27;); // 今天可以选择</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const disabledDateTime = () =&gt; &#123;</span><br><span class="line">  const hours = moment().hours(); // 0~23</span><br><span class="line">  const minutes = moment().minutes(); // 0~59</span><br><span class="line">  // 当日只能选择当前时间之后的时间点</span><br><span class="line">  if (upgradeTime.date() === moment().date()) &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      disabledHours: () =&gt; range(0, hours),</span><br><span class="line">      disabledMinutes: () =&gt; range(0, minutes), // 精确到分</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;Form.Item label=&quot;发送时间&quot;&gt;</span><br><span class="line">  &#123;getFieldDecorator(&#x27;pushTime&#x27;, &#123;</span><br><span class="line">    rules: [&#123; required: false, message: &#x27;请输入发送时间&#x27; &#125;],</span><br><span class="line">    initialValue: record.pushType === 0 ? null :</span><br><span class="line">      (record.pushTime ? moment(record.pushTime, &#x27;YYYY-MM-DD HH:mm:ss&#x27;) : null), // 定时发送才显示时间</span><br><span class="line">  &#125;)(</span><br><span class="line">    &lt;DatePicker</span><br><span class="line">      format=&quot;YYYY-MM-DD HH:mm:ss&quot;</span><br><span class="line">      disabledDate=&#123;disabledDate&#125;</span><br><span class="line">      disabledTime=&#123;disabledDateTime&#125;</span><br><span class="line">      style=&#123;&#123; width: &quot;100%&quot; &#125;&#125;</span><br><span class="line"></span><br><span class="line">      onChange=&#123;(timer) =&gt; setUpgradeTime(timer)&#125; // ！！！</span><br><span class="line">      showTime=&#123;&#123; defaultValue: moment(upgradeTime) &#125;&#125; // ！！！</span><br><span class="line">    /&gt;,</span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/Form.Item&gt;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/javascript/" rel="tag"># javascript</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/12/16/Rxjs%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E7%AC%A6/" rel="prev" title="Rxjs常见操作符">
      <i class="fa fa-chevron-left"></i> Rxjs常见操作符
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/12/16/React-%E5%BC%80%E5%8F%91%E4%B9%8BUmi%E4%B9%8C%E7%B1%B3%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8/" rel="next" title="React 开发之Umi乌米框架使用">
      React 开发之Umi乌米框架使用 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-form-%E8%A1%A8%E5%8D%95%E4%B8%AD-FormItem-%E7%9A%84%E5%B8%83%E5%B1%80"><span class="nav-number">1.</span> <span class="nav-text">1 form 表单中 FormItem 的布局</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-form-%E8%A1%A8%E5%8D%95%EF%BC%8CFormItem-%E7%9A%84-rules-%E4%B8%AD%E6%96%B0%E5%A2%9E-validator%EF%BC%8C%E5%AE%9E%E6%97%B6%E8%AF%B7%E6%B1%82%E6%A0%A1%E9%AA%8C"><span class="nav-number">2.</span> <span class="nav-text">2 form 表单，FormItem 的 rules 中新增 validator，实时请求校验</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%88%A9%E7%94%A8-validator-%E5%92%8C%E6%AD%A3%E5%88%99%EF%BC%8C%E9%AA%8C%E8%AF%81%E4%B8%AD%E6%96%87"><span class="nav-number">3.</span> <span class="nav-text">3 利用 validator 和正则，验证中文</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-form-validateFields-%E7%9B%B4%E6%8E%A5%E8%8E%B7%E5%8F%96%E8%A1%A8%E5%8D%95%E7%9A%84%E5%80%BC"><span class="nav-number">4.</span> <span class="nav-text">4 form.validateFields 直接获取表单的值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-form-%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4-htmlType%EF%BC%8C%E6%94%B9%E4%B8%BA-onClick"><span class="nav-number">5.</span> <span class="nav-text">5 form 表单提交 htmlType，改为 onClick</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Input-%E7%BB%84%E4%BB%B6%EF%BC%8C%E5%88%A9%E7%94%A8-maxLength-%E5%B1%9E%E6%80%A7%EF%BC%8C%E9%99%90%E5%88%B6%E6%9C%80%E5%A4%A7%E8%BE%93%E5%85%A5%E5%86%85%E5%AE%B9%E9%95%BF%E5%BA%A6"><span class="nav-number">6.</span> <span class="nav-text">6 Input 组件，利用 maxLength 属性，限制最大输入内容长度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-InputNumber-%E5%8F%AA%E8%83%BD%E8%BE%93%E5%85%A5%E6%95%B0%E5%AD%97%EF%BC%9A"><span class="nav-number">7.</span> <span class="nav-text">7 InputNumber 只能输入数字：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-menu-%E5%AE%9E%E7%8E%B0%E5%9B%9E%E7%BC%A9%E6%95%88%E6%9E%9C%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="nav-number">8.</span> <span class="nav-text">8 menu 实现回缩效果注意点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95%E8%B0%83%E6%95%B4%E5%AE%BD%E5%BA%A6%E8%AE%BE%E7%BD%AE"><span class="nav-number">9.</span> <span class="nav-text">9 左侧菜单调整宽度设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-%E8%A1%A8%E6%A0%BC-Columns-%E5%AD%97%E6%AE%B5-id-%E9%A1%B5%E9%9D%A2%E4%B8%8D%E5%B1%95%E7%A4%BA%E6%83%85%E5%86%B5"><span class="nav-number">10.</span> <span class="nav-text">10 表格 Columns 字段 id 页面不展示情况</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-%E8%87%AA%E5%AE%9A%E4%B9%89-Modal"><span class="nav-number">11.</span> <span class="nav-text">11 自定义 Modal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-Select-%E7%BB%84%E4%BB%B6%E6%B8%85%E9%99%A4%E9%80%89%E6%A1%86%E5%86%85%E5%AE%B9"><span class="nav-number">12.</span> <span class="nav-text">12 Select 组件清除选框内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-antd%E3%80%81mobx-%E6%B3%A8%E5%85%A5%E7%9A%84%E9%A1%BA%E5%BA%8F"><span class="nav-number">13.</span> <span class="nav-text">13 antd、mobx @注入的顺序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-%E8%A7%A3%E5%86%B3-table-%E7%BB%84%E4%BB%B6%EF%BC%8C-key-%E8%AD%A6%E5%91%8A"><span class="nav-number">14.</span> <span class="nav-text">14 解决 table 组件， key 警告</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#14-1-%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E4%B8%80%E8%88%AC%E9%83%BD%E6%98%AF%E4%BD%BF%E7%94%A8-rowkey-%E8%A7%A3%E5%86%B3%EF%BC%88%E5%90%8E%E5%8F%B0%E6%95%B0%E6%8D%AE%E8%A6%81%E4%BF%9D%E8%AF%81%E6%B2%A1%E6%9C%89%E9%87%8D%E5%A4%8D%EF%BC%89%EF%BC%9B"><span class="nav-number">14.1.</span> <span class="nav-text">14.1 方法一：一般都是使用 rowkey 解决（后台数据要保证没有重复）；</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-2-%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9AdataSource-%E6%95%B0%E6%8D%AE%E6%96%B0%E5%A2%9E-key"><span class="nav-number">14.2.</span> <span class="nav-text">14.2 方法二：dataSource 数据新增 key</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-Form-create-%E6%96%B9%E5%BC%8F"><span class="nav-number">15.</span> <span class="nav-text">15 Form.create 方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#15-1-%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A-%E6%B3%A8%E8%A7%A3"><span class="nav-number">15.1.</span> <span class="nav-text">15.1 方式一：@注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-2-%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A%E9%AB%98%E9%98%B6%E5%86%99%E6%B3%95"><span class="nav-number">15.2.</span> <span class="nav-text">15.2 方式二：高阶写法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-Form-initialValue-%E5%80%BC%E7%BC%96%E8%BE%91%E5%90%8E%EF%BC%8C%E8%A1%A8%E5%8D%95%E7%9A%84%E5%80%BC%E4%B8%8D%E6%94%B9%E5%8F%98%E9%97%AE%E9%A2%98"><span class="nav-number">16.</span> <span class="nav-text">16 Form initialValue 值编辑后，表单的值不改变问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-%E6%96%B9%E6%B3%95%E4%B8%80"><span class="nav-number">16.1.</span> <span class="nav-text">16.1 方法一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="nav-number">16.2.</span> <span class="nav-text">16.2 方法二</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-Modal-%E6%98%AF%E5%90%A6%E6%98%BE%E7%A4%BA-footer-%E5%BA%95%E9%83%A8%E6%8C%89%E9%92%AE"><span class="nav-number">17.</span> <span class="nav-text">17 Modal 是否显示 footer 底部按钮</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-%E6%9C%89-connect-%E5%92%8C-Form-%E8%A1%A8%E5%8D%95"><span class="nav-number">18.</span> <span class="nav-text">18 有 connect 和 Form 表单</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-Tree-%E6%A0%91%E7%BB%84%E4%BB%B6%E5%A2%9E%E5%8A%A0%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95"><span class="nav-number">19.</span> <span class="nav-text">19 Tree 树组件增加右键菜单</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8-rc-form-%E5%BA%93-createForm%EF%BC%8C%E4%B8%8E-antd-Form-%E7%9A%84-Form-create-%E8%AE%BE%E7%BD%AE%E6%A0%B7%E5%BC%8F%E4%B8%8D%E5%90%8C"><span class="nav-number">20.</span> <span class="nav-text">20 直接使用 rc-form 库 createForm，与 antd Form 的 Form.create() 设置样式不同</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-Form-%E8%A1%A8%E5%8D%95%E5%AE%9E%E6%97%B6%E6%A0%A1%E9%AA%8C-debounce-%E5%BA%94%E7%94%A8%EF%BC%8C%E5%92%8C%E4%B8%8D%E5%90%8C%E5%AD%97%E6%AE%B5%E7%9B%B8%E4%BA%92%E6%A0%A1%E9%AA%8C%E5%BD%B1%E5%93%8D"><span class="nav-number">21.</span> <span class="nav-text">21 Form 表单实时校验 _.debounce 应用，和不同字段相互校验影响</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-Form-%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95-getFieldsValue-%E8%8E%B7%E5%8F%96%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84%E5%80%BC"><span class="nav-number">22.</span> <span class="nav-text">22 Form 组件方法 getFieldsValue 获取自定义组件的值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-Form-%E8%A1%A8%E5%8D%95%E6%B8%85%E7%A9%BA%E5%92%8C%E9%87%8D%E7%BD%AE%E7%9A%84%E5%8C%BA%E5%88%AB%E4%BB%A5%E5%8F%8A%E6%96%B9%E6%B3%95"><span class="nav-number">23.</span> <span class="nav-text">23 Form 表单清空和重置的区别以及方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-DatePicker-%E7%BB%84%E4%BB%B6%EF%BC%8C%E9%83%A8%E5%88%86%E6%97%A5%E6%9C%9F-x2F-%E6%97%B6%E9%97%B4%E4%B8%BA%E5%8F%AF%E9%80%89"><span class="nav-number">24.</span> <span class="nav-text">24 DatePicker 组件，部分日期&#x2F;时间为可选</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#24-1-%E4%B8%8D%E8%83%BD%E9%80%89%E6%8B%A9%E4%BB%8A%E5%A4%A9%E4%B9%8B%E5%89%8D%E7%9A%84%E6%97%A5%E6%9C%9F%EF%BC%8C%E5%8C%85%E6%8B%AC%E4%BB%8A%E5%A4%A9%E7%9A%84%E6%97%A5%E6%9C%9F%E4%B9%9F%E4%B8%8D%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A9"><span class="nav-number">24.1.</span> <span class="nav-text">24.1 不能选择今天之前的日期，包括今天的日期也不可以选择</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-2-%E4%B8%8D%E8%83%BD%E9%80%89%E6%8B%A9%E4%BB%8A%E5%A4%A9%E4%B9%8B%E5%89%8D%E7%9A%84%E6%97%A5%E6%9C%9F%EF%BC%8C%E4%BB%8A%E5%A4%A9%E6%97%A5%E6%9C%9F%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A9"><span class="nav-number">24.2.</span> <span class="nav-text">24.2 不能选择今天之前的日期，今天日期可以选择</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-3-%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%E4%B9%8B%E5%90%8E%E7%9A%84%E6%97%B6%E9%97%B4%E7%82%B9%EF%BC%8C%E7%B2%BE%E7%A1%AE%E5%88%B0%E5%B0%8F%E6%97%B6"><span class="nav-number">24.3.</span> <span class="nav-text">24.3 当前时间之后的时间点，精确到小时</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-4-%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%E4%B9%8B%E5%90%8E%E7%9A%84%E6%97%B6%E9%97%B4%E7%82%B9%EF%BC%8C%E7%B2%BE%E7%A1%AE%E5%88%B0%E5%88%86"><span class="nav-number">24.4.</span> <span class="nav-text">24.4 当前时间之后的时间点，精确到分</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Bruce Chen"
      src="/images/portal.jpg">
  <p class="site-author-name" itemprop="name">Bruce Chen</p>
  <div class="site-description" itemprop="description">It's better to burn out than to fade away.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">83</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1440429303&auto=1&height=66"></iframe>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jschentt" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jschentt" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jschentt@gmail.com" title="E-Mail → mailto:jschentt@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/BruceCh56742806" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;BruceCh56742806" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/jinsheng.chen.5439" title="Facebook → https:&#x2F;&#x2F;www.facebook.com&#x2F;jinsheng.chen.5439" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>Facebook</a>
      </span>
  </div>





      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bruce Chen</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
