<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="It&#39;s better to burn out than to fade away.">
<meta property="og:type" content="website">
<meta property="og:title" content="Bruce Chen&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Bruce Chen&#39;s Blog">
<meta property="og:description" content="It&#39;s better to burn out than to fade away.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Bruce Chen">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Bruce Chen's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband">
    <a target="_blank" rel="noopener" href="https://github.com/jschentt" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    </div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Bruce Chen's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">quick notes</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">7</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">83</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/Highcharts%E5%B7%A5%E4%BD%9C%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/Highcharts%E5%B7%A5%E4%BD%9C%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">Highcharts工作笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 15:04:19 / 修改时间：15:08:59" itemprop="dateCreated datePublished" datetime="2022-12-16T15:04:19+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webGL%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">webGL总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、单个数据源时"><a href="#一、单个数据源时" class="headerlink" title="一、单个数据源时"></a>一、单个数据源时</h2><p><img src="https://img-blog.csdn.net/20130712155158375?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGluZmVuZ3Rpbmd5dTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="image"></p>
<p><img src="https://img-blog.csdn.net/20130712160031250?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGluZmVuZ3Rpbmd5dTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="image"></p>
<p>如上图，配置如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">//绘制图表</span><br><span class="line">function drawLineChart(data) &#123;</span><br><span class="line">        var xAxisArr = [],</span><br><span class="line">             yAxisArr = [];</span><br><span class="line"></span><br><span class="line">        $.each(data,function(key,value)&#123;</span><br><span class="line">            xAxisArr.push(key);</span><br><span class="line">            yAxisArr.push(value);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        //计算x轴的步长 （当数据较多时，x轴会显示不下，所以需要间隔显示）</span><br><span class="line">        var xLen = xAxisArr.length,</span><br><span class="line">            maxLabelNum = 20, //x轴上最多显示的label个数，过多就会挤在一起</span><br><span class="line">            step = Math.round(xLen / maxLabelNum) &lt; 1 ? 1 : Math.round(xLen / maxLabelNum);</span><br><span class="line"></span><br><span class="line">        chart = new Highcharts.Chart(&#123;</span><br><span class="line">                chart: &#123;</span><br><span class="line">                    renderTo: &#x27;J_Diagram&#x27;,  //图表将要被渲染到哪个dom节点中</span><br><span class="line">                    type: &#x27;line&#x27;,  //线性显示</span><br><span class="line">                    marginRight: 100,  //图表距离右侧的距离,即上图中 &quot;该月的流量&quot;的显示宽度</span><br><span class="line">                    marginBottom: 50 //图表距离下方的距离,即上图中 x轴 label的显示高度, 刚开始label一直显示不全,有一半被隐藏了, 后来发现将这个值变大就可以了</span><br><span class="line">                &#125;,</span><br><span class="line">                title: &#123;</span><br><span class="line">                    text: &#x27;&#x27; //图表的标题, 此为图1的设置,设为空串则不显示title, 如果不配置此项,此会显示默认的title,如图2所示</span><br><span class="line">                &#125;,</span><br><span class="line">                xAxis: &#123;</span><br><span class="line">                    categories: xAxisArr, //x轴显示的label,如果不设置此项,则会显示默认的数字,即1,2,...n</span><br><span class="line">                    tickInterval: step,  //x轴上显示点的间隔,默认和y轴上的点的个数相同, 但这样会造成x轴过于密集</span><br><span class="line">                       labels: &#123;</span><br><span class="line">                           style: &#123;</span><br><span class="line">                               width: &#x27;auto&#x27;,</span><br><span class="line">                               height: &#x27;auto&#x27;</span><br><span class="line">                           &#125;,</span><br><span class="line">                           rotation: -30, //x轴label逆时针旋转30度</span><br><span class="line">                          align: &#x27;right&#x27; //,</span><br><span class="line">                         // step: step //x轴上label标签的间隔,即隔多少个点显示一个label,注意如果只设置此项则x轴上的点不会变,还是会每个都显示</span><br><span class="line">                                             //,当设置了tickInterval时此值可以不设, 会和tickInterval相同</span><br><span class="line">                       &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                yAxis: &#123;</span><br><span class="line">                    title: &#123;</span><br><span class="line">                        text: &#x27;单位：GB&#x27;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    plotLines: [&#123;</span><br><span class="line">                        value: 0,</span><br><span class="line">                        width: 1,</span><br><span class="line">                        color: &#x27;#808080&#x27;</span><br><span class="line">                    &#125;]</span><br><span class="line">                &#125;,</span><br><span class="line">                credits: &#123;//图表右下角的水印，默认是highcharts.com,将其设为空串可以取消水印</span><br><span class="line">                        text: &#x27;&#x27;,</span><br><span class="line">                        fontSize: &#x27;0&#x27;</span><br><span class="line">                &#125;,</span><br><span class="line">                tooltip: &#123; //当鼠标移动图表上的某个点上时,显示的提示信息</span><br><span class="line">                    formatter: function() &#123;</span><br><span class="line">                            return &#x27;&lt;b&gt;&#x27;+ this.series.name +&#x27;&lt;/b&gt;&lt;br/&gt;&#x27;+ this.x +&#x27;: &#x27;+ this.y +&#x27;GB&#x27;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                legend: &#123; //图上 &#x27;该月的流量&#x27; 那部分的位置配置</span><br><span class="line">                    layout: &#x27;vertical&#x27;,</span><br><span class="line">                    align: &#x27;right&#x27;,</span><br><span class="line">                    verticalAlign: &#x27;top&#x27;,</span><br><span class="line">                    x: 10,</span><br><span class="line">                    y: 100,</span><br><span class="line">                    borderWidth: 0</span><br><span class="line">                &#125;,</span><br><span class="line">                series: [&#123;</span><br><span class="line">                    name: &#x27;该&#x27;+ (queryParams.showBy == &#x27;month&#x27; ? &#x27;月&#x27; : &#x27;日&#x27;) +&#x27;的流量&#x27;,  //图上 &#x27;该月的流量&#x27; 那部分的文字配置</span><br><span class="line">                    data: yAxisArr</span><br><span class="line">                &#125;],</span><br><span class="line">                plotOptions: &#123;</span><br><span class="line">                    series:&#123;</span><br><span class="line">                        marker: &#123; //数据线上的点，默认不显示，当鼠标hover时才显示, 注意图1和图2中是enable设为true时的效果</span><br><span class="line">                            symbol: &#x27;triangle-down&#x27;, //点的样式, 可选的值有&quot;circle&quot;, &quot;square&quot;, &quot;diamond&quot;, &quot;triangle&quot;和&quot;triangle-down&quot;,默认是circle</span><br><span class="line">                            enabled: false,</span><br><span class="line">                            states: &#123;</span><br><span class="line">                                hover: &#123;</span><br><span class="line">                                    enabled: true</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、多个数据源时"><a href="#二、多个数据源时" class="headerlink" title="二、多个数据源时"></a>二、多个数据源时</h2><p><img src="https://img-blog.csdn.net/20130712161924906?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGluZmVuZ3Rpbmd5dTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="image"></p>
<p>如上图,有多个数据需要显示时,配置如下,不再一一讲解,请对应单一数据源的讲解和官网 API 自己理解:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">function drawLineChart(title, data)&#123;</span><br><span class="line">    var    colors = [&#x27;#4572A7&#x27;,&#x27;#AA4643&#x27;, &#x27;#89A54E&#x27;, &#x27;#80699B&#x27;, &#x27;#3D96AE&#x27;, &#x27;#DB843D&#x27;, &#x27;#92A8CD&#x27;, &#x27;#A47D7C&#x27;, &#x27;#B5CA92&#x27; ],</span><br><span class="line">        xAxis = [],</span><br><span class="line">        yAxis = [&#123;</span><br><span class="line">            title: &#123;</span><br><span class="line">                text: &#x27;PV&#x27;,</span><br><span class="line">            &#125;,</span><br><span class="line">            labels: &#123;</span><br><span class="line">                formatter: function()&#123;</span><br><span class="line">                    return this.value;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            title: &#123;</span><br><span class="line">                text: &#x27;UV&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            labels: &#123;</span><br><span class="line">                formatter: function()&#123;</span><br><span class="line">                    return this.value;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            opposite: true</span><br><span class="line">        &#125;],</span><br><span class="line">        ableskyPvData = [],</span><br><span class="line">        ableskyUvData = [],</span><br><span class="line">        wwwPvData = [],</span><br><span class="line">        wwwUvData = [],</span><br><span class="line">        orgPvData = [],</span><br><span class="line">        orgUvDate = [];</span><br><span class="line">    for(var i=0, l=data.length ; i&lt;l; i++)&#123;</span><br><span class="line">        var d = new Date();</span><br><span class="line">        d.setTime(data[i].statsDate.time);</span><br><span class="line">        xAxis.push(d.getFullYear() + &#x27;-&#x27; + (d.getMonth()+1) + &#x27;-&#x27; + d.getDate());</span><br><span class="line">        ableskyPvData.push(data[i].totalPv);</span><br><span class="line">        ableskyUvData.push(data[i].totalUv);</span><br><span class="line">        wwwPvData.push(data[i].asDomainPv);</span><br><span class="line">        wwwUvData.push(data[i].asDomainUv);</span><br><span class="line">        orgPvData.push(data[i].orgDomainPv);</span><br><span class="line">        orgUvDate.push(data[i].orgDomainUv);</span><br><span class="line">    &#125;</span><br><span class="line">    var series = [&#123;</span><br><span class="line">        name: &#x27;总PV&#x27;,</span><br><span class="line">        data: ableskyPvData,</span><br><span class="line">        yAxis: 0</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        name: &#x27;总UV&#x27;,</span><br><span class="line">        data: ableskyUvData,</span><br><span class="line">        yAxis: 1</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        name: &#x27;AS域名PV&#x27;,</span><br><span class="line">        data: wwwPvData,</span><br><span class="line">        yAxis: 0</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        name: &#x27;AS域名UV&#x27;,</span><br><span class="line">        data: wwwUvData,</span><br><span class="line">        yAxis: 1</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        name: &#x27;机构域名PV&#x27;,</span><br><span class="line">        data: orgPvData,</span><br><span class="line">        yAxis: 0</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        name: &#x27;机构域名UV&#x27;,</span><br><span class="line">        data: orgUvDate,</span><br><span class="line">        yAxis: 1</span><br><span class="line">    &#125; ];</span><br><span class="line">    var chart = new Highcharts.Chart(&#123;</span><br><span class="line">        chart: &#123;</span><br><span class="line">            renderTo: &#x27;chartContainer&#x27;,</span><br><span class="line">            type: &#x27;line&#x27;,</span><br><span class="line">            zoomType: &#x27;x&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        title: &#123;</span><br><span class="line">            text: title,</span><br><span class="line">               style: &#123;</span><br><span class="line">                font: &#x27;bold 16px Verdana, sans-serif&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        credits: &#123;</span><br><span class="line">                text: &#x27;www.ablesky.com&#x27;,</span><br><span class="line">                href: &#x27;http://www.ablesky.com&#x27;,</span><br><span class="line">                fontSize: &#x27;16px&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        colors: colors,</span><br><span class="line">        xAxis: &#123;</span><br><span class="line">            categories: xAxis,</span><br><span class="line">            labels: &#123;</span><br><span class="line">                rotation: -30,</span><br><span class="line">                step: xAxis.length &gt; 35? Math.round(xAxis.length / 20) : 1,</span><br><span class="line">                align: &#x27;right&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        yAxis: yAxis,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">            formatter: function() &#123;</span><br><span class="line">                    return &#x27;&lt;b&gt;&#x27;+ this.series.name +&#x27;&lt;/b&gt;&lt;br/&gt;&#x27;+</span><br><span class="line">                    this.x +&#x27;: &#x27;+ this.y;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        plotOptions: &#123;</span><br><span class="line">            series:&#123;</span><br><span class="line">                marker: &#123;</span><br><span class="line">                    enabled: false,</span><br><span class="line">                    states: &#123;</span><br><span class="line">                        hover: &#123;</span><br><span class="line">                            enabled: true</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        series: series</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>附 1: 图 1 图 2 数据格式:</strong></p>
<p><img src="https://img-blog.csdn.net/20130712163426937?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGluZmVuZ3Rpbmd5dTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="image"></p>
<p><strong>附 2: 图 3 数据格式</strong></p>
<p><img src="https://img-blog.csdn.net/20130712163227296?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGluZmVuZ3Rpbmd5dTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="image"></p>
<p>附 3:</p>
<ul>
<li>Highcharts 官网: <a target="_blank" rel="noopener" href="http://www.highcharts.com/">http://www.highcharts.com/</a></li>
<li>Highcharts API 地址: <a target="_blank" rel="noopener" href="http://api.highcharts.com/highcharts">http://api.highcharts.com/highcharts</a></li>
<li>Highcharts demo: <a target="_blank" rel="noopener" href="http://www.highcharts.com/demo/">http://www.highcharts.com/demo/</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/webGL-three-js%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/webGL-three-js%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">webGL-three.js入门笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 15:04:04 / 修改时间：15:09:04" itemprop="dateCreated datePublished" datetime="2022-12-16T15:04:04+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webGL%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">webGL总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://upload-images.jianshu.io/upload_images/4923775-9126a81a4cf5c49c.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/614/format/webp" alt="image"></p>
<p>webGL 的 3D 世界主要由三大要素构成：场景（scene）、相机（camera）和渲染器（renderer），三者缺一不可。渲染的原理是：我们将创建的物体，添加到场景中，再通过相机（可以理解为人的视角）渲染到渲染器，从而呈现在网页中。three.js 是 webGL 一款比较热门的类库，本文以”three.js”: “^0.77.1”为例，通过网上教程和自身实践整理成这篇笔记。</p>
<h2 id="1-场景-scene"><a href="#1-场景-scene" class="headerlink" title="1.场景(scene)"></a>1.场景(scene)</h2><p>场景就是所有物体的容器，只需创建一个。假设我们要显示一个苹果，那么就将苹果加入到场景中即可，多个物体可加入到一个场景。<br>构造函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var scene = new THREE.Scene();</span><br></pre></td></tr></table></figure>

<h2 id="2-相机-camera"><a href="#2-相机-camera" class="headerlink" title="2.相机(camera)"></a>2.相机(camera)</h2><p>相机决定了场景中哪个角度的景色会显示出来，就像人的视角，分为正投影相机(THREE.OrthographicCamera)和透视投影相机(THREE.PerspectiveCamera)，正投影和透视投影的区别是：透视投影有一个基本点，就是远处的物体比近处的物体小，一般我们采用透视投影相机的情况比较多。<br>构造函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//正投影相机</span><br><span class="line">var camera = new THREE.OrthographicCamera(left, right, top, bottom, near, far);</span><br><span class="line">//参数详解：</span><br><span class="line">//left：左平面距离相机中心点的垂直距离</span><br><span class="line">//right：右平面距离相机中心点的垂直距离</span><br><span class="line">//top：顶平面距离相机中心点的垂直距离</span><br><span class="line">//bottom：底平面距离相机中心点的垂直距离</span><br><span class="line">//near：近平面距离相机中心点的垂直距离</span><br><span class="line">//far：远平面距离相机中心点的垂直距离</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//透视投影相机</span><br><span class="line">var camera = new THREE.PerspectiveCamera(fov, aspect, near, far)</span><br><span class="line">//参数详解：</span><br><span class="line">//视角fov：可以理解为视角的大小，如果设置为0，相当于没有了视角，什么也看不到；如果为180，那么可以认为你的视界很广阔，但在180度的时候，往往物体很小，因为物体在你整个可视区域中的比例变小了</span><br><span class="line">//近平面near：表示近处的裁面的距离，也可以认为是眼睛到近处的距离，不能为负数</span><br><span class="line">//远平面far：表示远处的裁面的距离</span><br><span class="line">//纵横比aspect：实际窗口的纵横比，即宽度除以高度，这个值越大，说明宽度越大</span><br></pre></td></tr></table></figure>

<h2 id="3-渲染器-renderer"><a href="#3-渲染器-renderer" class="headerlink" title="3.渲染器(renderer)"></a>3.渲染器(renderer)</h2><p>渲染器决定了渲染结果应挂接在页面的什么元素上，并以怎样的方式绘制。<br>构造函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var renderer = new THREE.WebGLRenderer();</span><br><span class="line">renderer.setSize(window.innerWidth, window.innerHeight);//设置渲染区域大小</span><br><span class="line">document.body.appendChild(renderer, domElement);//渲染在domElement并挂接到body下</span><br><span class="line">renderer.render(scene, camera); //将场景通过相机视角渲染出来</span><br></pre></td></tr></table></figure>

<p>如果要让物体动起来，那么我们可以利用循环渲染：requestAnimationFrame</p>
<h2 id="4-光源"><a href="#4-光源" class="headerlink" title="4.光源"></a>4.光源</h2><p>光是我们看见物体的关键，用 Light 表示，是所有光源的基类，底下还有很多分类，我举几个最常用的：</p>
<p>环境光：环境光是经过多次反射惹来的光，无法确定其最初的方向，是一种无处不在的光。环境光源放出的光线被认为来自任何方向。因此，当你仅为场景设定环境光时，所有的物体无论法向量如何，都将表现为同样的明暗程度。<br>构造函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">THREE.AmbientLight(hex); //hex为一个16进制的颜色值</span><br></pre></td></tr></table></figure>

<p>平行光：是一组没有衰减的平行的光线，类似太阳光的效果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">THREE.DirectionalLight(hex, intensity)</span><br></pre></td></tr></table></figure>

<p>点光源：由这种光源放出的光线来自同一点，且方向辐射自四面八方</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">THREE.PointLight(color, intensity, distance)；</span><br><span class="line">//color代表光的颜色</span><br><span class="line">//intensity：代表光的强度，默认1.0，表示100%强度的灯光</span><br><span class="line">//distance：代表光的距离，从光源所在的位置，经过distance这段距离之后，光的强度将从Intensity衰减为0，默认0.0，表示光源强度不衰减</span><br></pre></td></tr></table></figure>

<p>聚光灯：这种光源的光线从一个椎体中射出，在被照射的物体上产生聚光的效果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">THREE.SpotLight(hex, intensity, distance, angle, exponent)</span><br><span class="line">//angle：聚光灯着色的角度，用弧度作为单位，这个角度是和光源的方向形成的角度</span><br><span class="line">//exponent：光源模型中，衰减的一个参数，越大衰减越快</span><br></pre></td></tr></table></figure>

<h2 id="5-物体"><a href="#5-物体" class="headerlink" title="5.物体"></a>5.物体</h2><p>创建一个物体可以包含多种元素，几何体，材质，纹理等，创建一个小球的简单示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let geometry =new THREE.SphereGeometry(3, 16, 16);   //球体</span><br><span class="line">let material = new THREE.MeshPhongMaterial(&#123;color:0x48D1CC,specular:0xffffff,shininess:100&#125;);     //材质</span><br><span class="line">var ball = new THREE.Mesh(geometry, material); //两者共同组成一个球体</span><br><span class="line">scene.add(ball); //将球体添加至场景中</span><br></pre></td></tr></table></figure>

<p>关于几何体，材质等种类非常多，具体可以参考[three.js 源码]：<a target="_blank" rel="noopener" href="https://github.com/mrdoob/three.js/">https://github.com/mrdoob/three.js/</a></p>
<h2 id="6-动画"><a href="#6-动画" class="headerlink" title="6.动画"></a>6.动画</h2><p>总结上述步骤：</p>
<blockquote>
<ul>
<li>创建场景、相机、渲染器</li>
<li>创建光源</li>
<li>创建物体并添加至场景中</li>
<li>渲染出场景</li>
</ul>
</blockquote>
<p>这样就构成了一个完整的但也是最基础的流程，网页中能看到我们创造的物体，接下来说到动画，3D 世界中的运动方式总结为三种：移动，旋转和缩放。<br>运动是相对的，场景动起来有两种方式：</p>
<h3 id="1-物体在坐标系中移动，相机不动"><a href="#1-物体在坐标系中移动，相机不动" class="headerlink" title="1). 物体在坐标系中移动，相机不动"></a>1). 物体在坐标系中移动，相机不动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function animate()&#123;</span><br><span class="line">  ball.position.x += 1;</span><br><span class="line">  renderer.render(scene, camera);</span><br><span class="line">  requestAnimationFrame(animation);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-相机在坐标系中移动，物体不动"><a href="#2-相机在坐标系中移动，物体不动" class="headerlink" title="2). 相机在坐标系中移动，物体不动"></a>2). 相机在坐标系中移动，物体不动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function animate()&#123;</span><br><span class="line">  camera.position.x += 1;</span><br><span class="line">  renderer.render(scene, camera);</span><br><span class="line">  requestAnimationFrame(animation);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>[demo 展示中心]：<a target="_blank" rel="noopener" href="https://yomonah.github.io/project/app.html#/webGL-icosahedron">https://yomonah.github.io/project/app.html#/webGL-icosahedron</a></li>
<li>[源码]：<a target="_blank" rel="noopener" href="https://github.com/yomonah/react-demo/tree/master/src/components/webGL_ball">https://github.com/yomonah/react-demo/tree/master/src/components/webGL_ball</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">百度地图使用笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 15:03:58 / 修改时间：15:08:29" itemprop="dateCreated datePublished" datetime="2022-12-16T15:03:58+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webGL%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">webGL总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="地图级别控制"><a href="#地图级别控制" class="headerlink" title="地图级别控制"></a>地图级别控制</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 百度地图API功能</span><br><span class="line">var map = new BMap.Map(&quot;allmap&quot;, &#123;enableMapClick:false&#125;);//构造底图时，关闭底图可点功能</span><br><span class="line"></span><br><span class="line">// 初始化地图,设置中心点坐标(城市名)和地图级别</span><br><span class="line">map.centerAndZoom(&quot;上海&quot;,15);</span><br><span class="line">map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);</span><br><span class="line"></span><br><span class="line">// 移动地图到中心点</span><br><span class="line">map.panTo(new BMap.Point(113.262232,23.154345));</span><br><span class="line"></span><br><span class="line">// 设置缩放级别</span><br><span class="line">map.setZoom(14);</span><br><span class="line"></span><br><span class="line">// 开启地图缩放</span><br><span class="line">map.enableScrollWheelZoom();</span><br><span class="line"></span><br><span class="line">// 可以拖拽</span><br><span class="line">marker.enableDragging();</span><br><span class="line"></span><br><span class="line">// 不可以拖拽</span><br><span class="line">marker.disableDragging();</span><br></pre></td></tr></table></figure>

<h2 id="获取两点之间距离"><a href="#获取两点之间距离" class="headerlink" title="获取两点之间距离"></a>获取两点之间距离</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var pointA = new BMap.Point(106.486654,29.490295);  // 创建点坐标A--大渡口区</span><br><span class="line">var pointB = new BMap.Point(106.581515,29.615467);  // 创建点坐标B--江北区</span><br><span class="line">alert(&#x27;从大渡口区到江北区的距离是：&#x27;+(map.getDistance(pointA,pointB)).toFixed(2)+&#x27; 米。&#x27;);  //获取两点距离</span><br></pre></td></tr></table></figure>

<h2 id="添加-图形，点，线，面-文字"><a href="#添加-图形，点，线，面-文字" class="headerlink" title="添加 图形，点，线，面 文字"></a>添加 图形，点，线，面 文字</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">//  marker是随着地图缩放级别，尺寸变化的</span><br><span class="line">var marker = new BMap.Marker(new BMap.Point(116.404, 39.915)); // 创建点</span><br><span class="line"></span><br><span class="line">// 折线</span><br><span class="line">var polyline = new BMap.Polyline([</span><br><span class="line">new BMap.Point(116.399, 39.910),</span><br><span class="line">new BMap.Point(116.405, 39.920),</span><br><span class="line">new BMap.Point(116.425, 39.900)</span><br><span class="line">], &#123;strokeColor: &quot;blue&quot;, strokeWeight: 2, strokeOpacity: 0.5&#125;);   //创建折线</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 创建圆</span><br><span class="line">var circle = new BMap.Circle(</span><br><span class="line">point, 1500,</span><br><span class="line">&#123;strokeColor: &quot;blue&quot;,</span><br><span class="line">  fillColor: &quot;#ccc&quot;,</span><br><span class="line">  strokeWeight: 2,</span><br><span class="line">  strokeOpacity: 0.5,</span><br><span class="line">  fillOpacity: 0.7&#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 多边形</span><br><span class="line">var polygon = new BMap.Polygon([</span><br><span class="line">new BMap.Point(116.387112, 39.920977),</span><br><span class="line">new BMap.Point(116.385243, 39.913063),</span><br><span class="line">new BMap.Point(116.394226, 39.917988),</span><br><span class="line">new BMap.Point(116.401772, 39.921364),</span><br><span class="line">new BMap.Point(116.41248, 39.927893)</span><br><span class="line">], &#123;strokeColor: &quot;blue&quot;, strokeWeight: 2, strokeOpacity: 0.5&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//创建矩形</span><br><span class="line">var pStart = new BMap.Point(116.392214, 39.918985);</span><br><span class="line">var pEnd = new BMap.Point(116.41478, 39.911901);</span><br><span class="line">var rectangle = new BMap.Polygon([</span><br><span class="line">new BMap.Point(pStart.lng, pStart.lat),</span><br><span class="line">new BMap.Point(pEnd.lng, pStart.lat),</span><br><span class="line">new BMap.Point(pEnd.lng, pEnd.lat),</span><br><span class="line">new BMap.Point(pStart.lng, pEnd.lat)</span><br><span class="line">], &#123;strokeColor: &quot;blue&quot;, strokeWeight: 2, strokeOpacity: 0.5&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 开启(关闭)点线面的编辑(可以拖拽，移动点)</span><br><span class="line">polygon.enableEditing()</span><br><span class="line">polygon.disableEditing()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 文字label</span><br><span class="line">var opts = &#123;</span><br><span class="line">  position : new BMap.Point(116.417854,39.921988),    // 指定文本标注所在的地理位置</span><br><span class="line">  offset   : new BMap.Size(30, -30)    //设置文本偏移量</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var label = new BMap.Label(&quot;欢迎使用百度地图，这是一个简单的文本标注哦~&quot;, opts);  // 创建文本标注对象</span><br><span class="line">label.setStyle(&#123;</span><br><span class="line">  color : &quot;red&quot;,</span><br><span class="line">  fontSize : &quot;12px&quot;,</span><br><span class="line">  height : &quot;20px&quot;,</span><br><span class="line">  lineHeight : &quot;20px&quot;,</span><br><span class="line">  fontFamily:&quot;微软雅黑&quot;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 覆盖物显示，隐藏</span><br><span class="line">marker.show()</span><br><span class="line">marker.hide()</span><br><span class="line"></span><br><span class="line">// 添加覆盖物</span><br><span class="line">map.addOverlay(marker);</span><br><span class="line"></span><br><span class="line">// 清除覆盖物</span><br><span class="line">map.clearOverlays();</span><br></pre></td></tr></table></figure>

<h2 id="删除指定覆盖物"><a href="#删除指定覆盖物" class="headerlink" title="删除指定覆盖物"></a>删除指定覆盖物</h2><blockquote>
<p>getOverlays 方法可以获取 覆盖物数组，getLabel 方法可以，获取他的 label</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function deletePoint()&#123;</span><br><span class="line">        var allOverlay = map.getOverlays();</span><br><span class="line">        for (var i = 0; i &lt; allOverlay.length -1; i++)&#123;</span><br><span class="line">            if(allOverlay[i].getLabel().content == &quot;我是id=1&quot;)&#123;</span><br><span class="line">                map.removeOverlay(allOverlay[i]);</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="marker-自定义-icon"><a href="#marker-自定义-icon" class="headerlink" title="marker 自定义 icon"></a>marker 自定义 icon</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 创建小狐狸icon</span><br><span class="line">var pt = new BMap.Point(116.417, 39.909);</span><br><span class="line">var myIcon = new BMap.Icon(&quot;http://lbsyun.baidu.com/jsdemo/img/fox.gif&quot;, new BMap.Size(300,157));</span><br><span class="line">var marker2 = new BMap.Marker(pt,&#123;icon:myIcon&#125;);  // 创建标注</span><br><span class="line">map.addOverlay(marker2);</span><br></pre></td></tr></table></figure>

<h2 id="加载海量点"><a href="#加载海量点" class="headerlink" title="加载海量点"></a>加载海量点</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// data source</span><br><span class="line">var data = &#123;&quot;data&quot;:[[74.438,39.006,1]]&#125;</span><br><span class="line"></span><br><span class="line">if (document.createElement(&#x27;canvas&#x27;).getContext) &#123;  // 判断当前浏览器是否支持绘制海量点</span><br><span class="line">    var points = [];  // 添加海量点数据</span><br><span class="line">    for (var i = 0; i &lt; data.data.length; i++) &#123;</span><br><span class="line">      points.push(new BMap.Point(data.data[i][0], data.data[i][1]));</span><br><span class="line">    &#125;</span><br><span class="line">    var options = &#123;</span><br><span class="line">        size: BMAP_POINT_SIZE_SMALL,</span><br><span class="line">        shape: BMAP_POINT_SHAPE_STAR,</span><br><span class="line">        color: &#x27;#d340c3&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    var pointCollection = new BMap.PointCollection(points, options);  // 初始化PointCollection</span><br><span class="line">    pointCollection.addEventListener(&#x27;click&#x27;, function (e) &#123;</span><br><span class="line">      alert(&#x27;单击点的坐标为：&#x27; + e.point.lng + &#x27;,&#x27; + e.point.lat);  // 监听点击事件</span><br><span class="line">    &#125;);</span><br><span class="line">    map.addOverlay(pointCollection);  // 添加Overlay</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    alert(&#x27;请在chrome、safari、IE8+以上浏览器查看本示例&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="两点之间-画弧线-圆弧"><a href="#两点之间-画弧线-圆弧" class="headerlink" title="两点之间 画弧线 圆弧"></a>两点之间 画弧线 圆弧</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//  引入一个库</span><br><span class="line"> &lt;script type=&quot;text/javascript&quot; src=&quot;http://api.map.baidu.com/library/CurveLine/1.5/src/CurveLine.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">var points = []</span><br><span class="line">points.push( new BMap.Point(116.432045,39.910683) )</span><br><span class="line">points.push( new BMap.Point(120.129721,30.314429) )</span><br><span class="line">points.push( new BMap.Point(121.491121,25.127053) )</span><br><span class="line">var curve = new BMapLib.CurveLine(points, &#123;strokeColor:&quot;blue&quot;, strokeWeight:3, strokeOpacity:0.5&#125;); //创建弧线对象</span><br><span class="line">map.addOverlay(curve); //添加到地图中</span><br><span class="line">curve.enableEditing(); //开启编辑功能</span><br><span class="line"></span><br><span class="line">//  centre:椭圆中心点,X:横向经度,Y:纵向纬度</span><br><span class="line">function add_oval(centre,x,y)&#123;</span><br><span class="line">  var assemble= []</span><br><span class="line">  var angle;</span><br><span class="line">  var dot;</span><br><span class="line">  var tangent=x/y;</span><br><span class="line">  for(i=0;i&lt;36;i++)</span><br><span class="line">  &#123;</span><br><span class="line">    angle = (2* Math.PI / 36) * i;</span><br><span class="line">    dot = new BMap.Point(centre.lng+Math.sin(angle)*y*tangent, centre.lat+Math.cos(angle)*y);</span><br><span class="line">    assemble.push(dot);</span><br><span class="line">  &#125;</span><br><span class="line">  return assemble;</span><br><span class="line">&#125;</span><br><span class="line">var oval = new BMap.Polygon(add_oval(point,0.1,0.3), &#123;strokeColor:&quot;blue&quot;, strokeWeight:6, strokeOpacity:0.5&#125;);</span><br><span class="line">map.addOverlay(oval);</span><br></pre></td></tr></table></figure>

<h2 id="画行政区"><a href="#画行政区" class="headerlink" title="画行政区"></a>画行政区</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">function getBoundary()&#123;</span><br><span class="line">  var bdary = new BMap.Boundary();</span><br><span class="line">  console.log(bdary)</span><br><span class="line">  bdary.get(&quot;上海市徐汇区&quot;, function(rs)&#123;       //获取行政区域</span><br><span class="line">    map.clearOverlays();        //清除地图覆盖物</span><br><span class="line"></span><br><span class="line">    // rs.boundaries 是一个数组，每个元素，是地理位置的字符串 &quot;12,12;123,23&quot;</span><br><span class="line">    var count = rs.boundaries.length;</span><br><span class="line">    if (count === 0) &#123;</span><br><span class="line">      alert(&#x27;未能获取当前输入行政区域&#x27;);</span><br><span class="line">      return ;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(rs.boundaries)</span><br><span class="line">    var pointArray = [];</span><br><span class="line">    for (var i = 0; i &lt; count; i++) &#123;</span><br><span class="line">      var ply = new BMap.Polygon(rs.boundaries[i],</span><br><span class="line">        &#123;</span><br><span class="line">          strokeWeight: 2,</span><br><span class="line">          strokeColor: &quot;#ff0000&quot;,</span><br><span class="line">          fillColor: &#x27;blue&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">        ); //建立多边形覆盖物</span><br><span class="line">      map.addOverlay(ply);  //添加覆盖物</span><br><span class="line">      pointArray = pointArray.concat(ply.getPath());</span><br><span class="line">      console.log(pointArray)</span><br><span class="line">    &#125;</span><br><span class="line">    map.setViewport(pointArray);    //调整视野</span><br><span class="line">    addlabel();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="自定义覆盖物"><a href="#自定义覆盖物" class="headerlink" title="自定义覆盖物"></a>自定义覆盖物</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">// 复杂的自定义覆盖物</span><br><span class="line">function ComplexCustomOverlay(point, text, mouseoverText)&#123;</span><br><span class="line">  this._point = point;</span><br><span class="line">  this._text = text;</span><br><span class="line">  this._overText = mouseoverText;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ComplexCustomOverlay.prototype = new BMap.Overlay();</span><br><span class="line">ComplexCustomOverlay.prototype.initialize = function(map)&#123;</span><br><span class="line">  this._map = map;</span><br><span class="line">  var div = this._div = document.createElement(&quot;div&quot;);</span><br><span class="line">  div.style.position = &quot;absolute&quot;;</span><br><span class="line">  div.style.zIndex = BMap.Overlay.getZIndex(this._point.lat);</span><br><span class="line">  div.style.backgroundColor = &quot;#EE5D5B&quot;;</span><br><span class="line">  div.style.border = &quot;1px solid #BC3B3A&quot;;</span><br><span class="line">  div.style.color = &quot;white&quot;;</span><br><span class="line">  div.style.height = &quot;18px&quot;;</span><br><span class="line">  div.style.padding = &quot;2px&quot;;</span><br><span class="line">  div.style.lineHeight = &quot;18px&quot;;</span><br><span class="line">  div.style.whiteSpace = &quot;nowrap&quot;;</span><br><span class="line">  div.style.MozUserSelect = &quot;none&quot;;</span><br><span class="line">  div.style.fontSize = &quot;12px&quot;</span><br><span class="line">  var span = this._span = document.createElement(&quot;span&quot;);</span><br><span class="line">  div.appendChild(span);</span><br><span class="line">  span.appendChild(document.createTextNode(this._text));</span><br><span class="line">  var that = this;</span><br><span class="line"></span><br><span class="line">  var arrow = this._arrow = document.createElement(&quot;div&quot;);</span><br><span class="line">  arrow.style.background = &quot;url(http://map.baidu.com/fwmap/upload/r/map/fwmap/static/house/images/label.png) no-repeat&quot;;</span><br><span class="line">  arrow.style.position = &quot;absolute&quot;;</span><br><span class="line">  arrow.style.width = &quot;11px&quot;;</span><br><span class="line">  arrow.style.height = &quot;10px&quot;;</span><br><span class="line">  arrow.style.top = &quot;22px&quot;;</span><br><span class="line">  arrow.style.left = &quot;10px&quot;;</span><br><span class="line">  arrow.style.overflow = &quot;hidden&quot;;</span><br><span class="line">  div.appendChild(arrow);</span><br><span class="line"></span><br><span class="line">  div.onmouseover = function()&#123;</span><br><span class="line">    this.style.backgroundColor = &quot;#6BADCA&quot;;</span><br><span class="line">    this.style.borderColor = &quot;#0000ff&quot;;</span><br><span class="line">    this.getElementsByTagName(&quot;span&quot;)[0].innerHTML = that._overText;</span><br><span class="line">    arrow.style.backgroundPosition = &quot;0px -20px&quot;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  div.onmouseout = function()&#123;</span><br><span class="line">    this.style.backgroundColor = &quot;#EE5D5B&quot;;</span><br><span class="line">    this.style.borderColor = &quot;#BC3B3A&quot;;</span><br><span class="line">    this.getElementsByTagName(&quot;span&quot;)[0].innerHTML = that._text;</span><br><span class="line">    arrow.style.backgroundPosition = &quot;0px 0px&quot;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mp.getPanes().labelPane.appendChild(div);</span><br><span class="line"></span><br><span class="line">  return div;</span><br><span class="line">&#125;</span><br><span class="line">ComplexCustomOverlay.prototype.draw = function()&#123;</span><br><span class="line">  var map = this._map;</span><br><span class="line">  var pixel = map.pointToOverlayPixel(this._point);</span><br><span class="line">  this._div.style.left = pixel.x - parseInt(this._arrow.style.left) + &quot;px&quot;;</span><br><span class="line">  this._div.style.top  = pixel.y - 30 + &quot;px&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var txt = &quot;银湖海岸城&quot;, mouseoverTxt = txt + &quot; &quot; + parseInt(Math.random() * 1000,10) + &quot;套&quot; ;</span><br><span class="line"></span><br><span class="line">var myCompOverlay = new ComplexCustomOverlay(new BMap.Point(116.407845,39.914101), &quot;银湖海岸城&quot;,mouseoverTxt);</span><br><span class="line"></span><br><span class="line">mp.addOverlay(myCompOverlay);</span><br></pre></td></tr></table></figure>

<h2 id="点聚合-放大缩小"><a href="#点聚合-放大缩小" class="headerlink" title="点聚合(放大缩小)"></a>点聚合(放大缩小)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">// markers 是一个marker数组</span><br><span class="line">var markerClusterer = new BMapLib.MarkerClusterer(map, &#123;markers:markers&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="矢量图-图标"><a href="#矢量图-图标" class="headerlink" title="矢量图 图标"></a>矢量图 图标</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">var vectorFCArrow = new BMap.Marker(new BMap.Point(point.lng-0.01,point.lat), &#123;</span><br><span class="line">  // 初始化方向向上的闭合箭头</span><br><span class="line">  icon: new BMap.Symbol(BMap_Symbol_SHAPE_FORWARD_CLOSED_ARROW, &#123;</span><br><span class="line">    scale: 5,</span><br><span class="line">    strokeWeight: 1,</span><br><span class="line">    rotation: 0,//顺时针旋转30度</span><br><span class="line">    fillColor: &#x27;red&#x27;,</span><br><span class="line">    fillOpacity: 0.8</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var vectorStar = new BMap.Marker(new BMap.Point(point.lng+0.03,point.lat-0.03), &#123;</span><br><span class="line">  // 初始化五角星symbol</span><br><span class="line">  icon: new BMap.Symbol(BMap_Symbol_SHAPE_STAR, &#123;</span><br><span class="line">    scale: 5,</span><br><span class="line">    fillColor: &quot;pink&quot;,</span><br><span class="line">    fillOpacity: 0.8</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="信息弹窗"><a href="#信息弹窗" class="headerlink" title="信息弹窗"></a>信息弹窗</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var infoWindow = new BMap.InfoWindow(&quot;地址：北京市东城区王府井大街88号乐天银泰百货八层&quot;, &#123;</span><br><span class="line">  width : 200,     // 信息窗口宽度</span><br><span class="line">  height: 100,     // 信息窗口高度</span><br><span class="line">  title : &quot;海底捞王府井店&quot; , // 信息窗口标题</span><br><span class="line">  enableMessage:true,//设置允许信息窗发送短息</span><br><span class="line">  message:&quot;亲耐滴，晚上一起吃个饭吧？戳下面的链接看下地址喔~&quot;</span><br><span class="line">&#125;);</span><br><span class="line">marker.addEventListener(&quot;click&quot;, function()&#123;</span><br><span class="line">  map.openInfoWindow(infoWindow,point); //开启信息窗口</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="鼠标右键"><a href="#鼠标右键" class="headerlink" title="鼠标右键"></a>鼠标右键</h2><blockquote>
<p>除了地图，marker 也支持加右键</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var menu = new BMap.ContextMenu();</span><br><span class="line">var txtMenuItem = [</span><br><span class="line">    &#123;</span><br><span class="line">        text:&#x27;放大&#x27;,</span><br><span class="line">        callback:function()&#123;map.zoomIn()&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        text:&#x27;缩小&#x27;,</span><br><span class="line">        callback:function()&#123;map.zoomOut()&#125;</span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line">for(var i=0; i &lt; txtMenuItem.length; i++)&#123;</span><br><span class="line">    menu.addItem(new BMap.MenuItem(txtMenuItem[i].text,txtMenuItem[i].callback,100));</span><br><span class="line">&#125;</span><br><span class="line">map.addContextMenu(menu);</span><br></pre></td></tr></table></figure>

<h2 id="鼠标测距"><a href="#鼠标测距" class="headerlink" title="鼠标测距"></a>鼠标测距</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//  引入插件</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://api.map.baidu.com/library/DistanceTool/1.2/src/DistanceTool_min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var myDis = new BMapLib.DistanceTool(map);</span><br><span class="line">map.addEventListener(&quot;load&quot;,function()&#123;</span><br><span class="line">  myDis.open();  //开启鼠标测距</span><br><span class="line">  //myDis.close();  //关闭鼠标测距大</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 获取点击点坐标</span><br><span class="line">map.addEventListener(&quot;click&quot;,function(e)&#123;</span><br><span class="line">  alert(e.point.lng + &quot;,&quot; + e.point.lat);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="带箭头的-line"><a href="#带箭头的-line" class="headerlink" title="带箭头的 line"></a>带箭头的 line</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">  /**</span><br><span class="line">   * 变量定义：pixelStart： 线的一端屏幕坐标，pixelEnd：线的箭头端屏幕坐标；r：选取多长距离绘制箭头（单位像素，并不是CB对应的箭头的长度，而是红色线段对应的距离）；angle：箭头线（CB或者DB）与AB的夹角。</span><br><span class="line">   1) 首先要将AB两点的经纬度坐标转换成屏幕坐标。</span><br><span class="line">   2) 然后根据AB两点屏幕坐标以及r长度，计算绿色小绿点的屏幕坐标pixelTem。</span><br><span class="line">   3) 然后根据B点、小绿点的屏幕坐标及angle角度，计算出C,D两点的屏幕坐标。</span><br><span class="line">   4) 利用map的坐标转换方法，将C,D两点的屏幕坐标转成经纬度表示的坐标。</span><br><span class="line">   5) 利用画线方法，绘制CBD多折线。</span><br><span class="line">   */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export function drawArrow(map, points) &#123;</span><br><span class="line">  let polyline = new BMap.Polyline(</span><br><span class="line">    points, &#123;strokeColor: &quot;white&quot;, strokeWeight: 3&#125;);</span><br><span class="line">  map.addOverlay(polyline);</span><br><span class="line"></span><br><span class="line">  addArrow(polyline, 10, Math.PI / 7);</span><br><span class="line"></span><br><span class="line">  function addArrow(polyline, length, angleValue) &#123; //绘制箭头的函数</span><br><span class="line">    let linePoint = polyline.getPath();//线的坐标串</span><br><span class="line">    console.log(linePoint);</span><br><span class="line">    let arrowCount = linePoint.length;</span><br><span class="line">    for (let i = 1; i &lt; arrowCount; i++) &#123; //在拐点处绘制箭头</span><br><span class="line"></span><br><span class="line">      // pointToPixel 经纬度坐标转换为像素坐标</span><br><span class="line">      let pixelStart = map.pointToPixel(linePoint[i - 1]);</span><br><span class="line"></span><br><span class="line">      let pixelEnd = map.pointToPixel(linePoint[i]);</span><br><span class="line">      let angle = angleValue;//箭头和主线的夹角</span><br><span class="line">      let r = length; // r/Math.sin(angle)代表箭头长度</span><br><span class="line">      let delta = 0; //主线斜率，垂直时无斜率</span><br><span class="line">      let param = 0; //代码简洁考虑</span><br><span class="line">      let pixelTemX, pixelTemY;//临时点坐标</span><br><span class="line">      let pixelX, pixelY, pixelX1, pixelY1;//箭头两个点</span><br><span class="line">      if (pixelEnd.x - pixelStart.x == 0) &#123; //斜率不存在时</span><br><span class="line">        pixelTemX = pixelEnd.x;</span><br><span class="line">        if (pixelEnd.y &gt; pixelStart.y) &#123;</span><br><span class="line">          pixelTemY = pixelEnd.y - r;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pixelTemY = pixelEnd.y + r;</span><br><span class="line">        &#125;</span><br><span class="line">        //已知直角三角形两个点坐标及其中一个角，求另外一个点坐标算法</span><br><span class="line">        pixelX = pixelTemX - r * Math.tan(angle);</span><br><span class="line">        pixelX1 = pixelTemX + r * Math.tan(angle);</span><br><span class="line">        pixelY = pixelY1 = pixelTemY;</span><br><span class="line">      &#125; else  //斜率存在时</span><br><span class="line">      &#123;</span><br><span class="line">        delta = (pixelEnd.y - pixelStart.y) / (pixelEnd.x - pixelStart.x);</span><br><span class="line">        param = Math.sqrt(delta * delta + 1);</span><br><span class="line"></span><br><span class="line">        if ((pixelEnd.x - pixelStart.x) &lt; 0) //第二、三象限</span><br><span class="line">        &#123;</span><br><span class="line">          pixelTemX = pixelEnd.x + r / param;</span><br><span class="line">          pixelTemY = pixelEnd.y + delta * r / param;</span><br><span class="line">        &#125; else//第一、四象限</span><br><span class="line">        &#123;</span><br><span class="line">          pixelTemX = pixelEnd.x - r / param;</span><br><span class="line">          pixelTemY = pixelEnd.y - delta * r / param;</span><br><span class="line">        &#125;</span><br><span class="line">        //已知直角三角形两个点坐标及其中一个角，求另外一个点坐标算法</span><br><span class="line">        pixelX = pixelTemX + Math.tan(angle) * r * delta / param;</span><br><span class="line">        pixelY = pixelTemY - Math.tan(angle) * r / param;</span><br><span class="line"></span><br><span class="line">        pixelX1 = pixelTemX - Math.tan(angle) * r * delta / param;</span><br><span class="line">        pixelY1 = pixelTemY + Math.tan(angle) * r / param;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      let pointArrow = map.pixelToPoint(new BMap.Pixel(pixelX, pixelY));</span><br><span class="line">      let pointArrow1 = map.pixelToPoint(new BMap.Pixel(pixelX1, pixelY1));</span><br><span class="line">      let Arrow = new BMap.Polyline([</span><br><span class="line">        pointArrow,</span><br><span class="line">        linePoint[i],</span><br><span class="line">        pointArrow1</span><br><span class="line">      ], &#123;strokeColor: &quot;white&quot;, strokeWeight: 3&#125;);</span><br><span class="line">      map.addOverlay(Arrow);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BEJSapi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BEJSapi/" class="post-title-link" itemprop="url">高德地图JSapi</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 15:03:53 / 修改时间：15:08:34" itemprop="dateCreated datePublished" datetime="2022-12-16T15:03:53+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webGL%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">webGL总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>简介： 1.js 显示地图，选择容器；设置地图的中心点，并标记。 var marker, map &#x3D; new AMap.</p>
</blockquote>
<h2 id="1-js-显示地图"><a href="#1-js-显示地图" class="headerlink" title="1.js 显示地图"></a>1.js 显示地图</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;http://cache.amap.com/lbs/static/main1119.css&quot;/&gt;&lt;!-- 引入高德地图的样式 --&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://webapi.amap.com/maps?v=1.3&amp;key=aafdf4a9edda043681ff641e6d9b9ee8&quot;&gt;&lt;/script&gt;&lt;!-- 传入key --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://cache.amap.com/lbs/static/addToolbar.js&quot;&gt;&lt;/script&gt;&lt;!-- 引入高德地图js文件 --&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;container&quot; style=&quot;width:49%;height: 80%;&quot;&gt;&lt;/div&gt;&lt;!--放置地图的div  --&gt;</span><br><span class="line">&lt;div id=&quot;container2&quot; style=&quot;width:49%;height: 80%;&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/* 选择容器；设置地图的中心点，并标记 */</span><br><span class="line">var marker, map = new AMap.Map(&quot;container&quot;, &#123;</span><br><span class="line">    resizeEnable: true,</span><br><span class="line">    center: [114.290924,30.601394],</span><br><span class="line">    zoom: 13</span><br><span class="line">&#125;);</span><br><span class="line">/* 设置地图的中心点，并标记 */</span><br><span class="line">var marker2, map2 = new AMap.Map(&quot;container2&quot;, &#123;</span><br><span class="line">    resizeEnable: true,</span><br><span class="line">    center: [114.290924,30.601394],</span><br><span class="line">    zoom: 13</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="2-点击获取地图经纬度坐标；创建-marker-点"><a href="#2-点击获取地图经纬度坐标；创建-marker-点" class="headerlink" title="2.点击获取地图经纬度坐标；创建 marker 点"></a>2.点击获取地图经纬度坐标；创建 marker 点</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/* 点击获取地图坐标 */</span><br><span class="line">var clickEventListener = map.on(&#x27;click&#x27;, function(e) &#123;</span><br><span class="line"> document.getElementById(&quot;xy&quot;).value = e.lnglat.getLng() + &#x27;,&#x27; + e.lnglat.getLat();</span><br><span class="line">  /* 点击一次新增一个标记点 */</span><br><span class="line"> var marker= new AMap.Marker(&#123;</span><br><span class="line">    map:map,</span><br><span class="line">    position:[e.lnglat.getLng(),e.lnglat.getLat()]</span><br><span class="line">     &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="3-在地图上绘制多边形折线"><a href="#3-在地图上绘制多边形折线" class="headerlink" title="3.在地图上绘制多边形折线"></a>3.在地图上绘制多边形折线</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//在地图上绘制折线</span><br><span class="line">var editor=&#123;&#125;;</span><br><span class="line">editor._polygon=(function()&#123;</span><br><span class="line">    return new AMap.Polygon(&#123;</span><br><span class="line">        map: map,</span><br><span class="line">        path: lineArr,/* 这里是一个数组； */</span><br><span class="line">        strokeColor: &quot;#0000ff&quot;,</span><br><span class="line">        strokeOpacity: 1,</span><br><span class="line">        strokeWeight: 3,</span><br><span class="line">        fillColor: &quot;#CD2626&quot;,</span><br><span class="line">        fillOpacity: 0.35</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br><span class="line">map.setFitView();</span><br><span class="line">editor._polygonEditor= new AMap.PolyEditor(map, editor._polygon);</span><br></pre></td></tr></table></figure>

<p>第二种绘制图形</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 绘制轨迹</span><br><span class="line">var polyline = new AMap.Polyline(&#123;</span><br><span class="line">    map: map,</span><br><span class="line">    path: lineArr,/* 这里是坐标数组 */</span><br><span class="line">    strokeColor: &quot;red&quot;,  //线颜色</span><br><span class="line">    strokeOpacity: 1,     //线透明度</span><br><span class="line">    strokeWeight: 1,      //线宽</span><br><span class="line">    strokeStyle: &quot;solid&quot;  //线样式</span><br><span class="line">&#125;);</span><br><span class="line">map.setFitView();</span><br><span class="line">/*  将画线的区域渲染颜色*/</span><br><span class="line">var polygon = new AMap.Polygon(&#123;</span><br><span class="line">    map: map,</span><br><span class="line">    fillOpacity:0.4,</span><br><span class="line">    path: lineArr</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="4-开始编辑多边形；结束编辑多边形"><a href="#4-开始编辑多边形；结束编辑多边形" class="headerlink" title="4.开始编辑多边形；结束编辑多边形"></a>4.开始编辑多边形；结束编辑多边形</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/* 开始编辑 */</span><br><span class="line">editor.startEditPolygon=function()&#123;</span><br><span class="line">    editor._polygonEditor.open();</span><br><span class="line">&#125;</span><br><span class="line">/*结束编辑 */</span><br><span class="line">editor.closeEditPolygon=function()&#123;</span><br><span class="line">    /* 结束编辑时会自动将坐标全部存在数组内</span><br><span class="line">        ；将数组转为字符串，以#号分隔 */</span><br><span class="line">  var  arg = lineArr.join(&quot;#&quot;);</span><br><span class="line">  document.getElementById(&quot;arg&quot;).value=arg+&quot;#&quot;; /* 这里是将数组转成的字符串存起来 */</span><br><span class="line">  editor._polygonEditor.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-清除标记的方法"><a href="#5-清除标记的方法" class="headerlink" title="5.清除标记的方法"></a>5.清除标记的方法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map.clearMap();</span><br></pre></td></tr></table></figure>

<h2 id="6，当时为了去除地图上的样式，起到刷新地图的效果；没有找到更好的方法，选择的重新加载一遍地图。覆盖之前的；也就是在-div-里重新加载一次；"><a href="#6，当时为了去除地图上的样式，起到刷新地图的效果；没有找到更好的方法，选择的重新加载一遍地图。覆盖之前的；也就是在-div-里重新加载一次；" class="headerlink" title="6，当时为了去除地图上的样式，起到刷新地图的效果；没有找到更好的方法，选择的重新加载一遍地图。覆盖之前的；也就是在 div 里重新加载一次；"></a>6，当时为了去除地图上的样式，起到刷新地图的效果；没有找到更好的方法，选择的重新加载一遍地图。覆盖之前的；也就是在 div 里重新加载一次；</h2><h2 id="7，自定义图标以及样式"><a href="#7，自定义图标以及样式" class="headerlink" title="7，自定义图标以及样式"></a>7，自定义图标以及样式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">marker= new AMap.Marker(&#123;</span><br><span class="line">    title:name,/* 鼠标放上去显示的标题 */</span><br><span class="line">    map: map,</span><br><span class="line">    position: arr,/*  坐标数组*/</span><br><span class="line">    icon: new AMap.Icon(&#123;</span><br><span class="line">        size: new AMap.Size(50,50),  //图标大小</span><br><span class="line">        image: &quot;static/img/1.png&quot;,/*图片路径  */</span><br><span class="line">        imageOffset: new AMap.Pixel(0,0)/* 偏移量 */</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">marker.setLabel(&#123;//label默认蓝框白底左上角显示，样式className为：amap-marker-label；可以在css样式里调整</span><br><span class="line">    offset: new AMap.Pixel(-20,20),//修改label相对于maker的位置</span><br><span class="line">    content:&quot;&lt;span style=&#x27;color: red&#x27;&gt;&quot;+name+&quot;&lt;/span&gt;&quot;/* 这里写的是html代码 */</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/%E8%85%BE%E8%AE%AF%E5%9C%B0%E5%9B%BEJavaScript-API%E8%B0%83%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/%E8%85%BE%E8%AE%AF%E5%9C%B0%E5%9B%BEJavaScript-API%E8%B0%83%E7%94%A8/" class="post-title-link" itemprop="url">腾讯地图JavaScript API调用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 15:03:46 / 修改时间：15:08:39" itemprop="dateCreated datePublished" datetime="2022-12-16T15:03:46+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webGL%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">webGL总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1、加载地图-API"><a href="#1、加载地图-API" class="headerlink" title="1、加载地图 API"></a>1、加载地图 API</h2><h3 id="页面直接引入"><a href="#页面直接引入" class="headerlink" title="页面直接引入"></a>页面直接引入</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script charset=&quot;utf-8&quot; src=&quot;https://map.qq.com/api/js?v=2.exp&amp;key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://map.qq.com/api/js?v=2.exp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77">https://map.qq.com/api/js?v=2.exp&amp;key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77</a> 网址是 API 文件的位置，v2.0 指当前使用的 API 的版本标识，key&#x3D;[申请的开发密钥]</p>
<h2 id="2、创建一个容纳地图的-div-容器"><a href="#2、创建一个容纳地图的-div-容器" class="headerlink" title="2、创建一个容纳地图的 div 容器"></a>2、创建一个容纳地图的 div 容器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;container&quot; style=&quot;width:500px; height:300px&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>要使地图在网页上显示，必须为其在网页中创建一个容器。通常，我们通过创建名为 div 的元素并在浏览器的文档对象模型 (DOM) 中获取此元素的引用执行此操作。</p>
<p>在上述示例中，我们定义名为 “container” 的 div，并使用样式属性设置其尺寸。<strong>地图会自动使用容器尺寸调整自身的尺寸</strong>。</p>
<h2 id="3、地图基本对象"><a href="#3、地图基本对象" class="headerlink" title="3、地图基本对象"></a>3、地图基本对象</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var map = new qq.maps.Map(document.getElementById(&#x27;container&#x27;),myoptions);</span><br></pre></td></tr></table></figure>

<p>表示地图的 JavaScript 类是 Map 类。此类的对象在页面上定义单个地图。我们使用 JavaScript new 操作符创建此类的一个新实例。当创建新的地图实例时，在页面中指定一个 DOM 节点（通常是 div 元素）作为地图的容器。HTML 节点是 JavaScript document 对象的子节点，我们通过 document.getElementById() 方法获取对此元素的引用。此代码定义一个全局变量（名为 map），并将该变量分配给新的 Map 对象。函数 Map() 称为构造函数，其定义请参考《参考手册》</p>
<p>myoptions 是地图的配置对象。</p>
<h2 id="4、初始化地图"><a href="#4、初始化地图" class="headerlink" title="4、初始化地图"></a>4、初始化地图</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map.panTo(new qq.maps.LatLng(39.916527,116.397128));</span><br></pre></td></tr></table></figure>

<p>通过 Map 构造函数创建地图之后，还需要执行一个操作，即将其初始化。初始化通过地图的 panTo() 方法完成。panTo() 方法需要 LatLng 经纬度坐标，并且调用此方法必须在对地图执行任何其它操作（包括设置地图本身的任何其它属性）之前。</p>
<p>LatLng 是 latitude 经度 Longitude 纬度 缩写</p>
<h2 id="5、加载地图"><a href="#5、加载地图" class="headerlink" title="5、加载地图"></a>5、加载地图</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;body onload=&quot;init()&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>当 HTML 页面显示时，文档对象模型 (DOM) 即会扩展，接收其他外部图像和脚本并将其合并到 document 对象中。<strong>为了确保只有在完全加载页面后才将我们的地图放在页面上</strong>，我们仅在 HTML 页面的 元素收到 onload 事件后才执行构造 Map 的函数。这样做可以避免出现不可预期的行为，并使我们可以对地图绘制的方式和时间进行更多控制。body 标签的 onload 属性是事件处理程序的一个示例。腾讯 Maps Javascript API 还提供了一组事件，可供您进行处理以确定状态变化。有关详细信息，请参阅地图事件部分。</p>
<p>参考案例 1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;简单地图&lt;/title&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;/&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">        html,body&#123;</span><br><span class="line">            width:100%;</span><br><span class="line">            height:100%;</span><br><span class="line">        &#125;</span><br><span class="line">        *&#123;</span><br><span class="line">            margin:0px;</span><br><span class="line">            padding:0px;</span><br><span class="line">        &#125;</span><br><span class="line">        body, button, input, select, textarea &#123;</span><br><span class="line">            font: 12px/16px Verdana, Helvetica, Arial, sans-serif;</span><br><span class="line">        &#125;</span><br><span class="line">        p&#123;</span><br><span class="line">            width:603px;</span><br><span class="line">            padding-top:3px;</span><br><span class="line">            overflow:hidden;</span><br><span class="line">        &#125;</span><br><span class="line">        .btn&#123;</span><br><span class="line">            width:142px;</span><br><span class="line">        &#125;</span><br><span class="line">        #container&#123;</span><br><span class="line">            min-width:600px;</span><br><span class="line">            min-height:767px;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">    &lt;script charset=&quot;utf-8&quot; src=&quot;https://map.qq.com/api/js?v=2.exp&amp;key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        window.onload = function()&#123;</span><br><span class="line">//直接加载地图</span><br><span class="line">            //初始化地图函数  自定义函数名init</span><br><span class="line">            function init() &#123;</span><br><span class="line">                //定义map变量 调用 qq.maps.Map() 构造函数   获取地图显示容器</span><br><span class="line">                var map = new qq.maps.Map(document.getElementById(&quot;container&quot;), &#123;</span><br><span class="line">                    center: new qq.maps.LatLng(39.916527,116.397128),      // 地图的中心地理坐标。latitude 经度 Longitude 纬度</span><br><span class="line">                    zoom:8                                                 // 设置缩放级别</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            //调用初始化函数地图,可以写在body中 &lt;body onload=&quot;init()&quot;&gt;</span><br><span class="line">            // init();</span><br><span class="line"></span><br><span class="line">            /*</span><br><span class="line">            * function init() &#123;</span><br><span class="line">                  var myLatlng = new qq.maps.LatLng(-34.397, 150.644);</span><br><span class="line">                  var myOptions = &#123;</span><br><span class="line">                    zoom: 8,</span><br><span class="line">                    center: myLatlng,</span><br><span class="line">                    mapTypeId: qq.maps.MapTypeId.ROADMAP</span><br><span class="line">                  &#125;</span><br><span class="line">                  var map = new qq.maps.Map(document.getElementById(&quot;container&quot;), myOptions);</span><br><span class="line">              &#125;</span><br><span class="line">            * */</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body onload=&quot;init()&quot;&gt;</span><br><span class="line">&lt;!--   定义地图显示容器   --&gt;</span><br><span class="line">&lt;div id=&quot;container&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="地图事件"><a href="#地图事件" class="headerlink" title="地图事件"></a>地图事件</h2><p>腾讯地图 API 具有事件接口，用户可以根据各自不同的需求添加不同的事件扩展。</p>
<p>目前腾讯地图提供的事件类型有两类:</p>
<ol>
<li>用户事件（如“点击地图”鼠标事件）是从 DOM 传播到 腾讯 Maps API 中的。这些事件是独立的，并且与标准 DOM 事件不同。包括：<strong>单击事件(click)、双击事件(dblclick)、鼠标滑过事件(mouseover)、鼠标移动(mousemove)等</strong>；</li>
<li>腾讯地图 API 特有的事件，MVC 状态更改通知反映了腾讯 Maps API 对象中的更改，并以 property_changed 惯例命名。如：缩放级别更改事件(zoom_changed)、内容更改事件(content_changed)等。</li>
</ol>
<h3 id="1、添加地图点击事件"><a href="#1、添加地图点击事件" class="headerlink" title="1、添加地图点击事件"></a>1、添加地图点击事件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var listener = qq.maps.event.addListener(</span><br><span class="line">    map,</span><br><span class="line">    &#x27;click&#x27;,</span><br><span class="line">    function() &#123;</span><br><span class="line">        alert(&#x27;您点击了地图。&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>使用 qq.maps.event.addListener() 可以将事件绑定到某一个对象上，返回一个监听者对象。方法<strong>第一个参数为被绑定事件的对象，第二个参数为事件类型，第三个参数为事件的处理方法</strong>。</p>
<h3 id="2、事件中获取参数"><a href="#2、事件中获取参数" class="headerlink" title="2、事件中获取参数"></a>2、事件中获取参数</h3><p>addListener() 在事件被触发时会将 DOM 事件对象传入事件的处理方法，并在<strong>事件对象中添加鼠标当前位置的地理坐标属性 LatLng</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">qq.maps.event.addListener(</span><br><span class="line">    map,</span><br><span class="line">    &#x27;click&#x27;,</span><br><span class="line">    function(event) &#123;</span><br><span class="line">        console.log(&#x27;经度&#x27;,event.latLng.lat,&#x27; 纬度:&#x27;,event.latLng.lng);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="3、移除事件"><a href="#3、移除事件" class="headerlink" title="3、移除事件"></a>3、移除事件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var listener = qq.maps.event.addListener(</span><br><span class="line">    map,</span><br><span class="line">    &#x27;click&#x27;,</span><br><span class="line">    function() &#123;</span><br><span class="line">        alert(&#x27;您点击了地图。&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line">//移除 click 事件.</span><br><span class="line">qq.maps.event.removeListener(listener);</span><br></pre></td></tr></table></figure>

<h2 id="地图控件"><a href="#地图控件" class="headerlink" title="地图控件"></a>地图控件</h2><p>腾讯地图 API 控件是用户与地图交互的 UI 元素。API 提供多样的控件便于用户直接使用，并提供自定义控件 Control，最大限度满足用户需求。</p>
<p>目前腾讯地图 API 中提供的控件有：</p>
<ol>
<li>导航控件</li>
<li>比例尺控件</li>
<li>自定义控件等</li>
</ol>
<h3 id="1、向地图添加控件"><a href="#1、向地图添加控件" class="headerlink" title="1、向地图添加控件"></a>1、向地图添加控件</h3><p>在地图上添加一个比例尺控件，并将控件放置在地图的左下角，可在代码中添加如下内容：</p>
<p><strong>添加比例尺控件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">map = new qq.maps.Map(</span><br><span class="line">    document.getElementById(&quot;container&quot;),</span><br><span class="line">    &#123;</span><br><span class="line">        center: new qq.maps.LatLng(39.914850, 116.403765),</span><br><span class="line">        zoom: 13</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line">var scaleControl = new qq.maps.ScaleControl(&#123;</span><br><span class="line">    align: qq.maps.ALIGN.BOTTOM_LEFT,</span><br><span class="line">    margin: qq.maps.Size(85, 15),</span><br><span class="line">    map: map</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="地图覆盖物"><a href="#地图覆盖物" class="headerlink" title="地图覆盖物"></a>地图覆盖物</h2><p>覆盖物是指覆盖到地图上面的所有事物。覆盖物都有自己的地理属性，<strong>通过设置地理属性来控制覆盖物在地图中的显示位置</strong>。</p>
<p>腾讯地图 API 中的主要包括的覆盖物有：</p>
<ul>
<li>标注</li>
<li>折线</li>
<li>多边形</li>
<li>圆形</li>
<li>信息窗口等</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/Echarts%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%8F%8A%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/Echarts%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%8F%8A%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3/" class="post-title-link" itemprop="url">Echarts学习笔记及查询文档</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 15:03:39 / 修改时间：15:08:55" itemprop="dateCreated datePublished" datetime="2022-12-16T15:03:39+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webGL%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">webGL总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a>Echarts</h2><p>一个使用 javascript 实现的开源可视化库，可以流畅的运行在 PC 和移动设备上，兼容当前绝大部分浏览器，底层依赖矢量图形库 ZRebder，提供直观、交互丰富，可高度个性化定制的数据化图表。</p>
<ul>
<li>下载并引入 echarts</li>
<li>准备一个具备大小的 DOM 容器</li>
<li>初始化 echarts 实例对象</li>
<li>指定配置项和数据</li>
<li>将配置项设置给 echarts 实例对象</li>
</ul>
<p>第一个 echarts 实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;echarts使用示例&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">/*第二步：设置容器并设置容器大小*/</span><br><span class="line">        .box&#123;</span><br><span class="line">            width: 600px;</span><br><span class="line">            height: 600px;</span><br><span class="line">            background-color: darkkhaki;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--第一步：引入--&gt;</span><br><span class="line">    &lt;script src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!--第三步：进行初始化--&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        /*初始化方法 echarts.init(dom容器)*/</span><br><span class="line">        var myChart =  echarts.init(document.querySelector(&quot;.box&quot;));</span><br><span class="line">/*第四步：指定配置项和数据*/</span><br><span class="line">        var option = &#123;</span><br><span class="line">            title: &#123;</span><br><span class="line">                text: &#x27;第一个 ECharts 实例&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            tooltip: &#123;&#125;,</span><br><span class="line">            legend: &#123;</span><br><span class="line">                data:[&#x27;销量&#x27;]</span><br><span class="line">            &#125;,</span><br><span class="line">            xAxis: &#123;</span><br><span class="line">                data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]</span><br><span class="line">            &#125;,</span><br><span class="line">            yAxis: &#123;&#125;,</span><br><span class="line">            series: [&#123;</span><br><span class="line">                name: &#x27;销量&#x27;,</span><br><span class="line">                type: &#x27;bar&#x27;,</span><br><span class="line">                data: [5, 20, 36, 10, 10, 20]</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;;</span><br><span class="line">/*第五步：将配置项设置给echarts实例对象*/</span><br><span class="line">        myChart.setOption(option);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Echarts-基础配置"><a href="#Echarts-基础配置" class="headerlink" title="Echarts 基础配置"></a>Echarts 基础配置</h2><p>需要了解的主要配置：series xAxis yAxis grid tooltip title legend color</p>
<ul>
<li>series<ul>
<li>系列列表。每个系列通过 type 决定自己的图表类型</li>
<li>大白话：图标数据，指定什么类型的图标，可以多个图表重叠。</li>
</ul>
</li>
<li>xAxis：直角坐标系 grid 中的 x 轴<ul>
<li>boundaryGap: 坐标轴两边留白策略 true，这时候刻度只是作为分隔线，标签和数据点都会在两个刻度之间的带(band)中间。</li>
</ul>
</li>
<li>yAxis：直角坐标系 grid 中的 y 轴</li>
<li>grid：直角坐标系内绘图网格。</li>
<li>title：标题组件</li>
<li>tooltip：提示框组件</li>
<li>legend：图例组件</li>
<li>color：调色盘颜色列表<br>数据堆叠，同个类目轴上系列配置相同的 stack 值后 后一个系列的值会在前一个系列的值上相加。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br></pre></td><td class="code"><pre><span class="line">option = &#123;</span><br><span class="line">// color设置我们线条的颜色 注意后面是个数组</span><br><span class="line">color: [‘pink’, ‘red’, ‘green’, ‘skyblue’],</span><br><span class="line">// 设置图表的标题</span><br><span class="line">title: &#123;</span><br><span class="line">    text: ‘折线图堆叠123’</span><br><span class="line">&#125;,</span><br><span class="line">// 图表的提示框组件</span><br><span class="line">tooltip: &#123;</span><br><span class="line">    // 触发方式</span><br><span class="line">    trigger: ‘axis’</span><br><span class="line">&#125;,</span><br><span class="line">// 图例组件</span><br><span class="line">legend: &#123;</span><br><span class="line">// series里面有了 name值则 legend里面的data可以删掉</span><br><span class="line">&#125;,</span><br><span class="line">// 网格配置 grid可以控制线形图 柱状图 图表大小</span><br><span class="line">grid: &#123;</span><br><span class="line">    left: ‘3%’,</span><br><span class="line">    right: ‘4%’,</span><br><span class="line">    bottom: ‘3%’,</span><br><span class="line">    // 是否显示刻度标签 如果是true 就显示 否则反之</span><br><span class="line">    containLabel: true</span><br><span class="line">&#125;,</span><br><span class="line">// 工具箱组件 可以另存为图片等功能</span><br><span class="line">toolbox: &#123;</span><br><span class="line">    feature: &#123;</span><br><span class="line">    saveAsImage: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">// 设置x轴的相关配置</span><br><span class="line">xAxis: &#123;</span><br><span class="line">    type: ‘category’,</span><br><span class="line">    // 是否让我们的线条和坐标轴有缝隙</span><br><span class="line">    boundaryGap: false,</span><br><span class="line">    data: [‘星期一’, ‘周二’, ‘周三’, ‘周四’, ‘周五’, ‘周六’, ‘周日’]</span><br><span class="line">&#125;,</span><br><span class="line">// 设置y轴的相关配置</span><br><span class="line">yAxis: &#123;</span><br><span class="line">type: ‘value’</span><br><span class="line">&#125;,</span><br><span class="line">// 系列图表配置 它决定着显示那种类型的图表</span><br><span class="line">series: [</span><br><span class="line">    &#123;</span><br><span class="line">        name: ‘邮件营销’,</span><br><span class="line">        type: ‘line’,</span><br><span class="line">        data: [120, 132, 101, 134, 90, 230, 210]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: &#x27;联盟广告&#x27;,</span><br><span class="line">        type: &#x27;line&#x27;,</span><br><span class="line"></span><br><span class="line">        data: [220, 182, 191, 234, 290, 330, 310]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: &#x27;视频广告&#x27;,</span><br><span class="line">        type: &#x27;line&#x27;,</span><br><span class="line"></span><br><span class="line">        data: [150, 232, 201, 154, 190, 330, 410]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: &#x27;直接访问&#x27;,</span><br><span class="line">        type: &#x27;line&#x27;,</span><br><span class="line"></span><br><span class="line">        data: [320, 332, 301, 334, 390, 330, 320]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">theme = &#123;</span><br><span class="line">// 全图默认背景</span><br><span class="line">// backgroundColor: ‘rgba(0,0,0,0)’,</span><br><span class="line">// 默认色板</span><br><span class="line">color: [&#x27;#ff7f50&#x27;,&#x27;#87cefa&#x27;,&#x27;#da70d6&#x27;,&#x27;#32cd32&#x27;,&#x27;#6495ed&#x27;,</span><br><span class="line">        &#x27;#ff69b4&#x27;,&#x27;#ba55d3&#x27;,&#x27;#cd5c5c&#x27;,&#x27;#ffa500&#x27;,&#x27;#40e0d0&#x27;,</span><br><span class="line">        &#x27;#1e90ff&#x27;,&#x27;#ff6347&#x27;,&#x27;#7b68ee&#x27;,&#x27;#00fa9a&#x27;,&#x27;#ffd700&#x27;,</span><br><span class="line">        &#x27;#6699FF&#x27;,&#x27;#ff6666&#x27;,&#x27;#3cb371&#x27;,&#x27;#b8860b&#x27;,&#x27;#30e0e0&#x27;],</span><br><span class="line"></span><br><span class="line">// 图表标题</span><br><span class="line">title: &#123;</span><br><span class="line">    x: &#x27;left&#x27;,                 // 水平安放位置，默认为左对齐，可选为：</span><br><span class="line">                               // &#x27;center&#x27; ¦ &#x27;left&#x27; ¦ &#x27;right&#x27;</span><br><span class="line">                               // ¦ &#123;number&#125;（x坐标，单位px）</span><br><span class="line">    y: &#x27;top&#x27;,                  // 垂直安放位置，默认为全图顶端，可选为：</span><br><span class="line">                               // &#x27;top&#x27; ¦ &#x27;bottom&#x27; ¦ &#x27;center&#x27;</span><br><span class="line">                               // ¦ &#123;number&#125;（y坐标，单位px）</span><br><span class="line">    //textAlign: null          // 水平对齐方式，默认根据x设置自动调整</span><br><span class="line">    backgroundColor: &#x27;rgba(0,0,0,0)&#x27;,</span><br><span class="line">    borderColor: &#x27;#ccc&#x27;,       // 标题边框颜色</span><br><span class="line">    borderWidth: 0,            // 标题边框线宽，单位px，默认为0（无边框）</span><br><span class="line">    padding: 5,                // 标题内边距，单位px，默认各方向内边距为5，</span><br><span class="line">                               // 接受数组分别设定上右下左边距，同css</span><br><span class="line">    itemGap: 10,               // 主副标题纵向间隔，单位px，默认为10，</span><br><span class="line">    textStyle: &#123;</span><br><span class="line">        fontSize: 18,</span><br><span class="line">        fontWeight: &#x27;bolder&#x27;,</span><br><span class="line">        color: &#x27;#333&#x27;          // 主标题文字颜色</span><br><span class="line">    &#125;,</span><br><span class="line">    subtextStyle: &#123;</span><br><span class="line">        color: &#x27;#aaa&#x27;          // 副标题文字颜色</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 图例</span><br><span class="line">legend: &#123;</span><br><span class="line">    orient: &#x27;horizontal&#x27;,      // 布局方式，默认为水平布局，可选为：</span><br><span class="line">                               // &#x27;horizontal&#x27; ¦ &#x27;vertical&#x27;</span><br><span class="line">    x: &#x27;center&#x27;,               // 水平安放位置，默认为全图居中，可选为：</span><br><span class="line">                               // &#x27;center&#x27; ¦ &#x27;left&#x27; ¦ &#x27;right&#x27;</span><br><span class="line">                               // ¦ &#123;number&#125;（x坐标，单位px）</span><br><span class="line">    y: &#x27;top&#x27;,                  // 垂直安放位置，默认为全图顶端，可选为：</span><br><span class="line">                               // &#x27;top&#x27; ¦ &#x27;bottom&#x27; ¦ &#x27;center&#x27;</span><br><span class="line">                               // ¦ &#123;number&#125;（y坐标，单位px）</span><br><span class="line">    backgroundColor: &#x27;rgba(0,0,0,0)&#x27;,</span><br><span class="line">    borderColor: &#x27;#ccc&#x27;,       // 图例边框颜色</span><br><span class="line">    borderWidth: 0,            // 图例边框线宽，单位px，默认为0（无边框）</span><br><span class="line">    padding: 5,                // 图例内边距，单位px，默认各方向内边距为5，</span><br><span class="line">                               // 接受数组分别设定上右下左边距，同css</span><br><span class="line">    itemGap: 10,               // 各个item之间的间隔，单位px，默认为10，</span><br><span class="line">                               // 横向布局时为水平间隔，纵向布局时为纵向间隔</span><br><span class="line">    itemWidth: 20,             // 图例图形宽度</span><br><span class="line">    itemHeight: 14,            // 图例图形高度</span><br><span class="line">    textStyle: &#123;</span><br><span class="line">        color: &#x27;#333&#x27;          // 图例文字颜色</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 值域</span><br><span class="line">dataRange: &#123;</span><br><span class="line">    orient: &#x27;vertical&#x27;,        // 布局方式，默认为垂直布局，可选为：</span><br><span class="line">                               // &#x27;horizontal&#x27; ¦ &#x27;vertical&#x27;</span><br><span class="line">    x: &#x27;left&#x27;,                 // 水平安放位置，默认为全图左对齐，可选为：</span><br><span class="line">                               // &#x27;center&#x27; ¦ &#x27;left&#x27; ¦ &#x27;right&#x27;</span><br><span class="line">                               // ¦ &#123;number&#125;（x坐标，单位px）</span><br><span class="line">    y: &#x27;bottom&#x27;,               // 垂直安放位置，默认为全图底部，可选为：</span><br><span class="line">                               // &#x27;top&#x27; ¦ &#x27;bottom&#x27; ¦ &#x27;center&#x27;</span><br><span class="line">                               // ¦ &#123;number&#125;（y坐标，单位px）</span><br><span class="line">    backgroundColor: &#x27;rgba(0,0,0,0)&#x27;,</span><br><span class="line">    borderColor: &#x27;#ccc&#x27;,       // 值域边框颜色</span><br><span class="line">    borderWidth: 0,            // 值域边框线宽，单位px，默认为0（无边框）</span><br><span class="line">    padding: 5,                // 值域内边距，单位px，默认各方向内边距为5，</span><br><span class="line">                               // 接受数组分别设定上右下左边距，同css</span><br><span class="line">    itemGap: 10,               // 各个item之间的间隔，单位px，默认为10，</span><br><span class="line">                               // 横向布局时为水平间隔，纵向布局时为纵向间隔</span><br><span class="line">    itemWidth: 20,             // 值域图形宽度，线性渐变水平布局宽度为该值 * 10</span><br><span class="line">    itemHeight: 14,            // 值域图形高度，线性渐变垂直布局高度为该值 * 10</span><br><span class="line">    splitNumber: 5,            // 分割段数，默认为5，为0时为线性渐变</span><br><span class="line">    color:[&#x27;#1e90ff&#x27;,&#x27;#f0ffff&#x27;],//颜色</span><br><span class="line">    //text:[&#x27;高&#x27;,&#x27;低&#x27;],         // 文本，默认为数值文本</span><br><span class="line">    textStyle: &#123;</span><br><span class="line">        color: &#x27;#333&#x27;          // 值域文字颜色</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">toolbox: &#123;</span><br><span class="line">    orient: &#x27;horizontal&#x27;,      // 布局方式，默认为水平布局，可选为：</span><br><span class="line">                               // &#x27;horizontal&#x27; ¦ &#x27;vertical&#x27;</span><br><span class="line">    x: &#x27;right&#x27;,                // 水平安放位置，默认为全图右对齐，可选为：</span><br><span class="line">                               // &#x27;center&#x27; ¦ &#x27;left&#x27; ¦ &#x27;right&#x27;</span><br><span class="line">                               // ¦ &#123;number&#125;（x坐标，单位px）</span><br><span class="line">    y: &#x27;top&#x27;,                  // 垂直安放位置，默认为全图顶端，可选为：</span><br><span class="line">                               // &#x27;top&#x27; ¦ &#x27;bottom&#x27; ¦ &#x27;center&#x27;</span><br><span class="line">                               // ¦ &#123;number&#125;（y坐标，单位px）</span><br><span class="line">    color : [&#x27;#1e90ff&#x27;,&#x27;#22bb22&#x27;,&#x27;#4b0082&#x27;,&#x27;#d2691e&#x27;],</span><br><span class="line">    backgroundColor: &#x27;rgba(0,0,0,0)&#x27;, // 工具箱背景颜色</span><br><span class="line">    borderColor: &#x27;#ccc&#x27;,       // 工具箱边框颜色</span><br><span class="line">    borderWidth: 0,            // 工具箱边框线宽，单位px，默认为0（无边框）</span><br><span class="line">    padding: 5,                // 工具箱内边距，单位px，默认各方向内边距为5，</span><br><span class="line">                               // 接受数组分别设定上右下左边距，同css</span><br><span class="line">    itemGap: 10,               // 各个item之间的间隔，单位px，默认为10，</span><br><span class="line">                               // 横向布局时为水平间隔，纵向布局时为纵向间隔</span><br><span class="line">    itemSize: 16,              // 工具箱图形宽度</span><br><span class="line">    featureImageIcon : &#123;&#125;,     // 自定义图片icon</span><br><span class="line">    featureTitle : &#123;</span><br><span class="line">        mark : &#x27;辅助线开关&#x27;,</span><br><span class="line">        markUndo : &#x27;删除辅助线&#x27;,</span><br><span class="line">        markClear : &#x27;清空辅助线&#x27;,</span><br><span class="line">        dataZoom : &#x27;区域缩放&#x27;,</span><br><span class="line">        dataZoomReset : &#x27;区域缩放后退&#x27;,</span><br><span class="line">        dataView : &#x27;数据视图&#x27;,</span><br><span class="line">        lineChart : &#x27;折线图切换&#x27;,</span><br><span class="line">        barChart : &#x27;柱形图切换&#x27;,</span><br><span class="line">        restore : &#x27;还原&#x27;,</span><br><span class="line">        saveAsImage : &#x27;保存为图片&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 提示框</span><br><span class="line">tooltip: &#123;</span><br><span class="line">    trigger: &#x27;item&#x27;,           // 触发类型，默认数据触发，见下图，可选为：&#x27;item&#x27; ¦ &#x27;axis&#x27;</span><br><span class="line">    showDelay: 20,             // 显示延迟，添加显示延迟可以避免频繁切换，单位ms</span><br><span class="line">    hideDelay: 100,            // 隐藏延迟，单位ms</span><br><span class="line">    transitionDuration : 0.4,  // 动画变换时间，单位s</span><br><span class="line">    backgroundColor: &#x27;rgba(0,0,0,0.7)&#x27;,     // 提示背景颜色，默认为透明度为0.7的黑色</span><br><span class="line">    borderColor: &#x27;#333&#x27;,       // 提示边框颜色</span><br><span class="line">    borderRadius: 4,           // 提示边框圆角，单位px，默认为4</span><br><span class="line">    borderWidth: 0,            // 提示边框线宽，单位px，默认为0（无边框）</span><br><span class="line">    padding: 5,                // 提示内边距，单位px，默认各方向内边距为5，</span><br><span class="line">                               // 接受数组分别设定上右下左边距，同css</span><br><span class="line">    axisPointer : &#123;            // 坐标轴指示器，坐标轴触发有效</span><br><span class="line">        type : &#x27;line&#x27;,         // 默认为直线，可选为：&#x27;line&#x27; | &#x27;shadow&#x27;</span><br><span class="line">        lineStyle : &#123;          // 直线指示器样式设置</span><br><span class="line">            color: &#x27;#48b&#x27;,</span><br><span class="line">            width: 2,</span><br><span class="line">            type: &#x27;solid&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        shadowStyle : &#123;                       // 阴影指示器样式设置</span><br><span class="line">            width: &#x27;auto&#x27;,                   // 阴影大小</span><br><span class="line">            color: &#x27;rgba(150,150,150,0.3)&#x27;  // 阴影颜色</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    textStyle: &#123;</span><br><span class="line">        color: &#x27;#fff&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 区域缩放控制器</span><br><span class="line">dataZoom: &#123;</span><br><span class="line">    orient: &#x27;horizontal&#x27;,      // 布局方式，默认为水平布局，可选为：</span><br><span class="line">                               // &#x27;horizontal&#x27; ¦ &#x27;vertical&#x27;</span><br><span class="line">    // x: &#123;number&#125;,            // 水平安放位置，默认为根据grid参数适配，可选为：</span><br><span class="line">                               // &#123;number&#125;（x坐标，单位px）</span><br><span class="line">    // y: &#123;number&#125;,            // 垂直安放位置，默认为根据grid参数适配，可选为：</span><br><span class="line">                               // &#123;number&#125;（y坐标，单位px）</span><br><span class="line">    // width: &#123;number&#125;,        // 指定宽度，横向布局时默认为根据grid参数适配</span><br><span class="line">    // height: &#123;number&#125;,       // 指定高度，纵向布局时默认为根据grid参数适配</span><br><span class="line">    backgroundColor: &#x27;rgba(0,0,0,0)&#x27;,       // 背景颜色</span><br><span class="line">    dataBackgroundColor: &#x27;#eee&#x27;,            // 数据背景颜色</span><br><span class="line">    fillerColor: &#x27;rgba(144,197,237,0.2)&#x27;,   // 填充颜色</span><br><span class="line">    handleColor: &#x27;rgba(70,130,180,0.8)&#x27;     // 手柄颜色</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 网格</span><br><span class="line">grid: &#123;</span><br><span class="line">    x: 80,</span><br><span class="line">    y: 60,</span><br><span class="line">    x2: 80,</span><br><span class="line">    y2: 60,</span><br><span class="line">    // width: &#123;totalWidth&#125; - x - x2,</span><br><span class="line">    // height: &#123;totalHeight&#125; - y - y2,</span><br><span class="line">    backgroundColor: &#x27;rgba(0,0,0,0)&#x27;,</span><br><span class="line">    borderWidth: 1,</span><br><span class="line">    borderColor: &#x27;#ccc&#x27;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 类目轴</span><br><span class="line">categoryAxis: &#123;</span><br><span class="line">    position: &#x27;bottom&#x27;,    // 位置</span><br><span class="line">    nameLocation: &#x27;end&#x27;,   // 坐标轴名字位置，支持&#x27;start&#x27; | &#x27;end&#x27;</span><br><span class="line">    boundaryGap: true,     // 类目起始和结束两端空白策略</span><br><span class="line">    axisLine: &#123;            // 坐标轴线</span><br><span class="line">        show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">        lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &#x27;#48b&#x27;,</span><br><span class="line">            width: 2,</span><br><span class="line">            type: &#x27;solid&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    axisTick: &#123;            // 坐标轴小标记</span><br><span class="line">        show: true,       // 属性show控制显示与否，默认不显示</span><br><span class="line">        interval: &#x27;auto&#x27;,</span><br><span class="line">        // onGap: null,</span><br><span class="line">        inside : false,    // 控制小标记是否在grid里</span><br><span class="line">        length :5,         // 属性length控制线长</span><br><span class="line">        lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &#x27;#333&#x27;,</span><br><span class="line">            width: 1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    axisLabel: &#123;           // 坐标轴文本标签，详见axis.axisLabel</span><br><span class="line">        show: true,</span><br><span class="line">        interval: &#x27;auto&#x27;,</span><br><span class="line">        rotate: 0,</span><br><span class="line">        margin: 8,</span><br><span class="line">        // formatter: null,</span><br><span class="line">        textStyle: &#123;       // 其余属性默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            color: &#x27;#333&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    splitLine: &#123;           // 分隔线</span><br><span class="line">        show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">        // onGap: null,</span><br><span class="line">        lineStyle: &#123;       // 属性lineStyle（详见lineStyle）控制线条样式</span><br><span class="line">            color: [&#x27;#ccc&#x27;],</span><br><span class="line">            width: 1,</span><br><span class="line">            type: &#x27;solid&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    splitArea: &#123;           // 分隔区域</span><br><span class="line">        show: false,       // 默认不显示，属性show控制显示与否</span><br><span class="line">        // onGap: null,</span><br><span class="line">        areaStyle: &#123;       // 属性areaStyle（详见areaStyle）控制区域样式</span><br><span class="line">            color: [&#x27;rgba(250,250,250,0.3)&#x27;,&#x27;rgba(200,200,200,0.3)&#x27;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 数值型坐标轴默认参数</span><br><span class="line">valueAxis: &#123;</span><br><span class="line">    position: &#x27;left&#x27;,      // 位置</span><br><span class="line">    nameLocation: &#x27;end&#x27;,   // 坐标轴名字位置，支持&#x27;start&#x27; | &#x27;end&#x27;</span><br><span class="line">    nameTextStyle: &#123;&#125;,     // 坐标轴文字样式，默认取全局样式</span><br><span class="line">    boundaryGap: [0, 0],   // 数值起始和结束两端空白策略</span><br><span class="line">    splitNumber: 5,        // 分割段数，默认为5</span><br><span class="line">    axisLine: &#123;            // 坐标轴线</span><br><span class="line">        show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">        lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &#x27;#48b&#x27;,</span><br><span class="line">            width: 2,</span><br><span class="line">            type: &#x27;solid&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    axisTick: &#123;            // 坐标轴小标记</span><br><span class="line">        show: false,       // 属性show控制显示与否，默认不显示</span><br><span class="line">        inside : false,    // 控制小标记是否在grid里</span><br><span class="line">        length :5,         // 属性length控制线长</span><br><span class="line">        lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &#x27;#333&#x27;,</span><br><span class="line">            width: 1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    axisLabel: &#123;           // 坐标轴文本标签，详见axis.axisLabel</span><br><span class="line">        show: true,</span><br><span class="line">        rotate: 0,</span><br><span class="line">        margin: 8,</span><br><span class="line">        // formatter: null,</span><br><span class="line">        textStyle: &#123;       // 其余属性默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            color: &#x27;#333&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    splitLine: &#123;           // 分隔线</span><br><span class="line">        show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">        lineStyle: &#123;       // 属性lineStyle（详见lineStyle）控制线条样式</span><br><span class="line">            color: [&#x27;#ccc&#x27;],</span><br><span class="line">            width: 1,</span><br><span class="line">            type: &#x27;solid&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    splitArea: &#123;           // 分隔区域</span><br><span class="line">        show: false,       // 默认不显示，属性show控制显示与否</span><br><span class="line">        areaStyle: &#123;       // 属性areaStyle（详见areaStyle）控制区域样式</span><br><span class="line">            color: [&#x27;rgba(250,250,250,0.3)&#x27;,&#x27;rgba(200,200,200,0.3)&#x27;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">polar : &#123;</span><br><span class="line">    center : [&#x27;50%&#x27;, &#x27;50%&#x27;],    // 默认全局居中</span><br><span class="line">    radius : &#x27;75%&#x27;,</span><br><span class="line">    startAngle : 90,</span><br><span class="line">    splitNumber : 5,</span><br><span class="line">    name : &#123;</span><br><span class="line">        show: true,</span><br><span class="line">        textStyle: &#123;       // 其余属性默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            color: &#x27;#333&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    axisLine: &#123;            // 坐标轴线</span><br><span class="line">        show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">        lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &#x27;#ccc&#x27;,</span><br><span class="line">            width: 1,</span><br><span class="line">            type: &#x27;solid&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    axisLabel: &#123;           // 坐标轴文本标签，详见axis.axisLabel</span><br><span class="line">        show: false,</span><br><span class="line">        textStyle: &#123;       // 其余属性默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            color: &#x27;#333&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    splitArea : &#123;</span><br><span class="line">        show : true,</span><br><span class="line">        areaStyle : &#123;</span><br><span class="line">            color: [&#x27;rgba(250,250,250,0.3)&#x27;,&#x27;rgba(200,200,200,0.3)&#x27;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    splitLine : &#123;</span><br><span class="line">        show : true,</span><br><span class="line">        lineStyle : &#123;</span><br><span class="line">            width : 1,</span><br><span class="line">            color : &#x27;#ccc&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 柱形图默认参数</span><br><span class="line">bar: &#123;</span><br><span class="line">    barMinHeight: 0,          // 最小高度改为0</span><br><span class="line">    // barWidth: null,        // 默认自适应</span><br><span class="line">    barGap: &#x27;30%&#x27;,            // 柱间距离，默认为柱形宽度的30%，可设固定值</span><br><span class="line">    barCategoryGap : &#x27;20%&#x27;,   // 类目间柱形距离，默认为类目间距的20%，可设固定值</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            // color: &#x27;各异&#x27;,</span><br><span class="line">            barBorderColor: &#x27;#fff&#x27;,       // 柱条边线</span><br><span class="line">            barBorderRadius: 0,           // 柱条边线圆角，单位px，默认为0</span><br><span class="line">            barBorderWidth: 1,            // 柱条边线线宽，单位px，默认为1</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // position: 默认自适应，水平布局为&#x27;top&#x27;，垂直布局为&#x27;right&#x27;，可选为</span><br><span class="line">                //           &#x27;inside&#x27;|&#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">            // color: &#x27;各异&#x27;,</span><br><span class="line">            barBorderColor: &#x27;rgba(0,0,0,0)&#x27;,   // 柱条边线</span><br><span class="line">            barBorderRadius: 0,                // 柱条边线圆角，单位px，默认为0</span><br><span class="line">            barBorderWidth: 1,                 // 柱条边线线宽，单位px，默认为1</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // position: 默认自适应，水平布局为&#x27;top&#x27;，垂直布局为&#x27;right&#x27;，可选为</span><br><span class="line">                //           &#x27;inside&#x27;|&#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 折线图默认参数</span><br><span class="line">line: &#123;</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // position: 默认自适应，水平布局为&#x27;top&#x27;，垂直布局为&#x27;right&#x27;，可选为</span><br><span class="line">                //           &#x27;inside&#x27;|&#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">                width: 2,</span><br><span class="line">                type: &#x27;solid&#x27;,</span><br><span class="line">                shadowColor : &#x27;rgba(0,0,0,0)&#x27;, //默认透明</span><br><span class="line">                shadowBlur: 5,</span><br><span class="line">                shadowOffsetX: 3,</span><br><span class="line">                shadowOffsetY: 3</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // position: 默认自适应，水平布局为&#x27;top&#x27;，垂直布局为&#x27;right&#x27;，可选为</span><br><span class="line">                //           &#x27;inside&#x27;|&#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    //smooth : false,</span><br><span class="line">    //symbol: null,         // 拐点图形类型</span><br><span class="line">    symbolSize: 2,          // 拐点图形大小</span><br><span class="line">    //symbolRotate : null,  // 拐点图形旋转控制</span><br><span class="line">    showAllSymbol: false    // 标志图形默认只有主轴显示（随主轴标签间隔隐藏策略）</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// K线图默认参数</span><br><span class="line">k: &#123;</span><br><span class="line">    // barWidth : null          // 默认自适应</span><br><span class="line">    // barMaxWidth : null       // 默认自适应</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            color: &#x27;#fff&#x27;,          // 阳线填充颜色</span><br><span class="line">            color0: &#x27;#00aa11&#x27;,      // 阴线填充颜色</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">                width: 1,</span><br><span class="line">                color: &#x27;#ff3200&#x27;,   // 阳线边框颜色</span><br><span class="line">                color0: &#x27;#00aa11&#x27;   // 阴线边框颜色</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            // color0: 各异</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 散点图默认参数</span><br><span class="line">scatter: &#123;</span><br><span class="line">    //symbol: null,      // 图形类型</span><br><span class="line">    symbolSize: 4,       // 图形大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2</span><br><span class="line">    //symbolRotate : null,  // 图形旋转控制</span><br><span class="line">    large: false,        // 大规模散点图</span><br><span class="line">    largeThreshold: 2000,// 大规模阀值，large为true且数据量&gt;largeThreshold才启用大规模模式</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // position: 默认自适应，水平布局为&#x27;top&#x27;，垂直布局为&#x27;right&#x27;，可选为</span><br><span class="line">                //           &#x27;inside&#x27;|&#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">            // color: &#x27;各异&#x27;</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // position: 默认自适应，水平布局为&#x27;top&#x27;，垂直布局为&#x27;right&#x27;，可选为</span><br><span class="line">                //           &#x27;inside&#x27;|&#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 雷达图默认参数</span><br><span class="line">radar : &#123;</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">                width: 2,</span><br><span class="line">                type: &#x27;solid&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    //symbol: null,         // 拐点图形类型</span><br><span class="line">    symbolSize: 2           // 可计算特性参数，空数据拖拽提示图形大小</span><br><span class="line">    //symbolRotate : null,  // 图形旋转控制</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 饼图默认参数</span><br><span class="line">pie: &#123;</span><br><span class="line">    center : [&#x27;50%&#x27;, &#x27;50%&#x27;],    // 默认全局居中</span><br><span class="line">    radius : [0, &#x27;75%&#x27;],</span><br><span class="line">    clockWise : false,          // 默认逆时针</span><br><span class="line">    startAngle: 90,</span><br><span class="line">    minAngle: 0,                // 最小角度改为0</span><br><span class="line">    selectedOffset: 10,         // 选中是扇区偏移量</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            borderColor: &#x27;#fff&#x27;,</span><br><span class="line">            borderWidth: 1,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: true,</span><br><span class="line">                position: &#x27;outer&#x27;</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            labelLine: &#123;</span><br><span class="line">                show: true,</span><br><span class="line">                length: 20,</span><br><span class="line">                lineStyle: &#123;</span><br><span class="line">                    // color: 各异,</span><br><span class="line">                    width: 1,</span><br><span class="line">                    type: &#x27;solid&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            borderColor: &#x27;rgba(0,0,0,0)&#x27;,</span><br><span class="line">            borderWidth: 1,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // position: &#x27;outer&#x27;</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            labelLine: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                length: 20,</span><br><span class="line">                lineStyle: &#123;</span><br><span class="line">                    // color: 各异,</span><br><span class="line">                    width: 1,</span><br><span class="line">                    type: &#x27;solid&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">map: &#123;</span><br><span class="line">    mapType: &#x27;china&#x27;,   // 各省的mapType暂时都用中文</span><br><span class="line">    mapLocation: &#123;</span><br><span class="line">        x : &#x27;center&#x27;,</span><br><span class="line">        y : &#x27;center&#x27;</span><br><span class="line">        // width    // 自适应</span><br><span class="line">        // height   // 自适应</span><br><span class="line">    &#125;,</span><br><span class="line">    showLegendSymbol : true,       // 显示图例颜色标识（系列标识的小圆点），存在legend时生效</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            borderColor: &#x27;#fff&#x27;,</span><br><span class="line">            borderWidth: 1,</span><br><span class="line">            areaStyle: &#123;</span><br><span class="line">                color: &#x27;#ccc&#x27;//rgba(135,206,250,0.8)</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                textStyle: &#123;</span><br><span class="line">                    color: &#x27;rgba(139,69,19,1)&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;                 // 也是选中样式</span><br><span class="line">            // color: 各异,</span><br><span class="line">            borderColor: &#x27;rgba(0,0,0,0)&#x27;,</span><br><span class="line">            borderWidth: 1,</span><br><span class="line">            areaStyle: &#123;</span><br><span class="line">                color: &#x27;rgba(255,215,0,0.8)&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                textStyle: &#123;</span><br><span class="line">                    color: &#x27;rgba(139,69,19,1)&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">force : &#123;</span><br><span class="line">    // 数据map到圆的半径的最小值和最大值</span><br><span class="line">    minRadius : 10,</span><br><span class="line">    maxRadius : 20,</span><br><span class="line">    density : 1.0,</span><br><span class="line">    attractiveness : 1.0,</span><br><span class="line">    // 初始化的随机大小位置</span><br><span class="line">    initSize : 300,</span><br><span class="line">    // 向心力因子，越大向心力越大</span><br><span class="line">    centripetal : 1,</span><br><span class="line">    // 冷却因子</span><br><span class="line">    coolDown : 0.99,</span><br><span class="line">    // 分类里如果有样式会覆盖节点默认样式</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            nodeStyle : &#123;</span><br><span class="line">                brushType : &#x27;both&#x27;,</span><br><span class="line">                color : &#x27;#f08c2e&#x27;,</span><br><span class="line">                strokeColor : &#x27;#5182ab&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            linkStyle : &#123;</span><br><span class="line">                strokeColor : &#x27;#5182ab&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            nodeStyle : &#123;&#125;,</span><br><span class="line">            linkStyle : &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">chord : &#123;</span><br><span class="line">    radius : [&#x27;65%&#x27;, &#x27;75%&#x27;],</span><br><span class="line">    center : [&#x27;50%&#x27;, &#x27;50%&#x27;],</span><br><span class="line">    padding : 2,</span><br><span class="line">    sort : &#x27;none&#x27;, // can be &#x27;none&#x27;, &#x27;ascending&#x27;, &#x27;descending&#x27;</span><br><span class="line">    sortSub : &#x27;none&#x27;, // can be &#x27;none&#x27;, &#x27;ascending&#x27;, &#x27;descending&#x27;</span><br><span class="line">    startAngle : 90,</span><br><span class="line">    clockWise : false,</span><br><span class="line">    showScale : false,</span><br><span class="line">    showScaleText : false,</span><br><span class="line">    itemStyle : &#123;</span><br><span class="line">        normal : &#123;</span><br><span class="line">            label : &#123;</span><br><span class="line">                show : true</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle : &#123;</span><br><span class="line">                width : 0,</span><br><span class="line">                color : &#x27;#000&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            chordStyle : &#123;</span><br><span class="line">                lineStyle : &#123;</span><br><span class="line">                    width : 1,</span><br><span class="line">                    color : &#x27;#666&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis : &#123;</span><br><span class="line">            lineStyle : &#123;</span><br><span class="line">                width : 0,</span><br><span class="line">                color : &#x27;#000&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            chordStyle : &#123;</span><br><span class="line">                lineStyle : &#123;</span><br><span class="line">                    width : 2,</span><br><span class="line">                    color : &#x27;#333&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">island: &#123;</span><br><span class="line">    r: 15,</span><br><span class="line">    calculateStep: 0.1  // 滚轮可计算步长 0.1 = 10%</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">markPoint : &#123;</span><br><span class="line">    symbol: &#x27;pin&#x27;,         // 标注类型</span><br><span class="line">    symbolSize: 10,        // 标注大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2</span><br><span class="line">    //symbolRotate : null, // 标注旋转控制</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            // color: 各异，</span><br><span class="line">            // borderColor: 各异,     // 标注边线颜色，优先于color</span><br><span class="line">            borderWidth: 2,            // 标注边线线宽，单位px，默认为1</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: true,</span><br><span class="line">                position: &#x27;inside&#x27; // 可选为&#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">            // color: 各异</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: true</span><br><span class="line">                // position: &#x27;inside&#x27;  // &#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                // textStyle: null     // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">markLine : &#123;</span><br><span class="line">    // 标线起始和结束的symbol介绍类型，如果都一样，可以直接传string</span><br><span class="line">    symbol: [&#x27;circle&#x27;, &#x27;arrow&#x27;],</span><br><span class="line">    // 标线起始和结束的symbol大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2</span><br><span class="line">    symbolSize: [2, 4],</span><br><span class="line">    // 标线起始和结束的symbol旋转控制</span><br><span class="line">    //symbolRotate : null,</span><br><span class="line">    itemStyle: &#123;</span><br><span class="line">        normal: &#123;</span><br><span class="line">            // color: 各异,           // 标线主色，线色，symbol主色</span><br><span class="line">            // borderColor: 随color,     // 标线symbol边框颜色，优先于color</span><br><span class="line">            borderWidth: 2,          // 标线symbol边框线宽，单位px，默认为2</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                // 可选为 &#x27;start&#x27;|&#x27;end&#x27;|&#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                position: &#x27;inside&#x27;,</span><br><span class="line">                textStyle: &#123;         // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">                    color: &#x27;#333&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">                // color: 随borderColor, // 主色，线色，优先级高于borderColor和color</span><br><span class="line">                // width: 随borderWidth, // 优先于borderWidth</span><br><span class="line">                type: &#x27;solid&#x27;,</span><br><span class="line">                shadowColor : &#x27;rgba(0,0,0,0)&#x27;, //默认透明</span><br><span class="line">                shadowBlur: 5,</span><br><span class="line">                shadowOffsetX: 3,</span><br><span class="line">                shadowOffsetY: 3</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">            // color: 各异</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false</span><br><span class="line">                // position: &#x27;inside&#x27; // &#x27;left&#x27;|&#x27;right&#x27;|&#x27;top&#x27;|&#x27;bottom&#x27;</span><br><span class="line">                // textStyle: null    // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle : &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">textStyle: &#123;</span><br><span class="line">    decoration: &#x27;none&#x27;,</span><br><span class="line">    fontFamily: &#x27;Arial, Verdana, sans-serif&#x27;,</span><br><span class="line">    fontFamily2: &#x27;微软雅黑&#x27;,    // IE8- 字体模糊并且不支持不同字体混排，额外指定一份</span><br><span class="line">    fontSize: 12,</span><br><span class="line">    fontStyle: &#x27;normal&#x27;,</span><br><span class="line">    fontWeight: &#x27;normal&#x27;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// 默认标志图形类型列表</span><br><span class="line">symbolList : [</span><br><span class="line">  &#x27;circle&#x27;, &#x27;rectangle&#x27;, &#x27;triangle&#x27;, &#x27;diamond&#x27;,</span><br><span class="line">  &#x27;emptyCircle&#x27;, &#x27;emptyRectangle&#x27;, &#x27;emptyTriangle&#x27;, &#x27;emptyDiamond&#x27;</span><br><span class="line">],</span><br><span class="line">loadingText : &#x27;Loading...&#x27;,</span><br><span class="line">// 可计算特性配置，孤岛，提示颜色</span><br><span class="line">calculable: false,              // 默认关闭可计算特性</span><br><span class="line">calculableColor: &#x27;rgba(255,165,0,0.6)&#x27;,       // 拖拽提示边框颜色</span><br><span class="line">calculableHolderColor: &#x27;#ccc&#x27;, // 可计算占位提示颜色</span><br><span class="line">nameConnector: &#x27; &amp; &#x27;,</span><br><span class="line">valueConnector: &#x27; : &#x27;,</span><br><span class="line">animation: true,</span><br><span class="line">animationThreshold: 2500,       // 动画元素阀值，产生的图形原素超过2500不出动画</span><br><span class="line">addDataAnimation: true,         // 动态数据接口是否开启动画效果</span><br><span class="line">animationDuration: 2000,</span><br><span class="line">animationEasing: &#x27;ExponentialOut&#x27;    //BounceOut</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/antV-G6%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/antV-G6%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">antV G6新手入门 使用笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 15:03:34 / 修改时间：15:08:44" itemprop="dateCreated datePublished" datetime="2022-12-16T15:03:34+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webGL%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">webGL总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>普通的图表，echarts 足够用，但是比如关系图等，echarts 定制化配置还是太麻烦。综合考量，还是 G6 方便 G6 是一个图可视化引擎。它提供了图</p>
</blockquote>
<p>普通的图表，echarts 足够用，但是比如关系图等，echarts 定制化配置还是太麻烦。综合考量，还是 G6 方便</p>
<p><strong>G6 是一个图可视化引擎。它提供了图的绘制、布局、分析、交互、动画等图可视化的基础能力。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @antv/g6</span><br><span class="line"></span><br><span class="line">import G6 from &#x27;@antv/g6&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="G6-使用"><a href="#G6-使用" class="headerlink" title="G6 使用"></a>G6 使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;mountNode&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">const graph = new G6.Graph(&#123;</span><br><span class="line">  container: &#x27;mountNode&#x27;, // String | HTMLElement，必须，在 Step 1 中创建的容器 id 或容器本身</span><br><span class="line">  width: 800, // Number，必须，图的宽度</span><br><span class="line">  height: 500, // Number，必须，图的高度</span><br><span class="line">&#125;);</span><br><span class="line">graph.data(&#123;nodes:[&#123;id: &#x27;node1&#x27;&#125;], edges:[&#123;source: &#x27;node1&#x27;,target: &#x27;node2&#x27;,&#125;]&#125;);</span><br><span class="line">graph.render(); // 渲染图</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>nodes 数组中包含节点对</strong>象，唯一的 id 是每个节点对象中必要的属性，x、 y 用于定位；</li>
<li><strong>edges 数组中包含边对象</strong>，source 和 target 是每条边的必要属性，分别代表了该边的起始点 id 与 目标点 id。</li>
<li>点和边的更多属性参见：<a target="_blank" rel="noopener" href="https://g6.antv.vision/zh/docs/manual/middle/elements/nodes/defaultNode">内置的节点</a>，<a target="_blank" rel="noopener" href="https://g6.antv.vision/zh/docs/manual/middle/elements/edges/defaultEdge">内置的边</a> 教程。</li>
</ul>
<h3 id="整体配置"><a href="#整体配置" class="headerlink" title="整体配置"></a>整体配置</h3><table>
<thead>
<tr>
<th>配置项</th>
<th>类型</th>
<th>选项 &#x2F; 示例</th>
<th>默认</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>fitView</td>
<td>Boolean</td>
<td>true &#x2F; false</td>
<td>false</td>
<td>是否将图适配到画布大小，可以防止超出画布或留白太多。</td>
</tr>
<tr>
<td>fitViewPadding</td>
<td>Number &#x2F; Array</td>
<td>20 &#x2F; [ 20, 40, 50, 20 ]</td>
<td>0</td>
<td>画布上的四周留白宽度。</td>
</tr>
<tr>
<td>animate</td>
<td>Boolean</td>
<td>true &#x2F; false</td>
<td>false</td>
<td>是否启用图的动画。</td>
</tr>
<tr>
<td>modes</td>
<td>Object</td>
<td>{ default: [ ‘drag-node’]}</td>
<td>null</td>
<td>图上行为模式的集合（如：拖拽、缩放）。由于比较复杂，按需参见：G6 中的 Mode 教程。</td>
</tr>
<tr>
<td>defaultNode</td>
<td>Object</td>
<td>{ type: ‘circle’, style: {}}</td>
<td>null</td>
<td>节点默认的属性，包括节点的一般属性和样式属性（style）。</td>
</tr>
<tr>
<td>defaultEdge</td>
<td>Object</td>
<td>{type: ‘polyline’, color: ‘#000}</td>
<td>null</td>
<td>边默认的属性，包括边的一般属性和样式属性（style）。</td>
</tr>
<tr>
<td>nodeStateStyles</td>
<td>Object</td>
<td>{hover: {……},select: {…… }}</td>
<td>null</td>
<td>节点在除默认状态外，其他状态下的样式属性（style）。例如鼠标放置（hover）、选中（select）等状态。</td>
</tr>
<tr>
<td>edgeStateStyles</td>
<td>Object</td>
<td>{hover: {……} ,select: {…… }}</td>
<td>null</td>
<td>边在除默认状态外，其他状态下的样式属性（style）。例如鼠标放置（hover）、选中（select）等状态。</td>
</tr>
</tbody></table>
<p>这个是初始化图表配置项</p>
<h2 id="图布局-Layout"><a href="#图布局-Layout" class="headerlink" title="图布局 Layout"></a>图布局 Layout</h2><p>当数据中没有节点位置信息，或者数据中的位置信息不满足需求时，需要借助一些布局算法对图进行布局。</p>
<p>相比 echarts，支持布局多很多，G6 提供了 9 种一般图的布局和 4 种树图的布局：</p>
<h3 id="一般图："><a href="#一般图：" class="headerlink" title="一般图："></a>一般图：</h3><ul>
<li>Random Layout：随机布局；</li>
<li>Force Layout：经典力导向布局：</li>
</ul>
<blockquote>
<p>力导向布局：一个布局网络中，粒子与粒子之间具有引力和斥力，从初始的随机无序的布局不断演变，逐渐趋于平衡稳定的布局方式称之为力导向布局。适用于描述事物间关系，比如人物关系、计算机网络关系等。</p>
</blockquote>
<ul>
<li>Circular Layout：环形布局；</li>
<li>Radial Layout：辐射状布局；</li>
<li>MDS Layout：高维数据降维算法布局；</li>
<li>Fruchterman Layout：Fruchterman 布局，一种力导布局；</li>
<li>Dagre Layout：层次布局；</li>
<li>Concentric Layout：同心圆布局，将重要（默认以度数为度量）的节点放置在布局中心；</li>
<li>Grid Layout：格子布局，将节点有序（默认是数据顺序）排列在格子上。</li>
</ul>
<h3 id="树图布局："><a href="#树图布局：" class="headerlink" title="树图布局："></a>树图布局：</h3><ul>
<li>Dendrogram Layout：树状布局（叶子节点布局对齐到同一层）；</li>
<li>CompactBox Layout：紧凑树布局；</li>
<li>Mindmap Layout：脑图布局；</li>
<li>Intended Layout：缩进布局。</li>
</ul>
<p><strong>设置节点和背景</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">const graph = new G6.Graph(&#123;</span><br><span class="line">  // ...</span><br><span class="line">  defaultNode: &#123;</span><br><span class="line">    position: &#x27;left&#x27;,</span><br><span class="line">    style: &#123;</span><br><span class="line">      background: &#123;</span><br><span class="line">        fill: &#x27;#ffffff&#x27;,</span><br><span class="line">        stroke: &#x27;green&#x27;,</span><br><span class="line">        padding: [3, 2, 3, 2],</span><br><span class="line">        radius: 2,</span><br><span class="line">        lineWidth: 3,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  defaultEdge: &#123;</span><br><span class="line">    autoRotate: true,</span><br><span class="line">    style: &#123;</span><br><span class="line">      background: &#123;</span><br><span class="line">        fill: &#x27;#ffffff&#x27;,</span><br><span class="line">        stroke: &#x27;#000000&#x27;,</span><br><span class="line">        padding: [2, 2, 2, 2],</span><br><span class="line">        radius: 2,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/d3-js-%E5%8F%82%E8%80%83%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/d3-js-%E5%8F%82%E8%80%83%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">d3.js 参考笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 15:03:10 / 修改时间：15:08:49" itemprop="dateCreated datePublished" datetime="2022-12-16T15:03:10+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webGL%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">webGL总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><h3 id="1、定义"><a href="#1、定义" class="headerlink" title="1、定义"></a>1、定义</h3><p>D3 的全称是（Data-Driven Documents），顾名思义可以知道是一个被数据驱动的文档。 一个 JavaScript 的函数库，使用它主要是用来做数据可视化的。</p>
<h3 id="2、数据可视化"><a href="#2、数据可视化" class="headerlink" title="2、数据可视化"></a>2、数据可视化</h3><p>把枯燥乏味复杂的数据，用简单明了的图形表示出来。</p>
<h3 id="3、地位"><a href="#3、地位" class="headerlink" title="3、地位"></a>3、地位</h3><p>在关于 2014 年流行的 JavaScript 图形库的调查中 D3 排名第 5，高于 JQuery。</p>
<h3 id="4、D3-使用"><a href="#4、D3-使用" class="headerlink" title="4、D3 使用"></a>4、D3 使用</h3><p>D3 是一个 JavaScript 函数库，并不需要通常所说的“安装”。它只是一个文件，在 HTML 中引用即可。有两种方法：</p>
<h4 id="（1）下载-D3-js-的文件"><a href="#（1）下载-D3-js-的文件" class="headerlink" title="（1）下载 D3.js 的文件"></a>（1）下载 D3.js 的文件</h4><p><a target="_blank" rel="noopener" href="https://github.com/mbostock/d3/releases/download/v3.4.8/d3.zip">https://github.com/mbostock/d3/releases/download/v3.4.8/d3.zip</a><br>解压后，在 HTML 文件中包含相关的 js 文件即可</p>
<h4 id="（2）还可以直接包含网络的链接，这种方法较简单："><a href="#（2）还可以直接包含网络的链接，这种方法较简单：" class="headerlink" title="（2）还可以直接包含网络的链接，这种方法较简单："></a>（2）还可以直接包含网络的链接，这种方法较简单：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>但使用的时候要保持网络连接有效，不能在断网的情况下使用。</p>
<h3 id="5、需要工具"><a href="#5、需要工具" class="headerlink" title="5、需要工具"></a>5、需要工具</h3><p>制作网页常用的工具即可。</p>
<ul>
<li>（1）记事本软件：Notepad++、Editplus、Sublime Text 等，选择自己喜欢的即可。</li>
<li>（2）浏览器：IE9 以上、Firefox、Chrome 等，推荐用 Chrome 。</li>
</ul>
<h2 id="二、D3-js-选择，绑定，插入数据"><a href="#二、D3-js-选择，绑定，插入数据" class="headerlink" title="二、D3.js 选择，绑定，插入数据"></a>二、D3.js 选择，绑定，插入数据</h2><h3 id="（一）选择元素"><a href="#（一）选择元素" class="headerlink" title="（一）选择元素"></a>（一）选择元素</h3><p>在 D3 中，用于 选择元素的函数有两个：</p>
<h4 id="1、-d3-select-：是选择所有指定元素的第一个"><a href="#1、-d3-select-：是选择所有指定元素的第一个" class="headerlink" title="1、 d3.select()：是选择所有指定元素的第一个"></a>1、 d3.select()：是选择所有指定元素的第一个</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select(&quot;tag&quot;) 通过元素的标签名称来查找元素</span><br><span class="line">实例：select(&quot;input&quot;)</span><br><span class="line"></span><br><span class="line">select(&quot;#id&quot;)通过元素的id来查找元素</span><br><span class="line">实例：select(&quot;#mydiv&quot;)</span><br><span class="line"></span><br><span class="line">select(&quot;.myclass&quot;)通过sytle样式来查找元素</span><br><span class="line">select(&quot;.mystyle&quot;)</span><br></pre></td></tr></table></figure>

<h4 id="2、-d3-selectAll-：是选择指定元素的全部"><a href="#2、-d3-selectAll-：是选择指定元素的全部" class="headerlink" title="2、 d3.selectAll()：是选择指定元素的全部"></a>2、 d3.selectAll()：是选择指定元素的全部</h4><p>这两个函数返回的结果称为 选择集。<br>例子：</p>
<ul>
<li>（1）var body&#x3D;d3.select(“body”);&#x2F;&#x2F; 选择文档中的 body 元素</li>
<li>（2）var p1&#x3D;body.select(“p”); &#x2F;&#x2F;选择 body 中的第一个 p 元素</li>
<li>（3）var p &#x3D;body.selectAll(“p”); &#x2F;&#x2F;选择 body 中的所有 p 元素</li>
<li>（4）var svg&#x3D;body.select(“svg”); &#x2F;&#x2F;选择 body 中的 svg 元素</li>
<li>（5）var rects&#x3D;svg.selectAll(“rect”); &#x2F;&#x2F;选择 svg 中所有的 rect 元素</li>
</ul>
<h3 id="（二）绑定数据"><a href="#（二）绑定数据" class="headerlink" title="（二）绑定数据"></a>（二）绑定数据</h3><p>D3 能将数据绑定到 DOM(文件对象模型)上，也是绑定到 文档上<br>D3 中是通过以下两个函数来绑定数据的：</p>
<h4 id="1、datum-：绑定一个数据到选择集上"><a href="#1、datum-：绑定一个数据到选择集上" class="headerlink" title="1、datum( )：绑定一个数据到选择集上"></a>1、datum( )：绑定一个数据到选择集上</h4><p><strong>datum()实例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;datum&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">        &lt;p&gt;Apple&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;Pear&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;Banana&lt;/p&gt;</span><br><span class="line">            &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">            &lt;script&gt;</span><br><span class="line">            var str = &quot;China&quot;;</span><br><span class="line">            var body = d3.select(&quot;body&quot;);</span><br><span class="line">            var p = body.selectAll(&quot;p&quot;);</span><br><span class="line">            p.datum(str);</span><br><span class="line">            p.text(function(d, i)&#123;</span><br><span class="line">                return &quot;第 &quot;+ i + &quot; 个元素绑定的数据是 &quot; + d;&#125;);</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第 0 个元素绑定的数据是 China</span><br><span class="line"></span><br><span class="line">第 1 个元素绑定的数据是 China</span><br><span class="line"></span><br><span class="line">第 2 个元素绑定的数据是 China</span><br></pre></td></tr></table></figure>

<h4 id="2、data-：绑定一个数组到选择集上，数组的各项值分别与选择集的各元素绑定"><a href="#2、data-：绑定一个数组到选择集上，数组的各项值分别与选择集的各元素绑定" class="headerlink" title="2、data( )：绑定一个数组到选择集上，数组的各项值分别与选择集的各元素绑定"></a>2、data( )：绑定一个数组到选择集上，数组的各项值分别与选择集的各元素绑定</h4><p><strong>data( )实例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;datum&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">        &lt;p&gt;Apple&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;Pear&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;Banana&lt;/p&gt;</span><br><span class="line">            &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">            &lt;script&gt;</span><br><span class="line">        var dataset = [&quot;I like dogs&quot;,&quot;I like cats&quot;,&quot;I like snakes&quot;];</span><br><span class="line">        var body = d3.select(&quot;body&quot;);</span><br><span class="line">        var p = body.selectAll(&quot;p&quot;);</span><br><span class="line">        p.data(dataset)</span><br><span class="line">        .text(function(d, i)&#123;</span><br><span class="line">        return d;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">结果</span><br><span class="line">I like dogs</span><br><span class="line"></span><br><span class="line">I like cats</span><br><span class="line"></span><br><span class="line">I like snakes</span><br></pre></td></tr></table></figure>

<h4 id="3、对于已经绑定了数据的选择集，还有一种选择元素的方法，"><a href="#3、对于已经绑定了数据的选择集，还有一种选择元素的方法，" class="headerlink" title="3、对于已经绑定了数据的选择集，还有一种选择元素的方法，"></a>3、对于已经绑定了数据的选择集，还有一种选择元素的方法，</h4><p>运用 function(d, i)。<br>参数 i 是代表索引号，可以用条件判定语句来指定执行的元素。</p>
<h3 id="（三）插入元素"><a href="#（三）插入元素" class="headerlink" title="（三）插入元素"></a>（三）插入元素</h3><h4 id="1、append-在选择集末尾插入元素"><a href="#1、append-在选择集末尾插入元素" class="headerlink" title="1、append( ):在选择集末尾插入元素"></a>1、append( ):在选择集末尾插入元素</h4><p><strong>实例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;append&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">        &lt;p&gt;Apple&lt;/p&gt;</span><br><span class="line">        &lt;p id=myid&gt;Pear&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;Banana&lt;/p&gt;</span><br><span class="line">            &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">            &lt;script&gt;</span><br><span class="line">            d3.select(&quot;body&quot;).append(&quot;p&quot;).text(&quot;append p element&quot;);</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">结果：</span><br><span class="line">Apple</span><br><span class="line"></span><br><span class="line">Pear</span><br><span class="line"></span><br><span class="line">Banana</span><br><span class="line"></span><br><span class="line">append p element</span><br></pre></td></tr></table></figure>

<h4 id="2、insert-：在选择集前面插入元素"><a href="#2、insert-：在选择集前面插入元素" class="headerlink" title="2、insert( )：在选择集前面插入元素"></a>2、insert( )：在选择集前面插入元素</h4><p><strong>实例</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;insert&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;p id=myid&gt;Apple&lt;/p&gt;</span><br><span class="line">    &lt;p &gt;Pear&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Banana&lt;/p&gt;</span><br><span class="line">    &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        var body=d3.select(&quot;body&quot;).insert(&quot;p&quot;,&quot;#myid&quot;).text(&quot;insert p element&quot;);</span><br><span class="line">        var p=body.select(&quot;#myid&quot;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">结果：</span><br><span class="line"></span><br><span class="line">insert p element</span><br><span class="line"></span><br><span class="line">Apple</span><br><span class="line"></span><br><span class="line">Pear</span><br><span class="line"></span><br><span class="line">Banana</span><br></pre></td></tr></table></figure>

<h2 id="三、画图"><a href="#三、画图" class="headerlink" title="三、画图"></a>三、画图</h2><h3 id="（一）、画布概述"><a href="#（一）、画布概述" class="headerlink" title="（一）、画布概述"></a>（一）、画布概述</h3><p>要绘图，首先需要的是一块绘图的“画布”。</p>
<p>HTML5 提供两种强有力的“画布”：</p>
<h4 id="1、SVG（scalable-vector-graphics）可缩放矢量图形"><a href="#1、SVG（scalable-vector-graphics）可缩放矢量图形" class="headerlink" title="1、SVG（scalable vector graphics）可缩放矢量图形"></a>1、SVG（scalable vector graphics）可缩放矢量图形</h4><h5 id="（1）定义"><a href="#（1）定义" class="headerlink" title="（1）定义"></a>（1）定义</h5><p>是用于描述二维矢量图形的一种图形格式，是由万维网联盟制定的开放标准。SVG 使用 XML 格式来定义图形，除了 IE8 之前的版本外，绝大部分浏览器都支持 SVG，可将 SVG 文本直接嵌入 HTML 中显示。</p>
<h5 id="（2）特点"><a href="#（2）特点" class="headerlink" title="（2）特点"></a>（2）特点</h5><p>SVG 绘制的是矢量图，因此对图像进行放大不会失真。<br>基于 XML，可以为每个元素添加 JavaScript 事件处理器。<br>每个图形均视为对象，更改对象的属性，图形也会改变。<br>不适合游戏应用。</p>
<h4 id="2、Canvas-帆布"><a href="#2、Canvas-帆布" class="headerlink" title="2、Canvas 帆布"></a>2、Canvas 帆布</h4><h6 id="（1）定义-1"><a href="#（1）定义-1" class="headerlink" title="（1）定义"></a>（1）定义</h6><p>Canvas 是通过 JavaScript 来绘制 2D 图形，是 HTML5 中新增的元素。</p>
<h5 id="（2）特点-1"><a href="#（2）特点-1" class="headerlink" title="（2）特点"></a>（2）特点</h5><p>绘制的是位图，图像放大后会失真。</p>
<p>不支持事件处理器。</p>
<p>能够以.png 或.jpg 格式保存图像。</p>
<p>适合游戏应用。</p>
<h4 id="3、注意"><a href="#3、注意" class="headerlink" title="3、注意"></a>3、注意</h4><p>D3 虽然没有明文规定一定要在 SVG 中绘图，但是 D3 提供了众多的 SVG 图形的生成器，它们都是只支持 SVG 的。因此，建议使用 SVG 画布。</p>
<h3 id="（二）画布添加"><a href="#（二）画布添加" class="headerlink" title="（二）画布添加"></a>（二）画布添加</h3><h4 id="1、-使用-D3-在-body-元素-中-添加-svg"><a href="#1、-使用-D3-在-body-元素-中-添加-svg" class="headerlink" title="1、 使用 D3 在 body 元素 中 添加 svg"></a>1、 使用 D3 在 body 元素 中 添加 svg</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var width=300;    //画布的宽度</span><br><span class="line">var height=300;    //画布的高度</span><br><span class="line"></span><br><span class="line">var svg=d3.select(&quot;body&quot;)   //选择文档中的body元素</span><br><span class="line">.append(&quot;svg&quot;);    //添加一个SVG元素</span><br><span class="line">.attr(&quot;width&quot;,width);    //设定宽度</span><br><span class="line">.attr(&quot;height&quot;,height);    //设定高度</span><br></pre></td></tr></table></figure>

<h4 id="2、实例：绘制矩形"><a href="#2、实例：绘制矩形" class="headerlink" title="2、实例：绘制矩形"></a>2、实例：绘制矩形</h4><p>注意：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">（1）矩形的属性，常用的有四个：</span><br><span class="line">    x：矩形左上角的 x 坐标</span><br><span class="line">    y：矩形左上角的 y 坐标</span><br><span class="line">    width：矩形的宽度</span><br><span class="line">    height：矩形的高度</span><br><span class="line">（2）在 SVG 中，x 轴的正方向是水平向右，y 轴的正方向是垂直向下的。</span><br></pre></td></tr></table></figure>

<p>代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;绘制矩形&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script&gt;</span><br><span class="line">        var width = 300;    //画布的宽度300</span><br><span class="line">        var height = 300;    //画布的高度300</span><br><span class="line">        var svg = d3.select(&quot;body&quot;)    //选择文档中的body元素</span><br><span class="line">                    .append(&quot;svg&quot;)    //添加一个SVG元素</span><br><span class="line">                    .attr(&quot;width&quot;,width)    //设定宽度</span><br><span class="line">                    .attr(&quot;height&quot;,height);    //设定高度</span><br><span class="line">        var dataset = [ 250 , 210 , 170 , 130 , 90 ];    //数据，表示矩形的宽度</span><br><span class="line">        var rectHeight = 25;    //每个矩形所占的像素高度（包括空白处）</span><br><span class="line">        svg.selectAll(&quot;rect&quot;)</span><br><span class="line">           .data(dataset)    //绑定数组</span><br><span class="line">           .enter()    //指定选择集的enter部分</span><br><span class="line">           .append(&quot;rect&quot;)    //添加足够数量的矩形</span><br><span class="line">           .attr(&quot;x&quot;,20)    //取x 坐标为20</span><br><span class="line">           .attr(&quot;y&quot;,function(d,i)&#123;    //取y坐标</span><br><span class="line">               return i * rectHeight;</span><br><span class="line">           &#125;)</span><br><span class="line">           .attr(&quot;width&quot;,function(d)&#123;    //设定宽度</span><br><span class="line">               return d;</span><br><span class="line">           &#125;)</span><br><span class="line">           .attr(&quot;height&quot;,rectHeight-2)    //设定高度</span><br><span class="line">           .attr(&quot;fill&quot;,&quot;steelblue&quot;);    //以铁蓝色满填充矩形</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（三）比例尺"><a href="#（三）比例尺" class="headerlink" title="（三）比例尺"></a>（三）比例尺</h3><h4 id="1-为什么需要比例尺"><a href="#1-为什么需要比例尺" class="headerlink" title="1. 为什么需要比例尺"></a>1. 为什么需要比例尺</h4><p>var dataset&#x3D;[250,210,170,130,90]<br>绘图时，直接使用 250 给矩形的宽度赋值，即矩形的宽度就是 250 个像素。 此方式非常具有局限性，如果数值过大或过小。</p>
<p>var dataset_1&#x3D;[2.5,2.1,1.7,1.3,0.9]<br>对以上两个数组，绝不可能用 2.5 个像素来代表矩形的宽度，那样根本看不见；也不可能用 2500 个像素来代表矩形的宽度，因为画布没有那么长 。</p>
<p>比例尺是 D3 中很重要的一个概念，直接用数值的大小来代表像素不是一种好方法<br>将某一区域的值映射到另一区域，其大小关系不变。这就是比例尺（Scale）。</p>
<h4 id="2、有哪些比例尺"><a href="#2、有哪些比例尺" class="headerlink" title="2、有哪些比例尺"></a>2、有哪些比例尺</h4><p>在数学中，x 的范围被称为 定义域，y 的范围被称为 值域。<br>D3 中的比例尺，也有定义域和值域，分别被称为 domain 和 range。<br>开发者需要指定 domain 和 range 的范围，如此即可得到一个计算关系。</p>
<h5 id="（1）线性比例尺"><a href="#（1）线性比例尺" class="headerlink" title="（1）线性比例尺"></a>（1）线性比例尺</h5><p>能将一个连续的区间，映射到另一区间。<br>如： var dataset&#x3D;[1.2, 2.3, 0.9, 1.5, 3.3]<br>将 dataset 中最小的值，映射成 0；将最大的值，映射成 300。<br>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;线性比例尺&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">//将 dataset 中最小的值，映射成 0；将最大的值，映射成 300。</span><br><span class="line">    var dataset=[1.2 , 2.3 , 0.9 , 1.5 , 3.3];</span><br><span class="line"></span><br><span class="line">    var min=d3.min(dataset);</span><br><span class="line">    var max=d3.max(dataset);</span><br><span class="line">    var linear=d3.scale.linear().domain([min,max]).range([0,300]);</span><br><span class="line">    alert(&quot;linear(0.9):&quot;+linear(0.9));</span><br><span class="line">    alert(&quot;linear(2.3):&quot;+linear(2.3));</span><br><span class="line">    alert(&quot;linear(3.3):&quot;+linear(3.3));</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>其中，d3.scale.linear() 返回一个线性比例尺。<br>domain() 和 range() 分别设定比例尺的定义域和值域。<br>在这里还用到了两个函数，它们经常与比例尺一起出现： d3.max() d3.min()<br>这两个函数能够求数组的最大值和最小值，是 D3 提供的。<br>按照以上代码， 比例尺的定义域 domain 为：[0.9, 3.3] ， 比例尺的值域 range 为：[0, 300] 因此，当输入 0.9 时，返回 0；当输入 3.3 时，返回 300。当输入 2.3 时呢？返回 175，这是按照线性函数的规则计算的。<br>有一点请大家记住： d3.scale.linear() 的返回值，是可以当做函数来使用的。因此，才有这样的用法：linear(0.9)。<br>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">linear(0.9);    //返回 0</span><br><span class="line">linear(2.3);    //返回 175</span><br><span class="line">linear(3.3);    //返回 300</span><br></pre></td></tr></table></figure>

<h5 id="（2）序数比例尺"><a href="#（2）序数比例尺" class="headerlink" title="（2）序数比例尺"></a>（2）序数比例尺</h5><p>用于： 定义域和值域不是连续的。<br>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;序数比例尺&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        var index=[0,1,2,3,4];</span><br><span class="line">        var color=[&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;,&quot;yellow&quot;,&quot;black&quot;];</span><br><span class="line">        var ordinal=d3.scale.ordinal()</span><br><span class="line">                      .domain(index)</span><br><span class="line">                      .range(color);</span><br><span class="line">        alert(ordinal(0));    返回 red</span><br><span class="line">        alert(ordinal(2));    //返回 green</span><br><span class="line">        alert(ordinal(4));    //返回 black</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ordinal(0); //返回 red</span><br><span class="line">ordinal(2); //返回 green</span><br><span class="line">ordinal(4); //返回 black</span><br></pre></td></tr></table></figure>

<h4 id="3-实例：-给柱形图添加比例尺"><a href="#3-实例：-给柱形图添加比例尺" class="headerlink" title="3.实例： 给柱形图添加比例尺"></a>3.实例： 给柱形图添加比例尺</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;给柱形图添加比例尺&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var width = 300;    //画布的宽度300</span><br><span class="line">    var height = 300;    //画布的高度300</span><br><span class="line">    var svg = d3.select(&quot;body&quot;)                //选择文档中的body元素</span><br><span class="line">                .append(&quot;svg&quot;)                //添加一个svg元素</span><br><span class="line">                .attr(&quot;width&quot;, width)        //设定宽度</span><br><span class="line">                .attr(&quot;height&quot;, height);    //设定高度</span><br><span class="line"></span><br><span class="line">    var dataset=[2.5,2.1,1.7,1.3,0.9];    //数据（表示矩形的宽度）</span><br><span class="line">    var linear=d3.scale.linear()</span><br><span class="line">                 .domain([0,d3.max(dataset)])</span><br><span class="line">                 .range([0,250]);</span><br><span class="line">    var rectHeight = 25;    //每个矩形所占的像素高度(包括空白)</span><br><span class="line">    svg.selectAll(&quot;rect&quot;)</span><br><span class="line">          .data(dataset)</span><br><span class="line">          .enter()    //指定选择集的enter部分</span><br><span class="line">          .append(&quot;rect&quot;)    //添加足够数量的矩形</span><br><span class="line">          .attr(&quot;x&quot;,20)        //取x 坐标为20</span><br><span class="line">          .attr(&quot;y&quot;,function(d,i)&#123;        //取y坐标</span><br><span class="line">                return i * rectHeight;</span><br><span class="line">          &#125;)</span><br><span class="line">          .attr(&quot;width&quot;,function(d)&#123;    //设定宽度</span><br><span class="line">                   return linear(d);</span><br><span class="line">          &#125;)</span><br><span class="line">          .attr(&quot;height&quot;,rectHeight-2)    //设定高度</span><br><span class="line">          .attr(&quot;fill&quot;,&quot;steelblue&quot;);    //    以铁蓝色满填充矩形</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（四）坐标轴"><a href="#（四）坐标轴" class="headerlink" title="（四）坐标轴"></a>（四）坐标轴</h3><h4 id="1、定义-1"><a href="#1、定义-1" class="headerlink" title="1、定义"></a>1、定义</h4><p>坐标轴，是可视化图表中经常出现的一种图形，由一些列线段和刻度组成。<br>坐标轴在 SVG 中是没有现成的图形元素的，需要用其他的元素组合构成。<br>D3 提供了坐标轴的组件，如此在 SVG 画布中绘制坐标轴变得像添加一个普通元素一样简单。</p>
<h4 id="2、坐标轴的构成"><a href="#2、坐标轴的构成" class="headerlink" title="2、坐标轴的构成"></a>2、坐标轴的构成</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在 SVG 画布的预定义元素里，有六种基本图形：</span><br><span class="line">矩形 &lt;rect&gt;</span><br><span class="line">圆形 &lt;circle&gt;</span><br><span class="line">椭圆 &lt;ellipse&gt;</span><br><span class="line">线段 &lt;line&gt;</span><br><span class="line">折线 &lt;polyline&gt;</span><br><span class="line">多边形 &lt;polygon&gt;</span><br><span class="line">路径 &lt;path&gt;</span><br><span class="line">画布中的所有图形，都是由以上七种元素组成。</span><br></pre></td></tr></table></figure>

<p>实例 1：给矩形增加坐标轴</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;给柱形图添加比例尺&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">// 设定坐标轴的样式和位置</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.axis path,</span><br><span class="line">.axis line&#123;</span><br><span class="line">    fill: none;</span><br><span class="line">    stroke: black;</span><br><span class="line">    shape-rendering: crispEdges;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.axis text &#123;</span><br><span class="line">    font-family: sans-serif;</span><br><span class="line">    font-size: 11px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var width = 300;    //画布的宽度300</span><br><span class="line">    var height = 300;    //画布的高度300</span><br><span class="line">    var svg = d3.select(&quot;body&quot;)                //选择文档中的body元素</span><br><span class="line">                .append(&quot;svg&quot;)                //添加一个svg元素</span><br><span class="line">                .attr(&quot;width&quot;, width)        //设定宽度</span><br><span class="line">                .attr(&quot;height&quot;, height);    //设定高度</span><br><span class="line"></span><br><span class="line">    var dataset=[2.5,2.1,1.7,1.3,0.9];    //数据（表示矩形的宽度）</span><br><span class="line">    var linear=d3.scale.linear()        //定义比例尺</span><br><span class="line">                 .domain([0,d3.max(dataset)])</span><br><span class="line">                 .range([0,250]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    var rectHeight = 25;    //每个矩形所占的像素高度(包括空白)</span><br><span class="line">    svg.selectAll(&quot;rect&quot;)</span><br><span class="line">          .data(dataset)</span><br><span class="line">          .enter()    //指定选择集的enter部分</span><br><span class="line">          .append(&quot;rect&quot;)    //添加足够数量的矩形</span><br><span class="line">          .attr(&quot;x&quot;,20)        //取x 坐标为20</span><br><span class="line">          .attr(&quot;y&quot;,function(d,i)&#123;        //取y坐标</span><br><span class="line">                return i * rectHeight;</span><br><span class="line">          &#125;)</span><br><span class="line">          .attr(&quot;width&quot;,function(d)&#123;    //设定宽度</span><br><span class="line">                   return linear(d);</span><br><span class="line">          &#125;)</span><br><span class="line">          .attr(&quot;height&quot;,rectHeight-2)    //设定高度</span><br><span class="line">          .attr(&quot;fill&quot;,&quot;steelblue&quot;);    //    以铁蓝色满填充矩形</span><br><span class="line"></span><br><span class="line">       var axis = d3.svg.axis()     //D3 中坐标轴的组件，能够在 SVG 中生成组成坐标轴的元素。</span><br><span class="line">                  .scale(linear) //指定比例尺</span><br><span class="line">                  .orient(&quot;bottom&quot;)//指定刻度的方向bottom 表示在坐标轴的下方显示。</span><br><span class="line">                  .ticks(7);  //指定刻度的数量</span><br><span class="line"></span><br><span class="line">    svg.append(&quot;g&quot;)</span><br><span class="line">       .attr(&quot;class&quot;,&quot;axis&quot;)</span><br><span class="line">       .attr(&quot;transform&quot;,&quot;translate(20,130)&quot;)</span><br><span class="line">       .call(axis);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>实例 2：完整的柱形图<br>一个完整的柱形图包括三个部分：矩形，文字，坐标轴</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;完整的柱形图&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .axis path,</span><br><span class="line">    .axis line&#123;</span><br><span class="line">        fill: none;</span><br><span class="line">        stroke: black;</span><br><span class="line">        shape-rendering: crispEdges;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .axis text &#123;</span><br><span class="line">        font-family: sans-serif;</span><br><span class="line">        font-size: 11px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .MyRect &#123;</span><br><span class="line">        fill: steelblue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .MyText &#123;</span><br><span class="line">        fill: white;</span><br><span class="line">        text-anchor: middle;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">//1、添加 SVG 画布</span><br><span class="line"></span><br><span class="line">//画布大小</span><br><span class="line">    var width = 400;    //画布的宽度</span><br><span class="line">    var height = 400;    //画布的高度</span><br><span class="line"></span><br><span class="line">//在 body 里添加一个 SVG 画布</span><br><span class="line">    var svg = d3.select(&quot;body&quot;)            //选择文档中的body元素</span><br><span class="line">                .append(&quot;svg&quot;)                //添加一个svg元素</span><br><span class="line">                .attr(&quot;width&quot;, width)        //设定宽度</span><br><span class="line">                .attr(&quot;height&quot;, height);    //设定高度</span><br><span class="line">//画布周边的空白</span><br><span class="line">    var padding=&#123;left:30,right:30,top:20,bottom:20&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//2、定义数据和比例尺</span><br><span class="line"></span><br><span class="line">//定义一个数组</span><br><span class="line">    var dataset = [10, 20, 30, 40, 33, 24, 12, 5];    //数据（表示矩形的宽度）</span><br><span class="line">//X轴的比例尺</span><br><span class="line">    var xScale=d3.scale.ordinal()</span><br><span class="line">        .domain(d3.range(dataset.length))</span><br><span class="line">        .rangeRoundBands([0, width - padding.left - padding.right]);</span><br><span class="line">//Y轴的比例尺</span><br><span class="line">    var yScale=d3.scale.linear()</span><br><span class="line">        .domain([0,d3.max(dataset)])</span><br><span class="line">        .range([height - padding.top - padding.bottom, 0]);</span><br><span class="line"></span><br><span class="line">//3. 定义坐标轴</span><br><span class="line"></span><br><span class="line">//定义X轴</span><br><span class="line">var xAxis=d3.svg.axis()</span><br><span class="line">    .scale(xScale)</span><br><span class="line">    .orient(&quot;bottom&quot;);</span><br><span class="line">//定义Y轴</span><br><span class="line">var yAxis=d3.svg.axis()</span><br><span class="line">    .scale(yAxis)</span><br><span class="line">    .orient(&quot;left&quot;)</span><br><span class="line"></span><br><span class="line">//矩形之间的空白处</span><br><span class="line">var rectPadding=4</span><br><span class="line"></span><br><span class="line">//添加矩形元素</span><br><span class="line">var rects=svg.selectAll(&quot;MyRect&quot;)</span><br><span class="line">    .data(dataset)</span><br><span class="line">    .enter()</span><br><span class="line">    .append(&quot;rect&quot;)</span><br><span class="line">    .attr(&quot;class&quot;,&quot;MyRect&quot;)</span><br><span class="line">    .attr(&quot;transform&quot;,&quot;translate(&quot;+padding.left+&quot;,&quot;+padding.top+&quot;)&quot;)</span><br><span class="line">    .attr(&quot;x&quot;,function(d,i)&#123;</span><br><span class="line">        return xScale(i)+rectPadding/2;</span><br><span class="line">    &#125;)</span><br><span class="line">    .attr(&quot;y&quot;,function(d)&#123;</span><br><span class="line">        return yScale(d);</span><br><span class="line">    &#125;)</span><br><span class="line">    .attr(&quot;width&quot;,xScale.rangeBand()-rectPadding)</span><br><span class="line">    .attr(&quot;height&quot;,function(d)&#123;</span><br><span class="line">        return height - padding.top - padding.bottom - yScale(d);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">//4、添加文字元素</span><br><span class="line">var texts = svg.selectAll(&quot;.MyText&quot;)</span><br><span class="line">        .data(dataset)</span><br><span class="line">        .enter()</span><br><span class="line">        .append(&quot;text&quot;)</span><br><span class="line">        .attr(&quot;class&quot;,&quot;MyText&quot;)</span><br><span class="line">        .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + padding.top + &quot;)&quot;)</span><br><span class="line">        .attr(&quot;x&quot;, function(d,i)&#123;</span><br><span class="line">            return xScale(i) + rectPadding/2;</span><br><span class="line">        &#125; )</span><br><span class="line">        .attr(&quot;y&quot;,function(d)&#123;</span><br><span class="line">            return yScale(d);</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(&quot;dx&quot;,function()&#123;</span><br><span class="line">            return (xScale.rangeBand() - rectPadding)/2;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(&quot;dy&quot;,function(d)&#123;</span><br><span class="line">            return 20;</span><br><span class="line">        &#125;)</span><br><span class="line">        .text(function(d)&#123;</span><br><span class="line">            return d;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">//5、添加坐标轴的元素</span><br><span class="line"></span><br><span class="line">//添加x轴</span><br><span class="line">svg.append(&quot;g&quot;)</span><br><span class="line">  .attr(&quot;class&quot;,&quot;axis&quot;)</span><br><span class="line">  .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + (height - padding.bottom) + &quot;)&quot;)</span><br><span class="line">  .call(xAxis);</span><br><span class="line">//添加y轴</span><br><span class="line">svg.append(&quot;g&quot;)</span><br><span class="line">  .attr(&quot;class&quot;,&quot;axis&quot;)</span><br><span class="line">  .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + padding.top + &quot;)&quot;)</span><br><span class="line"> .call(yAxis);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（五）让图表动起来"><a href="#（五）让图表动起来" class="headerlink" title="（五）让图表动起来"></a>（五）让图表动起来</h3><p>D3 支持制作动态的图表。有时候，图表的变化需要缓慢的发生，以便于让用户看清楚变化的过程，也能给用户不小的友好感。</p>
<h4 id="1、什么是动态图"><a href="#1、什么是动态图" class="headerlink" title="1、什么是动态图"></a>1、什么是动态图</h4><p>动态的图表，是指图表在某 一时间段会发生某种变化，可能是形状、颜色、位置等，而且用户是可以看到变化的过程的。<br>例如，有一个圆，圆心为 (100, 100)。现在我们希望圆的 x 坐标从 100 移到 300，并且移动过程在 2 秒的时间内发生。 这种时候就需要用到动态效果，在 D3 里我们称之为过渡（transition）。</p>
<h4 id="2、实现动态的方法"><a href="#2、实现动态的方法" class="headerlink" title="2、实现动态的方法"></a>2、实现动态的方法</h4><p>D3 提供了 4 个方法用于实现图形的过渡：从状态 A 变为状态 B。</p>
<p><strong>1、transition()</strong></p>
<p>D3 会自动对两种颜色（红色和铁蓝色）之间的颜色值（RGB 值）进行插值计算，得到过渡用的颜色值。我们无需知道中间是怎么计算的，只需要结果即可。</p>
<ul>
<li>.attr(“fill”,”red”) &#x2F;&#x2F;初始颜色为红色</li>
<li>.transition () &#x2F;&#x2F;启动过渡</li>
<li>.attr(“fill”,”steelblue”) &#x2F;&#x2F;终止颜色为铁蓝色</li>
</ul>
<p><strong>2、 duration() 指定过渡的持续时间，单位为毫秒。</strong></p>
<p><strong>3、 ease()</strong></p>
<p>指定过渡的方式，常用的有：</p>
<ul>
<li>linear：普通的线性变化</li>
<li>circle：慢慢地到达变换的最终状态</li>
<li>elastic：带有弹跳的到达最终状态</li>
<li>bounce：在最终状态处弹跳几次<br>调用时，格式形如： ease(“bounce”)。</li>
</ul>
<p><strong>4、 delay() 指定延迟的时间，表示一定时间后才开始转变，单位同样为毫秒。</strong><br>此函数可以对整体指定延迟，也可以对个别指定延迟。</p>
<p><strong>5、实例：实现简单的动态效果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;实现简单的动态效果&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">var width = 700;    //画布的宽度300</span><br><span class="line">var height = 700;    //画布的高度300</span><br><span class="line">var svg = d3.select(&quot;body&quot;)                //选择文档中的body元素</span><br><span class="line">            .append(&quot;svg&quot;)                //添加一个svg元素</span><br><span class="line">            .attr(&quot;width&quot;, width)        //设定宽度</span><br><span class="line">            .attr(&quot;height&quot;, height);    //设定高度</span><br><span class="line"></span><br><span class="line">    //圆1</span><br><span class="line"> var circle1=svg.append(&quot;circle&quot;)</span><br><span class="line">    .attr(&quot;cx&quot;,100)</span><br><span class="line">    .attr(&quot;cy&quot;,100)</span><br><span class="line">    .attr(&quot;r&quot;,45)</span><br><span class="line">    .style(&quot;fill&quot;,&quot;green&quot;);</span><br><span class="line"></span><br><span class="line">    //在1秒（1000毫秒）内将圆心坐标由100变为300</span><br><span class="line">circle1.transition()</span><br><span class="line">      .duration(1000)</span><br><span class="line">      .attr(&quot;cx&quot;,300);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">          //圆2</span><br><span class="line">var circle2=svg.append(&quot;circle&quot;)</span><br><span class="line">    .attr(&quot;cx&quot;,100)</span><br><span class="line">    .attr(&quot;cy&quot;,100)</span><br><span class="line">    .attr(&quot;r&quot;,45)</span><br><span class="line">    .style(&quot;fill&quot;,&quot;green&quot;);</span><br><span class="line"></span><br><span class="line">//在1.5秒（1500毫秒）内将圆心坐标由100变为300，</span><br><span class="line">//将颜色从绿色变为红色</span><br><span class="line">circle2.transition()</span><br><span class="line">      .duration(1500)</span><br><span class="line">      .attr(&quot;cx&quot;,300)</span><br><span class="line">      .style(&quot;fill&quot;,&quot;red&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">          //圆3</span><br><span class="line">var circle3=svg.append(&quot;circle&quot;)</span><br><span class="line">    .attr(&quot;cx&quot;,100)</span><br><span class="line">    .attr(&quot;cy&quot;,100)</span><br><span class="line">    .attr(&quot;r&quot;,45)</span><br><span class="line">    .style(&quot;fill&quot;,&quot;green&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//在2秒（2000毫秒）内将圆心坐标由100变为300</span><br><span class="line">//将颜色从绿色变为红色</span><br><span class="line">//将半径从45变成25</span><br><span class="line">//过渡方式采用bounce（在终点处弹跳几次）</span><br><span class="line">circle3.transition()</span><br><span class="line">       .duration(2000)</span><br><span class="line">       .ease(&quot;bounce&quot;)</span><br><span class="line">       .attr(&quot;cx&quot;,300)</span><br><span class="line">       .style(&quot;fill&quot;,&quot;red&quot;)</span><br><span class="line">       .attr(&quot;r&quot;,25);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>6、实例：给柱形图加上动态效果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;完整的柱形图&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .axis path,</span><br><span class="line">    .axis line&#123;</span><br><span class="line">        fill: none;</span><br><span class="line">        stroke: black;</span><br><span class="line">        shape-rendering: crispEdges;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .axis text &#123;</span><br><span class="line">        font-family: sans-serif;</span><br><span class="line">        font-size: 11px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .MyRect &#123;</span><br><span class="line">        fill: steelblue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .MyText &#123;</span><br><span class="line">        fill: white;</span><br><span class="line">        text-anchor: middle;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">//1、添加 SVG 画布</span><br><span class="line"></span><br><span class="line">//画布大小</span><br><span class="line">    var width = 400;    //画布的宽度</span><br><span class="line">    var height = 400;    //画布的高度</span><br><span class="line"></span><br><span class="line">//在 body 里添加一个 SVG 画布</span><br><span class="line">    var svg = d3.select(&quot;body&quot;)            //选择文档中的body元素</span><br><span class="line">                .append(&quot;svg&quot;)                //添加一个svg元素</span><br><span class="line">                .attr(&quot;width&quot;, width)        //设定宽度</span><br><span class="line">                .attr(&quot;height&quot;, height);    //设定高度</span><br><span class="line">//画布周边的空白</span><br><span class="line">    var padding=&#123;left:30,right:30,top:20,bottom:20&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//2、定义数据和比例尺</span><br><span class="line"></span><br><span class="line">//定义一个数组</span><br><span class="line">    var dataset = [10, 20, 30, 40, 33, 24, 12, 5];    //数据（表示矩形的宽度）</span><br><span class="line">//X轴的比例尺</span><br><span class="line">    var xScale=d3.scale.ordinal()</span><br><span class="line">        .domain(d3.range(dataset.length))</span><br><span class="line">        .rangeRoundBands([0, width - padding.left - padding.right]);</span><br><span class="line">//Y轴的比例尺</span><br><span class="line">    var yScale=d3.scale.linear()</span><br><span class="line">        .domain([0,d3.max(dataset)])</span><br><span class="line">        .range([height - padding.top - padding.bottom, 0]);</span><br><span class="line"></span><br><span class="line">//3. 定义坐标轴</span><br><span class="line"></span><br><span class="line">//定义X轴</span><br><span class="line">var xAxis=d3.svg.axis()</span><br><span class="line">    .scale(xScale)</span><br><span class="line">    .orient(&quot;bottom&quot;);</span><br><span class="line">//定义Y轴</span><br><span class="line">var yAxis=d3.svg.axis()</span><br><span class="line">    .scale(yAxis)</span><br><span class="line">    .orient(&quot;left&quot;)</span><br><span class="line"></span><br><span class="line">//矩形之间的空白处</span><br><span class="line">var rectPadding=4</span><br><span class="line"></span><br><span class="line">//添加矩形元素</span><br><span class="line">var rects=svg.selectAll(&quot;.MyRect&quot;)//选择svg中MyRect类中的所有元素</span><br><span class="line">    .data(dataset)</span><br><span class="line">    .enter()</span><br><span class="line">    .append(&quot;rect&quot;)</span><br><span class="line">    .attr(&quot;class&quot;,&quot;MyRect&quot;)</span><br><span class="line">    .attr(&quot;transform&quot;,&quot;translate(&quot;+padding.left+&quot;,&quot;+padding.top+&quot;)&quot;)</span><br><span class="line">    .attr(&quot;x&quot;,function(d,i)&#123;</span><br><span class="line">        return xScale(i)+rectPadding/2;</span><br><span class="line">    &#125;)</span><br><span class="line">    .attr(&quot;width&quot;,xScale.rangeBand()-rectPadding)</span><br><span class="line"></span><br><span class="line">    .attr(&quot;y&quot;,function(d)&#123;</span><br><span class="line">        var min=yScale.domain()[0];</span><br><span class="line">        return yScale(min);</span><br><span class="line">    &#125;)</span><br><span class="line">    .attr(&quot;height&quot;,function(d)&#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    .transition()</span><br><span class="line">    .delay(function(d,i)&#123;</span><br><span class="line">        return i * 200;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    .duration(2000)</span><br><span class="line">    .ease(&quot;bounce&quot;)</span><br><span class="line">    .attr(&quot;y&quot;,function(d)&#123;</span><br><span class="line">        return yScale(d);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    .attr(&quot;height&quot;,function(d)&#123;</span><br><span class="line">        return height - padding.top - padding.bottom - yScale(d);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">//4、添加文字元素</span><br><span class="line">var texts = svg.selectAll(&quot;.MyText&quot;)</span><br><span class="line">        .data(dataset)</span><br><span class="line">        .enter()</span><br><span class="line">        .append(&quot;text&quot;)</span><br><span class="line">        .attr(&quot;class&quot;,&quot;MyText&quot;)</span><br><span class="line">        .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + padding.top + &quot;)&quot;)</span><br><span class="line">        .attr(&quot;x&quot;, function(d,i)&#123;</span><br><span class="line">            return xScale(i) + rectPadding/2;</span><br><span class="line">        &#125; )</span><br><span class="line">        .attr(&quot;y&quot;,function(d)&#123;</span><br><span class="line">            return yScale(d);</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(&quot;dx&quot;,function()&#123;</span><br><span class="line">            return (xScale.rangeBand() - rectPadding)/2;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(&quot;dy&quot;,function(d)&#123;</span><br><span class="line">            return 20;</span><br><span class="line">        &#125;)</span><br><span class="line">        .text(function(d)&#123;</span><br><span class="line">            return d;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(&quot;y&quot;,function(d)&#123;//变化前y的坐标</span><br><span class="line">            var min = yScale.domain()[0];</span><br><span class="line">            return yScale(min);</span><br><span class="line">        &#125;)</span><br><span class="line">        .transition()//过渡</span><br><span class="line">        .delay(function(d,i)&#123;</span><br><span class="line">            return i * 200;</span><br><span class="line">        &#125;)</span><br><span class="line">        .duration(2000)</span><br><span class="line">        .ease(&quot;bounce&quot;)</span><br><span class="line">        .attr(&quot;y&quot;,function(d)&#123;//变化后的y坐标</span><br><span class="line">            return yScale(d);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">//5、添加坐标轴的元素</span><br><span class="line"></span><br><span class="line">//添加x轴</span><br><span class="line">svg.append(&quot;g&quot;)</span><br><span class="line">  .attr(&quot;class&quot;,&quot;axis&quot;)</span><br><span class="line">  .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + (height - padding.bottom) + &quot;)&quot;)</span><br><span class="line">  .call(xAxis);</span><br><span class="line">//添加y轴</span><br><span class="line">svg.append(&quot;g&quot;)</span><br><span class="line">  .attr(&quot;class&quot;,&quot;axis&quot;)</span><br><span class="line">  .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + padding.top + &quot;)&quot;)</span><br><span class="line"> .call(yAxis);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（七）Update、Enter、Exit"><a href="#（七）Update、Enter、Exit" class="headerlink" title="（七）Update、Enter、Exit"></a>（七）Update、Enter、Exit</h3><ul>
<li>1、Update、Enter、Exit 是 D3 中三个非常重要的概念，它处理的是当选择集和数据的数量关系不确定的情况。</li>
<li>2、假设，在 body 中有三个 p 元素，有一数组 [3, 6, 9]，则可以将数组中的每一项分别与一个 p 元素绑定在一起。但是，有一个问题：当数组的长度与元素数量不一致（数组长度 &gt; 元素数量 or 数组长度 &lt; 元素数量）时呢？这时候就需要理解 Update、Enter、Exit 的概念。</li>
<li>3、如果数组为 [3, 6, 9, 12, 15]，将此数组绑定到三个 p 元素的选择集上。可以想象，会有两个数据没有元素与之对应，这时候 D3 会建立两个空的元素与数据对应，这一部分就称为 Enter。而有元素与数据对应的部分称为 Update。如果数组为 [3]，则会有两个元素没有数据绑定，那么没有数据绑定的部分被称为 Exit。示意图如下所示。</li>
<li>4、update 部分的处理办法一般是：更新属性值 enter 部分的处理办法一般是：添加元素后，赋予属性值</li>
</ul>
<h3 id="（八）交互式操作"><a href="#（八）交互式操作" class="headerlink" title="（八）交互式操作"></a>（八）交互式操作</h3><p>与图表的交互，指在图形元素上设置一个或多个监听器，当事件发生时，做出相应的反应。</p>
<h4 id="1、什么是交互"><a href="#1、什么是交互" class="headerlink" title="1、什么是交互"></a>1、什么是交互</h4><p>交互，指的是用户输入了某种指令，程序接受到指令之后必须做出某种响应。对可视化图表来说，交互能使图表更加生动，能表现更多内容。<br>例如，拖动图表中某些图形、鼠标滑到图形上出现提示框、用触屏放大或缩小图形等等。<br>用户用于交互的工具一般有三种：鼠标、键盘、触屏。</p>
<h4 id="2、如何添加交互"><a href="#2、如何添加交互" class="headerlink" title="2、如何添加交互"></a>2、如何添加交互</h4><p>触屏常用的事件有三个：</p>
<ul>
<li>touchstart：当触摸点被放在触摸屏上时。</li>
<li>touchmove：当触摸点在触摸屏上移动时。</li>
<li>touchend：当触摸点从触摸屏上拿开时。<br>当某个事件被监听到时，D3 会把当前的事件存到 d3.event 对象，里面保存了当前事件的各种参数</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var circle = svg.append(&quot;circle&quot;);</span><br><span class="line">circle.on(&quot;click&quot;, function()&#123;</span><br><span class="line"> //在这里添加交互内容</span><br><span class="line">console.log(d3.event); &#125;);</span><br></pre></td></tr></table></figure>

<p>实例：带有交互的柱形图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;带有交互的柱形图&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .axis path,</span><br><span class="line">    .axis line&#123;</span><br><span class="line">        fill: none;</span><br><span class="line">        stroke: black;</span><br><span class="line">        shape-rendering: crispEdges;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .axis text &#123;</span><br><span class="line">        font-family: sans-serif;</span><br><span class="line">        font-size: 11px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /*.MyRect &#123;</span><br><span class="line">        fill: steelblue;</span><br><span class="line">    &#125;*/</span><br><span class="line"></span><br><span class="line">    .MyText &#123;</span><br><span class="line">        fill: red;</span><br><span class="line">        text-anchor: middle;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script src=&quot;js/d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line"></span><br><span class="line">    //画布大小</span><br><span class="line">    var width = 400;</span><br><span class="line">    var height = 400;</span><br><span class="line"></span><br><span class="line">    //在 body 里添加一个 SVG 画布</span><br><span class="line">    var svg = d3.select(&quot;body&quot;)//选择d3文档中的body元素</span><br><span class="line">        .append(&quot;svg&quot;)</span><br><span class="line">        .attr(&quot;width&quot;, width)</span><br><span class="line">        .attr(&quot;height&quot;, height);</span><br><span class="line"></span><br><span class="line">    //画布周边的空白</span><br><span class="line">    var padding = &#123;left:30, right:30, top:20, bottom:20&#125;;</span><br><span class="line"></span><br><span class="line">    //定义一个数组</span><br><span class="line">    var dataset = [10, 20, 30, 40, 33, 24, 12, 5];</span><br><span class="line"></span><br><span class="line">    //x轴的比例尺</span><br><span class="line">    var xScale = d3.scale.ordinal()</span><br><span class="line">        .domain(d3.range(dataset.length)) //有几个矩形就有几个x刻度</span><br><span class="line">        .rangeRoundBands([0, width - padding.left - padding.right]);</span><br><span class="line"></span><br><span class="line">    //y轴的比例尺</span><br><span class="line">    var yScale = d3.scale.linear()</span><br><span class="line">        .domain([0,d3.max(dataset)])</span><br><span class="line">        .range([height - padding.top - padding.bottom, 0]);</span><br><span class="line"></span><br><span class="line">    //定义x轴</span><br><span class="line">    var xAxis = d3.svg.axis()</span><br><span class="line">        .scale(xScale)</span><br><span class="line">        .orient(&quot;bottom&quot;);</span><br><span class="line"></span><br><span class="line">    //定义y轴</span><br><span class="line">    var yAxis = d3.svg.axis()</span><br><span class="line">        .scale(yScale)</span><br><span class="line">        .orient(&quot;left&quot;);</span><br><span class="line"></span><br><span class="line">    //矩形之间的空白</span><br><span class="line">    var rectPadding = 4;</span><br><span class="line"></span><br><span class="line">    //添加矩形元素</span><br><span class="line">    var rects = svg.selectAll(&quot;.MyRect&quot;)//选择svg中MyRect类中的所有元素</span><br><span class="line">        .data(dataset)</span><br><span class="line">        .enter()</span><br><span class="line">        .append(&quot;rect&quot;)//添加矩形元素</span><br><span class="line">        .attr(&quot;class&quot;,&quot;MyRect&quot;)//清除里面的所有类，并设为自己的类myrect</span><br><span class="line">        .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + padding.top + &quot;)&quot;)</span><br><span class="line">        .attr(&quot;x&quot;, function(d,i)&#123;//矩形左上角的x坐标</span><br><span class="line">            return xScale(i) + rectPadding/2;</span><br><span class="line">        &#125; )</span><br><span class="line">        .attr(&quot;width&quot;, xScale.rangeBand() - rectPadding )//矩形的宽</span><br><span class="line"></span><br><span class="line">         .attr(&quot;y&quot;,function(d)&#123;//变化前的矩形左上角的y坐标</span><br><span class="line">            var min = yScale.domain()[0];</span><br><span class="line">            return yScale(min);</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(&quot;height&quot;, function(d)&#123;//变化前的矩形左上角的高</span><br><span class="line">            return 0;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        .transition()//过度</span><br><span class="line">        .delay(function(d,i)&#123;//延迟</span><br><span class="line">            return i * 200;</span><br><span class="line">        &#125;)</span><br><span class="line">        .duration(2000)//变化时长</span><br><span class="line">        .ease(&quot;bounce&quot;)//到终点是弹跳</span><br><span class="line"></span><br><span class="line">        .attr(&quot;y&quot;,function(d)&#123;//矩形左上角的y坐标</span><br><span class="line">            return yScale(d);</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(&quot;height&quot;, function(d)&#123;//矩形的高</span><br><span class="line">            return height - padding.top - padding.bottom - yScale(d);</span><br><span class="line">        &#125;)</span><br><span class="line">//坐标说明位置，宽高说明大小</span><br><span class="line"></span><br><span class="line">    var rects = svg.selectAll(&quot;.Myrect&quot;)//选择svg中的MyRect类中的所有元素</span><br><span class="line">        .attr(&quot;fill&quot;,&quot;steelblue&quot;)       //填充颜色不要写在CSS里</span><br><span class="line">        .on(&quot;mouseover&quot;,function(d,i)&#123;//鼠标在上，颜色变黄</span><br><span class="line">            d3.select(this)</span><br><span class="line">                .attr(&quot;fill&quot;,&quot;yellow&quot;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .on(&quot;mouseout&quot;,function(d,i)&#123;//鼠标移出，颜色变钢铁蓝</span><br><span class="line">            d3.select(this)</span><br><span class="line">                .transition()//500毫秒渐变</span><br><span class="line">                .duration(500)</span><br><span class="line">                .attr(&quot;fill&quot;,&quot;steelblue&quot;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //添加文字元素</span><br><span class="line">    var texts = svg.selectAll(&quot;.MyText&quot;)//选择svg中的MyText类中的所有元素</span><br><span class="line">        .data(dataset)</span><br><span class="line">        .enter()</span><br><span class="line">        .append(&quot;text&quot;)//添加text元素</span><br><span class="line">        .attr(&quot;class&quot;,&quot;MyText&quot;)//清除里面的所有类，并设为自己的类MyText</span><br><span class="line">        .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + padding.top + &quot;)&quot;)</span><br><span class="line">        .attr(&quot;x&quot;, function(d,i)&#123;//矩形左上角的x坐标</span><br><span class="line">            return xScale(i) + rectPadding/2;</span><br><span class="line">        &#125; )</span><br><span class="line">        .attr(&quot;y&quot;,function(d)&#123;//矩形左上角的y坐标</span><br><span class="line">            return yScale(d);</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(&quot;dx&quot;,function()&#123;//text相对于矩形的横向偏移量</span><br><span class="line">            return (xScale.rangeBand() - rectPadding)/2;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(&quot;dy&quot;,function(d)&#123;//text相对于矩形的纵向偏移量</span><br><span class="line">            return 20;</span><br><span class="line">        &#125;)</span><br><span class="line">        .text(function(d)&#123;//text 的内容</span><br><span class="line">            return d;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        .attr(&quot;y&quot;,function(d)&#123;//变化前y的坐标</span><br><span class="line">            var min = yScale.domain()[0];</span><br><span class="line">            return yScale(min);</span><br><span class="line">        &#125;)</span><br><span class="line">        .transition()//过渡</span><br><span class="line">        .delay(function(d,i)&#123;</span><br><span class="line">            return i * 200;</span><br><span class="line">        &#125;)</span><br><span class="line">        .duration(2000)</span><br><span class="line">        .ease(&quot;bounce&quot;)</span><br><span class="line">        .attr(&quot;y&quot;,function(d)&#123;//变化后的y坐标</span><br><span class="line">            return yScale(d);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //添加x轴,分组元素&lt;g&gt;</span><br><span class="line">    svg.append(&quot;g&quot;)</span><br><span class="line">        .attr(&quot;class&quot;,&quot;axis&quot;)</span><br><span class="line">        .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + (height - padding.bottom) + &quot;)&quot;)</span><br><span class="line">        .call(xAxis);</span><br><span class="line"></span><br><span class="line">    //添加y轴,分组元素&lt;g&gt;</span><br><span class="line">    svg.append(&quot;g&quot;)</span><br><span class="line">        .attr(&quot;class&quot;,&quot;axis&quot;)</span><br><span class="line">        .attr(&quot;transform&quot;,&quot;translate(&quot; + padding.left + &quot;,&quot; + padding.top + &quot;)&quot;)</span><br><span class="line">        .call(yAxis);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（九）布局"><a href="#（九）布局" class="headerlink" title="（九）布局"></a>（九）布局</h3><p>布局不是要直接绘图，而是为了得到绘图所需的数据</p>
<h4 id="1、布局是什么"><a href="#1、布局是什么" class="headerlink" title="1、布局是什么"></a>1、布局是什么</h4><p>布局，英文是 Layout。<br>从字面看，可以想到有“决定什么元素绘制在哪里”的意思。<br>布局的作用是：将不适合用于绘图的数据转换成了适合用于绘图的数据。</p>
<h4 id="2、布局有哪些"><a href="#2、布局有哪些" class="headerlink" title="2、布局有哪些"></a>2、布局有哪些</h4><p>D3 总共提供了 12 个布局：</p>
<ul>
<li>饼状图（Pie）、</li>
<li>力导向图（Force）、</li>
<li>弦图（Chord）、</li>
<li>树状图（Tree）、</li>
<li>集群图（Cluster）、</li>
<li>捆图（Bundle）、</li>
<li>打包图（Pack）、</li>
<li>直方图（Histogram）、</li>
<li>分区图（Partition）、</li>
<li>堆栈图（Stack）、</li>
<li>矩阵树图（Treemap）、</li>
<li>层级图（Hierarchy）。</li>
</ul>
<h4 id="3、饼状图的制作"><a href="#3、饼状图的制作" class="headerlink" title="3、饼状图的制作"></a>3、饼状图的制作</h4><p>本文制作一个饼状图。在布局的应用中，最简单的就是饼状图，通过本文你将对布局有一个初步了解。</p>
<p>源代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line"> &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;饼状图&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=&quot;d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var width = 400;</span><br><span class="line">var height = 400;</span><br><span class="line">var dataset = [ 110,30 , 10 , 43 , 55 , 13 ];</span><br><span class="line">var svg = d3.select(&quot;body&quot;)</span><br><span class="line">.append(&quot;svg&quot;)</span><br><span class="line">.attr(&quot;width&quot;, width)</span><br><span class="line">.attr(&quot;height&quot;, height);</span><br><span class="line">var pie = d3.layout.pie();</span><br><span class="line">var piedata = pie(dataset);</span><br><span class="line">var outerRadius = 150;    //外半径</span><br><span class="line">var innerRadius = 0;    //内半径，为0则中间没有空白</span><br><span class="line">var arc = d3.svg.arc()    //弧生成器</span><br><span class="line">.innerRadius(innerRadius)    //设置内半径</span><br><span class="line">.outerRadius(outerRadius);    //设置外半径</span><br><span class="line">var color = d3.scale.category10();</span><br><span class="line">var arcs = svg.selectAll(&quot;g&quot;)</span><br><span class="line">.data(piedata)</span><br><span class="line">.enter()</span><br><span class="line">.append(&quot;g&quot;)</span><br><span class="line">.attr(&quot;transform&quot;,&quot;translate(&quot;+ (width/2) +&quot;,&quot;+ (width/2) +&quot;)&quot;);</span><br><span class="line">        arcs.append(&quot;path&quot;)</span><br><span class="line">.attr(&quot;fill&quot;,function(d,i)&#123;</span><br><span class="line">return color(i);</span><br><span class="line">            &#125;)</span><br><span class="line">            .attr(&quot;d&quot;,function(d)&#123;</span><br><span class="line">return arc(d);</span><br><span class="line">            &#125;);</span><br><span class="line">        arcs.append(&quot;text&quot;)</span><br><span class="line">.attr(&quot;transform&quot;,function(d)&#123;</span><br><span class="line">return &quot;translate(&quot; + arc.centroid(d) + &quot;)&quot;;</span><br><span class="line">            &#125;)</span><br><span class="line">.attr(&quot;text-anchor&quot;,&quot;middle&quot;)</span><br><span class="line">.text(function(d)&#123;</span><br><span class="line">return d.data;</span><br><span class="line">            &#125;);</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4、-力导向图的制作"><a href="#4、-力导向图的制作" class="headerlink" title="4、 力导向图的制作"></a>4、 力导向图的制作</h4><p>力导向图中每一个节点都受到力的作用而运动，这是一种非常绚丽的图表 。<br>力导向图（Force-Directed Graph），是绘图的一种算法。在二维或三维空间里配置节点，节点之间用线连接，称为连线。各连线的长度几乎相等，且尽可能不相交。节点和连线都被施加了力的作用，力是根据节点和连线的相对位置计算的。根据力的作用，来计算节点和连线的运动轨迹，并不断降低它们的能量，最终达到一种能量很低的安定状态。</p>
<p>力导向图能表示节点之间的多对多的关系。</p>
<p>源代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;力导向图&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">  &lt;script src=&quot;d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script&gt;</span><br><span class="line"></span><br><span class="line">  var nodes = [ &#123; name: &quot;桂林&quot;    &#125;, &#123; name: &quot;广州&quot; &#125;,</span><br><span class="line">       &#123; name: &quot;厦门&quot;    &#125;, &#123; name: &quot;杭州&quot;   &#125;,</span><br><span class="line">       &#123; name: &quot;上海&quot;   &#125;, &#123; name: &quot;青岛&quot;    &#125;,</span><br><span class="line">       &#123; name: &quot;天津&quot;    &#125; ];</span><br><span class="line"></span><br><span class="line">  var edges = [  &#123; source : 0  , target: 1 &#125; , &#123; source : 0  , target: 2 &#125; ,</span><br><span class="line">        &#123; source : 0  , target: 3 &#125; , &#123; source : 1  , target: 4 &#125; ,</span><br><span class="line">        &#123; source : 1  , target: 5 &#125; , &#123; source : 1  , target: 6 &#125;  ];</span><br><span class="line"></span><br><span class="line">  var width = 400;</span><br><span class="line">  var height = 400;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  var svg = d3.select(&quot;body&quot;)</span><br><span class="line">     .append(&quot;svg&quot;)</span><br><span class="line">     .attr(&quot;width&quot;,width)</span><br><span class="line">     .attr(&quot;height&quot;,height);</span><br><span class="line"></span><br><span class="line">  var force = d3.layout.force()</span><br><span class="line">    .nodes(nodes) //指定节点数组</span><br><span class="line">    .links(edges) //指定连线数组</span><br><span class="line">    .size([width,height]) //指定范围</span><br><span class="line">    .linkDistance(150) //指定连线长度</span><br><span class="line">    .charge(-400); //相互之间的作用力</span><br><span class="line"></span><br><span class="line">  force.start(); //开始作用</span><br><span class="line"></span><br><span class="line">  console.log(nodes);</span><br><span class="line">  console.log(edges);</span><br><span class="line"></span><br><span class="line">  //添加连线</span><br><span class="line">  var svg_edges = svg.selectAll(&quot;line&quot;)</span><br><span class="line">       .data(edges)</span><br><span class="line">       .enter()</span><br><span class="line">       .append(&quot;line&quot;)</span><br><span class="line">       .style(&quot;stroke&quot;,&quot;#ccc&quot;)</span><br><span class="line">       .style(&quot;stroke-width&quot;,1);</span><br><span class="line"></span><br><span class="line">  var color = d3.scale.category20();</span><br><span class="line"></span><br><span class="line">  //添加节点</span><br><span class="line">  var svg_nodes = svg.selectAll(&quot;circle&quot;)</span><br><span class="line">       .data(nodes)</span><br><span class="line">       .enter()</span><br><span class="line">       .append(&quot;circle&quot;)</span><br><span class="line">       .attr(&quot;r&quot;,20)</span><br><span class="line">       .style(&quot;fill&quot;,function(d,i)&#123;</span><br><span class="line">        return color(i);</span><br><span class="line">       &#125;)</span><br><span class="line">       .call(force.drag); //使得节点能够拖动</span><br><span class="line"></span><br><span class="line">  //添加描述节点的文字</span><br><span class="line">  var svg_texts = svg.selectAll(&quot;text&quot;)</span><br><span class="line">       .data(nodes)</span><br><span class="line">       .enter()</span><br><span class="line">       .append(&quot;text&quot;)</span><br><span class="line">       .style(&quot;fill&quot;, &quot;black&quot;)</span><br><span class="line">       .attr(&quot;dx&quot;, 20)</span><br><span class="line">       .attr(&quot;dy&quot;, 8)</span><br><span class="line">       .text(function(d)&#123;</span><br><span class="line">        return d.name;</span><br><span class="line">       &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  force.on(&quot;tick&quot;, function()&#123; //对于每一个时间间隔</span><br><span class="line"></span><br><span class="line">    //更新连线坐标</span><br><span class="line">    svg_edges.attr(&quot;x1&quot;,function(d)&#123; return d.source.x; &#125;)</span><br><span class="line">      .attr(&quot;y1&quot;,function(d)&#123; return d.source.y; &#125;)</span><br><span class="line">      .attr(&quot;x2&quot;,function(d)&#123; return d.target.x; &#125;)</span><br><span class="line">      .attr(&quot;y2&quot;,function(d)&#123; return d.target.y; &#125;);</span><br><span class="line"></span><br><span class="line">    //更新节点坐标</span><br><span class="line">    svg_nodes.attr(&quot;cx&quot;,function(d)&#123; return d.x; &#125;)</span><br><span class="line">      .attr(&quot;cy&quot;,function(d)&#123; return d.y; &#125;);</span><br><span class="line"></span><br><span class="line">    //更新文字坐标</span><br><span class="line">    svg_texts.attr(&quot;x&quot;, function(d)&#123; return d.x; &#125;)</span><br><span class="line">     .attr(&quot;y&quot;, function(d)&#123; return d.y; &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">        &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="5、弦图的制作"><a href="#5、弦图的制作" class="headerlink" title="5、弦图的制作"></a>5、弦图的制作</h4><p>弦图是一种用于描述节点之间联系的图表。</p>
<p>弦图（Chord），主要用于表示两个节点之间的联系。</p>
<p>两点之间的连线，表示谁和谁具有联系</p>
<p>线的粗细表示权重</p>
<p>源代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;弦图&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line"></span><br><span class="line">    .chord path &#123;</span><br><span class="line">          fill-opacity: 0.67;</span><br><span class="line">          stroke: #000;</span><br><span class="line">          stroke-width: 0.5px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;script src=&quot;d3.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script&gt;</span><br><span class="line"></span><br><span class="line">        //1.定义数据</span><br><span class="line">        // 城市名</span><br><span class="line">        var city_name = [ &quot;北京&quot; , &quot;上海&quot; , &quot;广州&quot; , &quot;深圳&quot; , &quot;香港&quot;  ];</span><br><span class="line"></span><br><span class="line">        // 城市人口的来源，如</span><br><span class="line">        //                北京        上海</span><br><span class="line">        //    北京        1000        3045</span><br><span class="line">        //    上海        3214        2000</span><br><span class="line">        // 表示北京市的人口有1000个人来自本地，有3045人是来自上海的移民，总人口为 1000 + 3045</span><br><span class="line">        // 上海市的人口有2000个人来自本地，有3214人是来自北京的移民，总人口为 3214 + 2000</span><br><span class="line">        var population = [</span><br><span class="line">          [ 1000,  3045　 , 4567　, 1234 , 3714 ],</span><br><span class="line">          [ 3214,  2000　 , 2060　, 124  , 3234 ],</span><br><span class="line">          [ 8761,  6545　 , 3000　, 8045 , 647  ],</span><br><span class="line">          [ 3211,  1067  , 3214 , 4000  , 1006 ],</span><br><span class="line">          [ 2146,  1034　 , 6745 , 4764  , 5000 ]</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        //2.转换数据，并输出转换后的数据</span><br><span class="line">        var chord_layout = d3.layout.chord()</span><br><span class="line">                             .padding(0.03)        //节点之间的间隔</span><br><span class="line">                             .sortSubgroups(d3.descending)    //排序</span><br><span class="line">                             .matrix(population);    //输入矩阵</span><br><span class="line"></span><br><span class="line">        var groups = chord_layout.groups();</span><br><span class="line">        var chords = chord_layout.chords();</span><br><span class="line"></span><br><span class="line">        console.log( groups );</span><br><span class="line">        console.log( chords );</span><br><span class="line"></span><br><span class="line">        //3.SVG，弦图，颜色函数的定义</span><br><span class="line">        var width  = 600;</span><br><span class="line">        var height = 600;</span><br><span class="line">        var innerRadius = width/2 * 0.7;</span><br><span class="line">        var outerRadius = innerRadius * 1.1;</span><br><span class="line"></span><br><span class="line">        var color20 = d3.scale.category20();</span><br><span class="line"></span><br><span class="line">        var svg = d3.select(&quot;body&quot;).append(&quot;svg&quot;)</span><br><span class="line">            .attr(&quot;width&quot;, width)</span><br><span class="line">            .attr(&quot;height&quot;, height)</span><br><span class="line">            .append(&quot;g&quot;)</span><br><span class="line">            .attr(&quot;transform&quot;, &quot;translate(&quot; + width/2 + &quot;,&quot; + height/2 + &quot;)&quot;);</span><br><span class="line"></span><br><span class="line">        //4.绘制节点（即分组，有多少个城市画多少个弧形），及绘制城市名称</span><br><span class="line">        var outer_arc =  d3.svg.arc()</span><br><span class="line">                     .innerRadius(innerRadius)</span><br><span class="line">                     .outerRadius(outerRadius);</span><br><span class="line"></span><br><span class="line">        var g_outer = svg.append(&quot;g&quot;);</span><br><span class="line"></span><br><span class="line">        g_outer.selectAll(&quot;path&quot;)</span><br><span class="line">                .data(groups)</span><br><span class="line">                .enter()</span><br><span class="line">                .append(&quot;path&quot;)</span><br><span class="line">                .style(&quot;fill&quot;, function(d) &#123; return color20(d.index); &#125;)</span><br><span class="line">                .style(&quot;stroke&quot;, function(d) &#123; return color20(d.index); &#125;)</span><br><span class="line">                .attr(&quot;d&quot;, outer_arc );</span><br><span class="line"></span><br><span class="line">        g_outer.selectAll(&quot;text&quot;)</span><br><span class="line">                .data(groups)</span><br><span class="line">                .enter()</span><br><span class="line">                .append(&quot;text&quot;)</span><br><span class="line">                .each( function(d,i) &#123;</span><br><span class="line">                    d.angle = (d.startAngle + d.endAngle) / 2;</span><br><span class="line">                    d.name = city_name[i];</span><br><span class="line">                &#125;)</span><br><span class="line">                .attr(&quot;dy&quot;,&quot;.35em&quot;)</span><br><span class="line">                .attr(&quot;transform&quot;, function(d)&#123;</span><br><span class="line">                    return &quot;rotate(&quot; + ( d.angle * 180 / Math.PI ) + &quot;)&quot; +</span><br><span class="line">                           &quot;translate(0,&quot;+ -1.0*(outerRadius+10) +&quot;)&quot; +</span><br><span class="line">                            ( ( d.angle &gt; Math.PI*3/4 &amp;&amp; d.angle &lt; Math.PI*5/4 ) ? &quot;rotate(180)&quot; : &quot;&quot;);</span><br><span class="line">                &#125;)</span><br><span class="line">                .text(function(d)&#123;</span><br><span class="line">                    return d.name;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //5.绘制内部弦（即所有城市人口的来源，即有5*5=25条弧）</span><br><span class="line">        var inner_chord =  d3.svg.chord()</span><br><span class="line">                        .radius(innerRadius);</span><br><span class="line"></span><br><span class="line">        svg.append(&quot;g&quot;)</span><br><span class="line">            .attr(&quot;class&quot;, &quot;chord&quot;)</span><br><span class="line">            .selectAll(&quot;path&quot;)</span><br><span class="line">            .data(chords)</span><br><span class="line">            .enter()</span><br><span class="line">            .append(&quot;path&quot;)</span><br><span class="line">            .attr(&quot;d&quot;, inner_chord )</span><br><span class="line">            .style(&quot;fill&quot;, function(d) &#123; return color20(d.source.index); &#125;)</span><br><span class="line">            .style(&quot;opacity&quot;, 1)</span><br><span class="line">            .on(&quot;mouseover&quot;,function(d,i)&#123;</span><br><span class="line">                d3.select(this)</span><br><span class="line">                    .style(&quot;fill&quot;,&quot;yellow&quot;);</span><br><span class="line">            &#125;)</span><br><span class="line">            .on(&quot;mouseout&quot;,function(d,i) &#123;</span><br><span class="line">                d3.select(this)</span><br><span class="line">                    .transition()</span><br><span class="line">                    .duration(1000)</span><br><span class="line">                    .style(&quot;fill&quot;,color20(d.source.index));</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="6、集群图的制作"><a href="#6、集群图的制作" class="headerlink" title="6、集群图的制作"></a>6、集群图的制作</h4><p>集群图，是一种用于表示包含与被包含关系的图表。</p>
<p>源代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;集群图&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">.node circle &#123;</span><br><span class="line">  fill: #fff;</span><br><span class="line">  stroke: steelblue;</span><br><span class="line">  stroke-width: 1.5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.node &#123;</span><br><span class="line">  font: 12px sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.link &#123;</span><br><span class="line">  fill: none;</span><br><span class="line">  stroke: #ccc;</span><br><span class="line">  stroke-width: 1.5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=&quot;d3.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">var width = 500,</span><br><span class="line">    height = 500;</span><br><span class="line"></span><br><span class="line">var cluster = d3.layout.cluster()</span><br><span class="line">    .size([width, height - 200]);</span><br><span class="line"></span><br><span class="line">var diagonal = d3.svg.diagonal()</span><br><span class="line">    .projection(function(d) &#123; return [d.y, d.x]; &#125;);</span><br><span class="line"></span><br><span class="line">var svg = d3.select(&quot;body&quot;).append(&quot;svg&quot;)</span><br><span class="line">    .attr(&quot;width&quot;, width)</span><br><span class="line">    .attr(&quot;height&quot;, height)</span><br><span class="line">  .append(&quot;g&quot;)</span><br><span class="line">    .attr(&quot;transform&quot;, &quot;translate(40,0)&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d3.json(&quot;city.json&quot;, function(error, root) &#123;</span><br><span class="line"></span><br><span class="line">  var nodes = cluster.nodes(root);</span><br><span class="line">  var links = cluster.links(nodes);</span><br><span class="line"></span><br><span class="line">  console.log(nodes);</span><br><span class="line">  console.log(links);</span><br><span class="line"></span><br><span class="line">  var link = svg.selectAll(&quot;.link&quot;)</span><br><span class="line">      .data(links)</span><br><span class="line">      .enter()</span><br><span class="line">      .append(&quot;path&quot;)</span><br><span class="line">      .attr(&quot;class&quot;, &quot;link&quot;)</span><br><span class="line">      .attr(&quot;d&quot;, diagonal);</span><br><span class="line"></span><br><span class="line">  var node = svg.selectAll(&quot;.node&quot;)</span><br><span class="line">      .data(nodes)</span><br><span class="line">      .enter()</span><br><span class="line">      .append(&quot;g&quot;)</span><br><span class="line">      .attr(&quot;class&quot;, &quot;node&quot;)</span><br><span class="line">      .attr(&quot;transform&quot;, function(d) &#123; return &quot;translate(&quot; + d.y + &quot;,&quot; + d.x + &quot;)&quot;; &#125;)</span><br><span class="line"></span><br><span class="line">  node.append(&quot;circle&quot;)</span><br><span class="line">      .attr(&quot;r&quot;, 4.5);</span><br><span class="line"></span><br><span class="line">  node.append(&quot;text&quot;)</span><br><span class="line">      .attr(&quot;dx&quot;, function(d) &#123; return d.children ? -8 : 8; &#125;)</span><br><span class="line">      .attr(&quot;dy&quot;, 3)</span><br><span class="line">      .style(&quot;text-anchor&quot;, function(d) &#123; return d.children ? &quot;end&quot; : &quot;start&quot;; &#125;)</span><br><span class="line">      .text(function(d) &#123; return d.name; &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="7、树状图的制作"><a href="#7、树状图的制作" class="headerlink" title="7、树状图的制作"></a>7、树状图的制作</h4><p>树状图（ Tree ）用于表示层级、上下级、包含与被包含关系。</p>
<p>源代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;树状图&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">.node circle &#123;</span><br><span class="line">  fill: #fff;</span><br><span class="line">  stroke: steelblue;</span><br><span class="line">  stroke-width: 1.5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.node &#123;</span><br><span class="line">  font: 12px sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.link &#123;</span><br><span class="line">  fill: none;</span><br><span class="line">  stroke: #ccc;</span><br><span class="line">  stroke-width: 1.5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=&quot;d3.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">var width = 500,</span><br><span class="line">height = 500;</span><br><span class="line"></span><br><span class="line">var tree = d3.layout.tree()</span><br><span class="line">    .size([width, height-200])</span><br><span class="line">    .separation(function(a, b) &#123; return (a.parent == b.parent ? 1 : 2); &#125;);</span><br><span class="line"></span><br><span class="line">var diagonal = d3.svg.diagonal()</span><br><span class="line">    .projection(function(d) &#123; return [d.y, d.x]; &#125;);</span><br><span class="line"></span><br><span class="line">var svg = d3.select(&quot;body&quot;).append(&quot;svg&quot;)</span><br><span class="line">    .attr(&quot;width&quot;, width)</span><br><span class="line">    .attr(&quot;height&quot;, height)</span><br><span class="line">    .append(&quot;g&quot;)</span><br><span class="line">    .attr(&quot;transform&quot;, &quot;translate(40,0)&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d3.json(&quot;city_tree.json&quot;, function(error, root) &#123;</span><br><span class="line"></span><br><span class="line">    var nodes = tree.nodes(root);</span><br><span class="line">    var links = tree.links(nodes);</span><br><span class="line"></span><br><span class="line">    console.log(nodes);</span><br><span class="line">    console.log(links);</span><br><span class="line"></span><br><span class="line">    var link = svg.selectAll(&quot;.link&quot;)</span><br><span class="line">      .data(links)</span><br><span class="line">      .enter()</span><br><span class="line">      .append(&quot;path&quot;)</span><br><span class="line">      .attr(&quot;class&quot;, &quot;link&quot;)</span><br><span class="line">      .attr(&quot;d&quot;, diagonal);</span><br><span class="line"></span><br><span class="line">    var node = svg.selectAll(&quot;.node&quot;)</span><br><span class="line">      .data(nodes)</span><br><span class="line">      .enter()</span><br><span class="line">      .append(&quot;g&quot;)</span><br><span class="line">      .attr(&quot;class&quot;, &quot;node&quot;)</span><br><span class="line">      .attr(&quot;transform&quot;, function(d) &#123; return &quot;translate(&quot; + d.y + &quot;,&quot; + d.x + &quot;)&quot;; &#125;)</span><br><span class="line"></span><br><span class="line">    node.append(&quot;circle&quot;)</span><br><span class="line">      .attr(&quot;r&quot;, 4.5);</span><br><span class="line"></span><br><span class="line">    node.append(&quot;text&quot;)</span><br><span class="line">      .attr(&quot;dx&quot;, function(d) &#123; return d.children ? -8 : 8; &#125;)</span><br><span class="line">      .attr(&quot;dy&quot;, 3)</span><br><span class="line">      .style(&quot;text-anchor&quot;, function(d) &#123; return d.children ? &quot;end&quot; : &quot;start&quot;; &#125;)</span><br><span class="line">      .text(function(d) &#123; return d.name; &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="8、打包图的制作"><a href="#8、打包图的制作" class="headerlink" title="8、打包图的制作"></a>8、打包图的制作</h4><p>打包图（ Pack ），用于表示包含与被包含的关系，也可表示各对象的权重，通常用一圆套一圆来表示前者，用圆的大小来表示后者。</p>
<p>源代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;Pack&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=&quot;d3.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var width  = 500;</span><br><span class="line">    var height = 500;</span><br><span class="line"></span><br><span class="line">    var pack = d3.layout.pack()</span><br><span class="line">                    .size([ width, height ])</span><br><span class="line">                    .radius(20);</span><br><span class="line"></span><br><span class="line">    var svg = d3.select(&quot;body&quot;).append(&quot;svg&quot;)</span><br><span class="line">        .attr(&quot;width&quot;, width)</span><br><span class="line">        .attr(&quot;height&quot;, height)</span><br><span class="line">        .append(&quot;g&quot;)</span><br><span class="line">        .attr(&quot;transform&quot;, &quot;translate(0,0)&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    d3.json(&quot;city2.json&quot;, function(error, root) &#123;</span><br><span class="line"></span><br><span class="line">        var nodes = pack.nodes(root);</span><br><span class="line">        var links = pack.links(nodes);</span><br><span class="line"></span><br><span class="line">        console.log(nodes);</span><br><span class="line">        console.log(links);</span><br><span class="line"></span><br><span class="line">        svg.selectAll(&quot;circle&quot;)</span><br><span class="line">            .data(nodes)</span><br><span class="line">            .enter()</span><br><span class="line">            .append(&quot;circle&quot;)</span><br><span class="line">            .attr(&quot;fill&quot;,&quot;rgb(31, 119, 180)&quot;)</span><br><span class="line">            .attr(&quot;fill-opacity&quot;,&quot;0.4&quot;)</span><br><span class="line">            .attr(&quot;cx&quot;,function(d)&#123;</span><br><span class="line">                return d.x;</span><br><span class="line">            &#125;)</span><br><span class="line">            .attr(&quot;cy&quot;,function(d)&#123;</span><br><span class="line">                return d.y;</span><br><span class="line">            &#125;)</span><br><span class="line">            .attr(&quot;r&quot;,function(d)&#123;</span><br><span class="line">                return d.r;</span><br><span class="line">            &#125;)</span><br><span class="line">            .on(&quot;mouseover&quot;,function(d,i)&#123;</span><br><span class="line">                d3.select(this)</span><br><span class="line">                    .attr(&quot;fill&quot;,&quot;yellow&quot;);</span><br><span class="line">            &#125;)</span><br><span class="line">            .on(&quot;mouseout&quot;,function(d,i)&#123;</span><br><span class="line">                d3.select(this)</span><br><span class="line">                    .attr(&quot;fill&quot;,&quot;rgb(31, 119, 180)&quot;);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        svg.selectAll(&quot;text&quot;)</span><br><span class="line">                      .data(nodes)</span><br><span class="line">                      .enter()</span><br><span class="line">                      .append(&quot;text&quot;)</span><br><span class="line">                      .attr(&quot;font-size&quot;,&quot;10px&quot;)</span><br><span class="line">                      .attr(&quot;fill&quot;,&quot;white&quot;)</span><br><span class="line">                      .attr(&quot;fill-opacity&quot;,function(d)&#123;</span><br><span class="line">                          if(d.depth == 2)</span><br><span class="line">                              return &quot;0.9&quot;;</span><br><span class="line">                          else</span><br><span class="line">                              return &quot;0&quot;;</span><br><span class="line">                      &#125;)</span><br><span class="line">                      .attr(&quot;x&quot;,function(d)&#123; return d.x; &#125;)</span><br><span class="line">                      .attr(&quot;y&quot;,function(d)&#123; return d.y; &#125;)</span><br><span class="line">                      .attr(&quot;dx&quot;,-12)</span><br><span class="line">                      .attr(&quot;dy&quot;,1)</span><br><span class="line">                      .text(function(d)&#123; return d.name; &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="9、地图的制作"><a href="#9、地图的制作" class="headerlink" title="9、地图的制作"></a>9、地图的制作</h4><p>本章以中国地图为例，介绍地图的制作方法。</p>
<p>在数据可视化中，地图是很重要的一部分。很多情况会与地图有关联，如中国各省的人口多少，GDP 多少等，都可以和地图联系在一起。</p>
<p>源代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;中国地图&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=&quot;d3.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var width  = 1000;</span><br><span class="line">    var height = 1000;</span><br><span class="line"></span><br><span class="line">    var svg = d3.select(&quot;body&quot;).append(&quot;svg&quot;)</span><br><span class="line">        .attr(&quot;width&quot;, width)</span><br><span class="line">        .attr(&quot;height&quot;, height)</span><br><span class="line">        .append(&quot;g&quot;)</span><br><span class="line">        .attr(&quot;transform&quot;, &quot;translate(0,0)&quot;);</span><br><span class="line"></span><br><span class="line">    var projection = d3.geo.mercator()</span><br><span class="line">                        .center([107, 31])</span><br><span class="line">                        .scale(850)</span><br><span class="line">                        .translate([width/2, height/2]);</span><br><span class="line"></span><br><span class="line">    var path = d3.geo.path()</span><br><span class="line">                    .projection(projection);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    var color = d3.scale.category20();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    d3.json(&quot;china.geojson&quot;, function(error, root) &#123;</span><br><span class="line"></span><br><span class="line">        if (error)</span><br><span class="line">            return console.error(error);</span><br><span class="line">        console.log(root.features);</span><br><span class="line"></span><br><span class="line">        svg.selectAll(&quot;path&quot;)</span><br><span class="line">            .data( root.features )</span><br><span class="line">            .enter()</span><br><span class="line">            .append(&quot;path&quot;)</span><br><span class="line">            .attr(&quot;stroke&quot;,&quot;#000&quot;)</span><br><span class="line">            .attr(&quot;stroke-width&quot;,1)</span><br><span class="line">            .attr(&quot;fill&quot;, function(d,i)&#123;</span><br><span class="line">                return color(i);</span><br><span class="line">            &#125;)</span><br><span class="line">            .attr(&quot;d&quot;, path )</span><br><span class="line">            .on(&quot;mouseover&quot;,function(d,i)&#123;</span><br><span class="line">                d3.select(this)</span><br><span class="line">                    .attr(&quot;fill&quot;,&quot;yellow&quot;);</span><br><span class="line">            &#125;)</span><br><span class="line">            .on(&quot;mouseout&quot;,function(d,i)&#123;</span><br><span class="line">                d3.select(this)</span><br><span class="line">                    .attr(&quot;fill&quot;,color(i));</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/pm2%E5%B8%B8%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/pm2%E5%B8%B8%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">pm2常用的命令用法介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 14:56:07 / 修改时间：14:58:53" itemprop="dateCreated datePublished" datetime="2022-12-16T14:56:07+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E5%90%88%E9%9B%86/" itemprop="url" rel="index"><span itemprop="name">常用指令合集</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>pm2 是一个带有负载均衡功能的 Node 应用的进程管理器.当你要把你的独立代码利用全部的服务器上的所有 CPU,并保证进程永远都活着,0 秒的重载, PM2 是完美的,下面我们来看 pm2 常用的命令用法介绍吧。</p>
<p>PM2 （github 上的源码）是开源的基于 Nodejs 的进程管理器，包括守护进程，监控，日志的一整套完整的功能，基本是 Nodejs 应用程序不二的守护进程选择，事实上它并不仅仅可以启动 Nodejs 的程序，只要是一般的脚本的程序它同样可以胜任。</p>
<p>以下是 pm2 常用的命令行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">$ pm2 start app.js              # 启动app.js应用程序</span><br><span class="line"></span><br><span class="line">$ pm2 start app.js -i 4         # cluster mode 模式启动4个app.js的应用实例     # 4个应用程序会自动进行负载均衡</span><br><span class="line"></span><br><span class="line">$ pm2 start app.js --name=&quot;api&quot; # 启动应用程序并命名为 &quot;api&quot;</span><br><span class="line"></span><br><span class="line">$ pm2 start app.js --watch      # 当文件变化时自动重启应用</span><br><span class="line"></span><br><span class="line">$ pm2 start script.sh           # 启动 bash 脚本</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ pm2 list                      # 列表 PM2 启动的所有的应用程序</span><br><span class="line"></span><br><span class="line">$ pm2 monit                     # 显示每个应用程序的CPU和内存占用情况</span><br><span class="line"></span><br><span class="line">$ pm2 show [app-name]           # 显示应用程序的所有信息</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ pm2 logs                      # 显示所有应用程序的日志</span><br><span class="line"></span><br><span class="line">$ pm2 logs [app-name]           # 显示指定应用程序的日志</span><br><span class="line"></span><br><span class="line">$ pm2 flush</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ pm2 stop all                  # 停止所有的应用程序</span><br><span class="line"></span><br><span class="line">$ pm2 stop 0                    # 停止 id为 0的指定应用程序</span><br><span class="line"></span><br><span class="line">$ pm2 restart all               # 重启所有应用</span><br><span class="line"></span><br><span class="line">$ pm2 reload all                # 重启 cluster mode下的所有应用</span><br><span class="line"></span><br><span class="line">$ pm2 gracefulReload all        # Graceful reload all apps in cluster mode</span><br><span class="line"></span><br><span class="line">$ pm2 delete all                # 关闭并删除所有应用</span><br><span class="line"></span><br><span class="line">$ pm2 delete 0                  # 删除指定应用 id 0</span><br><span class="line"></span><br><span class="line">$ pm2 scale api 10              # 把名字叫api的应用扩展到10个实例</span><br><span class="line"></span><br><span class="line">$ pm2 reset [app-name]          # 重置重启数量</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ pm2 startup                   # 创建开机自启动命令</span><br><span class="line"></span><br><span class="line">$ pm2 save                      # 保存当前应用列表</span><br><span class="line"></span><br><span class="line">$ pm2 resurrect                 # 重新加载保存的应用列表</span><br><span class="line"></span><br><span class="line">$ pm2 update                    # Save processes, kill PM2 and restore processes</span><br><span class="line"></span><br><span class="line">$ pm2 generate                  # Generate a sample json configuration file</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ pm2 deploy app.json prod setup    # Setup &quot;prod&quot; remote server</span><br><span class="line"></span><br><span class="line">$ pm2 deploy app.json prod          # Update &quot;prod&quot; remote server</span><br><span class="line"></span><br><span class="line">$ pm2 deploy app.json prod revert 2 # Revert &quot;prod&quot; remote server by 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ pm2 module:generate [name]    # Generate sample module with name [name]</span><br><span class="line"></span><br><span class="line">$ pm2 install pm2-logrotate     # Install module (here a log rotation system)</span><br><span class="line"></span><br><span class="line">$ pm2 uninstall pm2-logrotate   # Uninstall module</span><br><span class="line"></span><br><span class="line">$ pm2 publish                   # Increment version, git push and npm publish</span><br></pre></td></tr></table></figure>

<h2 id="一-安装"><a href="#一-安装" class="headerlink" title="一.安装"></a>一.安装</h2><p>全局安装，简直不能更简单。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">​npm install -g pm2</span><br></pre></td></tr></table></figure>

<p>pm2 安装好后，会自动创建下面目录。看文件名基本就知道干嘛的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$HOME/.pm2 will contain all PM2 related files</span><br><span class="line">$HOME/.pm2/logs will contain all applications logs</span><br><span class="line">$HOME/.pm2/pids will contain all applications pids</span><br><span class="line">$HOME/.pm2/pm2.log PM2 logs</span><br><span class="line">$HOME/.pm2/pm2.pid PM2 pid</span><br><span class="line">$HOME/.pm2/rpc.sock Socket file for remote commands</span><br><span class="line">$HOME/.pm2/pub.sock Socket file for publishable events</span><br><span class="line">$HOME/.pm2/conf.js PM2 Configuration</span><br></pre></td></tr></table></figure>

<h2 id="二-入门教程"><a href="#二-入门教程" class="headerlink" title="二.入门教程"></a>二.入门教程</h2><p>挑我们最爱的 express 应用来举例。一般我们都是通过 npm start 启动应用，其实就是调用 node .&#x2F;bin&#x2F;www。那么，换成 pm2 就是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start ./bin/www –watch</span><br></pre></td></tr></table></figure>

<p>注意，这里用了–watch 参数，意味着当你的 express 应用代码发生变化时，pm2 会帮你重启服务，多贴心。</p>
<p>参数说明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">--watch：监听应用目录的变化，一旦发生变化，自动重启。如果要精确监听、不监听的目录，最好通过配置文件。</span><br><span class="line">-i --instances：启用多少个实例，可用于负载均衡。如果-i 0或者-i max，则根据当前机器核数确定实例数目。</span><br><span class="line">--ignore-watch：排除监听的目录/文件，可以是特定的文件名，也可以是正则。比如--ignore-watch=&quot;test node_modules &quot;some scripts&quot;&quot;</span><br><span class="line">-n --name：应用的名称。查看应用信息的时候可以用到。</span><br><span class="line">-o --output &lt;path&gt;：标准输出日志文件的路径。</span><br><span class="line">-e --error &lt;path&gt;：错误输出日志文件的路径。</span><br><span class="line">--interpreter &lt;interpreter&gt;：the interpreter pm2 should use for executing app (bash, python...)。比如你用的coffee script来编写应用。</span><br></pre></td></tr></table></figure>

<h2 id="三-重启"><a href="#三-重启" class="headerlink" title="三.重启"></a>三.重启</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 restart app.js</span><br></pre></td></tr></table></figure>

<h2 id="四-停止"><a href="#四-停止" class="headerlink" title="四.停止"></a>四.停止</h2><p>停止特定的应用。可以先通过 pm2 list 获取应用的名字（–name 指定的）或者进程 id。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 stop app_name|app_id</span><br></pre></td></tr></table></figure>

<p>如果要停止所有应用，可以</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 stop all</span><br></pre></td></tr></table></figure>

<h2 id="五-查看进程状态"><a href="#五-查看进程状态" class="headerlink" title="五.查看进程状态"></a>五.查看进程状态</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 list</span><br></pre></td></tr></table></figure>

<h2 id="六-配置文件"><a href="#六-配置文件" class="headerlink" title="六.配置文件"></a>六.配置文件</h2><p>配置文件里的设置项，跟命令行参数基本是一一对应的。可以选择 yaml 或者 json 文件，就看个人喜好了。json 格式的配置文件，pm2 当作普通的 js 文件来处理，所以可以在里面添加注释或者编写代码，这对于动态调整配置很有好处。<br>　　如果启动的时候指定了配置文件，那么命令行参数会被忽略。（个别参数除外，比如–env）</p>
<p>举个简单例子，完整配置说明请参考官方文档。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  “name” : “fis-receiver”, // 应用名称</span><br><span class="line">  “script” : “./bin/www”, // 实际启动脚本</span><br><span class="line">  “cwd” : “./”, // 当前工作路径</span><br><span class="line">  “watch”: [ // 监控变化的目录，一旦变化，自动重启</span><br><span class="line">    “bin”,</span><br><span class="line">    “routers”</span><br><span class="line">  ],</span><br><span class="line">  “ignore_watch” : [</span><br><span class="line">    // 从监控目录中排除</span><br><span class="line">    “node_modules”,</span><br><span class="line">    “logs”,</span><br><span class="line">    “public”</span><br><span class="line">  ],</span><br><span class="line">  “watch_options”: &#123;</span><br><span class="line">    “followSymlinks”: false</span><br><span class="line">  &#125;,</span><br><span class="line">  “error_file” : “./logs/app-err.log”, // 错误日志路径</span><br><span class="line">  “out_file” : “./logs/app-out.log”, // 普通日志路径</span><br><span class="line">  “env”: &#123;</span><br><span class="line">    “NODE_ENV”: “production” // 环境参数，当前指定为生产环境</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="七-pm2-start-app-js-–watch"><a href="#七-pm2-start-app-js-–watch" class="headerlink" title="七.pm2 start app.js –watch"></a>七.pm2 start app.js –watch</h2><p>这里是监控整个项目的文件，如果只想监听指定文件和目录，建议通过配置文件的 watch、ignore_watch 字段来设置。</p>
<h2 id="八-环境切换"><a href="#八-环境切换" class="headerlink" title="八.环境切换"></a>八.环境切换</h2><p>在实际项目开发中，我们的应用经常需要在多个环境下部署，比如开发环境、测试环境、生产环境等。在不同环境下，有时候配置项会有差异，比如链接的数据库地址不同等。</p>
<p>对于这种场景，pm2 也是可以很好支持的。首先通过在配置文件中通过 env_xx 来声明不同环境的配置，然后在启动应用时，通过–env 参数指定运行的环境。</p>
<p>首先，在配置文件中，通过 env 选项声明多个环境配置如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">“env”: &#123; “NODE_ENV”: “production”, “REMOTE_ADDR”: “http://www.example.com/” &#125;,</span><br><span class="line">​”env_dev”: &#123; “NODE_ENV”: “development”, “REMOTE_ADDR”: “http://wdev.example.com/” &#125;,</span><br><span class="line">​”env_test”: &#123; “NODE_ENV”: “test”, “REMOTE_ADDR”: “http://wtest.example.com/” &#125;</span><br></pre></td></tr></table></figure>

<p>env 为默认的环境配置（生产环境），env_dev、env_test 则分别是开发、测试环境。可以看到，不同环境下的 NODE_ENV、REMOTE_ADDR 字段的值是不同的。</p>
<p>在应用中，可以通过 process.env.REMOTE_ADDR 等来读取配置中声明的变量。</p>
<p>假设通过下面启动脚本（开发环境），那么，此时 process.env.REMOTE_ADDR 的值就是相应的 <a target="_blank" rel="noopener" href="http://wdev.example.com/%E3%80%82">http://wdev.example.com/。</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start app.js –env dev</span><br></pre></td></tr></table></figure>

<h2 id="九-负载均衡"><a href="#九-负载均衡" class="headerlink" title="九.负载均衡"></a>九.负载均衡</h2><p>命令如下，表示开启三个进程。如果-i 0，则会根据机器当前核数自动开启尽可能多的进程。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pm2 start app.js -i 3 # 开启三个进程</span><br><span class="line">​pm2 start app.js -i max # 根据机器CPU核数，开启对应数目的进程</span><br></pre></td></tr></table></figure>

<h2 id="十-日志查看"><a href="#十-日志查看" class="headerlink" title="十.日志查看"></a>十.日志查看</h2><p>除了可以打开日志文件查看日志外，还可以通过 pm2 logs 来查看实时日志。这点对于线上问题排查非常重要。</p>
<p>比如某个 node 服务突然异常重启了，那么可以通过 pm2 提供的日志工具来查看实时日志，看是不是脚本出错之类导致的异常重启。</p>
<h2 id="十一-开机自动启动"><a href="#十一-开机自动启动" class="headerlink" title="十一.开机自动启动"></a>十一.开机自动启动</h2><p>可以通过 pm2 startup 来实现开机自启动。细节可参考。大致流程如下：</p>
<ol>
<li>通过 pm2 save 保存当前进程状态。</li>
<li>通过 pm2 startup [platform]生成开机自启动的命令。（记得查看控制台输出）</li>
<li>将步骤 2 生成的命令，粘贴到控制台进行，搞定。</li>
</ol>
<p>假设是在 centos 下，那么运行如下命令，搞定。强烈建议运行完成之后，重启机器，看是否设置成功。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ94wb7tioqZ option_analysis]# pm2 save</span><br><span class="line">​[root@iZ94wb7tioqZ option_analysis]# pm2 startup centos</span><br><span class="line">​[PM2] Generating system init script in /etc/init.d/pm2-init.sh</span><br><span class="line">[PM2] Making script booting at startup…</span><br><span class="line">[PM2] /var/lock/subsys/pm2-init.sh lockfile has been added</span><br><span class="line">[PM2] -centos- Using the command:</span><br><span class="line">su -c “chmod +x /etc/init.d/pm2-init.sh; chkconfig –add pm2-init.sh”</span><br><span class="line">​[PM2] Done.</span><br><span class="line">[root@iZ94wb7tioqZ option_analysis]# pm2 save</span><br><span class="line">​[PM2] Dumping processes</span><br></pre></td></tr></table></figure>

<h2 id="十二-监控-monitor"><a href="#十二-监控-monitor" class="headerlink" title="十二.监控(monitor)"></a>十二.监控(monitor)</h2><p>运行如下命令，查看当前通过 pm2 运行的进程的状态。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 monit</span><br></pre></td></tr></table></figure>

<p>看到类似输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@oneday-dev0 server]# pm2 monit</span><br><span class="line">​ PM2 monitoring (To go further check out https://app.keymetrics.io) [ ] 0 %</span><br><span class="line">​PM2 monitoring (To go further check o[||||||||||||||| ] 196.285 MB</span><br><span class="line">​● fis-receiver [ ] 0 % [1] [fork_mode] [||||| ] 65.773 MB</span><br><span class="line">​● www [ ] 0 % [2] [fork_mode] [||||| ] 74.426 MB</span><br><span class="line">​● oc-server [ ] 0 % [3] [fork_mode] [|||| ] 57.801 MB</span><br><span class="line">​● pm2-http-interface [ ] stopped</span><br><span class="line">[4] [fork_mode] [ ] 0 B</span><br><span class="line">​● start-production</span><br><span class="line">[5] [fork_mode]</span><br></pre></td></tr></table></figure>

<h2 id="十三-内存使用超过上限自动重启"><a href="#十三-内存使用超过上限自动重启" class="headerlink" title="十三.内存使用超过上限自动重启"></a>十三.内存使用超过上限自动重启</h2><p>如果想要你的应用，在超过使用内存上限后自动重启，那么可以加上–max-memory-restart 参数。（有对应的配置项）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start big-array.js –max-memory-restart 20M</span><br></pre></td></tr></table></figure>

<h2 id="十四-pm2-nginx"><a href="#十四-pm2-nginx" class="headerlink" title="十四.pm2 + nginx"></a>十四.pm2 + nginx</h2><p>无非就是在 nginx 上做个反向代理配置，直接贴配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">upstream my_nodejs_upstream &#123;</span><br><span class="line">  server 127.0.0.1:3001;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name my_nodejs_server;</span><br><span class="line">  root /home/www/project_root;</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_set_header X-Forwarded-For proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header Hostproxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header Hosthttp_host;</span><br><span class="line">    proxy_set_header X-NginX-Proxy true;</span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">    proxy_set_header Connection “upgrade”;</span><br><span class="line">    proxy_max_temp_file_size 0;</span><br><span class="line">    proxy_pass http://my_nodejs_upstream/;</span><br><span class="line">    proxy_redirect off;</span><br><span class="line">    proxy_read_timeout 240s;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>官方文档：<a target="_blank" rel="noopener" href="http://pm2.keymetrics.io/docs/tutorials/pm2-nginx-production-setup">http://pm2.keymetrics.io/docs/tutorials/pm2-nginx-production-setup</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/Docker-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portal.jpg">
      <meta itemprop="name" content="Bruce Chen">
      <meta itemprop="description" content="It's better to burn out than to fade away.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce Chen's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/16/Docker-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Docker 常用命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-12-16 14:56:01 / 修改时间：14:56:36" itemprop="dateCreated datePublished" datetime="2022-12-16T14:56:01+08:00">2022-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E5%90%88%E9%9B%86/" itemprop="url" rel="index"><span itemprop="name">常用指令合集</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、docker-的命令的解释"><a href="#一、docker-的命令的解释" class="headerlink" title="一、docker 的命令的解释"></a>一、docker 的命令的解释</h2><h3 id="1、命令解释"><a href="#1、命令解释" class="headerlink" title="1、命令解释"></a>1、命令解释</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 nginx</span><br><span class="line"></span><br><span class="line">run （创建并运行一个容器）</span><br><span class="line">-d 放在后台</span><br><span class="line">-p 端口映射</span><br><span class="line">nginx docker镜像的名字</span><br></pre></td></tr></table></figure>

<h3 id="2、配置-docker-镜像加速"><a href="#2、配置-docker-镜像加速" class="headerlink" title="2、配置 docker 镜像加速"></a>2、配置 docker 镜像加速</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/docker/daemon.json</span><br><span class="line">&#123;</span><br><span class="line">&quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<h3 id="3、docker-容器是一种软件的打包技术，接下来我们体验一下"><a href="#3、docker-容器是一种软件的打包技术，接下来我们体验一下" class="headerlink" title="3、docker 容器是一种软件的打包技术，接下来我们体验一下"></a>3、docker 容器是一种软件的打包技术，接下来我们体验一下</h3><p>1、传统编译安装 nginx：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">官网下载Nginx源码包wget</span><br><span class="line">tar解压源码包</span><br><span class="line">创建Nginx用户</span><br><span class="line">安装依赖包</span><br><span class="line">编译安装三部曲configure，make，make install</span><br><span class="line">修改nginx配置文件</span><br><span class="line">启动nginx</span><br></pre></td></tr></table></figure>

<p>2、docker 容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 nginx</span><br></pre></td></tr></table></figure>

<h2 id="二、镜像常用命令"><a href="#二、镜像常用命令" class="headerlink" title="二、镜像常用命令"></a>二、镜像常用命令</h2><h3 id="1、搜索镜像："><a href="#1、搜索镜像：" class="headerlink" title="1、搜索镜像："></a>1、搜索镜像：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search</span><br></pre></td></tr></table></figure>

<p>选镜像的建议：</p>
<ol>
<li>优先考虑官方</li>
<li>stars 数量多</li>
</ol>
<h3 id="2、获取镜像"><a href="#2、获取镜像" class="headerlink" title="2、获取镜像:"></a>2、获取镜像:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull（push）</span><br></pre></td></tr></table></figure>

<p>镜像加速器：阿里云加速器，daocloud 加速器，中科大加速器，Docker 中国官方镜像加速：<a target="_blank" rel="noopener" href="https://registry.docker-cn.com/">https://registry.docker-cn.com</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos:6.8（没有指定版本，默认会下载最新版）</span><br><span class="line">docker pull daocloud.io/huangzhichong/alpine-cn:latest</span><br></pre></td></tr></table></figure>

<p>扩展：查询 docker 镜像所有版本 <a target="_blank" rel="noopener" href="https://hub.docker.com/r/library/">https://hub.docker.com/r/library/</a></p>
<h3 id="3、查看删除导出"><a href="#3、查看删除导出" class="headerlink" title="3、查看删除导出"></a>3、查看删除导出</h3><p>1、查看镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>2、删除镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi 例子：docker image rm centos:latest</span><br></pre></td></tr></table></figure>

<p>3、导出镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save 例子：docker image save centos &gt; docker-centos7.4.tar.gz&lt;br&gt;docker save mysql:5.7&gt; mysql-5.7.tar.gz</span><br></pre></td></tr></table></figure>

<p>4、导入镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load 例子：docker load -i docker-centos7.4.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="三、容器常用命令"><a href="#三、容器常用命令" class="headerlink" title="三、容器常用命令"></a>三、容器常用命令</h2><h3 id="1、运行一个容器"><a href="#1、运行一个容器" class="headerlink" title="1、运行一个容器"></a>1、运行一个容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 nginx:latest</span><br><span class="line">run （创建并运行一个容器）</span><br><span class="line">-d 放在后台</span><br><span class="line">-p 端口映射</span><br><span class="line">nginx:latest docker镜像的名字和版本</span><br><span class="line">还有很多其他的参数</span><br><span class="line"></span><br><span class="line">docker run == docker create + docker start</span><br></pre></td></tr></table></figure>

<h3 id="2、进入到容器"><a href="#2、进入到容器" class="headerlink" title="2、进入到容器"></a>2、进入到容器</h3><p>进入容器的目的：排错，调试</p>
<p>进入容器的方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</span><br><span class="line">例子：</span><br><span class="line">docker exec -it 容器id或容器名字 /bin/bash</span><br><span class="line"></span><br><span class="line">docker attach [OPTIONS] CONTAINER</span><br><span class="line">例子：</span><br><span class="line">docker attach 容器id或容器名字</span><br><span class="line"></span><br><span class="line">nsenter(安装yum install -y util-linux 弃用)</span><br></pre></td></tr></table></figure>

<h3 id="3、停止删除容器命令"><a href="#3、停止删除容器命令" class="headerlink" title="3、停止删除容器命令"></a>3、停止删除容器命令</h3><p>1、停止容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop CONTAINER_ID</span><br></pre></td></tr></table></figure>

<p>2、杀死容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker kill container_name</span><br></pre></td></tr></table></figure>

<p>3、查看容器列表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br><span class="line">docker ps –a</span><br><span class="line"></span><br><span class="line">docker ps –a  -l</span><br></pre></td></tr></table></figure>

<p>4、删除容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm</span><br></pre></td></tr></table></figure>

<p>5、批量删除容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f `docker ps -a -q`</span><br></pre></td></tr></table></figure>

<h3 id="4、要获取所有容器名称及其-IP-地址只需一个命令。"><a href="#4、要获取所有容器名称及其-IP-地址只需一个命令。" class="headerlink" title="4、要获取所有容器名称及其 IP 地址只需一个命令。"></a>4、要获取所有容器名称及其 IP 地址只需一个命令。</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect -f &#x27;&#123;&#123;.Name&#125;&#125; - &#123;&#123;.NetworkSettings.IPAddress &#125;&#125;&#x27; $(docker ps -aq)</span><br></pre></td></tr></table></figure>

<p>如果使用 docker-compose 命令将是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect -f &#x27;&#123;&#123;.Name&#125;&#125; - &#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27; $(docker ps -aq)</span><br></pre></td></tr></table></figure>

<h3 id="5、显示容器的所有-IP"><a href="#5、显示容器的所有-IP" class="headerlink" title="5、显示容器的所有 IP"></a>5、显示容器的所有 IP</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format=&#x27;&#123;&#123;.Name&#125;&#125; - &#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27; $(docker ps -aq)</span><br></pre></td></tr></table></figure>

<h2 id="四、容器网络访问常用命令"><a href="#四、容器网络访问常用命令" class="headerlink" title="四、容器网络访问常用命令"></a>四、容器网络访问常用命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name centos6 centos:6.8 /bin/bash</span><br><span class="line">-it 分配交互式的终端</span><br><span class="line">--name 指定容器的名字</span><br><span class="line">/bin/sh 覆盖容器的初始命令</span><br><span class="line"></span><br><span class="line">--cpus 指定cpu的数量</span><br><span class="line">--memory 限定内存的大小</span><br><span class="line">-h 指定容器的主机名</span><br></pre></td></tr></table></figure>

<p>docker 的本质是：在隔离的环境运行的一个进程</p>
<p>所以：docker 容器内的第一个进程必须一直处于前台运行的状态（必须夯住），否则这个容器，就会处于退出状态！</p>
<h3 id="1、运行容器为什么要使用端口映射？"><a href="#1、运行容器为什么要使用端口映射？" class="headerlink" title="1、运行容器为什么要使用端口映射？"></a>1、运行容器为什么要使用端口映射？</h3><p>默认情况下，容器使用的 ip 是 172.17.0.0&#x2F;16 网段的，外界的用户只能访问宿主机的 10.0.0.0&#x2F;24 网段，</p>
<p>无法访问 172.17.0.0&#x2F;16 网段。我们运行容器的目的：是希望运行在容器中的服务，能够被外界访问，</p>
<p>这里就涉及到了外网 10.0.0.0&#x2F;24 到容器内网 172.17.0.0&#x2F;16 网段的转换，所以需要做端口映射</p>
<h3 id="2、指定映射-docker-自动添加一条-iptables-规则实现端口映射"><a href="#2、指定映射-docker-自动添加一条-iptables-规则实现端口映射" class="headerlink" title="2、指定映射(docker 自动添加一条 iptables 规则实现端口映射)"></a>2、指定映射(docker 自动添加一条 iptables 规则实现端口映射)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-p hostPort:containerPort</span><br><span class="line">-p ip:hostPort:containerPort</span><br><span class="line">-p ip::containerPort(随机端口)</span><br><span class="line">-p hostPort:containerPort:udp</span><br><span class="line">-p 81:80 -p 443:443 可以指定多个-p　</span><br></pre></td></tr></table></figure>

<h3 id="3、随机映射"><a href="#3、随机映射" class="headerlink" title="3、随机映射"></a>3、随机映射</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -P （随机端口）</span><br></pre></td></tr></table></figure>

<h2 id="五、数据卷常用命令"><a href="#五、数据卷常用命令" class="headerlink" title="五、数据卷常用命令"></a>五、数据卷常用命令</h2><h3 id="1、数据卷的作用："><a href="#1、数据卷的作用：" class="headerlink" title="1、数据卷的作用："></a>1、数据卷的作用：</h3><ul>
<li>持久化容器运行过程中产生的数据文件</li>
<li>实现多个容器间的文件共享。</li>
</ul>
<p>正常情况下，删除容器，容器中所有的文件也会被删除</p>
<h3 id="2、数据卷常用命令"><a href="#2、数据卷常用命令" class="headerlink" title="2、数据卷常用命令"></a>2、数据卷常用命令</h3><p>1、创建一个数据卷</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create</span><br></pre></td></tr></table></figure>

<p>2、查看数据卷列表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume ls</span><br></pre></td></tr></table></figure>

<p>3、删除一个数据卷</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm</span><br></pre></td></tr></table></figure>

<p>4、查看一个数据卷的属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect</span><br></pre></td></tr></table></figure>

<h3 id="3、docker-数据卷运用一"><a href="#3、docker-数据卷运用一" class="headerlink" title="3、docker 数据卷运用一"></a>3、docker 数据卷运用一</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker volume create luoahong</span><br><span class="line"></span><br><span class="line">docker run -d -p 80:80 -v luoahong:/usr/share/nginx/html nginx:latest</span><br><span class="line"></span><br><span class="line">cd /var/lib/docker/volumes/luoahong/_data/</span><br><span class="line">rm -f *</span><br><span class="line">wget https://www.qstack.com.cn/xiaoniaofeifei.zip</span><br><span class="line">unzip xiaoniaofeifei.zip</span><br><span class="line"></span><br><span class="line">docker run -d -p 81:80 -v luoahong:/usr/share/nginx/html nginx:latest</span><br><span class="line">docker run -d -p 82:80 -v luoahong:/usr/share/nginx/html nginx:latest</span><br></pre></td></tr></table></figure>

<h3 id="4、把宿主机的目录挂载到容器中"><a href="#4、把宿主机的目录挂载到容器中" class="headerlink" title="4、把宿主机的目录挂载到容器中"></a>4、把宿主机的目录挂载到容器中</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /opt</span><br><span class="line">mkdir xiaoniao</span><br><span class="line">cd xiaoniao/</span><br><span class="line">wget https://www.qstack.com.cn/xiaoniaofeifei.zip</span><br><span class="line">unzip xiaoniaofeifei.zip</span><br></pre></td></tr></table></figure>

<p>重点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 83:80 -v /opt/xiaoniao:/usr/share/nginx/html nginx:latest</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Bruce Chen"
      src="/images/portal.jpg">
  <p class="site-author-name" itemprop="name">Bruce Chen</p>
  <div class="site-description" itemprop="description">It's better to burn out than to fade away.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">83</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1440429303&auto=1&height=66"></iframe>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jschentt" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jschentt" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jschentt@gmail.com" title="E-Mail → mailto:jschentt@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/BruceCh56742806" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;BruceCh56742806" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/jinsheng.chen.5439" title="Facebook → https:&#x2F;&#x2F;www.facebook.com&#x2F;jinsheng.chen.5439" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>Facebook</a>
      </span>
  </div>





      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bruce Chen</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
